<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.140.0"><title>Charlie's Rethinking</title>
<meta charset=utf-8><meta name=X-UA-Compatible content="IE=edge"><meta name=google-site-verification content><meta content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=5" name=viewport><meta content="telephone=no" name=format-detection><meta name=description content><meta name=renderer content="webkit"><meta name=theme-color content="#ffffff"><link type=text/css rel=stylesheet href=/vendor/css/bootstrap.min.css><link rel=stylesheet href=/scss/dark-mode.min.cb53f1bee2b8900cb4f082afbf00175d6618f281cf9a2fe8619e3b52d20b5721.css integrity="sha256-y1PxvuK4kAy08IKvvwAXXWYY8oHPmi/oYZ47UtILVyE=" media=screen><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Material+Icons"></head><body><div id=app><div class=single-column-drawer-container id=drawer v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }"><div class=drawer-content><div class=drawer-menu><a class="a-block drawer-menu-item false" href=/posts>归档
</a><a class="a-block drawer-menu-item false" href=/categories>分类
</a><a class="a-block drawer-menu-item false" href=/tags>标签
</a><a class="a-block drawer-menu-item false" href=/about>关于
</a><a class="a-block drawer-menu-item false" href=/index.xml>RSS Feed</a></div></div></div><transition name=fade><div id=drawer-mask v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if=isDrawerOpen v-on:click=toggleDrawer></div></transition><nav id=navBar class="navbar sticky-top navbar-light single-column-nav-container"><div id=navBackground class=nav-background></div><div class="container container-narrow nav-content"><button id=nav_dropdown_btn class=nav-dropdown-toggle type=button v-on:click=toggleDrawer>
<i class=material-icons>menu
</i></button>
<a id=navTitle class=navbar-brand href=https://forcemz.net/>Charlie's Rethinking
</a><button type=button class=nav-darkmode-toggle id=darkModeToggleButton2>
<i class=material-icons id=darkModeToggleIcon2>dark_mode</i></button></div></nav><div class=single-column-header-container id=pageHead v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }"><a href=https://forcemz.net/><div class=single-column-header-title>Charlie's Rethinking</div><div class=single-column-header-subtitle>Themed by Diary.</div></a></div><div id=content><div id=streamContainer class=stream-container><div class="post-list-container post-list-container-no-background"><a href=/posts/2019/2019-05-25-introduction-bela/ class=a-block><div class=post-item-wrapper><div class="post-item post-item-no-divider"><div class=post-item-info-wrapper><div class=post-item-title>介绍 Bela</div><div class=post-item-summary><h1 id=前言>前言</h1><p>在前面，我曾经写过一篇文章 <a href=https://forcemz.net/cxx/2019/04/29/StringFormattingTalk/>《字符串格式化漫谈》</a> 文章最后提到了 <a href=https://github.com/fcharlie/bela><code>Bela</code></a> 里面实现了一个类型安全的 <code>bela::StrFormat</code>，实际上 <code>bela</code> 还有很多有趣的功能，本文也就是说一说 Bela 有哪些有趣功能和故事。</p></div><div class=post-item-meta>2019-05-25
&emsp;
&emsp;</div></div></div></div><a href=/posts/2019/2019-04-29-string-formatting-talk/ class=a-block><div class=post-item-wrapper><div class="post-item post-item-no-divider"><div class=post-item-info-wrapper><div class=post-item-title>字符串格式化漫谈</div><div class=post-item-summary><h1 id=前言>前言</h1><p>春风化雨，万物复苏，编程始于 <code>Hello world</code>，C 语言的 Hello world 可如下，同样 C++ 亦可如下:</p><div class=highlight><pre tabindex=0 style=color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#828b96;font-style:italic>#include</span> <span style=color:#828b96;font-style:italic>&lt;stdio.h&gt;</span><span style=color:#828b96;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#828b96;font-style:italic></span><span style=color:#ff636f>int</span> <span style=color:#58a1dd>main</span>() {
</span></span><span style=display:flex><span>  <span style=color:#58a1dd>printf</span>(<span style=color:#a6be9d>&#34;Hello World!&#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#ff636f>return</span> <span style=color:#a6be9d>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>printf 函数类型为：</p><div class=highlight><pre tabindex=0 style=color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#ff636f>int</span> <span style=color:#58a1dd>printf</span>(<span style=color:#ff636f>const</span> <span style=color:#ff636f>char</span> <span style=color:#ff636f>*</span><span style=color:#58a1dd>fmt</span>,...);
</span></span></code></pre></div><p>按照此声明我们可以格式化输出：</p><div class=highlight><pre tabindex=0 style=color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#828b96;font-style:italic>#include</span> <span style=color:#828b96;font-style:italic>&lt;stdio.h&gt;</span><span style=color:#828b96;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#828b96;font-style:italic></span><span style=color:#ff636f>int</span> <span style=color:#58a1dd>main</span>() {
</span></span><span style=display:flex><span>  <span style=color:#ff636f>const</span> <span style=color:#ff636f>char</span> <span style=color:#ff636f>*</span><span style=color:#58a1dd>name</span><span style=color:#ff636f>=</span><span style=color:#a6be9d>&#34;Tony Stark&#34;</span>;
</span></span><span style=display:flex><span>  <span style=color:#58a1dd>printf</span>(<span style=color:#a6be9d>&#34;Hello %s</span><span style=color:#a6be9d>\n</span><span style=color:#a6be9d>&#34;</span>,<span style=color:#58a1dd>name</span>);
</span></span><span style=display:flex><span>  <span style=color:#ff636f>return</span> <span style=color:#a6be9d>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>使用 C 编译器 Clang/MSVC/GCC 将其编译运行，在终端或者命令行中会输出如下结果：</p></div><div class=post-item-meta>2019-04-29
&emsp;
&emsp;</div></div></div></div><a href=/posts/2019/2019-04-01-implement-git-dir-accesss-control/ class=a-block><div class=post-item-wrapper><div class="post-item post-item-no-divider"><div class=post-item-info-wrapper><div class=post-item-title>实现 Git 目录权限控制</div><div class=post-item-summary><h1 id=前言>前言</h1><p>Git 与 Subversion 有诸多不同，最核心的一点是前者属于分布式版本控制工具，后者属于集中式版本控制工具。前者的提交行为是离线的，本地的，后者的提交是在线的，需要与远程中央服务器通信，在线创建提交。基于这种现实，Git 和 Subversion 在原生提供的附加功能也存在很大的差别。比如目录权限控制。Git 原生并不支持目录权限控制，而 Subversion 支持。</p></div><div class=post-item-meta>2019-04-01
&emsp;
&emsp;</div></div></div></div><a href=/posts/2019/2019-03-18-ssh-one-bug/ class=a-block><div class=post-item-wrapper><div class="post-item post-item-no-divider"><div class=post-item-info-wrapper><div class=post-item-title>记录 SSH 的一个 Bug</div><div class=post-item-summary><h2 id=服务器上错误的命令行>服务器上错误的命令行</h2><p>最近在改进 BSSHD，将不被允许的命令打印到日志，但是我遇到了一个不符合预期的输出，比如，在客户端运行 SSH，命令如下：</p><div class=highlight><pre tabindex=0 style=color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ssh git@localhost <span style=color:#58a1dd>echo</span> <span style=color:#a6be9d>&#34;There are spaces in the statement&#34;</span> <span style=color:#ff636f>done</span>
</span></span></code></pre></div><p>我将命令行使用如下处理后输出：</p></div><div class=post-item-meta>2019-03-18
&emsp;
&emsp;</div></div></div></div><a href=/posts/2019/2019-03-15-make-a-git-ssh-server/ class=a-block><div class=post-item-wrapper><div class="post-item post-item-no-divider"><div class=post-item-info-wrapper><div class=post-item-title>构建恰当的 Git SSH Server</div><div class=post-item-summary><h2 id=前言>前言</h2><p>相对于 HTTP(HTTPS) 协议，Git 在使用 SSH 协议操作远程存储库时，因为省去了输入用户名密码的环节，往往要更方便一些，并且，在 Gitlab 这样的代码托管服务中，SSH 在时长上更具优势，早期 Gitlab 使用了 Grack 提供 Git HTTP 访问支持，由于 Unicron+Grack 固定数目多线程同步模型导致服务器上的 HTTP 超时不得不设置非常小，而 SSH fork 多线程同步模型反而能够支持更大的访问时长。实际情况中，Gitee 平台里 Git 接入的最大份额也是 SSH。构建恰当的 Git SSH Server 对于整个 Gitee 平台也就非常重要。</p></div><div class=post-item-meta>2019-03-15
&emsp;
&emsp;</div></div></div></div><a href=/posts/2019/2019-01-25-file-parsing/ class=a-block><div class=post-item-wrapper><div class="post-item post-item-no-divider"><div class=post-item-info-wrapper><div class=post-item-title>文件的解析</div><div class=post-item-summary><h2 id=前言>前言</h2><p>本文探讨的是计算机文件，<strong>计算机文件</strong> 用于记录数据到计算机设备上，维基百科上有简短的介绍：</p><blockquote><p>A computer file is a computer resource for recording data discretely in a computer storage device. Just as words can be written to paper, so can information be written to a computer file.</p></div><div class=post-item-meta>2019-01-25
&emsp;
&emsp;</div></div></div></div><a href=/posts/2018/2018-11-30-privexec-new/ class=a-block><div class=post-item-wrapper><div class="post-item post-item-no-divider"><div class=post-item-info-wrapper><div class=post-item-title>Privexec 杂谈</div><div class=post-item-summary><h1 id=前言>前言</h1><p>本站的开篇就是讲的 <a href=https://forcemz.net/container/2015/06/12/AppContainer/>《Windows AppContainer 降权，隔离与安全》</a>，一晃三年多过去了，这三年之中，我开发了一个 <a href=https://github.com/M2Team/Privexec>Privexec</a>，一个以其他权限启动进程的工具，支持启动 <code>AppContainer</code> 进程，前段实现有用户发起了功能请求<sup>1</sup>，让 <code>Privexec</code> 支持设置 <code>AppContainer</code> 的 <code>Capabilities</code>，而不是像以前一样在启动 <code>AppContainer</code> 进程时使用 <code>CreateWellKnownSid</code> 创建所有的与 <code>AppContainer</code> 相关的 <code>Capabilities SIDs</code>。于是乎，我就花了一点时间将 Privexec 重构了一番，有所感悟，便将其写下来。</p></div><div class=post-item-meta>2018-11-30
&emsp;
&emsp;</div></div></div></div><a href=/posts/2018/2018-11-18-git-namespace-snapshot/ class=a-block><div class=post-item-wrapper><div class="post-item post-item-no-divider"><div class=post-item-info-wrapper><div class=post-item-title>基于 Git Namespace 的存储库快照方案</div><div class=post-item-summary><h1 id=前言>前言</h1><p><a href=https://en.wikipedia.org/wiki/Git>Git</a> 是一种分布式的版本控制系统，分布式版本控制系统的一大特性就是远程存储库和本地存储库都包含存储库的完整数据。
而集中式的版本控制系统只有在中心服务器上才会包含存储库完整的数据，本地所谓的存储库只是远程服务器特定版本的 <code>checkout</code>。当中心服务器故障后，如果没有备份服务器，那么集中式的版本控制系统存储库的数据绝大部分就会被丢失。这很容易得出分布式版本控制系统的代码要必集中式的版本控制系统更加安全。</p></div><div class=post-item-meta>2018-11-18
&emsp;
&emsp;</div></div></div></div><a href=/posts/2018/2018-11-15-clangbuilder-win-curl/ class=a-block><div class=post-item-wrapper><div class="post-item post-item-no-divider"><div class=post-item-info-wrapper><div class=post-item-title>Clangbuilder 已支持自动构建 CURL</div><div class=post-item-summary><h1 id=curl>cURL</h1><p>cURL 是一个非常著名的开源 URL 数据传输工具，支持 <code>HTTP</code>,<code>HTTPS</code>,<code>FTP</code>,<code>SCP</code>,<code>SFTP</code>,<code>Telnet</code> 等协议。绝大多数操作系统都自带了，也包括 Windows 10 17134/17763。但系统自带的版本通常都不会及时更新到最新版本，而 <code>cURL</code> 是一个非常活跃的项目，大约2个月就会发布一个新版本。每一次更新都会修复大量 bug，新增很多新特性，比如最近增加了 <code>DOH</code> 更好的 <code>TLS1.3</code> 支持。</p></div><div class=post-item-meta>2018-11-15
&emsp;
&emsp;</div></div></div></div><a href=/posts/2018/2018-07-15-git-lfs-rethinking/ class=a-block><div class=post-item-wrapper><div class="post-item post-item-no-divider"><div class=post-item-info-wrapper><div class=post-item-title>Git LFS 的反思</div><div class=post-item-summary><h1 id=前言>前言</h1><p>在一年多以前，笔者曾经写过一文： <a href=https://forcemz.net/git/2017/04/16/Moses/>《Git LFS 服务器实现杂谈》</a>，最近笔者开发基于<strong>对象存储</strong>的 LFS 服务器又有了一些心得，这里分享给大家。</p><h1 id=关于-git-lfs>关于 Git LFS</h1><p>Git LFS 即 Git Large File Storage （大文件存储），即将 git 存储库中的体积较大的，不利于打包的，修改不太频繁的文件单独存储到特定的服务器上，以减小存储库体积，加快用户的克隆拉取体验。其中的原理在 <a href=https://forcemz.net/git/2017/04/16/Moses/>《Git LFS 服务器实现杂谈》</a> 都有说明，如果需要进一步的了解还可以去参考 Git LFS 技术规范： <a href=https://github.com/git-lfs/git-lfs/blob/master/docs/spec.md>spec.md</a>。</p></div><div class=post-item-meta>2018-07-15
&emsp;
&emsp;</div></div></div></div></a></div></div></div><div id=sideContainer class=side-container><a class="a-block nav-head active" href=https://forcemz.net/><div class=nav-title>Charlie's Rethinking</div><div class=nav-subtitle>Themed by Diary.</div></a><div class=nav-link-list><a class="a-block nav-link-item false" href=/posts>归档
</a><a class="a-block nav-link-item false" href=/categories>分类
</a><a class="a-block nav-link-item false" href=/tags>标签
</a><a class="a-block nav-link-item false" href=/about>关于
</a><a class="a-block nav-link-item false" href=/index.xml>RSS Feed</a></div><div class=nav-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://risehere.net/>Rise</a><br>Ported from <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
Copyright (c) 2009-2024 J23</div></div><div id=extraContainer class=extra-container><div class=toc-wrapper></div><div class=pagination><a id=globalBackToTop class="pagination-action animated-visibility" href=#top :class="{ invisible: scrollY == 0 }"><i class="material-icons pagination-action-icon">keyboard_arrow_up
</i></a><a type=button class=pagination-action id=darkModeToggleButton><span class="material-icons pagination-action-icon" id=darkModeToggleIcon>dark_mode
</span></a><a class=pagination-action href=/page/2/><i class="material-icons pagination-action-icon">chevron_left</i></a><div class=pagination-indicator><span style=text-align:center>3<br><div style=display:inline-block;transform:rotate(-28deg)>-</div><br>6</span></div><a class=pagination-action href=/page/4/><i class="material-icons pagination-action-icon">chevron_right</i></a></div></div><div class=pagination><a class=pagination-action href=/page/2/ style=opacity:1><i class="material-icons pagination-action-icon">chevron_left</i></a><div class=pagination-indicator><span>3/6</span></div><a class=pagination-action href=/page/4/ style=opacity:1><i class="material-icons pagination-action-icon">chevron_right</i></a></div><div id=single-column-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://risehere.net/>Rise</a><br>Ported from <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
Copyright (c) 2009-2024 J23</div></div><script src=/js/journal.js></script></body></html>