<?xml-stylesheet href="/rss.xsl" type="text/xsl"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Charlie's Rethinking</title><link>https://forcemz.net/</link><description>Recent content on Charlie's Rethinking</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><copyright>Copyright (c) 2009-2024 J23</copyright><lastBuildDate>Mon, 01 Apr 2024 20:00:00 +0800</lastBuildDate><atom:link href="https://forcemz.net/index.xml" rel="self" type="application/rss+xml"/><item><title>‰ªãÁªç Bela</title><link>https://forcemz.net/posts/2019/2019-05-25-introduction-bela/</link><pubDate>Sat, 25 May 2019 10:00:00 +0800</pubDate><guid>https://forcemz.net/posts/2019/2019-05-25-introduction-bela/</guid><description>Charlie's Rethinking https://forcemz.net/posts/2019/2019-05-25-introduction-bela/ -&lt;h1 id="ÂâçË®Ä">ÂâçË®Ä&lt;/h1>
&lt;p>Âú®ÂâçÈù¢ÔºåÊàëÊõæÁªèÂÜôËøá‰∏ÄÁØáÊñáÁ´† &lt;a href="https://forcemz.net/cxx/2019/04/29/StringFormattingTalk/">„ÄäÂ≠óÁ¨¶‰∏≤Ê†ºÂºèÂåñÊº´Ë∞à„Äã&lt;/a> ÊñáÁ´†ÊúÄÂêéÊèêÂà∞‰∫Ü &lt;a href="https://github.com/fcharlie/bela">&lt;code>Bela&lt;/code>&lt;/a> ÈáåÈù¢ÂÆûÁé∞‰∫Ü‰∏Ä‰∏™Á±ªÂûãÂÆâÂÖ®ÁöÑ &lt;code>bela::StrFormat&lt;/code>ÔºåÂÆûÈôÖ‰∏ä &lt;code>bela&lt;/code> ËøòÊúâÂæàÂ§öÊúâË∂£ÁöÑÂäüËÉΩÔºåÊú¨Êñá‰πüÂ∞±ÊòØËØ¥‰∏ÄËØ¥ Bela ÊúâÂì™‰∫õÊúâË∂£ÂäüËÉΩÂíåÊïÖ‰∫ã„ÄÇ&lt;/p>
&lt;h1 id="‰∏Ä-bela-ÁöÑÁºòÁî±">‰∏Ä. Bela ÁöÑÁºòÁî±&lt;/h1>
&lt;p>‰πãÂâçÔºåÊàëÂºÄÂèë‰∫ÜÂá†‰∏™ÂºÄÊ∫êËΩØ‰ª∂ÔºåÂ¶Ç Windows Á≥ªÁªü‰ª•ÊåáÂÆöÊùÉÈôêÂêØÂä®ËøõÁ®ãÁöÑ &lt;a href="https://github.com/M2Team/Privexec">Privexec&lt;/a>ÔºåClang Windows Êìç‰ΩúÁ≥ªÁªü‰∏äËá™Âä®ÂåñÊûÑÂª∫‰æùËµñÁÆ°ÁêÜÂ∑•ÂÖ∑ &lt;a href="https://github.com/fstudio/clangbuilder">Clangbuilder&lt;/a>ÔºåËøòÊúâ PE ÂàÜÊûêÂ∑•ÂÖ∑ &lt;a href="https://github.com/fcharlie/PEAnalyzer">PEAnalyzer&lt;/a>ÔºåÊñá‰ª∂ÂàÜÊûêÂ∑•ÂÖ∑ &lt;a href="https://github.com/fcharlie/Planck">Planck&lt;/a> Á≠âÁ≠â„ÄÇÂú®ÁºñÂÜôËøô‰∫õÂ∑•ÂÖ∑Êó∂Ë¶ÅÈáçÂ§çÁºñÂÜô‰∏Ä‰∫õ‰ª£Á†ÅÔºåÊØïÁ´üÂ§ßÂÆ∂ÈÉΩÁü•ÈÅì C++ STL ÊúâÊó∂ÂÄôÂπ∂‰∏çËÉΩÁß∞ÂøÉÂ¶ÇÊÑè„ÄÇÂú® &lt;a href="https://github.com/abseil/abseil-cpp">Google Abseil&lt;/a> ÂºÄÊ∫êÂêéÔºåÊàëÂÄüÈâ¥‰∫ÜËøô‰∏™È°πÁõÆÁöÑ‰∏Ä‰∫õ‰ª£Á†ÅÈáçÊñ∞ÈÄ†‰∫Ü‰∏Ä‰∫õ &lt;code>wchar_t&lt;/code> ÁâàÊú¨ÁöÑËΩÆÂ≠êÔºåÂêéÊù•ÊääËøô‰∫õ‰ª£Á†ÅÂçïÁã¨ÊäΩÁ¶ªÂá∫Êù•ÔºåËøõ‰∏ÄÊ≠•ÊîπËøõÔºå‰πüÂ∞±Êàê‰∫ÜÁé∞Âú®ÁöÑ &lt;code>Bela&lt;/code>„ÄÇ‰∏çÁõ¥Êé•Áî® &lt;code>Absl&lt;/code> ÁöÑÂéüÂõ†ÂæàÁÆÄÂçïÔºåÂÆÉ‰∏çÊîØÊåÅ &lt;code>wchar_t&lt;/code>„ÄÇÊ†ºÂºèÂåñÂ≠óÁ¨¶‰∏≤‰∏ç‰ΩøÁî® &lt;code>fmtlib&lt;/code> ÁöÑÂéüÂõ†‰πüÂæàÁÆÄÂçïÔºå‰∏çÂñúÊ¨¢ÂºÇÂ∏∏ÔºåÂÆÉÁöÑ‰ª£Á†ÅÂ∫ì‰πüÊØîËæÉÂ§ß„ÄÇÂè´ &lt;code>bela ['b…ôl…ô]&lt;/code> ÁöÑÂéüÂõ†‰æùÁÑ∂ÂæàÁÆÄÂçïÔºåÁÆÄÁü≠ÊòìËØªÊòìÊãºÂÜô„ÄÇ&lt;/p>
&lt;p>Bela ÁöÑÂ≠óÁ¨¶‰∏≤ÂáΩÊï∞Âü∫Êú¨Âü∫‰∫é &lt;code>Abseil&lt;/code>Ôºå&lt;code>Unicode&lt;/code> ËΩ¨Êç¢Âü∫‰∫é LLVM ÁöÑ &lt;code>ConvertUTF.cpp&lt;/code>ÔºåÊúÄÂàù &lt;code>ConvertUTF&lt;/code> ÁöÑÁâàÊùÉÂ±û‰∫é &lt;strong>Unicode.org&lt;/strong> , &lt;code>charconv&lt;/code> Âü∫‰∫é &lt;code>Visual C++ STL&lt;/code>Ôºå&lt;code>EscapeArgv&lt;/code> ÂÄüÈâ¥‰∫Ü Golang Ê∫êÁ†ÅÔºå&lt;code>endian.hpp&lt;/code>Ôºå&lt;code>tokenziecmdline.hpp&lt;/code> ÂÄüÈâ¥‰∫Ü &lt;code>LLVM Support Library&lt;/code> Á≠âÁ≠â„ÄÇ&lt;/p>
&lt;h1 id="‰∫å-bela-Â≠óÁ¨¶‰∏≤ÂäüËÉΩÂ∫ì">‰∫å. Bela Â≠óÁ¨¶‰∏≤ÂäüËÉΩÂ∫ì&lt;/h1>
&lt;h2 id="belaerror_code">bela::error_code&lt;/h2>
&lt;p>&lt;code>bela::error_code&lt;/code> ‰Ωç‰∫é &lt;code>&amp;lt;bela/base.hpp&amp;gt;&lt;/code> Á±ª‰ºº &lt;code>std::error_code&lt;/code>ÔºåÂÖ∂‰∏ªË¶ÅÁõÆÁöÑÊòØÁÆÄÂåñ Windows API ÈîôËØØ‰ø°ÊÅØÁöÑÊ†ºÂºèÂåñÔºåÂΩì‰∫∫‰ª¨‰ΩøÁî® &lt;code>make_system_error_code&lt;/code> Â∞±ÂèØ‰ª•Â∞Ü Windows ÈîôËØØ‰ø°ÊÅØ‰øùÂ≠òÂà∞ &lt;code>bela::error_code&lt;/code> ÂØπË±°ÔºåÂà©Áî® C++ RAII Êú∫Âà∂ÔºåÂÆåÂÖ®ÂèØ‰ª•‰∏çÁî®ÊãÖÂøÉÂÜÖÂ≠òÈáäÊîæÔºåÂêåÊ†∑‰Ω†ËøòÂèØ‰ª•‰ΩøÁî® &lt;code>bela::make_error_code&lt;/code> ÊûÑÈÄ†Ëá™Â∑±ÁöÑÈîôËØØ‰ø°ÊÅØÔºå&lt;code>bela::make_error_code&lt;/code> ‰æùËµñ &lt;code>bela::strings_internal::CatPieces&lt;/code>ÔºåÂõ†Ê≠§Ôºå‰Ω†ÂèØ‰ª•ÂÉè‰ΩøÁî® &lt;code>bela::StringCat&lt;/code> ‰ΩøÁî® &lt;code>bela::make_error_code&lt;/code>&lt;/p>
&lt;h2 id="stringcat">StringCat&lt;/h2>
&lt;p>&lt;code>StringCat&lt;/code> Â≠¶‰π†‰∫Ü &lt;code>absl::StrCat&lt;/code>ÔºåÂîØ‰∏ÄÁöÑ‰∏çÂêåÂú®‰∫é‰ΩøÁî® &lt;code>wchar_t&lt;/code> ‰Ωú‰∏∫Â≠óÁ¨¶Âü∫Êú¨Á±ªÂûãÔºåÂú® Windows Á≥ªÁªü‰∏≠Ôºå&lt;code>StrCat&lt;/code> ÂÆûÈôÖ‰∏äË¢´ &lt;code>shlwapi&lt;/code> ‰Ωú‰∏∫ÂÆèÂÆö‰πâ‰ΩøÁî®‰∫ÜÔºå‰∏∫‰∫ÜÈÅøÂÖçÂú®‰ΩøÁî® Windows API Êó∂ÈÄ†ÊàêÂõ∞ÊÉëÔºåÊàëÂ∞ÜÂÖ∂ÂëΩÂêç‰∏∫ &lt;code>StringCat&lt;/code>„ÄÇËøôÁßçÂáΩÊï∞ÁöÑÂ•ΩÂ§ÑÊòØËøûÊé•Â≠óÁ¨¶‰∏≤Êó∂Âè™ÈúÄË¶Å‰∏ÄÊ¨°ÂÜÖÂ≠òÂàÜÈÖçÔºåÂèØ‰ª•Â∞ÜÂü∫Êú¨Á±ªÂûãËΩ¨Âèò‰∏∫Â≠óÁ¨¶‰∏≤Á±ªÂûãÔºåÁÑ∂ÂêéËøûÊé•Âà∞‰∏ÄËµ∑ÔºåÂçÅÂàÜÊúâÁî®ÔºåÂπ∂‰∏îÔºå&lt;code>bela::StringCat&lt;/code> ÊØî &lt;code>absl::StrCat&lt;/code> ÊúâË∂£ÁöÑ‰∏ÄÁÇπÊòØÊîØÊåÅ &lt;code>char32_t&lt;/code> Unicode Á†ÅÁÇπÔºåÂõ†Ê≠§Ôºå‰Ω†ÂèØ‰ª•‰ΩøÁî® &lt;code>bela::StringCat&lt;/code> ËøûÊé• Unicode Á†ÅÁÇπÊù•ÊãºÊé• Emoji ÊàñËÄÖÂÖ∂‰ªñÂ≠óÁ¨¶ÔºåÁÑ∂ÂêéËæìÂá∫Âà∞ &lt;code>Windows Terminal&lt;/code> ÊàñËÄÖÊòæÁ§∫Âà∞ÊñáÊú¨ÊàñËÄÖ‰ΩøÁî® Dwrite ÁªòÂà∂Âà∞ÂõæÂΩ¢ÁïåÈù¢‰∏ä„ÄÇ&lt;/p>
&lt;p>&lt;code>StringCat&lt;/code> ÂÆö‰πâÂú® &lt;code>&amp;lt;bela/strcat.hpp&amp;gt;&lt;/code> Êñá‰ª∂‰∏≠„ÄÇ&lt;/p>
&lt;h2 id="ascii">Ascii&lt;/h2>
&lt;p>bela Â≠¶‰π†‰∫Ü &lt;code>absl/strings/ascii.h&lt;/code> ÔºåÂπ∂Â∞ÜÂÖ∂ÁßªÊ§çÂà∞ &lt;code>wchar_t&lt;/code>„ÄÇÂú®ÁßªÊ§çÁöÑÊó∂ÂÄôË¶ÅËÄÉËôëÂú® Windows Á≥ªÁªü‰∏ä &lt;code>wchar_t&lt;/code> ÁöÑËåÉÂõ¥ÊòØ &lt;code>0~65535&lt;/code>ÔºåÂõ†Ê≠§‰∏Ä‰∫õÂáΩÊï∞ÈúÄË¶ÅÂà§Êñ≠Â§ß‰∫é &lt;code>0xFF&lt;/code> Êó∂ÁöÑÁ≠ñÁï•„ÄÇÂú® &lt;code>&amp;lt;bela/ascii.hpp&amp;gt;&lt;/code> Êñá‰ª∂‰∏≠ &lt;code>AsciiStrToUpper&lt;/code> Ôºå&lt;code>AsciiStrToLower&lt;/code>Ôºå &lt;code>StripLeadingAsciiWhitespace&lt;/code>Ôºå&lt;code>StripTrailingAsciiWhitespace&lt;/code>Ôºå &lt;code>StripAsciiWhitespace&lt;/code> Ëøô‰∫õÂáΩÊï∞ÂçÅÂàÜÊúâÂ∏ÆÂä©„ÄÇ&lt;/p>
&lt;h2 id="ÂÖ∂‰ªñÂ≠óÁ¨¶‰∏≤ÂáΩÊï∞">ÂÖ∂‰ªñÂ≠óÁ¨¶‰∏≤ÂáΩÊï∞&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ÂáΩÊï∞&lt;/th>
&lt;th>ÂäüËÉΩ&lt;/th>
&lt;th>Êñá‰ª∂&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>StrSplit&lt;/td>
&lt;td>Â≠óÁ¨¶‰∏≤ÂàáÂâ≤ÔºåDelimiter ÊîØÊåÅÊåâÂ≠óÁ¨¶ÔºåÊåâÂ≠óÁ¨¶‰∏≤ÊàñËÄÖÊåâÈïøÂ∫¶ÔºåÊîØÊåÅË∑≥ËøáÁ©∫ÊàñËÄÖÁ©∫ÁôΩÔºåÊØî Golang ÁöÑ strings.Split Ë¶ÅÂ•ΩÁî®‰∏Ä‰∫õ&lt;/td>
&lt;td>&lt;code>&amp;lt;bela/str_split.hpp&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>StrReplaceAll&lt;/td>
&lt;td>ÊõøÊç¢Â≠óÁ¨¶‰∏≤&lt;/td>
&lt;td>&lt;code>&amp;lt;bela/str_replace.hpp&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ConsumePrefixÔºåConsumeSuffixÔºåStripPrefixÔºåStripSuffix&lt;/td>
&lt;td>Âà†Èô§ÁâπÂÆöÂâçÁºÄÊàñËÄÖÂêéÁºÄ&lt;/td>
&lt;td>&lt;code>&amp;lt;bela/strip.hpp&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>StartsWithÔºåEndsWithÔºåEqualsIgnoreCaseÔºåStartsWithIgnoreCaseÔºåEndsWithIgnoreCase&lt;/td>
&lt;td>ÁâπÂÆöÁöÑÊØîËæÉÂáΩÊï∞ÔºåÂâç‰∏§ËÄÖ C++20 Ë¢´ÂºïÂÖ•Ôºàstd::string::starts_withÔºåstd::string::ends_withÔºâÔºåVisual 2019 16.1 C++ /std:c++latest ÂºÄÂêØ&lt;/td>
&lt;td>&lt;code>&amp;lt;bela/match.hpp&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SubstituteÔºåSubstituteAndAppend&lt;/td>
&lt;td>Âú®ÂâçÊñá &lt;a href="https://forcemz.net/cxx/2019/04/29/StringFormattingTalk/">„ÄäÂ≠óÁ¨¶‰∏≤Ê†ºÂºèÂåñÊº´Ë∞à„Äã&lt;/a> ÊúâÊèêÂèäÔºåÂ≠óÁ¨¶‰∏≤Â°´ÂÖÖ„ÄÇ&lt;/td>
&lt;td>&lt;code>&amp;lt;bela/subsitute.hpp&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SimpleAtobÔºåSimpleAtoi&lt;/td>
&lt;td>Â≠óÁ¨¶‰∏≤ËΩ¨Êï¥ÂûãÊàñËÄÖ BooleanÔºåË¶ÅËΩ¨Êç¢ÊµÆÁÇπÁ±ªÂûãÔºåËØ∑‰ΩøÁî® &lt;code>&amp;lt;bela/charconv.hpp&amp;gt;&lt;/code>&lt;/td>
&lt;td>&lt;code>&amp;lt;bela/numbers.hpp&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="ÁºñÁ†ÅËΩ¨Êç¢">ÁºñÁ†ÅËΩ¨Êç¢&lt;/h2>
&lt;p>Âú® Bela ‰∏≠ÔºåÊàëÂü∫‰∫é LLVM ÁöÑ ConvertUTF ÂÆûÁé∞‰∫Ü UTF-16/UTF-8 UTF-32 ÁöÑ‰∏Ä‰∫õÂáΩÊï∞ÔºåÂ£∞ÊòéÊñá‰ª∂ÂùáÂú® &lt;code>&amp;lt;bela/codecvt.hpp&amp;gt;&lt;/code>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ÂáΩÊï∞&lt;/th>
&lt;th>ÂäüËÉΩ&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>char32tochar16&lt;/td>
&lt;td>Unicode Á†ÅÁÇπËΩ¨ UTF-16ÔºåÁºìÂÜ≤Âå∫ÈïøÂ∫¶Â∫îÂΩìËá≥Â∞ë‰∏∫ 2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>char32tochar8&lt;/td>
&lt;td>Unicode Á†ÅÁÇπËΩ¨ UTF-8ÔºåÁºìÂÜ≤Âå∫ÈïøÂ∫¶Ëá≥Â∞ë‰∏∫ 4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>c16tomb&lt;/td>
&lt;td>UTF16 ÁºñÁ†ÅËΩ¨ UTF-8Ôºå‰ΩéÁ∫ß API&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>mbrtowc&lt;/td>
&lt;td>UTF-8 ÁºñÁ†ÅËΩ¨ UTF-16 (wchar_t)Ôºå‰ΩéÁ∫ß API&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>mbrtoc16&lt;/td>
&lt;td>UTF-8 ÁºñÁ†ÅËΩ¨ UTF-16 (char16_t)Ôºå‰ΩéÁ∫ß API&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ToNarrow&lt;/td>
&lt;td>UTF-16 ËΩ¨ UTF-8&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ToWide&lt;/td>
&lt;td>UTF-8 ËΩ¨ UTF-16&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Ê∂âÂèäÂà∞ÁºñÁ†ÅËΩ¨Êç¢Êó∂ÔºåÂ∫îÂΩì‰ΩøÁî®È´òÁ∫ß API &lt;code>bela::ToNarrow&lt;/code> Âíå &lt;code>bela::ToWide&lt;/code>&lt;/p>
&lt;h2 id="strformat">StrFormat&lt;/h2>
&lt;p>Bela ÁõÆÂâçÊèê‰æõ‰∫Ü‰∏Ä‰∏™Á±ªÂûãÂÆâÂÖ®ÁÆÄÂçïÁöÑ &lt;code>StrFormat&lt;/code>, &lt;code>StrFormat&lt;/code> Âü∫‰∫é C++ ÂèòÂèÇÊ®°ÊùøÔºå‰ΩøÁî® &lt;code>union&lt;/code> ËÆ∞ÂΩïÂèÇÊï∞Á±ªÂûãÔºåÂú®Ëß£ÊûêÊó∂ÊåâÁÖßËæìÂÖ•ÁöÑÂç†‰ΩçÁ¨¶Â∞ÜÂÖ∂‰ªñÁ±ªÂûãËΩ¨Êç¢‰∏∫Â≠óÁ¨¶‰∏≤ËøûÊé•Âú®‰∏ÄËµ∑Ôºå‰ªéËÄåÂÆûÁé∞Ê†ºÂºèÂåñÂäüËÉΩ„ÄÇ&lt;code>bela::StrFormat&lt;/code> ÂÄüÈâ¥‰∫Ü &lt;code>Chromium SafeNPrintf&lt;/code> ÂáΩÊï∞Ôºå‰ΩÜÊîØÊåÅÁöÑÁ±ªÂûãË¶ÅÊØî &lt;code>SafeNPrintf&lt;/code> Â§öÂæàÂ§ö„ÄÇ&lt;/p>
&lt;p>ÊîØÊåÅÁöÑÁ±ªÂûãÂíåÂìçÂ∫îÁöÑÂç†‰ΩçÁ¨¶Â¶Ç‰∏ãË°®ÊâÄÁ§∫Ôºö&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Á±ªÂûã&lt;/th>
&lt;th>Âç†‰ΩçÁ¨¶&lt;/th>
&lt;th>Â§áÊ≥®&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>char&lt;/td>
&lt;td>&lt;code>%c&lt;/code>&lt;/td>
&lt;td>ASCII Â≠óÁ¨¶Ôºå‰ºöË¢´ÊèêÂçá‰∏∫ wchar_t&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>unsigned char&lt;/td>
&lt;td>&lt;code>%c&lt;/code>&lt;/td>
&lt;td>ASCII Â≠óÁ¨¶Ôºå‰ºöË¢´ÊèêÂçá‰∏∫ wchar_t&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>wchar_t&lt;/td>
&lt;td>&lt;code>%c&lt;/code>&lt;/td>
&lt;td>UTF-16 Â≠óÁ¨¶&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>char16_t&lt;/td>
&lt;td>&lt;code>%c&lt;/code>&lt;/td>
&lt;td>UTF-16 Â≠óÁ¨¶&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>char32_t&lt;/td>
&lt;td>&lt;code>%c&lt;/code>&lt;/td>
&lt;td>UTF-32 Unicode Â≠óÁ¨¶Ôºå‰ºöË¢´ËΩ¨‰∏∫ UTF-16 Â≠óÁ¨¶ÔºåËøôÊÑèÂë≥ÁùÄÂèØ‰ª•‰ΩøÁî® Unicode Á†ÅÁÇπ‰ª• %c ÁöÑÊñπÂºèËæìÂá∫ emoji„ÄÇ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>short&lt;/td>
&lt;td>&lt;code>%d&lt;/code>&lt;/td>
&lt;td>16‰ΩçÊï¥Âûã&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>unsigned short&lt;/td>
&lt;td>&lt;code>%d&lt;/code>&lt;/td>
&lt;td>16‰ΩçÊó†Á¨¶Âè∑Êï¥Âûã&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>int&lt;/td>
&lt;td>&lt;code>%d&lt;/code>&lt;/td>
&lt;td>32‰ΩçÊï¥Âûã&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>unsigned int&lt;/td>
&lt;td>&lt;code>%d&lt;/code>&lt;/td>
&lt;td>32‰ΩçÊó†Á¨¶Âè∑Êï¥Âûã&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>long&lt;/td>
&lt;td>&lt;code>%d&lt;/code>&lt;/td>
&lt;td>32‰ΩçÊï¥Âûã&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>unsigned long&lt;/td>
&lt;td>&lt;code>%d&lt;/code>&lt;/td>
&lt;td>32‰ΩçÊó†Á¨¶Âè∑Êï¥Âûã&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>long long&lt;/td>
&lt;td>&lt;code>%d&lt;/code>&lt;/td>
&lt;td>64‰ΩçÊï¥Âûã&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>unsigned long long&lt;/td>
&lt;td>&lt;code>%d&lt;/code>&lt;/td>
&lt;td>64‰ΩçÊó†Á¨¶Âè∑Êï¥Âûã&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>float&lt;/td>
&lt;td>&lt;code>%f&lt;/code>&lt;/td>
&lt;td>‰ºöË¢´ÊèêÂçá‰∏∫ &lt;code>double&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>double&lt;/td>
&lt;td>&lt;code>%f&lt;/code>&lt;/td>
&lt;td>64‰ΩçÊµÆÁÇπ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>const char *&lt;/td>
&lt;td>&lt;code>%s&lt;/code>&lt;/td>
&lt;td>UTF-8 Â≠óÁ¨¶‰∏≤Ôºå‰ºöË¢´ËΩ¨Êç¢Êàê UTF-16 Â≠óÁ¨¶‰∏≤&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>char *&lt;/td>
&lt;td>&lt;code>%s&lt;/code>&lt;/td>
&lt;td>UTF-8 Â≠óÁ¨¶‰∏≤Ôºå‰ºöË¢´ËΩ¨Êç¢Êàê UTF-16 Â≠óÁ¨¶‰∏≤&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>std::string&lt;/td>
&lt;td>&lt;code>%s&lt;/code>&lt;/td>
&lt;td>UTF-8 Â≠óÁ¨¶‰∏≤Ôºå‰ºöË¢´ËΩ¨Êç¢Êàê UTF-16 Â≠óÁ¨¶‰∏≤&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>std::string_view&lt;/td>
&lt;td>&lt;code>%s&lt;/code>&lt;/td>
&lt;td>UTF-8 Â≠óÁ¨¶‰∏≤Ôºå‰ºöË¢´ËΩ¨Êç¢Êàê UTF-16 Â≠óÁ¨¶‰∏≤&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>const wchar_t *&lt;/td>
&lt;td>&lt;code>%s&lt;/code>&lt;/td>
&lt;td>UTF-16 Â≠óÁ¨¶‰∏≤&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>wchar_t *&lt;/td>
&lt;td>&lt;code>%s&lt;/code>&lt;/td>
&lt;td>UTF-16 Â≠óÁ¨¶‰∏≤&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>std::wstring&lt;/td>
&lt;td>&lt;code>%s&lt;/code>&lt;/td>
&lt;td>UTF-16 Â≠óÁ¨¶‰∏≤&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>std::wstring_view&lt;/td>
&lt;td>&lt;code>%s&lt;/code>&lt;/td>
&lt;td>UTF-16 Â≠óÁ¨¶‰∏≤&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>const char16_t *&lt;/td>
&lt;td>&lt;code>%s&lt;/code>&lt;/td>
&lt;td>UTF-16 Â≠óÁ¨¶‰∏≤&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>char16_t *&lt;/td>
&lt;td>&lt;code>%s&lt;/code>&lt;/td>
&lt;td>UTF-16 Â≠óÁ¨¶‰∏≤&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>std::u16string&lt;/td>
&lt;td>&lt;code>%s&lt;/code>&lt;/td>
&lt;td>UTF-16 Â≠óÁ¨¶‰∏≤&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>std::u16string_view&lt;/td>
&lt;td>&lt;code>%s&lt;/code>&lt;/td>
&lt;td>UTF-16 Â≠óÁ¨¶‰∏≤&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>void *&lt;/td>
&lt;td>&lt;code>%p&lt;/code>&lt;/td>
&lt;td>ÊåáÈíàÁ±ªÂûãÔºå‰ºöÊ†ºÂºèÂåñÊàê &lt;code>0xffff00000&lt;/code> ËøôÊ†∑ÁöÑÂ≠óÁ¨¶‰∏≤&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Â¶ÇÊûú‰∏çÊ†ºÂºèÂåñ UTF-8 Â≠óÁ¨¶‰∏≤Ôºå‰∏îÊã•ÊúâÂõ∫ÂÆöÂ§ßÂ∞èÂÜÖÂ≠òÁºìÂÜ≤Âå∫ÔºåÂèØ‰ª•‰ΩøÁî® &lt;code>StrFormat&lt;/code> ÁöÑÂ¶Ç‰∏ãÈáçËΩΩÔºåÊ≠§ÈáçËΩΩÂèØ‰ª•ËΩªÊùæÁöÑÁßªÊ§çÂà∞ POSIX Á≥ªÁªüÂπ∂ÊîØÊåÅÂºÇÊ≠•‰ø°Âè∑ÂÆâÂÖ®:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">template&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">typename&lt;/span>... &lt;span style="color:#58a1dd">Args&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">ssize_t&lt;/span> &lt;span style="color:#58a1dd">StrFormat&lt;/span>(&lt;span style="color:#ff636f">wchar_t&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">buf&lt;/span>, &lt;span style="color:#58a1dd">size_t&lt;/span> &lt;span style="color:#58a1dd">N&lt;/span>, &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">wchar_t&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">fmt&lt;/span>, &lt;span style="color:#58a1dd">Args&lt;/span>... &lt;span style="color:#58a1dd">args&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Êàë‰ª¨Âü∫‰∫é &lt;code>StrFormat&lt;/code> ÂÆûÁé∞‰∫ÜÁ±ªÂûãÂÆâÂÖ®ÁöÑ &lt;code>bela::FPrintF&lt;/code>ÔºåËøô‰∏™ÂáΩÊï∞ËÉΩÂ§üÊ†πÊçÆËæìÂá∫ËÆæÂ§áÁöÑÁ±ªÂûãËá™Âä®ËΩ¨Êç¢ÁºñÁ†ÅÔºåÂ¶ÇÊûúÊòØ &lt;code>Conhost&lt;/code> Âàô‰ºöËæìÂá∫ &lt;code>UTF-16&lt;/code>ÔºåÂê¶ÂàôÂàôËæìÂá∫ &lt;code>UTF-8&lt;/code>„ÄÇÂ¶ÇÊûú &lt;code>Conhost&lt;/code> ‰∏çÊîØÊåÅ &lt;code>VT&lt;/code> Ê®°ÂºèÔºåbela Âàô‰ºöÂ∞ÜËæìÂá∫Â≠óÁ¨¶‰∏≤‰∏≠ÁöÑ ASCII È¢úËâ≤ËΩ¨‰πâÂéªÈô§Ôºå‰ΩÜ bela Âπ∂Ê≤°ÊúâÂÅö Windows ÊóßÁâàÊú¨ÁöÑÈÄÇÈÖçÔºåÊàë‰ª¨Â∫îËØ•ÂßãÁªà‰ΩøÁî® Windows ÊúÄÊñ∞ÂèëË°åÁâà„ÄÇ&lt;/p>
&lt;p>‰∏ãÈù¢ÊòØ‰∏Ä‰∏™Á§∫‰æãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">/// C++17
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#include&lt;/span> &lt;span style="color:#828b96;font-style:italic">&amp;lt;bela/strcat.hpp&amp;gt;&lt;/span>&lt;span style="color:#828b96;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#include&lt;/span> &lt;span style="color:#828b96;font-style:italic">&amp;lt;bela/stdwriter.hpp&amp;gt;&lt;/span>&lt;span style="color:#828b96;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">cv&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#58a1dd">__cplusplus&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">wmain&lt;/span>(&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">argc&lt;/span>, &lt;span style="color:#ff636f">wchar_t&lt;/span> &lt;span style="color:#ff636f">**&lt;/span>&lt;span style="color:#58a1dd">argv&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">ux&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">\xf0\x9f\x98\x81&lt;/span>&lt;span style="color:#a6be9d"> UTF-8 text &lt;/span>&lt;span style="color:#a6be9d">\xE3\x8D\xA4&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>; &lt;span style="color:#828b96;font-style:italic">// force encode UTF-8
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">wchar_t&lt;/span> &lt;span style="color:#58a1dd">wx&lt;/span>[] &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;Engine &lt;/span>&lt;span style="color:#a6be9d">\xD83D\xDEE0&lt;/span>&lt;span style="color:#a6be9d"> ‰∏≠ÂõΩ&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FPrintF&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">stderr&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;Argc: %d Arg0: &lt;/span>&lt;span style="color:#a6be9d">\x1b&lt;/span>&lt;span style="color:#a6be9d">[32m%s&lt;/span>&lt;span style="color:#a6be9d">\x1b&lt;/span>&lt;span style="color:#a6be9d">[0m W: %s UTF-8: %s C++ version: %d&lt;/span>&lt;span style="color:#a6be9d">\n&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">argc&lt;/span>, &lt;span style="color:#58a1dd">argv&lt;/span>[&lt;span style="color:#a6be9d">0&lt;/span>], &lt;span style="color:#58a1dd">wx&lt;/span>, &lt;span style="color:#58a1dd">ux&lt;/span>, &lt;span style="color:#58a1dd">cv&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">char32_t&lt;/span> &lt;span style="color:#58a1dd">em&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0x1F603&lt;/span>;&lt;span style="color:#828b96;font-style:italic">//üòÉ
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">StringCat&lt;/span>(&lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;Look emoji --&amp;gt;&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">em&lt;/span>, &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34; U: &amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">static_cast&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">uint32_t&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span>(&lt;span style="color:#58a1dd">em&lt;/span>));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FPrintF&lt;/span>(&lt;span style="color:#58a1dd">stderr&lt;/span>, &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;emoji test %c %s&lt;/span>&lt;span style="color:#a6be9d">\n&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">em&lt;/span>, &lt;span style="color:#58a1dd">s&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FPrintF&lt;/span>(&lt;span style="color:#58a1dd">stderr&lt;/span>, &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;hStderr Mode: %s hStdin Mode: %s&lt;/span>&lt;span style="color:#a6be9d">\n&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FileTypeName&lt;/span>(&lt;span style="color:#58a1dd">stderr&lt;/span>), &lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FileTypeName&lt;/span>(&lt;span style="color:#58a1dd">stdin&lt;/span>));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ËØ∑Ê≥®ÊÑèÔºåÂ¶ÇÊûú‰∏äËø∞ emoji Ë¶ÅÊ≠£Â∏∏ÊòæÁ§∫ÔºåÂ∫îÂΩì‰ΩøÁî® &lt;code>Windows Terminal&lt;/code> ÊàñËÄÖÊòØ &lt;code>Mintty&lt;/code>„ÄÇ&lt;/p>
&lt;h1 id="‰∏â-bela-windows-Á≥ªÁªüÂäüËÉΩÂ∫ì">‰∏â. Bela Windows Á≥ªÁªüÂäüËÉΩÂ∫ì&lt;/h1>
&lt;h2 id="belafinaly">bela::finaly&lt;/h2>
&lt;p>Âú®‰ΩøÁî® Golang Êó∂Ôºå&lt;code>defer&lt;/code> ÂèØ‰ª•Âú®ÂáΩÊï∞ÈÄÄÂá∫Êó∂ÊâßË°å‰∏Ä‰∫õ‰ª£Á†ÅÔºåÂú® C++ ‰∏≠ &lt;a href="https://github.com/microsoft/gsl">Microsoft/GSL&lt;/a> ÈáåÈù¢Êúâ‰∏Ä‰∏™ &lt;code>finaly&lt;/code> ÂÆûÁé∞ÔºåÂºÇÊõ≤ÂêåÂ∑•„ÄÇÂú®ËøôÈáå Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî® &lt;code>finaly&lt;/code> ÈÅøÂÖçËµÑÊ∫êÊ≥ÑÈú≤„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#include&lt;/span> &lt;span style="color:#828b96;font-style:italic">&amp;lt;bela/finaly.hpp&amp;gt;&lt;/span>&lt;span style="color:#828b96;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#include&lt;/span> &lt;span style="color:#828b96;font-style:italic">&amp;lt;cstdio&amp;gt;&lt;/span>&lt;span style="color:#828b96;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">wmain&lt;/span>(){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">file&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#58a1dd">fopen&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;somelog&amp;#34;&lt;/span>,&lt;span style="color:#a6be9d">&amp;#34;w+&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">closer&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">finaly&lt;/span>([&lt;span style="color:#ff636f">&amp;amp;&lt;/span>]{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span>(&lt;span style="color:#58a1dd">file&lt;/span>&lt;span style="color:#ff636f">!=&lt;/span>&lt;span style="color:#ff636f">nullptr&lt;/span>){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">fclose&lt;/span>(&lt;span style="color:#58a1dd">file&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> });
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/// do some codes
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="pathcat-Ë∑ØÂæÑËßÑËåÉÂåñËøûÊé•ÂáΩÊï∞">PathCat Ë∑ØÂæÑËßÑËåÉÂåñËøûÊé•ÂáΩÊï∞&lt;/h2>
&lt;p>&lt;code>PathCat&lt;/code> ÂáΩÊï∞ÂÄüÈâ¥‰∫Ü &lt;code>StringCat&lt;/code> ÂáΩÊï∞ÔºåÂ∞ÜË∑ØÂæÑÁªÑ‰ª∂ËøûÊé•Ëµ∑Êù•„ÄÇ‰æãÂ≠êÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">p&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">PathCat&lt;/span>(&lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">\\\\&lt;/span>&lt;span style="color:#a6be9d">?&lt;/span>&lt;span style="color:#a6be9d">\\&lt;/span>&lt;span style="color:#a6be9d">C:&lt;/span>&lt;span style="color:#a6be9d">\\&lt;/span>&lt;span style="color:#a6be9d">Windows/System32&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;drivers/etc&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;hosts&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FPrintF&lt;/span>(&lt;span style="color:#58a1dd">stderr&lt;/span>, &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;PathCat: %s&lt;/span>&lt;span style="color:#a6be9d">\n&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">p&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">p2&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">PathCat&lt;/span>(&lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;C:&lt;/span>&lt;span style="color:#a6be9d">\\&lt;/span>&lt;span style="color:#a6be9d">Windows/System32&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;drivers/../..&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FPrintF&lt;/span>(&lt;span style="color:#58a1dd">stderr&lt;/span>, &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;PathCat: %s&lt;/span>&lt;span style="color:#a6be9d">\n&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">p2&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">p3&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">PathCat&lt;/span>(&lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;Windows/System32&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;drivers/./././.&lt;/span>&lt;span style="color:#a6be9d">\\&lt;/span>&lt;span style="color:#a6be9d">.&lt;/span>&lt;span style="color:#a6be9d">\\&lt;/span>&lt;span style="color:#a6be9d">etc&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FPrintF&lt;/span>(&lt;span style="color:#58a1dd">stderr&lt;/span>, &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;PathCat: %s&lt;/span>&lt;span style="color:#a6be9d">\n&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">p3&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">p4&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">PathCat&lt;/span>(&lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;.&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;test/pathcat/./pathcat_test.exe&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FPrintF&lt;/span>(&lt;span style="color:#58a1dd">stderr&lt;/span>, &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;PathCat: %s&lt;/span>&lt;span style="color:#a6be9d">\n&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">p4&lt;/span>);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>PathCat&lt;/code> ÁöÑÊÄùË∑ØÊòØÂÖàÂ∞Ü &lt;code>UNC&lt;/code> ÂâçÁºÄÂíåÁõòÁ¨¶ËÆ∞ÂΩïÂπ∂ÂéªÈô§ÔºåÁÑ∂ÂêéÂ∞ÜÊâÄÊúâÁöÑÂèÇÊï∞‰ΩøÁî® &lt;code>PathSpilt&lt;/code> ÂáΩÊï∞‰ª• Windows Ë∑ØÂæÑÂàÜÈöîÁ¨¶Âíå Linux Ë∑ØÂæÑÂàÜÈöîÁ¨¶ÊãÜÂàÜÊàê &lt;code>std::wstring_view&lt;/code> Êï∞ÁªÑÔºåÂΩìÂΩìÂâçË∑ØÂæÑÂÖÉÁ¥†‰∏∫ &lt;code>..&lt;/code> Êó∂ÔºåÂºπÂá∫Â≠óÁ¨¶‰∏≤Êï∞ÁªÑ‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÂ¶ÇÊûú‰∏∫ &lt;code>.&lt;/code> Âàô‰øùÊåÅ‰∏çÂèòÔºåÂê¶ÂàôÂ∞ÜË∑ØÂæÑÂÖÉÁ¥†ÂéãÂÖ•Êï∞ÁªÑ„ÄÇÊãÜÂàÜÂÆåÊØïÂêéÔºåÈÅçÂéÜÊï∞ÁªÑËÆ°ÁÆóÊâÄÈúÄÁºìÂÜ≤Âå∫Â§ßÂ∞èÔºåË∞ÉÊï¥ &lt;code>std::wstring&lt;/code> ÂÆπÈáèÔºåÁÑ∂ÂêéËøõË°åË∑ØÂæÑÈáçÁªÑ„ÄÇ&lt;/p>
&lt;p>ÂΩìÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÂÄº‰∏∫ &lt;code>.&lt;/code> Êó∂Ôºå&lt;code>PathCat&lt;/code> Â∞ÜËß£ÊûêÁ¨¨‰∏Ä‰∏™Ë∑ØÂæÑ‰∏∫ÂΩìÂâçÁõÆÂΩïÔºåÁÑ∂ÂêéÂèÇ‰∏éËß£Êûê„ÄÇÂ¶ÇÊûú &lt;code>PathCat&lt;/code> Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØÁõ∏ÂØπË∑ØÂæÑÔºå&lt;code>PathCat&lt;/code> Âπ∂‰∏ç‰ºö‰∏ªÂä®Â∞ÜË∑ØÂæÑËΩ¨Âèò‰∏∫ÁªùÂØπË∑ØÂæÑÔºåÂõ†Ê≠§Ôºå‰Ω†Â∫îÂΩì‰∏ªÂä®ÁöÑÂ∞ÜÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ËÆæÁΩÆ‰∏∫ &lt;code>.&lt;/code> ‰ª•ÊúüËß£Êûê‰∏∫ÁªùÂØπË∑ØÂæÑ„ÄÇ&lt;/p>
&lt;p>&lt;code>PathCat&lt;/code> Âπ∂‰∏ç‰ºöÂà§Êñ≠Ë∑ØÂæÑÊòØÂê¶Â≠òÂú®ÔºåÂõ†Ê≠§ÈúÄË¶ÅÊ≥®ÊÑè„ÄÇ&lt;/p>
&lt;p>Ë∑ØÂæÑËß£ÊûêÈîôËØØÊòØÂæàÂ§öËΩØ‰ª∂ÁöÑÊºèÊ¥ûÊ†πÊ∫êÔºåÂêàÁêÜÁöÑËßÑËåÉÂåñË∑ØÂæÑÈùûÂ∏∏ÊúâÂøÖË¶ÅÔºåËÄå &lt;code>PathCat&lt;/code> Âú®ËßÑËåÉÂåñË∑ØÂæÑÊó∂Ôºå‰ΩøÁî® C++17/C++20(Span) ÁöÑÁâπÊÄßÔºåÂáèÂ∞ëÂÜÖÂ≠òÂàÜÈÖçÔºåÁÆÄÂåñ‰∫ÜËßÑËåÉÂåñÊµÅÁ®ã„ÄÇ&lt;/p>
&lt;p>&lt;code>PathCat&lt;/code> ‰ΩøÁî®‰∫Ü &lt;code>bela::Span&lt;/code> Ôºà&lt;code>&amp;lt;bela/span.hpp&amp;gt;&lt;/code>ÔºâÔºå&lt;code>Span&lt;/code> Ë¢´ C++20 ÈááÁ∫≥Ôºå&lt;code>bela::Span&lt;/code> Âü∫‰∫é &lt;code>absl::Span&lt;/code>„ÄÇ&lt;/p>
&lt;h2 id="pathexists-ÂáΩÊï∞">PathExists ÂáΩÊï∞&lt;/h2>
&lt;p>&lt;code>PathExists&lt;/code> ÂáΩÊï∞Âà§Êñ≠Ë∑ØÂæÑÊòØÂê¶Â≠òÂú®ÔºåÂΩì‰ΩøÁî®ÈªòËÆ§ÂèÇÊï∞Êó∂ÔºåÂè™‰ºöÂà§Êñ≠Ë∑ØÂæÑÊòØÂê¶Â≠òÂú®ÔºåÂ¶ÇÊûúÈúÄË¶ÅÂà§Êñ≠Ë∑ØÂæÑÁöÑÂÖ∂‰ªñÂ±ûÊÄßÔºåÂèØ‰ª•‰ΩøÁî®Â¶Ç‰∏ãÊñπÂºèÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span>(&lt;span style="color:#ff636f">!&lt;/span>&lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">PathExists&lt;/span>(&lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;C:&lt;/span>&lt;span style="color:#a6be9d">\\&lt;/span>&lt;span style="color:#a6be9d">Windows&amp;#34;&lt;/span>,&lt;span style="color:#58a1dd">FileAttribute&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">Dir&lt;/span>)){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FPrintF&lt;/span>(&lt;span style="color:#58a1dd">stderr&lt;/span>,&lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;C:&lt;/span>&lt;span style="color:#a6be9d">\\&lt;/span>&lt;span style="color:#a6be9d">Windows not dir or not exists&lt;/span>&lt;span style="color:#a6be9d">\n&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="lookuprealpath-ÂáΩÊï∞">LookupRealPath ÂáΩÊï∞&lt;/h2>
&lt;p>&lt;code>LookupRealPath&lt;/code> Áî®‰∫éËß£Êûê Windows Á¨¶Âè∑ÈìæÊé•ÂíåÂç∑ÊåÇËΩΩÁÇπ„ÄÇ&lt;/p>
&lt;h2 id="lookupappexeclinktarget-ÂáΩÊï∞">LookupAppExecLinkTarget ÂáΩÊï∞&lt;/h2>
&lt;p>&lt;code>LookupAppExecLinkTarget&lt;/code> Áî®‰∫éËß£Êûê Windows AppExecLink ÁõÆÊ†áÔºåÂú® Windows 10 Á≥ªÁªü‰∏≠Ôºå&lt;code>AppExecLink&lt;/code> ÊòØ‰∏ÄÁßç Store App ÁöÑÂëΩ‰ª§Ë°åÂÖ•Âè£ÔºåÈÄöÂ∏∏‰Ωç‰∫é &lt;code>C:\Users\$Username\AppData\Local\Microsoft\WindowsApps&lt;/code>ÔºåËøôÁßçÊñá‰ª∂Êú¨Ë¥®‰∏äÊòØ‰∏ÄÁßçÈáçËß£ÊûêÁÇπÔºåÂõ†Ê≠§Ëß£ÊûêÊó∂ÈúÄË¶ÅÊåâÁÖßÈáçËß£ÊûêÁÇπÁöÑÊñπÊ≥ïÂéªËß£Êûê„ÄÇ&lt;/p>
&lt;h2 id="executableexistsinpath-Êü•ÊâæÂèØÊâßË°åÊñá‰ª∂">ExecutableExistsInPath Êü•ÊâæÂèØÊâßË°åÊñá‰ª∂&lt;/h2>
&lt;p>Âú® Windows cmd ‰∏≠ÔºåÊúâ‰∏Ä‰∏™ÂëΩ‰ª§Âè´ÂÅö &lt;code>where&lt;/code>ÔºåÁî®‰∫éÊü•ÊâæÂëΩ‰ª§ÊàñËÄÖÂèØÊâßË°åÊñá‰ª∂ÁöÑË∑ØÂæÑÔºåËÄå &lt;code>ExecutableExistsInPath&lt;/code> ÂàôÊèê‰æõ‰∫ÜÁõ∏ÂêåÁöÑÂäüËÉΩÔºåÊàë‰ª¨ÂèØ‰ª•ÊåâÁÖßËæìÂÖ•ÁöÑÂëΩ‰ª§ÊàñËÄÖË∑ØÂæÑÊü•ÊâæÂØπÂ∫îÁöÑÂèØÊâßË°åÊñá‰ª∂ÔºåËøôÈáåÊúâ‰∏Ä‰∏™ &lt;code>where&lt;/code> ÂÆûÁé∞Ôºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">////
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#include&lt;/span> &lt;span style="color:#828b96;font-style:italic">&amp;lt;bela/strcat.hpp&amp;gt;&lt;/span>&lt;span style="color:#828b96;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#include&lt;/span> &lt;span style="color:#828b96;font-style:italic">&amp;lt;bela/stdwriter.hpp&amp;gt;&lt;/span>&lt;span style="color:#828b96;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#include&lt;/span> &lt;span style="color:#828b96;font-style:italic">&amp;lt;bela/path.hpp&amp;gt;&lt;/span>&lt;span style="color:#828b96;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">wmain&lt;/span>(&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">argc&lt;/span>, &lt;span style="color:#ff636f">wchar_t&lt;/span> &lt;span style="color:#ff636f">**&lt;/span>&lt;span style="color:#58a1dd">argv&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">argc&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span> &lt;span style="color:#a6be9d">2&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FPrintF&lt;/span>(&lt;span style="color:#58a1dd">stderr&lt;/span>, &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;usage: %s command&lt;/span>&lt;span style="color:#a6be9d">\n&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">argv&lt;/span>[&lt;span style="color:#a6be9d">0&lt;/span>]);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">wstring&lt;/span> &lt;span style="color:#58a1dd">exe&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#ff636f">!&lt;/span>&lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">ExecutableExistsInPath&lt;/span>(&lt;span style="color:#58a1dd">argv&lt;/span>[&lt;span style="color:#a6be9d">1&lt;/span>], &lt;span style="color:#58a1dd">exe&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FPrintF&lt;/span>(&lt;span style="color:#58a1dd">stderr&lt;/span>, &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;command not found: %s&lt;/span>&lt;span style="color:#a6be9d">\n&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">argv&lt;/span>[&lt;span style="color:#a6be9d">1&lt;/span>]);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FPrintF&lt;/span>(&lt;span style="color:#58a1dd">stdout&lt;/span>, &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;%s&lt;/span>&lt;span style="color:#a6be9d">\n&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">exe&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ÂëΩ‰ª§Ë°åÂêàÊàêÊãÜÂàÜÂíåËß£Êûê">ÂëΩ‰ª§Ë°åÂêàÊàêÔºåÊãÜÂàÜÂíåËß£Êûê&lt;/h2>
&lt;p>Âú® bela ‰∏≠ÔºåÊàë‰ª¨Êèê‰æõ‰∫ÜÂëΩ‰ª§Ë°åÂêàÊàêÔºåÊãÜÂàÜÂíåËß£ÊûêÁ±ªÔºåÂÖ∑‰ΩìÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Á±ªÂêç&lt;/th>
&lt;th>ÂäüËÉΩ&lt;/th>
&lt;th>Êñá‰ª∂&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>ParseArgv&lt;/td>
&lt;td>Ëß£ÊûêÂëΩ‰ª§Ë°åÂèÇÊï∞ÔºåÁ±ª‰ºº GNU &lt;code>getopt_long&lt;/code>ÔºåÊîØÊåÅ &lt;code>wchar_t&lt;/code>Ôºå‰∏ç‰ΩøÁî®ÂÖ®Â±ÄÂèòÈáèÔºåÈîôËØØ‰ø°ÊÅØËØ¶ÁªÜ&lt;/td>
&lt;td>&lt;code>&amp;lt;bela/parseargv.hpp&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tokenizer&lt;/td>
&lt;td>Â∞ÜÂëΩ‰ª§Ë°åÂ≠óÁ¨¶‰∏≤ Windows commandline ÂΩ¢ÂºèËΩ¨Âèò‰∏∫ &lt;code>wchar_t **Argv&lt;/code> ÂΩ¢Âºè&lt;/td>
&lt;td>&lt;code>&amp;lt;bela/tokenizecmdline.hpp&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>EscapeArgv&lt;/td>
&lt;td>Â∞Ü &lt;code>Argv&lt;/code> ÂΩ¢ÂºèÂëΩ‰ª§Ë°åÂèÇÊï∞ËΩ¨‰∏∫ &lt;code>commdline&lt;/code> ÂΩ¢ÂºèÔºå‰∏ªË¶ÅÁî®‰∫é &lt;code>CreateProcess&lt;/code>&lt;/td>
&lt;td>&lt;code>&amp;lt;bela/escapeargv.hpp&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="mapview">MapView&lt;/h2>
&lt;p>Âú® bela ‰∏≠ÔºåÊàëËøòÊèê‰æõ &lt;code>MapView&lt;/code>ÔºåËøôÊòØ‰∏Ä‰∏™Âè™ËØªÁöÑÊñá‰ª∂ÂÜÖÂ≠òÊò†Â∞ÑÔºåÈÄöÂ∏∏Áî®‰∫éÊñá‰ª∂Ëß£Êûê„ÄÇÊñá‰ª∂ &lt;code>&amp;lt;bela/mapview.hpp&amp;gt;&lt;/code> ËøòÊúâ‰∏é &lt;code>std::string_view&lt;/code> Á±ª‰ººÁöÑ &lt;code>MemView &lt;/code> Á±ª„ÄÇ&lt;/p>
&lt;h2 id="pesimpledetailsaze-Ëé∑Âæó-pe-ÁöÑÁÆÄÂçï‰ø°ÊÅØ">PESimpleDetailsAze Ëé∑Âæó PE ÁöÑÁÆÄÂçï‰ø°ÊÅØ&lt;/h2>
&lt;p>Âú® Bela ‰∏≠ÔºåÊàëÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™ &lt;code>PESimpleDetailsAze&lt;/code> Áî®‰∫éËé∑Âæó PE ÂèØÊâßË°åÊñá‰ª∂ÁöÑ‰∏Ä‰∫õ‰ø°ÊÅØÔºåÂÖ∂ÁªìÊûÑ‰ΩìÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">struct&lt;/span> &lt;span style="color:#58a1dd">PESimpleDetails&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">wstring&lt;/span> &lt;span style="color:#58a1dd">clrmsg&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">vector&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">wstring&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#58a1dd">depends&lt;/span>; &lt;span style="color:#828b96;font-style:italic">// depends dll
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">vector&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">wstring&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#58a1dd">delays&lt;/span>; &lt;span style="color:#828b96;font-style:italic">// delay load library
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">PEVersionPair&lt;/span> &lt;span style="color:#58a1dd">osver&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">PEVersionPair&lt;/span> &lt;span style="color:#58a1dd">linkver&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">PEVersionPair&lt;/span> &lt;span style="color:#58a1dd">imagever&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Machine&lt;/span> &lt;span style="color:#58a1dd">machine&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Subsytem&lt;/span> &lt;span style="color:#58a1dd">subsystem&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">uint16_t&lt;/span> &lt;span style="color:#58a1dd">characteristics&lt;/span>{&lt;span style="color:#a6be9d">0&lt;/span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">uint16_t&lt;/span> &lt;span style="color:#58a1dd">dllcharacteristics&lt;/span>{&lt;span style="color:#a6be9d">0&lt;/span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">bool&lt;/span> &lt;span style="color:#58a1dd">IsConsole&lt;/span>() &lt;span style="color:#ff636f">const&lt;/span> { &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">subsystem&lt;/span> &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#58a1dd">Subsytem&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">CUI&lt;/span>; }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">bool&lt;/span> &lt;span style="color:#58a1dd">IsDLL&lt;/span>() &lt;span style="color:#ff636f">const&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#ff636f">uint16_t&lt;/span> &lt;span style="color:#58a1dd">imagefiledll&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0x2000&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> (&lt;span style="color:#58a1dd">characteristics&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&lt;/span> &lt;span style="color:#58a1dd">imagefiledll&lt;/span>) &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÂáΩÊï∞ÁöÑÂ£∞ÊòéÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">optional&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">PESimpleDetails&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#58a1dd">PESimpleDetailsAze&lt;/span>(&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">wstring_view&lt;/span> &lt;span style="color:#58a1dd">file&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">error_code&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">ec&lt;/span>);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÈÄöËøáÊ≠§ÂáΩÊï∞Ôºå‰Ω†ÂèØ‰ª•Ëé∑Âæó PE ÂèØÊâßË°åÊñá‰ª∂ÁöÑÁõÆÊ†áÊú∫Âô®Á±ªÂûãÔºåÂ≠êÁ≥ªÁªüÔºåËøûÊé•Âô®ÁâàÊú¨ÔºåÁ≥ªÁªüÁâàÊú¨ÔºåImage ÁâàÊú¨ÔºåPE ÁöÑÁâπÂæÅÔºåPE ‰æùËµñÁöÑ dll ÂíåÂª∂Êó∂Âä†ËΩΩÁöÑ dll„ÄÇÂ¶ÇÊûúÊòØ CLR PE Êñá‰ª∂ÔºåÂàôclrmsg ‰∏ç‰∏∫Á©∫ÊèèËø∞ÁöÑÊòØ CLR ÁöÑ‰ø°ÊÅØ„ÄÇ&lt;code>PESimpleDetailsAze&lt;/code> Âπ∂‰∏ç‰æùËµñ &lt;code>DbgHelp.dll (ImageRvaToVa)&lt;/code>„ÄÇ&lt;/p>
&lt;h1 id="ÊúÄÂêé">ÊúÄÂêé&lt;/h1>
&lt;p>Bela Â∫îËØ•ÊòØ‰∏çÊñ≠ÂèëÂ±ïÁöÑÔºåÂ¶ÇÊûúÊàëÊúâÊñ∞ÁöÑ Idea ‰∫ÜÔºåÂ∞±‰ºöÂèäÊó∂ÁöÑÁßªÊ§çËøõÂéªÁöÑ„ÄÇ&lt;/p>
- https://forcemz.net/posts/2019/2019-05-25-introduction-bela/ - Copyright (c) 2009-2024 J23</description></item><item><title>Â≠óÁ¨¶‰∏≤Ê†ºÂºèÂåñÊº´Ë∞à</title><link>https://forcemz.net/posts/2019/2019-04-29-string-formatting-talk/</link><pubDate>Mon, 29 Apr 2019 10:00:00 +0800</pubDate><guid>https://forcemz.net/posts/2019/2019-04-29-string-formatting-talk/</guid><description>Charlie's Rethinking https://forcemz.net/posts/2019/2019-04-29-string-formatting-talk/ -&lt;h1 id="ÂâçË®Ä">ÂâçË®Ä&lt;/h1>
&lt;p>Êò•È£éÂåñÈõ®Ôºå‰∏áÁâ©Â§çËãèÔºåÁºñÁ®ãÂßã‰∫é &lt;code>Hello world&lt;/code>ÔºåC ËØ≠Ë®ÄÁöÑ Hello world ÂèØÂ¶Ç‰∏ãÔºåÂêåÊ†∑ C++ ‰∫¶ÂèØÂ¶Ç‰∏ã:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#include&lt;/span> &lt;span style="color:#828b96;font-style:italic">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span style="color:#828b96;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">printf&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;Hello World!&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>printf ÂáΩÊï∞Á±ªÂûã‰∏∫Ôºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">printf&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">fmt&lt;/span>,...);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÊåâÁÖßÊ≠§Â£∞ÊòéÊàë‰ª¨ÂèØ‰ª•Ê†ºÂºèÂåñËæìÂá∫Ôºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#include&lt;/span> &lt;span style="color:#828b96;font-style:italic">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span style="color:#828b96;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">name&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;Tony Stark&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">printf&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;Hello %s&lt;/span>&lt;span style="color:#a6be9d">\n&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>,&lt;span style="color:#58a1dd">name&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>‰ΩøÁî® C ÁºñËØëÂô® Clang/MSVC/GCC Â∞ÜÂÖ∂ÁºñËØëËøêË°åÔºåÂú®ÁªàÁ´ØÊàñËÄÖÂëΩ‰ª§Ë°å‰∏≠‰ºöËæìÂá∫Â¶Ç‰∏ãÁªìÊûúÔºö&lt;/p>
&lt;blockquote>
&lt;p>$ Hello Tony Stark&lt;/p>
&lt;/blockquote>
&lt;p>printf ÂáΩÊï∞ÂÆ∂ÊóèÂ£∞ÊòéÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// https://en.cppreference.com/w/cpp/header/cstdio
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">printf&lt;/span>( &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">format&lt;/span>, ... );
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">fprintf&lt;/span>(&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FILE&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">stream&lt;/span>, &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">format&lt;/span>, ... );
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">sprintf&lt;/span>( &lt;span style="color:#ff636f">char&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">buffer&lt;/span>, &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">format&lt;/span>, ... );
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">snprintf&lt;/span>( &lt;span style="color:#ff636f">char&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">buffer&lt;/span>, &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">size_t&lt;/span> &lt;span style="color:#58a1dd">buf_size&lt;/span>, &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">format&lt;/span>, ... );
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">vprintf&lt;/span>( &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">format&lt;/span>, &lt;span style="color:#58a1dd">va_list&lt;/span> &lt;span style="color:#58a1dd">vlist&lt;/span> );
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">vfprintf&lt;/span>( &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FILE&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">stream&lt;/span>, &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">format&lt;/span>, &lt;span style="color:#58a1dd">va_list&lt;/span> &lt;span style="color:#58a1dd">vlist&lt;/span> );
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">vsprintf&lt;/span>( &lt;span style="color:#ff636f">char&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">buffer&lt;/span>, &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">format&lt;/span>, &lt;span style="color:#58a1dd">va_list&lt;/span> &lt;span style="color:#58a1dd">vlist&lt;/span> );
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">vsnprintf&lt;/span>( &lt;span style="color:#ff636f">char&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">buffer&lt;/span>, &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">size_t&lt;/span> &lt;span style="color:#58a1dd">buf_size&lt;/span>, &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">format&lt;/span>, &lt;span style="color:#58a1dd">va_list&lt;/span> &lt;span style="color:#58a1dd">vlist&lt;/span> );
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Â¶ÇÊûúÊàë‰ª¨ÈúÄË¶ÅÊ†ºÂºèÂåñÂ≠óÁ¨¶‰∏≤Êó∂ÔºåÂàôÂèØ‰ª•‰ΩøÁî® &lt;code>sprintf&lt;/code> ÊàñËÄÖÊòØ &lt;code>snprintf&lt;/code> ÔºåÈÇ£‰πàÈóÆÈ¢òÊù•‰∫ÜÔºå&lt;code>snprintf&lt;/code> ÊòØÂ¶Ç‰ΩïÊ†ºÂºèÂåñÁöÑÔºü&lt;/p>
&lt;h2 id="Ê†ºÂºèÂåñÂÜÖÂπï">Ê†ºÂºèÂåñÂÜÖÂπï&lt;/h2>
&lt;p>Ë¶Å‰∫ÜËß£ snprintf ÁöÑÁªÜËäÇÔºåÊàë‰ª¨ÈúÄË¶ÅÂéªÊâæ‰∏Ä‰∏™ libc ‰∫ÜËß£‰∏ÄÁï™ÔºåËøôÈáåÂª∫ËÆÆÊòØ &lt;a href="https://github.com/bminor/musl">musl&lt;/a>Ôºåmusl Âè™ÊîØÊåÅ LinuxÔºåÊ≤°ÊúâÂÉè Glibc ÈÇ£‰πàÂ§öÁöÑÈÅóÁïô‰ª£Á†ÅÔºå‰ª£Á†ÅÊØîËæÉÊï¥Ê¥Å„ÄÇËÄå Visual C++ ÁöÑ ucrt Ê∫êÁ†ÅÂü∫Êú¨‰ΩøÁî® C++ Ê®°ÊùøÁºñÂÜôÔºåÊØîËæÉÂ§çÊùÇÔºå‰∏çÂÆπÊòìÂÄüÊ≠§ÁêÜÊ∏Ö snprintf ÁöÑÁªÜËäÇ„ÄÇÁøªÈòÖ musl snprintf.c Ê∫êÁ†ÅÔºåÊàë‰ª¨ÂèëÁé∞ snprintf Â∞Ü‰ºöË∞ÉÁî® &lt;code>vsnprintf&lt;/code>Ôºå&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// https://github.com/bminor/musl/blob/master/src/stdio/snprintf.c
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#include&lt;/span> &lt;span style="color:#828b96;font-style:italic">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span style="color:#828b96;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#include&lt;/span> &lt;span style="color:#828b96;font-style:italic">&amp;lt;stdarg.h&amp;gt;&lt;/span>&lt;span style="color:#828b96;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">snprintf&lt;/span>(&lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#ff636f">restrict&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#ff636f">size_t&lt;/span> &lt;span style="color:#58a1dd">n&lt;/span>, &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#ff636f">restrict&lt;/span> &lt;span style="color:#58a1dd">fmt&lt;/span>, ...)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">ret&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">va_list&lt;/span> &lt;span style="color:#58a1dd">ap&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">va_start&lt;/span>(&lt;span style="color:#58a1dd">ap&lt;/span>, &lt;span style="color:#58a1dd">fmt&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">ret&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">vsnprintf&lt;/span>(&lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">n&lt;/span>, &lt;span style="color:#58a1dd">fmt&lt;/span>, &lt;span style="color:#58a1dd">ap&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">va_end&lt;/span>(&lt;span style="color:#58a1dd">ap&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">ret&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// https://github.com/bminor/musl/blob/master/src/stdio/vsnprintf.c
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">vsnprintf&lt;/span>(&lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#ff636f">restrict&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#ff636f">size_t&lt;/span> &lt;span style="color:#58a1dd">n&lt;/span>, &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#ff636f">restrict&lt;/span> &lt;span style="color:#58a1dd">fmt&lt;/span>, &lt;span style="color:#58a1dd">va_list&lt;/span> &lt;span style="color:#58a1dd">ap&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">unsigned&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#58a1dd">buf&lt;/span>[&lt;span style="color:#a6be9d">1&lt;/span>];
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#58a1dd">dummy&lt;/span>[&lt;span style="color:#a6be9d">1&lt;/span>];
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">struct&lt;/span> &lt;span style="color:#58a1dd">cookie&lt;/span> &lt;span style="color:#58a1dd">c&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> { .&lt;span style="color:#58a1dd">s&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">n&lt;/span> &lt;span style="color:#ff636f">?&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span> : &lt;span style="color:#58a1dd">dummy&lt;/span>, .&lt;span style="color:#58a1dd">n&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">n&lt;/span> &lt;span style="color:#ff636f">?&lt;/span> &lt;span style="color:#58a1dd">n&lt;/span>&lt;span style="color:#ff636f">-&lt;/span>&lt;span style="color:#a6be9d">1&lt;/span> &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">FILE&lt;/span> &lt;span style="color:#58a1dd">f&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> .&lt;span style="color:#58a1dd">lbf&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">EOF&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> .&lt;span style="color:#58a1dd">write&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">sn_write&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> .&lt;span style="color:#58a1dd">lock&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">-&lt;/span>&lt;span style="color:#a6be9d">1&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> .&lt;span style="color:#58a1dd">buf&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">buf&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> .&lt;span style="color:#58a1dd">cookie&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">c&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">n&lt;/span> &lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#58a1dd">INT_MAX&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">errno&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">EOVERFLOW&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#ff636f">-&lt;/span>&lt;span style="color:#a6be9d">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">c&lt;/span>.&lt;span style="color:#58a1dd">s&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">vfprintf&lt;/span>(&lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">f&lt;/span>, &lt;span style="color:#58a1dd">fmt&lt;/span>, &lt;span style="color:#58a1dd">ap&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Âú® musl ‰πã‰∏≠Ôºåvsnprintf ÂàõÂª∫‰∏Ä‰∏™ FILE ÁªìÊûÑÔºåÁÑ∂ÂêéÊúÄÁªà‰ΩøÁî® vfprintf Ê†ºÂºèÂåñÂ≠óÁ¨¶‰∏≤„ÄÇËøôÈáå‰ΩøÁî®‰∫Ü &lt;code>va_list&lt;/code> &lt;code>va_start&lt;/code> &lt;code>va_end&lt;/code> ÂÆèÔºåËøôÁªÑÂÆèÂ∞ÜÂèòÂèÇÂáΩÊï∞ÁöÑÂèÇÊï∞‰ªéÂáΩÊï∞Ê†à‰∏≠ÂèñÂá∫Êù•Ôºå‰ªéËÄåÂÆûÁé∞‰∫ÜÂèòÂèÇÂáΩÊï∞ÁöÑÂäüËÉΩÔºåÊàë‰ª¨ÂèØ‰ª•ÂèÇËÄÉ Visual C++ Âú® &lt;a href="https://gist.github.com/fcharlie/e2b6a2d578d7b484d0338886ce0db768">&lt;code>vadefs.h&lt;/code>&lt;/a> ‰∏≠ÁöÑÂÆö‰πâ„ÄÇ&lt;/p>
&lt;p>ËÄå va_list Êú¨Ë¥®‰∏äÊòØ‰ªéÂáΩÊï∞ÂèÇÊï∞Ê†à‰∏≠Ëé∑ÂæóÁâπÂÆö‰ΩçÁΩÆÁöÑÂÄº„ÄÇ&lt;/p>
&lt;p>&lt;code>vfprintf&lt;/code> ÂáΩÊï∞ÁöÑÊ∫êÁ†ÅÂú®Ôºö &lt;a href="https://github.com/bminor/musl/blob/master/src/stdio/vfprintf.c">musl: src/stdio/vfprintf.c&lt;/a>„ÄÇÊàë‰ª¨ÂèØ‰ª•ÂèëÁé∞Ê†ºÂºèÂåñËæìÂá∫ÂÆûÈôÖ‰∏äÊòØËß£Êûê &lt;code>format&lt;/code> Â≠óÁ¨¶‰∏≤ÔºåÂú®Ëß£ÊûêÂà∞Âç†‰ΩçÁ¨¶Êó∂Ôºå‰ΩøÁî® &lt;code>va_arg&lt;/code> ÊèêÂèñ &lt;code>va_list&lt;/code> ‰∏≠ÁöÑÂèòÈáèÔºàÊàñËÄÖËΩ¨Âèò‰∏∫ÁâπÂÆöÊ†ºÂºèÂ≠óÁ¨¶‰∏≤ÂêéÔºâÊõøÊç¢Âç†‰ΩçÁ¨¶Ôºå‰ªéËÄåÂÆûÁé∞Ê†ºÂºèÂåñËæìÂá∫ÁöÑÁõÆÁöÑÔºàÊñá‰ª∂ÊàñËÄÖÁºìÂÜ≤Âå∫Ôºâ„ÄÇÊ†ºÂºèÂåñÂç†‰ΩçÁ¨¶‰ª• &lt;code>%&lt;/code> ÂºÄÂ§¥ÔºåÊîØÊåÅÊ†ºÂºèÂåñÁöÑÁ±ªÂûãÂèØ‰ª•ÂèÇËÄÉ &lt;a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/fprintf.html">http://pubs.opengroup.org/onlinepubs/9699919799/functions/fprintf.html&lt;/a>&lt;/p>
&lt;p>‰∫ÜËß£Âà∞Ê†ºÂºèÂåñËæìÂá∫ÁöÑÂéüÁêÜ‰πãÂêéÔºåÊàë‰ª¨ÂèØ‰ª•ÂæàÂÆπÊòìÁöÑÂÆûÁé∞‰∏Ä‰∏™Ê†ºÂºèÂåñÂ≠óÁ¨¶‰∏≤ÊàñËÄÖÊ†ºÂºèÂåñËæìÂá∫ÂáΩÊï∞ÔºåÂú® nginx Ê∫êÁ†Å‰∏≠ÔºåÂ∞±Êúâ‰∏Ä‰∏™ Á±ª‰ººÂÆûÁé∞Ôºö &lt;a href="https://github.com/nginx/nginx/blob/27b3d3dcca5fcc82350a823881f3d06161327b59/src/core/ngx_string.c#L163">&lt;code>ngx_vslprintf&lt;/code>&lt;/a> ÔºåËøô‰∏™‰ª£Á†ÅÊØîËæÉÁÆÄÂçïÊØîËæÉÂÆπÊòìÁßªÊ§ç„ÄÇ&lt;/p>
&lt;h2 id="c-style-Ê†ºÂºèÂåñÁöÑÁº∫Èô∑">C-Style Ê†ºÂºèÂåñÁöÑÁº∫Èô∑&lt;/h2>
&lt;p>‰∏äËø∞Ê†ºÂºèÂåñ‰ΩøÁî®ÂèòÂèÇÂáΩÊï∞Ôºå‰ΩøÁî® va_list Ëé∑ÂæóÂèÇÊï∞ÂÄºÔºåËøôÁßç‰ΩøÁî® va_list ÁöÑÂáΩÊï∞Âú® C++ ‰∏≠ÊòØ‰∏çË¢´Êé®ËçêÁöÑ &lt;a href="https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#F-varargs">F.55: Don&amp;rsquo;t use va_arg arguments&lt;/a>„ÄÇÂΩìÁî®Êà∑ÁºñÁ†ÅÊó∂ÔºåÂèØËÉΩÊòØÁ®ãÂ∫èÂëòÁñèÂøΩÊàñËÄÖÊïÖÊÑèÔºå‰æùËµñ va_list ÁöÑ‰ª£Á†ÅÂæàÂÆπÊòìÁî±‰∫éÁ±ªÂûã‰∏çÂåπÈÖçÔºåÂèÇÊï∞‰∏™Êï∞‰∏çÂåπÈÖçËÄåÈÄ†ÊàêÊ†àÊ∫¢Âá∫„ÄÇÂØºËá¥ÂÆâÂÖ®ÊºèÊ¥ûÊàñËÄÖÊòØÁ®ãÂ∫èÂ¥©Ê∫É„ÄÇ‰ª•‰∏ã‰ª£Á†ÅÂèØËÉΩ‰ºöÂØºËá¥Á®ãÂ∫èÂ¥©Ê∫ÉÔºåÂπ∂‰∏îÁºñËØëÂô®‰πü‰∏ç‰ºöË≠¶ÂëäÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#include&lt;/span> &lt;span style="color:#828b96;font-style:italic">&amp;lt;string_view&amp;gt;&lt;/span>&lt;span style="color:#828b96;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#include&lt;/span> &lt;span style="color:#828b96;font-style:italic">&amp;lt;cstdio&amp;gt;&lt;/span>&lt;span style="color:#828b96;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#include&lt;/span> &lt;span style="color:#828b96;font-style:italic">&amp;lt;cstdarg&amp;gt;&lt;/span>&lt;span style="color:#828b96;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">dump&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">fmt&lt;/span>,...){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">ret&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">va_list&lt;/span> &lt;span style="color:#58a1dd">ap&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">va_start&lt;/span>(&lt;span style="color:#58a1dd">ap&lt;/span>,&lt;span style="color:#58a1dd">fmt&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">vfprintf&lt;/span>(&lt;span style="color:#58a1dd">stderr&lt;/span>,&lt;span style="color:#58a1dd">fmt&lt;/span>,&lt;span style="color:#58a1dd">ap&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">va_end&lt;/span>(&lt;span style="color:#58a1dd">ap&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">ret&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">main&lt;/span>(){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string_view&lt;/span> &lt;span style="color:#58a1dd">name&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;Tony Stark&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">dump&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;hello %s&lt;/span>&lt;span style="color:#a6be9d">\n&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>,&lt;span style="color:#58a1dd">name&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÁºñËØëÂô®ÁöÑÊûÑÂª∫‰ø°ÊÅØÂ¶Ç‰∏ã:&lt;/p>
&lt;pre tabindex="0">&lt;code>‰ΩøÁî®ÂÜÖÂª∫ specs„ÄÇ
COLLECT_GCC=/opt/gcc/bin/g++
COLLECT_LTO_WRAPPER=/opt/gcc/libexec/gcc/x86_64-linux-gnu/9.0.1/lto-wrapper
ÁõÆÊ†áÔºöx86_64-linux-gnu
ÈÖçÁΩÆ‰∏∫Ôºö../configure --with-pkgversion=Baslat.Inc --prefix=/opt/gcc --enable-shared --enable-linker-build-id --without-included-gettext --enable-threads=posix --enable-checking=release --enable-languages=c,c++ --disable-multilib --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-libmpx --enable-plugin --with-system-zlib --with-abi=m64 --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Á∫øÁ®ãÊ®°ÂûãÔºöposix
gcc ÁâàÊú¨ 9.0.1 20190426 (prerelease) (Baslat.Inc)
&lt;/code>&lt;/pre>&lt;p>ËøêË°åÁºñËØëÂô®ÂëΩ‰ª§Ôºö&lt;/p>
&lt;blockquote>
&lt;p>/opt/gcc/bin/g++ -fsanitize=address -fno-omit-frame-pointer fuck.cc -std=c++17&lt;/p>
&lt;/blockquote>
&lt;p>ËøêË°åÁ®ãÂ∫èÔºö&lt;/p>
&lt;blockquote>
&lt;p>./a.out&lt;/p>
&lt;/blockquote>
&lt;p>Âú∞ÂùÄÊ∂àÊØíÂâÇÊä•ÂëäÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;pre tabindex="0">&lt;code>AddressSanitizer:DEADLYSIGNAL
=================================================================
==16509==ERROR: AddressSanitizer: SEGV on unknown address 0x00000000000a (pc 0x7fc137bc3af2 bp 0x7ffffbf14ea0 sp 0x7ffffbf145c8 T0)
==16509==The signal is caused by a READ memory access.
==16509==Hint: address points to the zero page.
#0 0x7fc137bc3af1 (/usr/lib/x86_64-linux-gnu/libasan.so.5+0x109af1)
#1 0x7fc137b0e61c (/usr/lib/x86_64-linux-gnu/libasan.so.5+0x5461c)
#2 0x7fc137b0efb4 in __interceptor_vfprintf (/usr/lib/x86_64-linux-gnu/libasan.so.5+0x54fb4)
#3 0x400cf0 in dump(char const*, ...) (/tmp/a.out+0x400cf0)
#4 0x400e06 in main (/tmp/a.out+0x400e06)
#5 0x7fc136dabb96 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x21b96)
#6 0x400b09 in _start (/tmp/a.out+0x400b09)
AddressSanitizer can not provide additional info.
SUMMARY: AddressSanitizer: SEGV (/usr/lib/x86_64-linux-gnu/libasan.so.5+0x109af1)
==16509==ABORTING
&lt;/code>&lt;/pre>&lt;p>Âá∫Áé∞ÈóÆÈ¢òÂÖ∂ÂÆûÂæàÂÆπÊòìÁêÜËß£ÔºåÁî±‰∫é std::string_view ÁöÑÁªìÊûÑÂ§ßËá¥Â¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">template&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">class&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>, &lt;span style="color:#ff636f">class&lt;/span> &lt;span style="color:#58a1dd">traits&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">char_traits&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">class&lt;/span> &lt;span style="color:#58a1dd">basic_string_view&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">public&lt;/span>&lt;span style="color:#ff636f">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// types
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">typedef&lt;/span> &lt;span style="color:#58a1dd">traits&lt;/span> &lt;span style="color:#58a1dd">traits_type&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">typedef&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span> &lt;span style="color:#58a1dd">value_type&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">typedef&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">pointer&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">typedef&lt;/span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">const_pointer&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">typedef&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">&amp;amp;&lt;/span> &lt;span style="color:#58a1dd">reference&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">typedef&lt;/span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">&amp;amp;&lt;/span> &lt;span style="color:#58a1dd">const_reference&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">typedef&lt;/span> &lt;span style="color:#58a1dd">implementation&lt;/span>&lt;span style="color:#ff636f">-&lt;/span>&lt;span style="color:#58a1dd">defined&lt;/span> &lt;span style="color:#58a1dd">const_iterator&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">typedef&lt;/span> &lt;span style="color:#58a1dd">const_iterator&lt;/span> &lt;span style="color:#58a1dd">iterator&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">typedef&lt;/span> &lt;span style="color:#58a1dd">reverse_iterator&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">const_iterator&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#58a1dd">const_reverse_iterator&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">typedef&lt;/span> &lt;span style="color:#58a1dd">const_reverse_iterator&lt;/span> &lt;span style="color:#58a1dd">reverse_iterator&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">typedef&lt;/span> &lt;span style="color:#58a1dd">size_t&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">typedef&lt;/span> &lt;span style="color:#58a1dd">ptrdiff_t&lt;/span> &lt;span style="color:#58a1dd">difference_type&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">static&lt;/span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">npos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span>(&lt;span style="color:#ff636f">-&lt;/span>&lt;span style="color:#a6be9d">1&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// 7.3, basic_string_view constructors and assignment operators
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">basic_string_view&lt;/span>() &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">basic_string_view&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">basic_string_view&lt;/span>&lt;span style="color:#ff636f">&amp;amp;&lt;/span>) &lt;span style="color:#ff636f">noexcept&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">default&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">basic_string_view&lt;/span>&lt;span style="color:#ff636f">&amp;amp;&lt;/span> &lt;span style="color:#ff636f">operator&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">basic_string_view&lt;/span>&lt;span style="color:#ff636f">&amp;amp;&lt;/span>) &lt;span style="color:#ff636f">noexcept&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">default&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">template&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">class&lt;/span> &lt;span style="color:#58a1dd">Allocator&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">basic_string_view&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">str&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">basic_string_view&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">str&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">len&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// 7.4, basic_string_view iterator support
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">const_iterator&lt;/span> &lt;span style="color:#58a1dd">begin&lt;/span>() &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">const_iterator&lt;/span> &lt;span style="color:#58a1dd">end&lt;/span>() &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">const_iterator&lt;/span> &lt;span style="color:#58a1dd">cbegin&lt;/span>() &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">const_iterator&lt;/span> &lt;span style="color:#58a1dd">cend&lt;/span>() &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">const_reverse_iterator&lt;/span> &lt;span style="color:#58a1dd">rbegin&lt;/span>() &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">const_reverse_iterator&lt;/span> &lt;span style="color:#58a1dd">rend&lt;/span>() &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">const_reverse_iterator&lt;/span> &lt;span style="color:#58a1dd">crbegin&lt;/span>() &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">const_reverse_iterator&lt;/span> &lt;span style="color:#58a1dd">crend&lt;/span>() &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// 7.5, basic_string_view capacity
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">size&lt;/span>() &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">length&lt;/span>() &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">max_size&lt;/span>() &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#ff636f">bool&lt;/span> &lt;span style="color:#58a1dd">empty&lt;/span>() &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// 7.6, basic_string_view element access
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">const_reference&lt;/span> &lt;span style="color:#ff636f">operator&lt;/span>[](&lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">const_reference&lt;/span> &lt;span style="color:#58a1dd">at&lt;/span>(&lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">const_reference&lt;/span> &lt;span style="color:#58a1dd">front&lt;/span>() &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">const_reference&lt;/span> &lt;span style="color:#58a1dd">back&lt;/span>() &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">const_pointer&lt;/span> &lt;span style="color:#58a1dd">data&lt;/span>() &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// 7.7, basic_string_view modifiers
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#ff636f">void&lt;/span> &lt;span style="color:#58a1dd">remove_prefix&lt;/span>(&lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">n&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#ff636f">void&lt;/span> &lt;span style="color:#58a1dd">remove_suffix&lt;/span>(&lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">n&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#ff636f">void&lt;/span> &lt;span style="color:#58a1dd">swap&lt;/span>(&lt;span style="color:#58a1dd">basic_string_view&lt;/span>&lt;span style="color:#ff636f">&amp;amp;&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>) &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">copy&lt;/span>(&lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">n&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">basic_string_view&lt;/span> &lt;span style="color:#58a1dd">substr&lt;/span>(&lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">n&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">npos&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">compare&lt;/span>(&lt;span style="color:#58a1dd">basic_string_view&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">compare&lt;/span>(&lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos1&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">n1&lt;/span>, &lt;span style="color:#58a1dd">basic_string_view&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">compare&lt;/span>(&lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos1&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">n1&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">basic_string_view&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos2&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">n2&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">compare&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">compare&lt;/span>(&lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos1&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">n1&lt;/span>, &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">compare&lt;/span>(&lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos1&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">n1&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">n2&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">find&lt;/span>(&lt;span style="color:#58a1dd">basic_string_view&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">find&lt;/span>(&lt;span style="color:#58a1dd">charT&lt;/span> &lt;span style="color:#58a1dd">c&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">find&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">n&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">find&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">rfind&lt;/span>(&lt;span style="color:#58a1dd">basic_string_view&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">npos&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">rfind&lt;/span>(&lt;span style="color:#58a1dd">charT&lt;/span> &lt;span style="color:#58a1dd">c&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">npos&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">rfind&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">n&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">rfind&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">npos&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">find_first_of&lt;/span>(&lt;span style="color:#58a1dd">basic_string_view&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">find_first_of&lt;/span>(&lt;span style="color:#58a1dd">charT&lt;/span> &lt;span style="color:#58a1dd">c&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">find_first_of&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">n&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">find_first_of&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">find_last_of&lt;/span>(&lt;span style="color:#58a1dd">basic_string_view&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">npos&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">find_last_of&lt;/span>(&lt;span style="color:#58a1dd">charT&lt;/span> &lt;span style="color:#58a1dd">c&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">npos&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">find_last_of&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">n&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">find_last_of&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">npos&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">find_first_not_of&lt;/span>(&lt;span style="color:#58a1dd">basic_string_view&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">find_first_not_of&lt;/span>(&lt;span style="color:#58a1dd">charT&lt;/span> &lt;span style="color:#58a1dd">c&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">find_first_not_of&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">n&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">find_first_not_of&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">find_last_not_of&lt;/span>(&lt;span style="color:#58a1dd">basic_string_view&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">npos&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">find_last_not_of&lt;/span>(&lt;span style="color:#58a1dd">charT&lt;/span> &lt;span style="color:#58a1dd">c&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">npos&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">find_last_not_of&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">n&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">find_last_not_of&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">pos&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">npos&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#ff636f">bool&lt;/span> &lt;span style="color:#58a1dd">starts_with&lt;/span>(&lt;span style="color:#58a1dd">basic_string_view&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>; &lt;span style="color:#828b96;font-style:italic">// C++2a
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#ff636f">bool&lt;/span> &lt;span style="color:#58a1dd">starts_with&lt;/span>(&lt;span style="color:#58a1dd">charT&lt;/span> &lt;span style="color:#58a1dd">c&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>; &lt;span style="color:#828b96;font-style:italic">// C++2a
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#ff636f">bool&lt;/span> &lt;span style="color:#58a1dd">starts_with&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>; &lt;span style="color:#828b96;font-style:italic">// C++2a
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#ff636f">bool&lt;/span> &lt;span style="color:#58a1dd">ends_with&lt;/span>(&lt;span style="color:#58a1dd">basic_string_view&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>; &lt;span style="color:#828b96;font-style:italic">// C++2a
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#ff636f">bool&lt;/span> &lt;span style="color:#58a1dd">ends_with&lt;/span>(&lt;span style="color:#58a1dd">charT&lt;/span> &lt;span style="color:#58a1dd">c&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">noexcept&lt;/span>; &lt;span style="color:#828b96;font-style:italic">// C++2a
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#ff636f">bool&lt;/span> &lt;span style="color:#58a1dd">ends_with&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">charT&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>) &lt;span style="color:#ff636f">const&lt;/span>; &lt;span style="color:#828b96;font-style:italic">// C++2a
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">private&lt;/span>&lt;span style="color:#ff636f">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">const_pointer&lt;/span> &lt;span style="color:#58a1dd">data_&lt;/span>; &lt;span style="color:#828b96;font-style:italic">// exposition only
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">size_type&lt;/span> &lt;span style="color:#58a1dd">size_&lt;/span>; &lt;span style="color:#828b96;font-style:italic">// exposition only
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> };
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Áî±‰∫é string_view ÂÄºË¢´ÈîôËØØÁöÑËΩ¨Âèò‰∏∫ &lt;code>char *&lt;/code>ÔºåËÄå C-Style ÁöÑÂ≠óÁ¨¶‰∏≤ÊòØ &lt;code>null-terminated string&lt;/code>ÔºåÂú®Â§ÑÁêÜ &lt;code>%s&lt;/code> ÁöÑÊó∂ÂÄôÊó†Ê≥ïÊ≠£Â∏∏Ëß£ÊûêÂà∞ÁªàÊ≠¢Â≠óÁ¨¶ÔºåÂá∫Áé∞Ê∫¢Âá∫ÁÑ∂ÂêéÂØºËá¥Á®ãÂ∫èÂ¥©Ê∫ÉÔºåÂêåÊ†∑ÔºåÂ¶ÇÊûúÁ±ªÂûãÂÆΩÂ∫¶‰∏ç‰∏ÄËá¥ÔºåÊØîÂ¶Ç format ‰∏≠ÈúÄË¶Å &lt;code>%lld&lt;/code>ÔºåËÄåËæìÂÖ•‰∏∫ &lt;code>int&lt;/code> ÂêåÊ†∑ÂÆπÊòìÂá∫Áé∞ÈóÆÈ¢òÔºå‰ΩÜËøôÁßçÈóÆÈ¢òÂèØËÉΩÊõ¥Â§öÁöÑÈ¢ÑÊúüÁªìÊûú‰∏ç‰∏ÄËá¥„ÄÇ„ÄÇ&lt;/p>
&lt;p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÂ¶ÇÊûúÂ∞Ü &lt;code>std::string_view&lt;/code> ÊîπÊàê &lt;code>std::string&lt;/code>, clang 8.0.1 Âàô‰ºöÊä•Âëä std::string ‰∏çÊòØ POD Á±ªÂûãÁöÑÈîôËØØÔºö&lt;/p>
&lt;pre tabindex="0">&lt;code>fuck2.cc:16:21: error: cannot pass object of non-trivial type &amp;#39;std::string&amp;#39; (aka &amp;#39;basic_string&amp;lt;char&amp;gt;&amp;#39;) through variadic
function; call will abort at runtime [-Wnon-pod-varargs]
dump(&amp;#34;hello %s\n&amp;#34;,name);
^
1 error generated.
&lt;/code>&lt;/pre>&lt;h2 id="ÂÆâÂÖ®Ê†ºÂºèÂåñËß£ÂÜ≥ÊñπÊ°à">ÂÆâÂÖ®Ê†ºÂºèÂåñËß£ÂÜ≥ÊñπÊ°à&lt;/h2>
&lt;h3 id="ÁºñËØëÂô®ÁöÑÂèÇÊï∞ÂåπÈÖçÊ£ÄÊü•">ÁºñËØëÂô®ÁöÑÂèÇÊï∞ÂåπÈÖçÊ£ÄÊü•&lt;/h3>
&lt;p>‰∏∫‰∫ÜÂáèÂ∞ë‰∏äÈù¢ÈîôËØØÁöÑÂèëÁîüÔºåÂºÄÂèëËÄÖÂ¢ûÂä†‰∫ÜÂæàÂ§öËß£ÂÜ≥ÊñπÊ°àÔºåÊØîÂ¶ÇÔºåÂØπ‰∫é C ÊàñËÄÖ C++ ËÄåË®ÄÔºåÂèØ‰ª•‰ΩøÁî®ÁâπÂÆöÁöÑ &lt;code>Attributes&lt;/code> ÈôêÂà∂ÂáΩÊï∞ÁöÑÂ±ûÊÄßÔºåÂΩìÊ†ºÂºè‰∏çÂåπÈÖçÊó∂ÔºåÁºñËØëÂô®‰ºöÂèëÂá∫Ë≠¶Âëä„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#ifdef __GNUC__
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">void&lt;/span> &lt;span style="color:#58a1dd">log_unlocked&lt;/span>(&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">level&lt;/span>, &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">fmt&lt;/span>, ...)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">__attribute__&lt;/span>((&lt;span style="color:#58a1dd">__format__&lt;/span>(&lt;span style="color:#58a1dd">__printf__&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">3&lt;/span>)));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#else
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">void&lt;/span> &lt;span style="color:#58a1dd">log_unlocked&lt;/span>(&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">level&lt;/span>, &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">fmt&lt;/span>, ...);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>‰ΩÜËøôÁßçÊñπÊ°àÂèóÈôê‰∫éÁºñËØëÂô®Ôºå‰∏çÊòØ‰∏Ä‰∏™ÊôÆÈÅçÊñπÊ°à„ÄÇ&lt;a href="https://clang.llvm.org/docs/AttributeReference.html#format">Clang&lt;/a> ‰øùÊåÅ‰∫ÜÂØπ GCC ÁöÑÂÖºÂÆπÔºåÂèØ‰ª•‰ΩøÁî®‰∏äËø∞ &lt;code>__attribute__&lt;/code>„ÄÇËÄå MSVC ÂàôÂèØ‰ª•‰ΩøÁî® &lt;a href="https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2010/ms235402(v=vs.100)">SAL: &lt;code>_Printf_format_string_&lt;/code>&lt;/a>„ÄÇ&lt;/p>
&lt;h3 id="ÂèòÂèÇÂáΩÊï∞Ê®°ÊùøÁöÑËæÖÂä©">ÂèòÂèÇÂáΩÊï∞Ê®°ÊùøÁöÑËæÖÂä©&lt;/h3>
&lt;p>Â¶ÇÊûúË¶ÅÂú® C++ ÂΩì‰∏≠‰ΩøÁî®Á±ª‰ººÁöÑÊ†ºÂºèÂåñÂáΩÊï∞ÊñπÊ°àÔºåÂèØ‰ª•ÂèòÂèÇÂáΩÊï∞Ê®°ÊùøÂåÖË£ÖÔºåcppwinrt ÁöÑ‰ΩúËÄÖ Kenny Kerr Â∞±Êúâ‰∏ÄÁØáÊñáÁ´†ÂëäËØâ‰∫∫‰ª¨ÊîπÊÄé‰πàÂÅöÔºö &lt;a href="https://msdn.microsoft.com/en-us/magazine/dn913181.aspx">Windows with C++ - Using Printf with Modern C++&lt;/a>„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">template&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">typename&lt;/span> &lt;span style="color:#58a1dd">T&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#58a1dd">T&lt;/span> &lt;span style="color:#58a1dd">Argument&lt;/span>(&lt;span style="color:#58a1dd">T&lt;/span> &lt;span style="color:#58a1dd">value&lt;/span>) &lt;span style="color:#ff636f">noexcept&lt;/span> { &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">value&lt;/span>; }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">template&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">typename&lt;/span> &lt;span style="color:#58a1dd">T&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">T&lt;/span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">Argument&lt;/span>(&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">basic_string&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">T&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">value&lt;/span>) &lt;span style="color:#ff636f">noexcept&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">value&lt;/span>.&lt;span style="color:#58a1dd">c_str&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">template&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">typename&lt;/span>... &lt;span style="color:#58a1dd">Args&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">StringPrint&lt;/span>(&lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">buffer&lt;/span>, &lt;span style="color:#58a1dd">size_t&lt;/span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">bufferCount&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">format&lt;/span>, &lt;span style="color:#58a1dd">Args&lt;/span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&lt;/span>... &lt;span style="color:#58a1dd">args&lt;/span>) &lt;span style="color:#ff636f">noexcept&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">result&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">snprintf&lt;/span>(&lt;span style="color:#58a1dd">buffer&lt;/span>, &lt;span style="color:#58a1dd">bufferCount&lt;/span>, &lt;span style="color:#58a1dd">format&lt;/span>, &lt;span style="color:#58a1dd">Argument&lt;/span>(&lt;span style="color:#58a1dd">args&lt;/span>)...);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">result&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">template&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">typename&lt;/span>... &lt;span style="color:#58a1dd">Args&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string&lt;/span> &lt;span style="color:#58a1dd">StrFormat&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">format&lt;/span>, &lt;span style="color:#58a1dd">Args&lt;/span>... &lt;span style="color:#58a1dd">args&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string&lt;/span> &lt;span style="color:#58a1dd">buffer&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">size_t&lt;/span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">size&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">StringPrint&lt;/span>(&lt;span style="color:#ff636f">nullptr&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#58a1dd">format&lt;/span>, &lt;span style="color:#58a1dd">args&lt;/span>...);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">buffer&lt;/span>.&lt;span style="color:#58a1dd">resize&lt;/span>(&lt;span style="color:#58a1dd">size&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">StringPrint&lt;/span>(&lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">buffer&lt;/span>[&lt;span style="color:#a6be9d">0&lt;/span>], &lt;span style="color:#58a1dd">buffer&lt;/span>.&lt;span style="color:#58a1dd">size&lt;/span>() &lt;span style="color:#ff636f">+&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#58a1dd">format&lt;/span>, &lt;span style="color:#58a1dd">args&lt;/span>...);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">buffer&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Âú®Ê†ºÂºèÂåñÊó∂Â∞Ü &lt;code>std::string&lt;/code> ËΩ¨Âèò‰∏∫‰∫Ü &lt;code>const char *&lt;/code>ÔºåËøôÁßçÊñπÊ°àÁöÑÁº∫Èô∑Êúâ‰∏§Â§ÑÔºåÁ¨¨‰∏Ä &lt;code>std::string&lt;/code> ÊòØÂèØ‰ª•Â≠òÂú® &lt;code>\0&lt;/code> ËøôÊ†∑ÁöÑÂ≠óÁ¨¶ÁöÑÔºå‰ΩÜÊòØÂú®ËøôÈáåÂç¥Ë¢´Êà™Êñ≠ÔºåÁ¨¨‰∫åÔºå&lt;code>std::string&lt;/code> ÈúÄË¶ÅÂÜçÊ¨°ËÆ°ÁÆóÈïøÂ∫¶„ÄÇ&lt;/p>
&lt;h2 id="Áé∞‰ª£-c-Ê†ºÂºèÂåñÂ∫ì">Áé∞‰ª£ C++ Ê†ºÂºèÂåñÂ∫ì&lt;/h2>
&lt;p>Êó¢ÁÑ∂ C-Style ÁöÑÊ†ºÂºèÂåñÊñπÊ°àÁº∫Èô∑ÈÇ£‰πàÂ§öÔºåÈÇ£‰πà C++ ÂºÄÂèëËÄÖ‰ª¨‰πü‰ºö‰∏çÈÅó‰ΩôÂäõÁöÑÂéªÈÄ†ËΩÆÂ≠êÔºåÂÆûÁé∞Ëá™Â∑±ÁöÑÁõÆÊ†áÁöÑÔºåÊó©ÊúüÊØîÂ¶ÇÊàëÂàöÂ≠¶ C++ ÈÇ£‰ºöÔºåÈÉΩÊòØ &lt;code>iostream&lt;/code> ÂÆ∂ÊóèÔºåÂ≠óÁ¨¶‰∏≤Ê†ºÂºèÂåñÂèØ‰ª•‰ΩøÁî® &lt;code>stringstream&lt;/code>Ôºå&lt;code>iostream&lt;/code> ËøôÁ±ªÊñπÊ°à‰∏ÄÁõ¥Ë¢´ËßÜ‰∏∫Á≥üÁ≥ïÁöÑËÆæËÆ°Ôºå‰∏ÄÊù•ÁªßÊâøÂ§çÊùÇÔºå‰∫åÊù•ÊïàÁéá‰Ωé„ÄÇÁâπÂà´Âú® C++11 ÂèòÂèÇÊ®°ÊùøÁ≠âÁâπÊÄßÂá∫Êù•ÂêéÔºåÈ•±ÂèóÈÑôËßÜÔºåÂõ†Ê≠§‰πü‰∏çÊòØÂª∫ËÆÆÁöÑÊ†ºÂºèÂåñÊñπÊ°à„ÄÇÁé∞Âú® C++20 ÈÉΩÂø´ÂèëÂ∏É‰∫ÜÔºå‰πüÊ∂åÁé∞‰∫Ü‰∏Ä‰∫õÊõ¥Â•ΩÁöÑÊñπÊ°àÔºåÂ•ΩÁöÑÊ†ºÂºèÂåñÂ∫ìÊúâÁßØÊûÅÂÖ•Ê†áÂáÜÁöÑ &lt;a href="https://github.com/fmtlib/fmt">fmtlib&lt;/a>„ÄÇËøòÊúâ Facebook ÁöÑ C++ Ê†áÂáÜÂ∫ìË°•ÂÖÖ &lt;a href="https://github.com/facebook/folly">folly&lt;/a> ‰πüÊúâ‰∏Ä‰∏™ &lt;code>format&lt;/code> ÂÆûÁé∞„ÄÇÂú® Google ÈáåÈù¢ÔºåÂæàÂ§öÈ°πÁõÆ‰ΩøÁî®‰∫Ü C++Ôºå‰ªñ‰ª¨‰πüÁßØÁ¥Ø‰∫Ü‰∏Ä‰∫õ C++ ÁªÑ‰ª∂ÔºåÂêéÊù•ÂºÄÊ∫ê‰∫Ü &lt;a href="https://github.com/abseil/abseil-cpp">Abseil&lt;/a>ÔºåAbseil ‰∏≠‰πüÊúâÂ≠óÁ¨¶‰∏≤Ê†ºÂºèÂåñÂáΩÊï∞ &lt;code>absl::StrFormat&lt;/code>Ôºå&lt;code>absl::StrAppendFormat&lt;/code> ÔºåÂΩìÁÑ∂ËøòÊúâ‰∏Ä‰∫õÂÆûÁé∞ÊØîËæÉÊÖ¢Ôºå‰ª£Á†Å‰∏çÂ§™Âπ≤ÂáÄÁöÑÔºåËøôÈáå‰πüÂ∞±‰∏çÂ§öËØ¥‰∫Ü„ÄÇ&lt;/p>
&lt;h3 id="ÁßØÊûÅÂÖ•Ê†áÂáÜÁöÑ-fmtlib">ÁßØÊûÅÂÖ•Ê†áÂáÜÁöÑ fmtlib&lt;/h3>
&lt;p>fmtlib ÁõÆÂâçÊòØÂÜ≤ÁùÄËøõÂÖ• C++ Ê†áÂáÜÂéªÁöÑÔºåÂÆÉÊîØÊåÅ‰∏§ÁßçÈ£éÊ†ºÔºå‰∏Ä‰∏™ÊòØÁ±ª‰ºº python ÁöÑÈ£éÊ†ºÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">fmt&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">format&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;The answer is {}.&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">42&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">fmt&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">print&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;I&amp;#39;d rather be {1} than {0}.&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;right&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;happy&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ËøôÁßçÈ£éÊ†ºËøòÂèØ‰ª•ÈÄöËøáÈáçËΩΩ &lt;code>format_to&lt;/code> ÂáΩÊï∞Ôºå ËæìÂá∫ÁâπÂÆöÁöÑÂØπË±°„ÄÇ&lt;/p>
&lt;p>fmtlib ËøòÊîØÊåÅ printf ÁöÑÊ†ºÂºèÂåñÈ£éÊ†ºÔºå‰ΩøÁî®ÂèòÂèÇÊ®°ÊùøÂ±ïÂºÄÔºåÊòØÊ†ºÂºèÂåñÂÆâÂÖ®ÁöÑ„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string&lt;/span> &lt;span style="color:#58a1dd">message&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">fmt&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">sprintf&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;The answer is %d&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">42&lt;/span>);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÂΩìÁ±ªÂûã‰∏çÂåπÈÖçÊó∂ fmtlib ‰ºöÊäõÂá∫ÂºÇÂ∏∏ÔºåËøôÊòØ‰∏ÄÁßçËøêË°åÊó∂Ë°å‰∏∫„ÄÇÂè¶Â§ñ fmtlib ËøòÊîØÊåÅ &lt;code>wchar_t&lt;/code>ÔºåËøôÂú® &lt;code>Windows&lt;/code> Á≥ªÁªü‰∏≠ÊØîËæÉÈáçË¶Å„ÄÇÂú®Ê†ºÂºèÂåñÊµÆÁÇπÁ±ªÂûãÊó∂ÔºåÂèØËÉΩ‰ºöÂõûÈÄÄÂà∞ &lt;code>snprintf&lt;/code>„ÄÇ&lt;/p>
&lt;h3 id="facebook-folly-format">Facebook folly format&lt;/h3>
&lt;p>&lt;a href="https://github.com/facebook/folly/blob/master/folly/docs/Format.md">Folly format&lt;/a> ÁöÑÈ£éÊ†ºÁ±ª‰ºº‰∫é python ÁöÑÊ†ºÂºèÂåñÈ£éÊ†ºÔºå‰∏é fmtlib ÁöÑÁ¨¨‰∏ÄÁßç‰∏ÄËá¥„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">using&lt;/span> &lt;span style="color:#58a1dd">folly&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">format&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">using&lt;/span> &lt;span style="color:#58a1dd">folly&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">sformat&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">using&lt;/span> &lt;span style="color:#58a1dd">folly&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">vformat&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">using&lt;/span> &lt;span style="color:#58a1dd">folly&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">svformat&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// Objects produced by format() can be streamed without creating
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// an intermediary string; {} yields the next argument using default
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// formatting.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">cout&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&amp;lt;&lt;/span> &lt;span style="color:#58a1dd">format&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;The answers are {} and {}&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">23&lt;/span>, &lt;span style="color:#a6be9d">42&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// =&amp;gt; &amp;#34;The answers are 23 and 42&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// If you just want the string, though, you&amp;#39;re covered.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string&lt;/span> &lt;span style="color:#58a1dd">result&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">sformat&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;The answers are {} and {}&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">23&lt;/span>, &lt;span style="color:#a6be9d">42&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// =&amp;gt; &amp;#34;The answers are 23 and 42&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// Arguments can be referenced out of order, even multiple times
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">cout&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&amp;lt;&lt;/span> &lt;span style="color:#58a1dd">format&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;The answers are {1}, {0}, and {1} again&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">23&lt;/span>, &lt;span style="color:#a6be9d">42&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// =&amp;gt; &amp;#34;The answers are 42, 23, and 42 again&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// It&amp;#39;s perfectly fine to not reference all arguments
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">cout&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&amp;lt;&lt;/span> &lt;span style="color:#58a1dd">format&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;The only answer is {1}&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">23&lt;/span>, &lt;span style="color:#a6be9d">42&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// =&amp;gt; &amp;#34;The only answer is 42&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// Values can be extracted from indexable containers
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// (random-access sequences and integral-keyed maps), and also from
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// string-keyed maps
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">vector&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">int&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#58a1dd">v&lt;/span> {&lt;span style="color:#a6be9d">23&lt;/span>, &lt;span style="color:#a6be9d">42&lt;/span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">map&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string&lt;/span>, &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#58a1dd">m&lt;/span> { {&lt;span style="color:#a6be9d">&amp;#34;what&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;answer&amp;#34;&lt;/span>} };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">cout&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&amp;lt;&lt;/span> &lt;span style="color:#58a1dd">format&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;The only {1[what]} is {0[1]}&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">v&lt;/span>, &lt;span style="color:#58a1dd">m&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// =&amp;gt; &amp;#34;The only answer is 42&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// If you only have one container argument, vformat makes the syntax simpler
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">map&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string&lt;/span>, &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#58a1dd">m&lt;/span> { {&lt;span style="color:#a6be9d">&amp;#34;what&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;answer&amp;#34;&lt;/span>}, {&lt;span style="color:#a6be9d">&amp;#34;value&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;42&amp;#34;&lt;/span>} };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">cout&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&amp;lt;&lt;/span> &lt;span style="color:#58a1dd">vformat&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;The only {what} is {value}&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">m&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// =&amp;gt; &amp;#34;The only answer is 42&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// same as
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">cout&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&amp;lt;&lt;/span> &lt;span style="color:#58a1dd">format&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;The only {0[what]} is {0[value]}&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">m&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// =&amp;gt; &amp;#34;The only answer is 42&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// And if you just want the string,
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string&lt;/span> &lt;span style="color:#58a1dd">result&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">svformat&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;The only {what} is {value}&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">m&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// =&amp;gt; &amp;#34;The only answer is 42&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string&lt;/span> &lt;span style="color:#58a1dd">result&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">sformat&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;The only {0[what]} is {0[value]}&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">m&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// =&amp;gt; &amp;#34;The only answer is 42&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// {} works for vformat too
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">vector&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">int&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#58a1dd">v&lt;/span> {&lt;span style="color:#a6be9d">42&lt;/span>, &lt;span style="color:#a6be9d">23&lt;/span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">cout&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&amp;lt;&lt;/span> &lt;span style="color:#58a1dd">vformat&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;{} {}&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">v&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// =&amp;gt; &amp;#34;42 23&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// format and vformat work with pairs and tuples
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">tuple&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">int&lt;/span>, &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string&lt;/span>, &lt;span style="color:#ff636f">int&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#58a1dd">t&lt;/span> {&lt;span style="color:#a6be9d">42&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;hello&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">23&lt;/span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">cout&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&amp;lt;&lt;/span> &lt;span style="color:#58a1dd">vformat&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;{0} {2} {1}&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">t&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// =&amp;gt; &amp;#34;42 23 hello&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// Format supports width, alignment, arbitrary fill, and various
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// format specifiers, with meanings similar to printf
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// &amp;#34;X&amp;lt;10&amp;#34;: fill with &amp;#39;X&amp;#39;, left-align (&amp;#39;&amp;lt;&amp;#39;), width 10
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">cout&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&amp;lt;&lt;/span> &lt;span style="color:#58a1dd">format&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;{:X&amp;lt;10} {}&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;hello&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;world&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// =&amp;gt; &amp;#34;helloXXXXX world&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// Field width may be a runtime value rather than part of the format string
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">x&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">6&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">cout&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&amp;lt;&lt;/span> &lt;span style="color:#58a1dd">format&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;{:-^*}&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">x&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;hi&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// =&amp;gt; &amp;#34;--hi--&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// Explicit arguments work with dynamic field width, as long as indexes are
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// given for both the value and the field width.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">cout&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&amp;lt;&lt;/span> &lt;span style="color:#58a1dd">format&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;{2:+^*0}&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6be9d">9&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;unused&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">456&lt;/span>); &lt;span style="color:#828b96;font-style:italic">// =&amp;gt; &amp;#34;+++456+++&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// Format supports printf-style format specifiers
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">cout&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&amp;lt;&lt;/span> &lt;span style="color:#58a1dd">format&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;{0:05d} decimal = {0:04x} hex&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">42&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// =&amp;gt; &amp;#34;00042 decimal = 002a hex&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// Formatter objects may be written to a string using folly::to or
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// folly::toAppend (see folly/Conv.h), or by calling their appendTo(),
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// str(), and fbstr() methods
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">format&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;The only answer is {}&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">42&lt;/span>).&lt;span style="color:#58a1dd">str&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">cout&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&amp;lt;&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// =&amp;gt; &amp;#34;The only answer is 42&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// Decimal precision usage
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">cout&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&amp;lt;&lt;/span> &lt;span style="color:#58a1dd">format&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;Only 2 decimals is {:.2f}&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">23.34134534535&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// =&amp;gt; &amp;#34;Only 2 decimals is 23.34&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>‰ΩÜ Folly ÁöÑÊûÑÂª∫ÊòØ‰∏™ÈáçÈáèÁ∫ßÁöÑÊ¥ªÂä®ÔºåÊâÄ‰ª•ÂÉèÊàëËøôÊ†∑ÁöÑÂºÄÂèëËÄÖ‰∏ÄËà¨ÊòØ‰∏ç‰ºöÈááÁî® folly ÁöÑ„ÄÇËôΩÁÑ∂ folly ‰æßÈáç‰∏é Linux Ôºå‰ΩÜÁõÆÂâçÂèØ‰ª•ÊûÑÂª∫‰∏∫ Windows x64 ÁõÆÊ†áÔºå‰ΩøÁî® vcpkg ‰∫¶ÂèØÂÆâË£Ö„ÄÇ&lt;/p>
&lt;h3 id="google-abseil-strformat">Google Abseil StrFormat&lt;/h3>
&lt;p>Âú® GNK È°πÁõÆ‰∏≠ÔºåÊàëÊõæ‰ΩøÁî® fmtlibÔºå‰ΩÜ clang-tidy ËÄÅÊòØË≠¶ÂëäÊ≤°ÊúâÊçïËé∑ÂºÇÂ∏∏ÔºåÊ∑ªÂä†ÂºÇÂ∏∏ÊçïËé∑Ôºå‰ª£Á†ÅÁπÅÁêê‰∏çÊï¥Ê¥ÅÔºåÊàëÂú®ËÄÉÂØü Abseil ‰πãÂêéÔºåÂèëÁé∞‰ΩøÁî®‰ΩìÈ™åË¶Å‰ºò‰∫é fmtlibÔºåÂ∞±Â∞ÜÂÖ∂ÂàáÊç¢Âà∞ Abseil ‰∫Ü„ÄÇ&lt;br>
Abseil StrFormat Âè™ÊîØÊåÅ C-Style ÁöÑÊ†ºÂºèÂåñÈ£éÊ†ºÔºåÊ†ºÂºèÂåñÊîØÊåÅÁöÑÁ±ªÂûãÂèØ‰ª•Êü•ÁúãÂ¶Ç‰∏ãÊ≥®ÈáäÔºö&lt;/p>
&lt;pre tabindex="0">&lt;code>// In specific, the `FormatSpec` supports the following type specifiers:
// * `c` for characters
// * `s` for strings
// * `d` or `i` for integers
// * `o` for unsigned integer conversions into octal
// * `x` or `X` for unsigned integer conversions into hex
// * `u` for unsigned integers
// * `f` or `F` for floating point values into decimal notation
// * `e` or `E` for floating point values into exponential notation
// * `a` or `A` for floating point values into hex exponential notation
// * `g` or `G` for floating point values into decimal or exponential
// notation based on their precision
// * `p` for pointer address values
// * `n` for the special case of writing out the number of characters
// written to this point. The resulting value must be captured within an
// `absl::FormatCountCapture` type.
//
// NOTE: `o`, `x\X` and `u` will convert signed values to their unsigned
// counterpart before formatting.
//
// Examples:
// &amp;#34;%c&amp;#34;, &amp;#39;a&amp;#39; -&amp;gt; &amp;#34;a&amp;#34;
// &amp;#34;%c&amp;#34;, 32 -&amp;gt; &amp;#34; &amp;#34;
// &amp;#34;%s&amp;#34;, &amp;#34;C&amp;#34; -&amp;gt; &amp;#34;C&amp;#34;
// &amp;#34;%s&amp;#34;, std::string(&amp;#34;C++&amp;#34;) -&amp;gt; &amp;#34;C++&amp;#34;
// &amp;#34;%d&amp;#34;, -10 -&amp;gt; &amp;#34;-10&amp;#34;
// &amp;#34;%o&amp;#34;, 10 -&amp;gt; &amp;#34;12&amp;#34;
// &amp;#34;%x&amp;#34;, 16 -&amp;gt; &amp;#34;10&amp;#34;
// &amp;#34;%f&amp;#34;, 123456789 -&amp;gt; &amp;#34;123456789.000000&amp;#34;
// &amp;#34;%e&amp;#34;, .01 -&amp;gt; &amp;#34;1.00000e-2&amp;#34;
// &amp;#34;%a&amp;#34;, -3.0 -&amp;gt; &amp;#34;-0x1.8p+1&amp;#34;
// &amp;#34;%g&amp;#34;, .01 -&amp;gt; &amp;#34;1e-2&amp;#34;
// &amp;#34;%p&amp;#34;, *int -&amp;gt; &amp;#34;0x7ffdeb6ad2a4&amp;#34;
//
// int n = 0;
// std::string s = absl::StrFormat(
// &amp;#34;%s%d%n&amp;#34;, &amp;#34;hello&amp;#34;, 123, absl::FormatCountCapture(&amp;amp;n));
// EXPECT_EQ(8, n);
//
// The `FormatSpec` intrinsically supports all of these fundamental C++ types:
//
// * Characters: `char`, `signed char`, `unsigned char`
// * Integers: `int`, `short`, `unsigned short`, `unsigned`, `long`,
// `unsigned long`, `long long`, `unsigned long long`
// * Floating-point: `float`, `double`, `long double`
//
// However, in the `str_format` library, a format conversion specifies a broader
// C++ conceptual category instead of an exact type. For example, `%s` binds to
// any string-like argument, so `std::string`, `absl::string_view`, and
// `const char*` are all accepted. Likewise, `%d` accepts any integer-like
// argument, etc.
&lt;/code>&lt;/pre>&lt;p>Abseil ÊîØÊåÅÂ¶Ç‰∏ãÂáΩÊï∞Ôºö&lt;/p>
&lt;ul>
&lt;li>StrFormat&lt;/li>
&lt;li>StrAppendFormat&lt;/li>
&lt;li>StreamFormat&lt;/li>
&lt;li>PrintF&lt;/li>
&lt;li>FPrintF&lt;/li>
&lt;li>SNPrintF&lt;/li>
&lt;/ul>
&lt;p>Êàë‰ª¨Âú®ÂÆûÁé∞Êó•ÂøóÂ∫ìÊó∂ÔºåÂèØ‰ª•‰ΩøÁî® &lt;code>StrFormat&lt;/code> Ê†ºÂºèÂåñÊó•ÂøóÁ∫ßÂà´ÔºåÊó∂Èó¥Á≠â‰ø°ÊÅØÔºåÁÑ∂Âêé‰ΩøÁî® &lt;code>StrAppendFormat&lt;/code> Ê†ºÂºèÂåñÊó•ÂøóÂÜÖÂÆπÔºåËøôÊØî fmtlib Ë¶ÅÊñπ‰æøÁöÑÂ§ö„ÄÇAbseil StrFormat ‰ΩøÁî®ÁºñËØëÊúüÊ£ÄÊü•Âèñ‰ª£ËøêË°åÊó∂ÂºÇÂ∏∏ÔºåËøôÊòØËÆ©ÊàëÈÄâÊã©ÁöÑ‰∏ªË¶ÅÂéüÂõ†„ÄÇÈÖçÂêà &lt;code>absl::string_view&lt;/code> Âú® GNK ‰∏Ä‰∏™ C++14 È°πÁõÆ‰∏≠ÔºåC++17 ÁöÑ‰ΩøÁî®‰ΩìÈ™åÈùûÂ∏∏Â•ΩÔºåÂ≠óÁ¨¶‰∏≤ÂÜÖÂ≠òÂàÜÈÖç‰πüÂáèÂ∞ë‰∫ÜÂæàÂ§ö„ÄÇ&lt;br>
Â¶ÇÊûúÂú® Windows ÁéØÂ¢É &lt;code>wchar_t&lt;/code> ÁºñÁ†ÅÁéØÂ¢É‰ΩøÁî® Abseil ÂèØËÉΩÊïàÊûúËøò‰∏çÂ¶Ç fmtlib„ÄÇÁî±‰∫éÂÆûÁé∞‰∫ÜÁºñËØëÊúüÁ±ªÂûãÊ£ÄÊü•Ôºå‰ª£Á†ÅËøòÊòØÊØîËæÉÂ§çÊùÇÔºåÂ¶ÇÊûúË¶ÅÂ∞Ü Abseil StrFormat Ââ•Á¶ªÂá∫Êù•ËøòÊØîËæÉÈ∫ªÁÉ¶„ÄÇ&lt;/p>
&lt;h2 id="Â≠óÁ¨¶‰∏≤ÂéªÊ†ºÂºèÂåñ">Â≠óÁ¨¶‰∏≤ÂéªÊ†ºÂºèÂåñ&lt;/h2>
&lt;p>Â¶ÇÊûúÊàë‰ª¨‰ΩøÁî®Â≠óÁ¨¶‰∏≤ËøûÊé•Âèñ‰ª£Â≠óÁ¨¶‰∏≤Ê†ºÂºèÂåñÔºåÂ≠óÁ¨¶‰∏≤Ê†ºÂºèÂåñÈóÆÈ¢òÂàô‰ºöÂ∞ëÂæàÂ§ö„ÄÇÂú® Abseil ‰πã‰∏≠ÔºåÊúâ StrCat Âíå Subsitute ÊñπÊ°àÔºåÂèØ‰ª•ËøûÊé•ÊàñËÄÖÁªÑË£ÖÂ≠óÁ¨¶‰∏≤„ÄÇ&lt;/p>
&lt;h3 id="substitute">Substitute&lt;/h3>
&lt;p>ÂÆûÈôÖ‰∏ä &lt;a href="https://github.com/abseil/abseil-cpp/blob/master/absl/strings/substitute.h">Subsitute&lt;/a> Á±ª‰ºº python Ê†ºÂºèÂåñÈ£éÊ†ºÔºå‰ΩÜÂèÇÊï∞Âè™ÊîØÊåÅ 0ÔΩû9 ‰∏™Ôºö&lt;/p>
&lt;pre tabindex="0">&lt;code>auto s=Substitute(&amp;#34;$1 purchased $0 $2. Thanks $1!&amp;#34;, 5, &amp;#34;Bob&amp;#34;, &amp;#34;Apples&amp;#34;);
&lt;/code>&lt;/pre>&lt;p>ÂÆûÁé∞ Subsitute ÁöÑÂÖ≥ÈîÆÊòØÈÅçÂéÜÊ†ºÂºèÂåñÂèÇÊï∞ÔºåËß£ÊûêÂà∞ &lt;code>$&lt;/code> ÂêéËé∑ÂæóÂèÇÊï∞‰ΩçÁΩÆÔºåÁÑ∂ÂêéÂ∞ÜÁâπÂÆöÁöÑÂèÇÊï∞ËΩ¨Âèò‰∏∫ &lt;code>Arg&lt;/code>ÔºåArg Á±ªÂûãÈáçËΩΩÊîØÊåÅ‰∏çÂêåÁöÑÂü∫Êú¨Á±ªÂûãÔºå‰ª•ÂèäÂ≠óÁ¨¶‰∏≤Á±ªÂûãÔºåÂ∞ÜÂÖ∂ËΩ¨Âèò‰∏∫ &lt;code>absl::string_view&lt;/code> Êï∞ÁªÑÔºåÁÑ∂ÂêéÁî± &lt;code>SubstituteAndAppendArray&lt;/code> ÊãºÊé•Âú®‰∏ÄËµ∑„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">class&lt;/span> &lt;span style="color:#58a1dd">Arg&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">public&lt;/span>&lt;span style="color:#ff636f">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// Overloads for std::string-y things
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#828b96;font-style:italic">// Explicitly overload `const char*` so the compiler doesn&amp;#39;t cast to `bool`.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">value&lt;/span>) &lt;span style="color:#828b96;font-style:italic">// NOLINT(runtime/explicit)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">piece_&lt;/span>(&lt;span style="color:#58a1dd">absl&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">NullSafeStringView&lt;/span>(&lt;span style="color:#58a1dd">value&lt;/span>)) {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">template&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">typename&lt;/span> &lt;span style="color:#58a1dd">Allocator&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>( &lt;span style="color:#828b96;font-style:italic">// NOLINT
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">basic_string&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">char&lt;/span>, &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">char_traits&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">char&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span>, &lt;span style="color:#58a1dd">Allocator&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">value&lt;/span>) &lt;span style="color:#ff636f">noexcept&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">piece_&lt;/span>(&lt;span style="color:#58a1dd">value&lt;/span>) {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#58a1dd">absl&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string_view&lt;/span> &lt;span style="color:#58a1dd">value&lt;/span>) &lt;span style="color:#828b96;font-style:italic">// NOLINT(runtime/explicit)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">piece_&lt;/span>(&lt;span style="color:#58a1dd">value&lt;/span>) {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// Overloads for primitives
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#828b96;font-style:italic">// No overloads are available for signed and unsigned char because if people
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#828b96;font-style:italic">// are explicitly declaring their chars as signed or unsigned then they are
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#828b96;font-style:italic">// probably using them as 8-bit integers and would probably prefer an integer
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#828b96;font-style:italic">// representation. However, we can&amp;#39;t really know, so we make the caller decide
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#828b96;font-style:italic">// what to do.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#58a1dd">value&lt;/span>) &lt;span style="color:#828b96;font-style:italic">// NOLINT(runtime/explicit)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">piece_&lt;/span>(&lt;span style="color:#58a1dd">scratch_&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>) { &lt;span style="color:#58a1dd">scratch_&lt;/span>[&lt;span style="color:#a6be9d">0&lt;/span>] &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">value&lt;/span>; }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">short&lt;/span> &lt;span style="color:#58a1dd">value&lt;/span>) &lt;span style="color:#828b96;font-style:italic">// NOLINT(*)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">piece_&lt;/span>(&lt;span style="color:#58a1dd">scratch_&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">numbers_internal&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FastIntToBuffer&lt;/span>(&lt;span style="color:#58a1dd">value&lt;/span>, &lt;span style="color:#58a1dd">scratch_&lt;/span>) &lt;span style="color:#ff636f">-&lt;/span> &lt;span style="color:#58a1dd">scratch_&lt;/span>) {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">unsigned&lt;/span> &lt;span style="color:#ff636f">short&lt;/span> &lt;span style="color:#58a1dd">value&lt;/span>) &lt;span style="color:#828b96;font-style:italic">// NOLINT(*)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">piece_&lt;/span>(&lt;span style="color:#58a1dd">scratch_&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">numbers_internal&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FastIntToBuffer&lt;/span>(&lt;span style="color:#58a1dd">value&lt;/span>, &lt;span style="color:#58a1dd">scratch_&lt;/span>) &lt;span style="color:#ff636f">-&lt;/span> &lt;span style="color:#58a1dd">scratch_&lt;/span>) {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">value&lt;/span>) &lt;span style="color:#828b96;font-style:italic">// NOLINT(runtime/explicit)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">piece_&lt;/span>(&lt;span style="color:#58a1dd">scratch_&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">numbers_internal&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FastIntToBuffer&lt;/span>(&lt;span style="color:#58a1dd">value&lt;/span>, &lt;span style="color:#58a1dd">scratch_&lt;/span>) &lt;span style="color:#ff636f">-&lt;/span> &lt;span style="color:#58a1dd">scratch_&lt;/span>) {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">unsigned&lt;/span> &lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">value&lt;/span>) &lt;span style="color:#828b96;font-style:italic">// NOLINT(runtime/explicit)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">piece_&lt;/span>(&lt;span style="color:#58a1dd">scratch_&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">numbers_internal&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FastIntToBuffer&lt;/span>(&lt;span style="color:#58a1dd">value&lt;/span>, &lt;span style="color:#58a1dd">scratch_&lt;/span>) &lt;span style="color:#ff636f">-&lt;/span> &lt;span style="color:#58a1dd">scratch_&lt;/span>) {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">long&lt;/span> &lt;span style="color:#58a1dd">value&lt;/span>) &lt;span style="color:#828b96;font-style:italic">// NOLINT(*)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">piece_&lt;/span>(&lt;span style="color:#58a1dd">scratch_&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">numbers_internal&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FastIntToBuffer&lt;/span>(&lt;span style="color:#58a1dd">value&lt;/span>, &lt;span style="color:#58a1dd">scratch_&lt;/span>) &lt;span style="color:#ff636f">-&lt;/span> &lt;span style="color:#58a1dd">scratch_&lt;/span>) {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">unsigned&lt;/span> &lt;span style="color:#ff636f">long&lt;/span> &lt;span style="color:#58a1dd">value&lt;/span>) &lt;span style="color:#828b96;font-style:italic">// NOLINT(*)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">piece_&lt;/span>(&lt;span style="color:#58a1dd">scratch_&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">numbers_internal&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FastIntToBuffer&lt;/span>(&lt;span style="color:#58a1dd">value&lt;/span>, &lt;span style="color:#58a1dd">scratch_&lt;/span>) &lt;span style="color:#ff636f">-&lt;/span> &lt;span style="color:#58a1dd">scratch_&lt;/span>) {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">long&lt;/span> &lt;span style="color:#ff636f">long&lt;/span> &lt;span style="color:#58a1dd">value&lt;/span>) &lt;span style="color:#828b96;font-style:italic">// NOLINT(*)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">piece_&lt;/span>(&lt;span style="color:#58a1dd">scratch_&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">numbers_internal&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FastIntToBuffer&lt;/span>(&lt;span style="color:#58a1dd">value&lt;/span>, &lt;span style="color:#58a1dd">scratch_&lt;/span>) &lt;span style="color:#ff636f">-&lt;/span> &lt;span style="color:#58a1dd">scratch_&lt;/span>) {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">unsigned&lt;/span> &lt;span style="color:#ff636f">long&lt;/span> &lt;span style="color:#ff636f">long&lt;/span> &lt;span style="color:#58a1dd">value&lt;/span>) &lt;span style="color:#828b96;font-style:italic">// NOLINT(*)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">piece_&lt;/span>(&lt;span style="color:#58a1dd">scratch_&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">numbers_internal&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FastIntToBuffer&lt;/span>(&lt;span style="color:#58a1dd">value&lt;/span>, &lt;span style="color:#58a1dd">scratch_&lt;/span>) &lt;span style="color:#ff636f">-&lt;/span> &lt;span style="color:#58a1dd">scratch_&lt;/span>) {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">float&lt;/span> &lt;span style="color:#58a1dd">value&lt;/span>) &lt;span style="color:#828b96;font-style:italic">// NOLINT(runtime/explicit)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">piece_&lt;/span>(&lt;span style="color:#58a1dd">scratch_&lt;/span>, &lt;span style="color:#58a1dd">numbers_internal&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">SixDigitsToBuffer&lt;/span>(&lt;span style="color:#58a1dd">value&lt;/span>, &lt;span style="color:#58a1dd">scratch_&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">double&lt;/span> &lt;span style="color:#58a1dd">value&lt;/span>) &lt;span style="color:#828b96;font-style:italic">// NOLINT(runtime/explicit)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">piece_&lt;/span>(&lt;span style="color:#58a1dd">scratch_&lt;/span>, &lt;span style="color:#58a1dd">numbers_internal&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">SixDigitsToBuffer&lt;/span>(&lt;span style="color:#58a1dd">value&lt;/span>, &lt;span style="color:#58a1dd">scratch_&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">bool&lt;/span> &lt;span style="color:#58a1dd">value&lt;/span>) &lt;span style="color:#828b96;font-style:italic">// NOLINT(runtime/explicit)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">piece_&lt;/span>(&lt;span style="color:#58a1dd">value&lt;/span> &lt;span style="color:#ff636f">?&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;true&amp;#34;&lt;/span> &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;false&amp;#34;&lt;/span>) {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#58a1dd">Hex&lt;/span> &lt;span style="color:#58a1dd">hex&lt;/span>); &lt;span style="color:#828b96;font-style:italic">// NOLINT(runtime/explicit)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#58a1dd">Dec&lt;/span> &lt;span style="color:#58a1dd">dec&lt;/span>); &lt;span style="color:#828b96;font-style:italic">// NOLINT(runtime/explicit)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// `void*` values, with the exception of `char*`, are printed as
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#828b96;font-style:italic">// &amp;#34;0x&amp;lt;hex value&amp;gt;&amp;#34;. However, in the case of `nullptr`, &amp;#34;NULL&amp;#34; is printed.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">void&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">value&lt;/span>); &lt;span style="color:#828b96;font-style:italic">// NOLINT(runtime/explicit)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">Arg&lt;/span>&lt;span style="color:#ff636f">&amp;amp;&lt;/span>) &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">delete&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>&lt;span style="color:#ff636f">&amp;amp;&lt;/span> &lt;span style="color:#ff636f">operator&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">Arg&lt;/span>&lt;span style="color:#ff636f">&amp;amp;&lt;/span>) &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">delete&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">absl&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string_view&lt;/span> &lt;span style="color:#58a1dd">piece&lt;/span>() &lt;span style="color:#ff636f">const&lt;/span> { &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">piece_&lt;/span>; }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">private&lt;/span>&lt;span style="color:#ff636f">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">absl&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string_view&lt;/span> &lt;span style="color:#58a1dd">piece_&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#58a1dd">scratch_&lt;/span>[&lt;span style="color:#58a1dd">numbers_internal&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">kFastToBufferSize&lt;/span>];
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÂØπ‰∫é &lt;code>double&lt;/code> Âíå &lt;code>float&lt;/code> Âàô‰ΩøÁî® &lt;code>SixDigitsToBuffer&lt;/code> Â∞ÜÊµÆÁÇπËΩ¨Âèò‰∏∫ &lt;code>%g&lt;/code> ÁöÑÊ†ºÂºè„ÄÇÂ¶ÇÊûúË¶ÅÂÆûÁé∞Âõ∫ÂÆöÈïøÂ∫¶ËæìÂá∫ÔºåÂàôÂèØ‰ª•‰ΩøÁî® &lt;code>absl::Hex&lt;/code> &lt;code>absl::Dec&lt;/code> „ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">absl&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">Substitute&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;$0$1$2$3$4 $5&amp;#34;&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">absl&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">Dec&lt;/span>(&lt;span style="color:#a6be9d">0&lt;/span>), &lt;span style="color:#58a1dd">absl&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">Dec&lt;/span>(&lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#58a1dd">absl&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">kSpacePad2&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">absl&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">Dec&lt;/span>(&lt;span style="color:#a6be9d">0xf&lt;/span>, &lt;span style="color:#58a1dd">absl&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">kSpacePad2&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">absl&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">Dec&lt;/span>(&lt;span style="color:#ff636f">int16_t&lt;/span>{&lt;span style="color:#ff636f">-&lt;/span>&lt;span style="color:#a6be9d">1&lt;/span>}, &lt;span style="color:#58a1dd">absl&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">kSpacePad5&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">absl&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">Dec&lt;/span>(&lt;span style="color:#ff636f">int16_t&lt;/span>{&lt;span style="color:#ff636f">-&lt;/span>&lt;span style="color:#a6be9d">1&lt;/span>}, &lt;span style="color:#58a1dd">absl&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">kZeroPad5&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">absl&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">Dec&lt;/span>(&lt;span style="color:#a6be9d">0x123456789abcdef&lt;/span>, &lt;span style="color:#58a1dd">absl&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">kZeroPad16&lt;/span>));
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÂØπ‰∫é bool Á±ªÂûãÔºåÂàô‰ºöËæìÂá∫ &lt;code>true&lt;/code> ÊàñËÄÖ &lt;code>false&lt;/code>„ÄÇ&lt;br>
Êú¨Ë¥®‰∏äÊù•ËØ¥ &lt;code>Substitute&lt;/code> ÊòØ‰∏ÄÁßçÁÆÄÂåñÁöÑÊ†ºÂºèÂåñËæìÂá∫ÊñπÊ°àÔºå‰ΩøÁî®ÁºñËØëÂô®ÈáçËΩΩËß£ÂÜ≥‰∫ÜËøêË°åÊó∂Ê£ÄÊü•Á±ªÂûãÁöÑÈ∫ªÁÉ¶ÔºåÂõ†Ê≠§ÔºåËøôÁßçÊñπÊ°àÂÆâÂÖ®Á®ãÂ∫¶ÊØîËæÉÈ´òÔºåÊïàÁéá‰πüÈùûÂ∏∏‰∏çÈîô„ÄÇ‰ΩÜ format ÊîØÊåÅÁöÑÂèÇÊï∞‰∏™Êï∞ÊØîËæÉÊúâÈôê„ÄÇabsl::Substitute ÂêåÊ†∑ÂÆûÁé∞‰∫ÜÁºñËØëÂô®ÂèÇÊï∞‰∏™Êï∞Ê£ÄÊü•„ÄÇ&lt;/p>
&lt;h3 id="strcat">StrCat&lt;/h3>
&lt;p>Âú® Abseil ‰πã‰∏≠ËøòÊúâ‰∏Ä‰∏™ &lt;a href="https://github.com/abseil/abseil-cpp/blob/master/absl/strings/str_cat.h">absl::StrCat&lt;/a> Áî®Êù•Âèñ‰ª£Â≠óÁ¨¶‰∏≤Ê†ºÂºèÂåñ„ÄÇÂú® C ËØ≠Ë®ÄÊ†áÂáÜÂ∫ì‰∏≠Ôºå&lt;code>strcat&lt;/code> Áî®‰∫éËøûÊé•Â≠óÁ¨¶‰∏≤ÔºåÂèÇÊï∞‰∏™Êï∞ÊòØÂõ∫ÂÆöÁöÑÔºåÂπ∂‰∏îÂè™ÊîØÊåÅ C-Style Â≠óÁ¨¶‰∏≤ÔºåËÄå Abseil Âõ¢ÈòüÂà©Áî® C++ ÂèòÂèÇÊ®°ÊùøÁâπÊÄßÂÆûÁé∞‰∫ÜÁé∞‰ª£ÁöÑ StrCat.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">result&lt;/span> &lt;span style="color:#ff636f">=&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">absl&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">StrCat&lt;/span>(&lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">3&lt;/span>, &lt;span style="color:#a6be9d">4&lt;/span>, &lt;span style="color:#a6be9d">5&lt;/span>, &lt;span style="color:#a6be9d">6&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">8&lt;/span>, &lt;span style="color:#a6be9d">9&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;a&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;b&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;c&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;d&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;e&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;f&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;g&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;h&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;i&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;j&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;k&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;l&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;m&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;n&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;o&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;p&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;q&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// 123456789abcdefghijklmnopq
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>‰∏é Subsititute ‰∏ÄÊ†∑ÔºåStrCat ‰πüÊòØÁî®‰∫ÜÁ±ª‰ºº &lt;code>Arg&lt;/code> ÁöÑ &lt;code>AlphaNum&lt;/code> Â∞ÜÂ≠óÁ¨¶‰∏≤ÂíåÂü∫Êú¨Á±ªÂûãÊåâÁÖßÂéüÂõ†ÔºàÊàñËÄÖ Hex,DecÔºâÊãºÊé•ÊàêÁâπÂÆöÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÂπ∂‰∏îÂú®ÊãºÊé•Â≠óÁ¨¶‰∏≤Êó∂ËÉΩÂ§üÊèêÂâç resize ‰ªéËÄåÂáèÂ∞ëÂÜÖÂ≠òÂàÜÈÖçÊ¨°Êï∞ÔºåËææÂà∞‰ºòÂåñÁöÑÁõÆÁöÑÔºåÂú® GNK ÁöÑ‰ª£Á†Å‰∏≠ÔºåÂá°ÊòØÈúÄË¶ÅËøûÊé•Â≠óÁ¨¶‰∏≤ÁöÑÊìç‰ΩúÔºåÊàë‰ª¨ÈÉΩ‰ΩøÁî® StrCat Êù•Êìç‰ΩúÔºåÈÅøÂÖç‰ΩøÁî® snprintf ÊàñËÄÖ strcat Êìç‰Ωú„ÄÇ
Âú® &lt;a href="https://github.com/M2Team/Privexec">Privexec&lt;/a>, &lt;a href="https://github.com/fstudio/clangbuilder">Clangbuilder&lt;/a> Âíå &lt;a href="https://github.com/fcharlie/Planck">Planck&lt;/a> ÂΩì‰∏≠ÔºåÊàëÂÄüÈâ¥ absl::StrCat ÂÆûÁé∞‰∫Ü‰∏Ä‰∏™ÂÆΩÂ≠óÁ¨¶ÁâàÊú¨ÁöÑ &lt;a href="https://github.com/M2Team/Privexec/blob/master/include/strcat.hpp">&lt;code>base::StringCat&lt;/code>&lt;/a> ‰∏çÊîØÊåÅ double/floatÔºå‰∏çÊîØÊåÅ HexÔºåDec Ôºå‰ªÖÊîØÊåÅÂÖ∂‰ªñÂü∫Êú¨Á±ªÂûãÂíå &lt;code>char*&lt;/code> &lt;code>std::wstring_view&lt;/code> &lt;code>std::wstring&lt;/code>„ÄÇ&lt;/p>
&lt;h2 id="ÂºÇÊ≠•‰ø°Âè∑ÂÆâÂÖ®ÁöÑÂ≠óÁ¨¶‰∏≤Ê†ºÂºèÂåñ">ÂºÇÊ≠•‰ø°Âè∑ÂÆâÂÖ®ÁöÑÂ≠óÁ¨¶‰∏≤Ê†ºÂºèÂåñ&lt;/h2>
&lt;p>‰∏äËø∞Áé∞‰ª£ C++ Ê†ºÂºèÂåñÊñπÊ°àÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ã‰ª§‰∫∫Êª°ÊÑèÔºå‰ΩÜÊòØÂΩìÊàë‰ª¨ÈúÄË¶ÅÂÆûÁé∞‰∏Ä‰∏™ÂºÇÊ≠•‰ø°Âè∑ÂÆâÂÖ®ÁöÑÊ†ºÂºèÂåñËæìÂá∫ÊñπÊ°àÊó∂ÔºåÂàô‰∏çÂæó‰∏çÈáçÊñ∞ÊâìÁÆóÔºåÂºÇÊ≠•‰ø°Âè∑ÂÆâÂÖ®ÊåáÁöÑÊòØÂú®‰ø°Âè∑‰∏≠Êñ≠ÁöÑÂõûË∞ÉÂáΩÊï∞‰∏≠‰∏çÂæóË∞ÉÁî®ÈùûÂºÇÊ≠•ÂÆâÂÖ®ÁöÑÂáΩÊï∞ÔºåÁî±‰∫é‰ø°Âè∑ÈöèÊó∂ÂèØËÉΩÂèëÁîüÔºåÂõ†Ê≠§ÔºåÂú®‰ø°Âè∑‰∏≠Êñ≠ÂáΩÊï∞‰∏≠ÂøÖÈ°ª‰∏çÂ≠òÂú®ÂÜÖÂ≠òÂàÜÈÖçÔºå‰∏çËÉΩÊã•Êúâ‰∫íÊñ•ÈîÅÁ≠âÔºåÂú® Glibc Âíå musl ‰πã‰∏≠ÔºåÁî±‰∫é snprintf ‰ΩøÁî®‰∫ÜÊñá‰ª∂ÂØπË±°ÂíåÈîÅË∞ÉÁî®‰∫Ü &lt;code>vfprintf&lt;/code> Âàô‰∏çÊòØÂºÇÊ≠•‰ø°Âè∑ÂÆâÂÖ®ÁöÑÔºåËøôÂæàÂÆπÊòìÁêÜËß£ÔºåÁî±‰∫é &lt;code>FILE&lt;/code> ‰ΩøÁî®‰∫ÜÁºìÂ≠òÔºåÈúÄË¶Å‰ΩøÁî®ÈîÅ‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®„ÄÇÂú® OpenBSD ÂΩì‰∏≠Ôºåsnprintf ÂÆûÁé∞ÊòØÂºÇÊ≠•‰ø°Âè∑ÂÆâÂÖ®ÁöÑÔºåÂú® Github ‰∏äÊúâÂºÇÊ≠•‰ø°Âè∑ÂÆâÂÖ®ÁöÑ snprintf ÂÆûÁé∞ÔºåÂ¶Ç &lt;a href="https://github.com/weiss/c99-snprintf">c99-snprintf&lt;/a> Âíå &lt;a href="https://github.com/idning/safe_snprintf">safe_snprintf&lt;/a>„ÄÇÂâçÈù¢ÊâÄËØ¥ÁöÑ &lt;code>ngx_snprintf&lt;/code> ‰πüÂèØ‰ª•ËΩªÊùæÁöÑÂÆûÁé∞ÂºÇÊ≠•‰ø°Âè∑ÂÆâÂÖ®„ÄÇ&lt;/p>
&lt;p>Âú® absl::StrFormat ‰∏≠ÔºåÊü•ÁúãÊ∫êÁ†ÅÂèëÁé∞ &lt;code>absl::SNPrintF&lt;/code> ÊòØÊ≤°ÊúâÂÜÖÂ≠òÂàÜÈÖçÁöÑÔºå‰ΩÜÂºÇÊ≠•‰ø°Âè∑ÂÆâÂÖ®ËøòÊúâÂæÖËÄÉÂØü„ÄÇ&lt;/p>
&lt;p>Âú® Chromium È°πÁõÆ‰∏≠Ôºå‰πüÊúâ‰∏Ä‰∏™Âü∫‰∫éÁé∞‰ª£ C++ ÂÆûÁé∞ÁöÑÂºÇÊ≠•‰ø°Âè∑ÂÆâÂÖ®ÁöÑ &lt;a href="https://github.com/chromium/chromium/blob/master/base/strings/safe_sprintf.h">SafeSNPrintf&lt;/a>„ÄÇÂú®Ëøô‰∏™ÂÆûÁé∞‰∏≠Ôºå‰ΩøÁî® union ÂåÖË£ÖÂèòÈáèÔºåÂπ∂Â¢ûÂä†Á±ªÂûã‰ø°ÊÅØÔºåËøôÁßçÂ∏∏ËßÅ‰∫é Json, Toml Á≠âÊ†ºÂºèÊñá‰ª∂ÁöÑËß£Êûê„ÄÇÂú®Ê†ºÂºèÂåñÊó∂ÔºåËß£Êûê format Â≠óÁ¨¶‰∏≤ÔºåÊúüÊúõÁöÑÊ†ºÂºè‰∏éËæìÂÖ•ÁöÑÂèÇÊï∞ÂåπÈÖçÁ±ªÂûãÔºå‰∏ÄÊó¶Á±ªÂûãÂåπÈÖçÔºåÂàôÊ≠£Â∏∏Ê†ºÂºèÂåñÔºå‰∏çÂåπÈÖçÂàôÈÄÄÂá∫ÔºåËøôÁßçÊñπÊ°àÊØî snprintf Ë¶ÅÂ•ΩÁöÑÂ§öÔºåÊØïÁ´ü snprintf Âè™È¢ÑÊúüËæìÂÖ•Ê†ºÂºèÊ≠£Á°Æ„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">struct&lt;/span> &lt;span style="color:#58a1dd">Arg&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">enum&lt;/span> &lt;span style="color:#58a1dd">Type&lt;/span> { &lt;span style="color:#58a1dd">INT&lt;/span>, &lt;span style="color:#58a1dd">UINT&lt;/span>, &lt;span style="color:#58a1dd">STRING&lt;/span>, &lt;span style="color:#58a1dd">POINTER&lt;/span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// Any integer-like value.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">signed&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#58a1dd">c&lt;/span>) &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">type&lt;/span>(&lt;span style="color:#58a1dd">INT&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">integer&lt;/span>.&lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">c&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">integer&lt;/span>.&lt;span style="color:#58a1dd">width&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">sizeof&lt;/span>(&lt;span style="color:#ff636f">char&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">unsigned&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#58a1dd">c&lt;/span>) &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">type&lt;/span>(&lt;span style="color:#58a1dd">UINT&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">integer&lt;/span>.&lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">c&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">integer&lt;/span>.&lt;span style="color:#58a1dd">width&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">sizeof&lt;/span>(&lt;span style="color:#ff636f">char&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">signed&lt;/span> &lt;span style="color:#ff636f">short&lt;/span> &lt;span style="color:#58a1dd">j&lt;/span>) &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">type&lt;/span>(&lt;span style="color:#58a1dd">INT&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">integer&lt;/span>.&lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">j&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">integer&lt;/span>.&lt;span style="color:#58a1dd">width&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">sizeof&lt;/span>(&lt;span style="color:#ff636f">short&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">unsigned&lt;/span> &lt;span style="color:#ff636f">short&lt;/span> &lt;span style="color:#58a1dd">j&lt;/span>) &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">type&lt;/span>(&lt;span style="color:#58a1dd">UINT&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">integer&lt;/span>.&lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">j&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">integer&lt;/span>.&lt;span style="color:#58a1dd">width&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">sizeof&lt;/span>(&lt;span style="color:#ff636f">short&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">signed&lt;/span> &lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">j&lt;/span>) &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">type&lt;/span>(&lt;span style="color:#58a1dd">INT&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">integer&lt;/span>.&lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">j&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">integer&lt;/span>.&lt;span style="color:#58a1dd">width&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">sizeof&lt;/span>(&lt;span style="color:#ff636f">int&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">unsigned&lt;/span> &lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">j&lt;/span>) &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">type&lt;/span>(&lt;span style="color:#58a1dd">UINT&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">integer&lt;/span>.&lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">j&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">integer&lt;/span>.&lt;span style="color:#58a1dd">width&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">sizeof&lt;/span>(&lt;span style="color:#ff636f">int&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">signed&lt;/span> &lt;span style="color:#ff636f">long&lt;/span> &lt;span style="color:#58a1dd">j&lt;/span>) &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">type&lt;/span>(&lt;span style="color:#58a1dd">INT&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">integer&lt;/span>.&lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">j&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">integer&lt;/span>.&lt;span style="color:#58a1dd">width&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">sizeof&lt;/span>(&lt;span style="color:#ff636f">long&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">unsigned&lt;/span> &lt;span style="color:#ff636f">long&lt;/span> &lt;span style="color:#58a1dd">j&lt;/span>) &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">type&lt;/span>(&lt;span style="color:#58a1dd">UINT&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">integer&lt;/span>.&lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">j&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">integer&lt;/span>.&lt;span style="color:#58a1dd">width&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">sizeof&lt;/span>(&lt;span style="color:#ff636f">long&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">signed&lt;/span> &lt;span style="color:#ff636f">long&lt;/span> &lt;span style="color:#ff636f">long&lt;/span> &lt;span style="color:#58a1dd">j&lt;/span>) &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">type&lt;/span>(&lt;span style="color:#58a1dd">INT&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">integer&lt;/span>.&lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">j&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">integer&lt;/span>.&lt;span style="color:#58a1dd">width&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">sizeof&lt;/span>(&lt;span style="color:#ff636f">long&lt;/span> &lt;span style="color:#ff636f">long&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">unsigned&lt;/span> &lt;span style="color:#ff636f">long&lt;/span> &lt;span style="color:#ff636f">long&lt;/span> &lt;span style="color:#58a1dd">j&lt;/span>) &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">type&lt;/span>(&lt;span style="color:#58a1dd">UINT&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">integer&lt;/span>.&lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">j&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">integer&lt;/span>.&lt;span style="color:#58a1dd">width&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">sizeof&lt;/span>(&lt;span style="color:#ff636f">long&lt;/span> &lt;span style="color:#ff636f">long&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// A C-style text string.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>) &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">str&lt;/span>(&lt;span style="color:#58a1dd">s&lt;/span>), &lt;span style="color:#58a1dd">type&lt;/span>(&lt;span style="color:#58a1dd">STRING&lt;/span>) { }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#ff636f">char&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>) &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">str&lt;/span>(&lt;span style="color:#58a1dd">s&lt;/span>), &lt;span style="color:#58a1dd">type&lt;/span>(&lt;span style="color:#58a1dd">STRING&lt;/span>) { }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// Any pointer value that can be cast to a &amp;#34;void*&amp;#34;.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">template&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">class&lt;/span> &lt;span style="color:#58a1dd">T&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#58a1dd">Arg&lt;/span>(&lt;span style="color:#58a1dd">T&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">p&lt;/span>) &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">ptr&lt;/span>((&lt;span style="color:#ff636f">void&lt;/span>&lt;span style="color:#ff636f">*&lt;/span>)&lt;span style="color:#58a1dd">p&lt;/span>), &lt;span style="color:#58a1dd">type&lt;/span>(&lt;span style="color:#58a1dd">POINTER&lt;/span>) { }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">union&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// An integer-like value.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">struct&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">int64_t&lt;/span> &lt;span style="color:#58a1dd">i&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">unsigned&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#58a1dd">width&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#58a1dd">integer&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// A C-style text string.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">str&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// A pointer to an arbitrary object.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">void&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">ptr&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">enum&lt;/span> &lt;span style="color:#58a1dd">Type&lt;/span> &lt;span style="color:#58a1dd">type&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Â¶ÇÊûúË¶ÅÂÆûÁé∞ &lt;code>std::string&lt;/code> &lt;code>std::string_view&lt;/code> ÁöÑÊ†ºÂºèÂåñÔºåÊàë‰ª¨‰πüÂèØ‰ª•Âú® union ‰∏≠‰ΩøÁî®Â¶Ç‰∏ãÁªìÊûÑÂèñ‰ª£ &lt;code>const char* str&lt;/code>Ôºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">struct&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">data&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">size_t&lt;/span> &lt;span style="color:#58a1dd">len&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}&lt;span style="color:#58a1dd">stringview&lt;/span>;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ËøôÊ†∑ÁöÑÂ•ΩÂ§ÑÊòØ &lt;code>std::string/std::string_view&lt;/code> ‰∏çÂÜçÈúÄË¶ÅËÆ°ÁÆóÈïøÂ∫¶„ÄÇÊàë‰ª¨ËøòÂèØ‰ª•‰ΩøÁî® &lt;code>%v&lt;/code> ÊåâÁÖßËæìÂÖ•ÂèÇÊï∞ÁöÑÁ±ªÂûãËá™‰∏ªÊ†ºÂºèÂåñÔºåËøôÊ†∑Â∞±‰∏çÂ≠òÂú®Á±ªÂûã‰∏çÂåπÈÖç‰∫Ü„ÄÇ&lt;/p>
&lt;h2 id="bela-strformat">Bela StrFormat&lt;/h2>
&lt;p>&lt;strong>2019-05-17 Update:&lt;/strong> ÊúÄËøëÊàëÁºñÂÜô‰∫Ü‰∏Ä‰∏™Âü∫‰∫é C++17 ÁöÑ Windows Á≥ªÁªü‰∏äÁöÑÂ∑•ÂÖ∑Â∫ìÔºåÂè´ &lt;a href="https://github.com/fcharlie/bela">Bela&lt;/a>ÔºåBela Â≠¶‰π†‰∫Ü &lt;code>Chromium SafeNPrintf&lt;/code>ÔºåÂÆûÁé∞‰∫ÜÁ±ªÂûãÂÆâÂÖ®ÁöÑÂ≠óÁ¨¶‰∏≤Ê†ºÂºèÂåñÔºå‰ªªÊÑèÈïøÂ∫¶Êï¥Âûã &lt;code>%d&lt;/code>ÔºåÂ≠óÁ¨¶‰∏≤&lt;code>%s&lt;/code>, ÊµÆÁÇπ(float, double) &lt;code>%f&lt;/code>, ÂçÅÂÖ≠ËøõÂà∂ &lt;code>%x&lt;/code> &lt;code>%X&lt;/code>ÔºåËøòÊúâ &lt;code>%p&lt;/code> ËæìÂá∫ÊåáÈíà„ÄÇÊîØÊåÅ Pading ËæìÂá∫„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// https://github.com/fcharlie/bela/blob/master/include/bela/fmt.hpp
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">template&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">typename&lt;/span>... &lt;span style="color:#58a1dd">Args&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">ssize_t&lt;/span> &lt;span style="color:#58a1dd">StrFormat&lt;/span>(&lt;span style="color:#ff636f">wchar_t&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">buf&lt;/span>, &lt;span style="color:#58a1dd">size_t&lt;/span> &lt;span style="color:#58a1dd">N&lt;/span>, &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">wchar_t&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">fmt&lt;/span>, &lt;span style="color:#58a1dd">Args&lt;/span>... &lt;span style="color:#58a1dd">args&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">format_internal&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FormatArg&lt;/span> &lt;span style="color:#58a1dd">arg_array&lt;/span>[] &lt;span style="color:#ff636f">=&lt;/span> {&lt;span style="color:#58a1dd">args&lt;/span>...};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">format_internal&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">StrFormatInternal&lt;/span>(&lt;span style="color:#58a1dd">buf&lt;/span>, &lt;span style="color:#58a1dd">N&lt;/span>, &lt;span style="color:#58a1dd">fmt&lt;/span>, &lt;span style="color:#58a1dd">arg_array&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">sizeof&lt;/span>...(&lt;span style="color:#58a1dd">args&lt;/span>));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">template&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">size_t&lt;/span> &lt;span style="color:#58a1dd">N&lt;/span>, &lt;span style="color:#ff636f">typename&lt;/span>... &lt;span style="color:#58a1dd">Args&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">ssize_t&lt;/span> &lt;span style="color:#58a1dd">StrFormat&lt;/span>(&lt;span style="color:#ff636f">wchar_t&lt;/span> (&lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">buf&lt;/span>)[&lt;span style="color:#58a1dd">N&lt;/span>], &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">wchar_t&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">fmt&lt;/span>, &lt;span style="color:#58a1dd">Args&lt;/span>... &lt;span style="color:#58a1dd">args&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// Use Arg() object to record type information and then copy arguments to an
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#828b96;font-style:italic">// array to make it easier to iterate over them.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">format_internal&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FormatArg&lt;/span> &lt;span style="color:#58a1dd">arg_array&lt;/span>[] &lt;span style="color:#ff636f">=&lt;/span> {&lt;span style="color:#58a1dd">args&lt;/span>...};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">format_internal&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">StrFormatInternal&lt;/span>(&lt;span style="color:#58a1dd">buf&lt;/span>, &lt;span style="color:#58a1dd">N&lt;/span>, &lt;span style="color:#58a1dd">fmt&lt;/span>, &lt;span style="color:#58a1dd">arg_array&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">sizeof&lt;/span>...(&lt;span style="color:#58a1dd">args&lt;/span>));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">template&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">typename&lt;/span>... &lt;span style="color:#58a1dd">Args&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">wstring&lt;/span> &lt;span style="color:#58a1dd">StrFormat&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">wchar_t&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">fmt&lt;/span>, &lt;span style="color:#58a1dd">Args&lt;/span>... &lt;span style="color:#58a1dd">args&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">format_internal&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FormatArg&lt;/span> &lt;span style="color:#58a1dd">arg_array&lt;/span>[] &lt;span style="color:#ff636f">=&lt;/span> {&lt;span style="color:#58a1dd">args&lt;/span>...};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">format_internal&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">StrFormatInternal&lt;/span>(&lt;span style="color:#58a1dd">fmt&lt;/span>, &lt;span style="color:#58a1dd">arg_array&lt;/span>, &lt;span style="color:#ff636f">sizeof&lt;/span>...(&lt;span style="color:#58a1dd">args&lt;/span>));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// Fast-path when we don&amp;#39;t actually need to substitute any arguments.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#58a1dd">ssize_t&lt;/span> &lt;span style="color:#58a1dd">StrFormat&lt;/span>(&lt;span style="color:#ff636f">wchar_t&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">buf&lt;/span>, &lt;span style="color:#58a1dd">size_t&lt;/span> &lt;span style="color:#58a1dd">N&lt;/span>, &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">wchar_t&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">fmt&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">wstring&lt;/span> &lt;span style="color:#58a1dd">StrFormat&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">wchar_t&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">fmt&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">template&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">size_t&lt;/span> &lt;span style="color:#58a1dd">N&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">inline&lt;/span> &lt;span style="color:#58a1dd">ssize_t&lt;/span> &lt;span style="color:#58a1dd">StrFormat&lt;/span>(&lt;span style="color:#ff636f">wchar_t&lt;/span> (&lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">buf&lt;/span>)[&lt;span style="color:#58a1dd">N&lt;/span>], &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">wchar_t&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">fmt&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">StrFormat&lt;/span>(&lt;span style="color:#58a1dd">buf&lt;/span>, &lt;span style="color:#58a1dd">N&lt;/span>, &lt;span style="color:#58a1dd">fmt&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÊîØÊåÅÁöÑÂ≠óÁ¨¶‰∏≤Á±ªÂûãÔºö&lt;/p>
&lt;ul>
&lt;li>&lt;code>std::wstring&lt;/code>&lt;/li>
&lt;li>&lt;code>std::wstring_view&lt;/code>&lt;/li>
&lt;li>&lt;code>const wchar_t *&lt;/code>&lt;/li>
&lt;li>&lt;code>wchar_t *&lt;/code>&lt;/li>
&lt;li>&lt;code>std::u16string&lt;/code>&lt;/li>
&lt;li>&lt;code>std::u16string_view&lt;/code>&lt;/li>
&lt;li>&lt;code>const char16_t *&lt;/code>&lt;/li>
&lt;li>&lt;code>char16_t *&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>‰ª•Âèä‰ª•‰∏ã‰ºöËΩ¨Êç¢‰∏∫ UTF-16 ÁöÑ UTF-8 Â≠óÁ¨¶‰∏≤Á±ªÂûãÔºö&lt;/p>
&lt;ul>
&lt;li>&lt;code>std::string&lt;/code>&lt;/li>
&lt;li>&lt;code>std::string_view&lt;/code>&lt;/li>
&lt;li>&lt;code>const char *&lt;/code>&lt;/li>
&lt;li>&lt;code>char *&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>Âü∫‰∫é &lt;code>Bela Format&lt;/code> ÊàëËøòÁºñÂÜô‰∫Ü &lt;code>bela::FPrintF&lt;/code> Â∞ÜÊ†ºÂºèÂåñÁöÑÊï∞ÊçÆËæìÂá∫Âà∞ÊéßÂà∂Âè∞ÁªàÁ´ØÊàñËÄÖÊñá‰ª∂ÔºåÂΩìËæìÂá∫Âà∞ Conhost Êó∂ÔºåÂàô‰ºö‰ª• UTF-16 ÁºñÁ†ÅËæìÂá∫ÔºåËã•ËæìÂá∫Âà∞Êñá‰ª∂ÊàñËÄÖ Cygwin ÁªàÁ´ØÊó∂ÔºåÂàô‰ºöËΩ¨‰∏∫ UTF-8 ËæìÂá∫„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">//https://github.com/fcharlie/bela/blob/master/include/bela/stdwriter.hpp
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#58a1dd">ssize_t&lt;/span> &lt;span style="color:#58a1dd">StdWrite&lt;/span>(&lt;span style="color:#58a1dd">FILE&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">out&lt;/span>, &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">wstring_view&lt;/span> &lt;span style="color:#58a1dd">msg&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">template&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">typename&lt;/span>... &lt;span style="color:#58a1dd">Args&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">ssize_t&lt;/span> &lt;span style="color:#58a1dd">FPrintF&lt;/span>(&lt;span style="color:#58a1dd">FILE&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">out&lt;/span>, &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">wchar_t&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">fmt&lt;/span>, &lt;span style="color:#58a1dd">Args&lt;/span>... &lt;span style="color:#58a1dd">args&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">format_internal&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FormatArg&lt;/span> &lt;span style="color:#58a1dd">arg_array&lt;/span>[] &lt;span style="color:#ff636f">=&lt;/span> {&lt;span style="color:#58a1dd">args&lt;/span>...};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">str&lt;/span> &lt;span style="color:#ff636f">=&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">format_internal&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">StrFormatInternal&lt;/span>(&lt;span style="color:#58a1dd">fmt&lt;/span>, &lt;span style="color:#58a1dd">arg_array&lt;/span>, &lt;span style="color:#ff636f">sizeof&lt;/span>...(&lt;span style="color:#58a1dd">args&lt;/span>));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">StdWrite&lt;/span>(&lt;span style="color:#58a1dd">out&lt;/span>, &lt;span style="color:#58a1dd">str&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">inline&lt;/span> &lt;span style="color:#58a1dd">ssize_t&lt;/span> &lt;span style="color:#58a1dd">FPrintF&lt;/span>(&lt;span style="color:#58a1dd">FILE&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">out&lt;/span>, &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">wchar_t&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">fmt&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">str&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">StrFormat&lt;/span>(&lt;span style="color:#58a1dd">fmt&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">StdWrite&lt;/span>(&lt;span style="color:#58a1dd">out&lt;/span>, &lt;span style="color:#58a1dd">str&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÔºàÊ≠§‰ª£Á†ÅËÉΩÂ§üÂú® Windows Terminal Âíå Mintty Á≠âÁªàÁ´Ø‰∏äÊ≠£Â∏∏ÊòæÁ§∫ emojiÔºâÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// https://github.com/fcharlie/bela/blob/master/test/fmt/main.cc
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#include&lt;/span> &lt;span style="color:#828b96;font-style:italic">&amp;lt;bela/stdwriter.hpp&amp;gt;&lt;/span>&lt;span style="color:#828b96;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">wmain&lt;/span>(&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">argc&lt;/span>, &lt;span style="color:#ff636f">wchar_t&lt;/span> &lt;span style="color:#ff636f">**&lt;/span>&lt;span style="color:#58a1dd">argv&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">ux&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">\xf0\x9f\x98\x81&lt;/span>&lt;span style="color:#a6be9d"> UTF-8 text &lt;/span>&lt;span style="color:#a6be9d">\xE3\x8D\xA4&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>; &lt;span style="color:#828b96;font-style:italic">// force encode UTF-8
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">wchar_t&lt;/span> &lt;span style="color:#58a1dd">wx&lt;/span>[] &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;Engine &lt;/span>&lt;span style="color:#a6be9d">\xD83D\xDEE0&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">bela&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">FPrintF&lt;/span>(&lt;span style="color:#58a1dd">stderr&lt;/span>, &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;Argc: %d Arg0: %s W: %s UTF-8: %s __cplusplus: %d&lt;/span>&lt;span style="color:#a6be9d">\n&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">argc&lt;/span>, &lt;span style="color:#58a1dd">argv&lt;/span>[&lt;span style="color:#a6be9d">0&lt;/span>], &lt;span style="color:#58a1dd">wx&lt;/span>, &lt;span style="color:#58a1dd">ux&lt;/span>, &lt;span style="color:#58a1dd">__cplusplus&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ÁªìÂ∞æ">ÁªìÂ∞æ&lt;/h2>
&lt;p>Âú®Ê†ºÂºèÂåñÂáΩÊï∞ÁöÑËøáÁ®ã‰∏≠ÔºåC++ ÁöÑ‰∏çË∂≥Âú®‰∫éÊ≤°ÊúâÂèçÂ∞ÑÔºå‰ªéËÄåÊó†Ê≥ïÂæàÂ•ΩÁöÑËé∑ÂæóÂØπË±°ÁöÑÁ±ªÂûãÔºåËøôÊ†∑‰º†ÁªüÁöÑÊ†ºÂºèÂåñÊñπÊ°àÂ∞±ÂÆπÊòìÂá∫Áé∞ÈóÆÈ¢òÔºåËÄåÊòØÁî®ÂèòÂèÇÊ®°ÊùøÔºåÂú®Â§çÊùÇÁöÑÁºñÁ†ÅÊäÄÂ∑ßÂä†ÊàêÂêéÔºå‰ΩøÁî®ÁºñËØëÂô®ÁöÑÊ£ÄÊü•ËÉΩÂ§üÂæàÂ•ΩÁöÑÂÆûÁé∞Á±ªÂûãÂÆâÂÖ®È´òÊïàÁöÑÊ†ºÂºèÂåñÔºå‰ΩÜÊòØ‰πüÂ≠òÂú®‰∏Ä‰∏™ÈóÆÈ¢òÔºåÈÇ£Â∞±ÊòØÁ®ãÂ∫èÁºñËØëÂêéÊèê‰∫§ËæÉÂ§ßÔºå‰ΩÜÈÉΩÂà∞‰∫Ü 9012ÔºåÂè™Ë¶Å‰∏çË∂ÖËøá Clang ÁöÑ‰ΩìÁßØÈÉΩÊòØËÉΩÊé•ÂèóÁöÑ„ÄÇ&lt;/p>
- https://forcemz.net/posts/2019/2019-04-29-string-formatting-talk/ - Copyright (c) 2009-2024 J23</description></item><item><title>ÂÆûÁé∞ Git ÁõÆÂΩïÊùÉÈôêÊéßÂà∂</title><link>https://forcemz.net/posts/2019/2019-04-01-implement-git-dir-accesss-control/</link><pubDate>Mon, 01 Apr 2019 10:00:00 +0800</pubDate><guid>https://forcemz.net/posts/2019/2019-04-01-implement-git-dir-accesss-control/</guid><description>Charlie's Rethinking https://forcemz.net/posts/2019/2019-04-01-implement-git-dir-accesss-control/ -&lt;h1 id="ÂâçË®Ä">ÂâçË®Ä&lt;/h1>
&lt;p>Git ‰∏é Subversion ÊúâËØ∏Â§ö‰∏çÂêåÔºåÊúÄÊ†∏ÂøÉÁöÑ‰∏ÄÁÇπÊòØÂâçËÄÖÂ±û‰∫éÂàÜÂ∏ÉÂºèÁâàÊú¨ÊéßÂà∂Â∑•ÂÖ∑ÔºåÂêéËÄÖÂ±û‰∫éÈõÜ‰∏≠ÂºèÁâàÊú¨ÊéßÂà∂Â∑•ÂÖ∑„ÄÇÂâçËÄÖÁöÑÊèê‰∫§Ë°å‰∏∫ÊòØÁ¶ªÁ∫øÁöÑÔºåÊú¨Âú∞ÁöÑÔºåÂêéËÄÖÁöÑÊèê‰∫§ÊòØÂú®Á∫øÁöÑÔºåÈúÄË¶Å‰∏éËøúÁ®ã‰∏≠Â§ÆÊúçÂä°Âô®ÈÄö‰ø°ÔºåÂú®Á∫øÂàõÂª∫Êèê‰∫§„ÄÇÂü∫‰∫éËøôÁßçÁé∞ÂÆûÔºåGit Âíå Subversion Âú®ÂéüÁîüÊèê‰æõÁöÑÈôÑÂä†ÂäüËÉΩ‰πüÂ≠òÂú®ÂæàÂ§ßÁöÑÂ∑ÆÂà´„ÄÇÊØîÂ¶ÇÁõÆÂΩïÊùÉÈôêÊéßÂà∂„ÄÇGit ÂéüÁîüÂπ∂‰∏çÊîØÊåÅÁõÆÂΩïÊùÉÈôêÊéßÂà∂ÔºåËÄå Subversion ÊîØÊåÅ„ÄÇ&lt;/p>
&lt;h2 id="subversion-ÁöÑÁõÆÂΩïÊùÉÈôêÊéßÂà∂">Subversion ÁöÑÁõÆÂΩïÊùÉÈôêÊéßÂà∂&lt;/h2>
&lt;p>Áî®Êà∑Êé•ÂÖ•ËøúÁ®ãÊúçÂä°Âô®‰∏äÁöÑ Subversion Â≠òÂÇ®Â∫ìÈÄöÂ∏∏ÂèØ‰ª•‰ΩøÁî® HTTP ÂçèËÆÆ SVN ÂçèËÆÆ‰ª•Âèä SVN+SSH ÂçèËÆÆÔºåHTTP ÂçèËÆÆÊú¨Ë¥®‰∏äÊòØ HTTP ÂÆ¢Êà∑Á´Ø‰∏é Apache httpd ÊúçÂä°Âô®ÈÄö‰ø°ÔºåÊ≠§Êó∂ÔºåËØ∑Ê±ÇÁî± &lt;code>mod_dav_svn.so&lt;/code> Ê®°ÂùóÂ§ÑÁêÜÔºåÁÑ∂ÂêéË∞ÉÁî® subversion ÁöÑÊ†∏ÂøÉÊ®°ÂùóÔºåÂåÖÊã¨Êñá‰ª∂Á≥ªÁªüÂíåÂ≠òÂÇ®Â∫ìÊ®°Âùó„ÄÇ‰ΩøÁî® HTTP ËÆøÈóÆ Subversion Â≠òÂÇ®Â∫ìÊó∂ÔºåÂèØ‰ª•Â¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>svn co https://llvm.org/svn/llvm-project/llvm/trunk
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ËøòÂèØ‰ª•Áõ¥Êé•Ê£ÄÂá∫Â≠òÂÇ®Â∫ìÁöÑÂ≠êÁõÆÂΩïÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>svn co https://llvm.org/svn/llvm-project/llvm/trunk/include/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>‰ΩøÁî® SVN ÂçèËÆÆ‰∏é SVN+SSH ÂçèËÆÆÊú¨Ë¥®‰∏äÈÉΩÊòØ‰∏éËøúÁ®ãÊúçÂä°Âô®‰∏äÁöÑ &lt;code>svnserve&lt;/code> ÈÄö‰ø°ÔºåÂâçËÄÖÊòØ svnserve ÁõëÂê¨ 3690 TCP Á´ØÂè£ÔºåÂêéËÄÖÊòØÂú®ËøúÁ®ãÊúçÂä°Âô®‰∏äËøêË°å &lt;code>svnserve -t&lt;/code>Ôºå‰ΩÜÂÜÖÈÉ®ÁöÑÁªÜËäÇÈÉΩÊòØ‰∏ÄËá¥ÁöÑ„ÄÇÊ£ÄÂá∫‰ª£Á†ÅÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>svn co svn://llvm.org/svn/llvm-project/llvm/trunk
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ËøòÂèØ‰ª•Áõ¥Êé•Ê£ÄÂá∫Â≠òÂÇ®Â∫ìÁöÑÂ≠êÁõÆÂΩïÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>svn co svn://llvm.org/svn/llvm-project/llvm/trunk/include/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Subversion ÁöÑÊèê‰∫§ÊòØÂú®Á∫øÁöÑÔºå‰ª• SVN ÂçèËÆÆ‰∏∫‰æãÔºåÂΩìÁî®Êà∑Êèê‰∫§‰ª£Á†ÅÊó∂Ôºåsvn ÂÆ¢Êà∑Á´ØÂ∞ÜÂèëÈÄÅ &lt;code>commit&lt;/code> ÂëΩ‰ª§Ê∂àÊÅØÁªô svnserveÔºåÁÑ∂ÂêéÂú®Ëøô‰∏™ÂëΩ‰ª§‰∏≠Â∞Ü‰øÆÊîπÁöÑÊñá‰ª∂ÂèëÈÄÅÂà∞ËøúÁ®ãÊúçÂä°Âô®ÔºåËøúÁ®ãÊúçÂä°Âô®‰∏ä‰ΩúÂá∫‰∏Ä‰∫õÂàóÊìç‰ΩúÔºåÁÑ∂ÂêéÂàõÂª∫Êèê‰∫§„ÄÇÂú®Ëøô‰∏™ËøáÁ®ã‰∏≠ÔºåÂè™Ë¶ÅÂØπÊñá‰ª∂Áõ∏ÂØπÂ≠òÂÇ®Â∫ìÁöÑË∑ØÂæÑ‰∏éÁõÆÂΩïÊùÉÈôêËßÑÂàô‰ΩúÂá∫ÂåπÈÖçÔºåÂ∞±ÂèØ‰ª•Áü•ÈÅìÁî®Êà∑ÊòØÂê¶Áî±ËÉΩÂäõ‰øÆÊîπÁõ∏Â∫îÊñá‰ª∂„ÄÇ&lt;/p>
&lt;p>Subversion ÁöÑÂéüÁêÜ‰πüÂ∞±‰ΩøÂÖ∂ÂæàÂÆπÊòìÊîØÊåÅÁªÜÁ≤íÂ∫¶ÁöÑÊùÉÈôêÊéßÂà∂ÔºåÂèØ‰ª•Á≤æÁ°ÆÂà∞Êñá‰ª∂„ÄÇsvnserve ÂèØ‰ª•‰øÆÊîπ svnserve.conf ÂÆûÁé∞ÔºåËÄå HTTP Âàô‰∏é apache mod_dav_svn Ê®°ÂùóÊúâÂÖ≥„ÄÇ&lt;/p>
&lt;p>Â¶ÇÊûúË¶ÅÁ¶ÅÊ≠¢Áî®Êà∑ËØªÂèñÔºåÂàôÂú® checkout ÁöÑÊó∂ÂÄôÁ¶ÅÊ≠¢Ê£ÄÂá∫Âç≥ÂèØÔºåÂÆûÁé∞Ëµ∑Êù•Âπ∂‰∏çÂõ∞Èöæ„ÄÇ&lt;/p>
&lt;h2 id="git-‰∏çÊîØÊåÅÁõÆÂΩïÊùÉÈôêÊéßÂà∂">Git ‰∏çÊîØÊåÅÁõÆÂΩïÊùÉÈôêÊéßÂà∂&lt;/h2>
&lt;p>ÂÉè Git ËøôÊ†∑ÁöÑÂàÜÂ∏ÉÂºèÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÔºåËé∑ÂæóËøúÁ®ãÂ≠òÂÇ®Â∫ìÁöÑË°å‰∏∫Âè´ÂÅö &lt;code>clone&lt;/code>ÔºåÂ∏∏ËßÑÊÉÖÂÜµ‰∏ãËé∑ÂæóËøúÁ®ãÂ≠òÂÇ®Â∫ìÁöÑÊâÄÊúâÊï∞ÊçÆÔºå‰ΩÜËøôÁßçÊñπÂºèÊØïÁ´üÈúÄË¶ÅËé∑ÂæóÂ§ßÈáèÊï∞ÊçÆÔºåÂõ†Ê≠§ Git ËøòÊèê‰æõÊµÖË°®ÂÖãÈöÜÔºåËøòÊúâ VFSForGit ËøôÊ†∑ÁöÑÊñπÂºèÂè™Ëé∑ÂæóÁõÆÂΩïÁªìÊûÑÔºå‰∏çËé∑ÂèñÊñá‰ª∂ÂÜÖÂÆπÔºåËøòÊúâËßÑÂàí‰∏≠ÁöÑÈÉ®ÂàÜÂÖãÈöÜ„ÄÇ&lt;/p>
&lt;p>Âú®ÊúçÂä°Âô®‰∏äÔºåË¶ÅÊéßÂà∂Â≠òÂÇ®Â∫ìÁöÑÊï∞ÊçÆÊåâÁõÆÂΩïÁ≤íÂ∫¶Êèê‰æõÁªôÁî®Êà∑ËØªÂèñÔºåÈÄöÂ∏∏Êó†Ê≥ïÈÄöËøá Git ÂÆ¢Êà∑Á´ØÂÆûÁé∞ÔºåËøôÊòØÁî± Git ‰º†ËæìÂçèËÆÆÂÜ≥ÂÆöÁöÑÔºåGit Âú®ÂÖãÈöÜËøúÁ®ãÂ≠òÂÇ®Â∫ìÊó∂ÈúÄÂÖà &amp;lsquo;ÂèëÁé∞ÂºïÁî®ÂàóË°®&amp;rsquo;ÔºåÁÑ∂ÂêéÊåâÈúÄÊ±ÇËé∑ÂæóÂºïÁî®ÂàóË°®ÁöÑÊèê‰∫§ IDÔºåÊúçÂä°Âô®Â∞ÜËøô‰∫õ Commit ‰ª•ÂèäÁõ∏ÂÖ≥ÁöÑ Tree Blob Á≠âÁ≠âÂõûÊ∫ØÊâìÂåÖÂèëÈÄÅÁªôÂÆ¢Êà∑Á´Ø„ÄÇGit ÊúçÂä°Âô®ÊúÄÂ§öËÉΩÂÆûÁé∞ÁöÑÊòØÂú®Âú® &amp;lsquo;ÂºïÁî®ÂπøÊí≠&amp;rsquo; Êó∂ÈöêËóèÁâπÂÆöÁöÑÂºïÁî®ÂÆûÁé∞ÂØπÁî®Êà∑ÁöÑÁ¶ÅÊ≠¢ËØªÂèñÔºå‰ΩÜË¶ÅÂÅöÂà∞ÁõÆÂΩïÁ∫ßÂà´ÁöÑÁ¶ÅÊ≠¢ËØªÂèñÔºåÁõÆÂâçÁî±‰∫é Git ÂçèËÆÆÈôêÂà∂ÊöÇÊó∂Êó†Ê≥ïÂÆûÁé∞„ÄÇ&lt;/p>
&lt;p>ÂàÜÂ∏ÉÂºèÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÁöÑÊèê‰∫§Ë°å‰∏∫ÂèëÁîüÂú®Êú¨Âú∞ÔºåÂΩì‰∫∫‰ª¨ËøêË°å &lt;code>git commit -m &amp;quot;message&amp;quot;&lt;/code> Êó∂ÔºåÂ∞±‰ºöÂú®Êú¨Âú∞ÂàõÂª∫‰∏Ä‰∏™Êèê‰∫§„ÄÇÊó†ËÆ∫ÊòØ Subversion ËøòÊòØ GitÔºåÊèê‰∫§Âú®Â≠òÂÇ®Â∫ì‰∏≠ÂÖ∑ÊúâÂîØ‰∏ÄÊÄßÔºåÊèê‰∫§ÂàõÂª∫ÂêéÔºåÁõÆÂΩïÁªìÊûÑÔºåÊñá‰ª∂ÂÜÖÂÆπÔºåÊèê‰∫§‰ø°ÊÅØ‰πüÂ∞±Â∑≤ÁªèÁ°ÆÂÆö‰∫ÜÔºåÂ¶ÇÊûúÂÜçÊ¨°‰øÆÊîπÂ∞±‰∏çÂÜçÊòØÁõ∏ÂêåÁöÑÊèê‰∫§„ÄÇÂú® Subversion ‰∏≠Êèê‰∫§Âç†ÊçÆÂîØ‰∏ÄÁöÑ‰∏Ä‰∏™‰øÆËÆ¢Âè∑(Revision)ÔºåÂú® Git ‰∏≠ÂàôÊòØÂîØ‰∏ÄÁöÑ commitID (ÁõÆÂâç‰∏∫ SHA1ÔºåÊú™Êù•ËÆ°ÂàíËΩ¨Âèò‰∏∫ SHA-256)„ÄÇÂú®Êú¨Âú∞Êèê‰∫§ÂêéÔºåGit Â≠òÂÇ®Â∫ìÁõÆÂΩïÁªìÊûÑÂ∑≤ÁªèÁ°ÆÂÆöÔºåÂõ†Ê≠§Êé®ÈÄÅÂà∞ÊúçÂä°Âô®Âπ∂‰∏çËÉΩÊîπÂèòÂÖ∂ÁõÆÂΩïÁªìÊûÑÔºåËøôÂ∞±ÊÑèÂë≥ÁùÄÔºåÂú®ÊúçÂä°Âô®‰∏ä Git ‰∏çÊîØÊåÅÁõÆÂΩïÁ∫ßÂà´Á≤íÂ∫¶ÁöÑÂÜôÂÖ•ÊéßÂà∂„ÄÇ&lt;/p>
&lt;p>ÁªºÂêàÊù•ÁúãÔºåÂú®ÊúçÂä°Âô®ÊñπÔºåGit ÊòØÂÆåÂÖ®‰∏çÊîØÊåÅÁõÆÂΩïÊùÉÈôêÊéßÂà∂ÁöÑ„ÄÇ&lt;/p>
&lt;h2 id="git-ÂÆûÁé∞ÁõÆÂΩïÊùÉÈôêÊéßÂà∂ÁöÑ‰∏ÄÁßçÈÄîÂæÑ">Git ÂÆûÁé∞ÁõÆÂΩïÊùÉÈôêÊéßÂà∂ÁöÑ‰∏ÄÁßçÈÄîÂæÑ&lt;/h2>
&lt;p>&lt;strong>Git ÁöÑÁõÆÂΩïÁ∫ßÂà´Á≤íÂ∫¶ÁöÑÁ¶ÅÊ≠¢ËØªÂèñÂπ∂‰∏çÂú®Êú¨ÊñáÁöÑÁ†îÁ©∂ËåÉÂõ¥ÔºåÊú¨ÊñáÊâÄËø∞ÁöÑÁõÆÂΩïÊùÉÈôêÊéßÂà∂‰ªÖÊåá &amp;lsquo;ÁõÆÂΩïÁöÑÂè™ËØª&amp;rsquo;„ÄÇ&lt;/strong>&lt;/p>
&lt;p>Âú®ËÆæËÆ°Ê≠§ÂäüËÉΩÂâçÔºåÊàë‰ª¨ÈúÄË¶Å‰∫ÜËß£ Git ÁöÑ‰∏Ä‰∫õÂéüÁêÜÔºåÊØîÂ¶ÇÔºåÁõÆÂΩïÊùÉÈôêÊéßÂà∂ÂèëÁîüÂú®ÊúçÂä°Á´ØÔºåÂõ†Ê≠§ÔºåÂ§ÑÁêÜÁöÑÊó∂Êú∫‰∏∫ Git Êé®ÈÄÅ‰ª£Á†Å‰ª£ËøúÁ®ãÂ≠òÂÇ®Â∫ìÊó∂Ôºå‰∏ÄÊó¶ÂèëÁé∞Êé®ÈÄÅ‰∏≠‰øÆÊîπ‰∫ÜÂè™ËØªÊñá‰ª∂ÔºàÁõÆÂΩïÔºâÔºåÂàôÊãíÁªùÊé®ÈÄÅ„ÄÇÁî®Êà∑Ë¢´ÊãíÁªùÊé®ÈÄÅÂêéÈúÄË¶ÅÂõûÈÄÄÁâπÂÆöÁöÑÊèê‰∫§ÔºåÁÑ∂ÂêéÈáçÊñ∞Êèê‰∫§ÔºåÊèê‰∫§ÂÆåÊàêÂêéÊé®ÈÄÅÂà∞ËøúÁ®ãÊúçÂä°Âô®ÔºåÂÆûÁé∞Âçè‰ΩúÂÖ±‰∫´ÔºåËøôÊ†∑Â∞±ËææÂà∞‰∫ÜÁõÆÂΩïÊùÉÈôêÊéßÂà∂ÁöÑÁõÆÁöÑ„ÄÇ&lt;/p>
&lt;p>ÂÆûÁé∞ÁõÆÂΩïÊùÉÈôêÊéßÂà∂Ê†∏ÂøÉÊìç‰ΩúÂ∞±ÊòØÊ£ÄÊµãÁõÆÂΩïÁªìÊûÑÁöÑ‰øÆÊîπÔºåÁÑ∂ÂêéÊåâÁÖßÁâπÂÆöÁöÑËßÑÂàôËøõË°åÊã¶Êà™ÔºåÂú®‰∏ç‰øÆÊîπ Git Ê∫êÁ†ÅÁöÑÂü∫Á°Ä‰∏äË¶ÅÂÆûÁé∞Ëøô‰∫õÂäüËÉΩÈÄöÂ∏∏ÂèØ‰ª•‰ΩøÁî®ÊúçÂä°Á´ØÈí©Â≠ê„ÄÇÊúçÂä°Âô®‰∏äÁöÑ‰∏ªË¶ÅÁöÑÈí©Â≠êÊúâ‰∏âÁßçÔºå&lt;code>pre-receive&lt;/code>Ôºå&lt;code>update&lt;/code>,&lt;code>post-receive&lt;/code> ÔºåÁõ∏ÂÖ≥Èí©Â≠êÁöÑÂéüÁêÜÂú® &lt;a href="https://forcemz.net/git/2017/11/22/GitNativeHookDepthOptimization/">Git ÂéüÁîüÈí©Â≠êÁöÑÊ∑±Â∫¶‰ºòÂåñ&lt;/a> ‰∏ÄÊñá‰∏≠Êúâ‰ªãÁªç„ÄÇË¶ÅÂÆûÁé∞Êú¨ËäÇÊâÄËø∞ÂäüËÉΩÈ¶ñÂÖàÂæóÊéíÈô§ &lt;code>post-receive&lt;/code> Èí©Â≠êÔºåÊ≠§Èí©Â≠êÁöÑÊàêÂäü‰∏éÂê¶‰∏ç‰ºöÂΩ±ÂìçÂºïÁî®ÁöÑÊõ¥Êñ∞ÔºåÊâÄ‰ª•Âπ∂‰∏çÂêàÈÄÇÔºåËÄå &lt;code>pre-receive&lt;/code> Èí©Â≠êÁõÆÂâç‰ΩøÁî®‰∫Ü &lt;a href="https://git-scm.com/docs/git-receive-pack#_quarantine_environment">ÁéØÂ¢ÉÈöîÁ¶ªÔºö Quarantine Environment&lt;/a> Êú∫Âà∂ÔºåÁõÆÂâç libgit2 Âπ∂‰∏çÊîØÊåÅÊ≠§ÁâπÊÄßÔºåÊâÄ‰ª•Ë¶ÅÂÆûÁé∞ÁõÆÂΩïÂè™ËØª‰πü‰∏çËÉΩÁõ¥Êé•‰ΩøÁî® &lt;code>pre-receive&lt;/code> Èí©Â≠ê„ÄÇ&lt;/p>
&lt;p>ÊúÄÁªàÔºåÂè™Êúâ &lt;code>update&lt;/code> Èí©Â≠êÂèØÁî®„ÄÇ&lt;/p>
&lt;p>Âú®ÂÆûÁé∞ÁõÆÂΩïÊùÉÈôêÊ£ÄÊµãÊó∂ÔºåÊàë‰ª¨Â∫îÂΩìÂÖàÂàùÂßãÂåñËßÑÂàôÔºåÂú® &lt;a href="https://gitee.com/oscstudio/git-analyze">git-analyze&lt;/a> È°πÁõÆ‰∏≠ÔºåÊàëÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™ &lt;code>update&lt;/code> Èí©Â≠ê‰Ωú‰∏∫ÁõÆÂΩïÊùÉÈôêÊ£ÄÊµãÁöÑÂéüÂûãÔºåËßÑÂàôÊñá‰ª∂Â¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;master&amp;#34;&lt;/span>:{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;dirs&amp;#34;&lt;/span>:[
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;lib/&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;build/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;regex&amp;#34;&lt;/span>:[
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;build$&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ËßÑÂàôÊåâÂàÜÊîØÂêçÂàíÂàÜÔºåÂΩìÁõ∏ÂÖ≥ÁöÑÂàÜÊîØÂπ∂Ê≤°ÊúâËÆæÁΩÆÂè™ËØªÁõÆÂΩïÊó∂ÔºåÂàôÊü•Êâæ &lt;code>.all&lt;/code> ÈÖçÁΩÆÔºåÂÖ∂‰∏≠ &lt;code>.all&lt;/code> Ë°®Á§∫ÊâÄÊúâÂàÜÊîØÔºå&lt;code>.all&lt;/code> ‰∏çËÉΩË¢´Áî®‰∫é git ÂàÜÊîØÊàñËÄÖÂºïÁî®ÂêçÁß∞&lt;sup>1&lt;/sup>ÔºåÂõ†Ê≠§‰ª£Ë°®ÊâÄÊúâÁöÑÂàÜÊîØ„ÄÇËßÑÂàôÊúâÁõÆÂΩïÁ∫ßÂà´ÂåπÈÖçÂíåÊ≠£ÂàôÂåπÈÖçÔºå&lt;code>lib&lt;/code> Ë°®Á§∫ &lt;code>lib&lt;/code> Êñá‰ª∂ÊàñËÄÖÁõÆÂΩï‰∏çÂèØË¢´‰øÆÊîπ„ÄÇËÄå &lt;code>regex&lt;/code> ÂàôË°®Á§∫ÁõÆÂΩïÁ¨¶ÂêàÊ≠£ÂàôË°®ËææÂºèÁöÑË∑ØÂæÑ‰∏çÂèØË¢´‰øÆÊîπ„ÄÇ&lt;/p>
&lt;p>ÂØπ‰∫éÊ≠£ÂàôË°®ËææÂºèÔºåÊàë‰ª¨‰ΩøÁî®ÁöÑÊòØ &lt;a href="https://github.com/google/re2">RE2&lt;/a>ÔºåËøôÊòØ‰∏Ä‰∏™ÈùûÂ∏∏È´òÊïàÁöÑÊ≠£ÂàôË°®ËææÂºèÂ∫ìÔºåÁî± Google ÂºÄÂèë„ÄÇÊã•ÊúâÂ§öÁßçËØ≠Ë®ÄÁªëÂÆö„ÄÇ&lt;/p>
&lt;p>Êó†ËÆ∫ÊòØÁõÆÂΩïÂåπÈÖçËøòÊòØÊ≠£ÂàôË°®ËææÂºèÔºåÊàë‰ª¨ÈÉΩÈúÄË¶ÅËÆæÁΩÆËßÑÂàôÊï∞ÈáèÁöÑ‰∏äÈôêÔºåÈÅøÂÖçËøáÂ§öÁöÑËßÑÂàôÂØºËá¥ËÆ°ÁÆóÈáèËøáÂ§ß„ÄÇÁõÆÂΩïÂåπÈÖçÁõÆÂâçÁöÑÈôêÂà∂‰∏∫ 256ÔºåÊ≠£ÂàôÈôêÂà∂‰∏∫ 64„ÄÇ&lt;/p>
&lt;p>Âú®Á°ÆÂÆöÂ•ΩËßÑÂàôÂêéÔºåÊàë‰ª¨ÈúÄË¶ÅËé∑ÂæóÁõÆÂΩïÊ†ëÁöÑ‰øÆÊîπÁªÜËäÇÔºåÂåÖÊã¨Êñá‰ª∂ÁöÑ‰øÆÊîπÔºåÊñá‰ª∂ÁöÑÂà†Èô§ÔºåÊñá‰ª∂ÁöÑÊ∑ªÂä†Ôºå‰ª•ÂèäÊñá‰ª∂ÁöÑÈáçÂëΩÂêçÔºåÂÖ∂‰∏≠Êñá‰ª∂ÁöÑ UNIX Â±ûÊÄß‰øÆÊîπÂ∫îÂΩìÂ±û‰∫éÊñá‰ª∂ÁöÑ‰øÆÊîπ„ÄÇupdate Èí©Â≠êÁöÑÂëΩ‰ª§Ë°å‰∏∫ &lt;code>refname oldrev newrev&lt;/code>ÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî® &lt;code>git diff oldrev newrev&lt;/code> ËøôÊ†∑ÁöÑÊÄùË∑ØËé∑ÂæóÊñá‰ª∂‰øÆÊîπÁªÜËäÇ„ÄÇÂú® libgit2 ‰∏≠ÔºåÂèØ‰ª•‰ΩøÁî® &lt;code>git_diff_tree_to_tree&lt;/code> ÂéªËé∑ÂæóÁõÆÂΩïÁöÑÂ∑ÆÂºÇ„ÄÇÂ¶ÇÊûú oldrev ÊàñËÄÖ newrev ‰∫åËÄÖ‰∏≠Êúâ‰∏Ä‰∏™ÊòØ &lt;code>zeroid&lt;/code>ÔºåÊ≠§Êó∂Âè™ÈúÄË¶Å‰ΩøÁî® treewalk ÈÅçÂéÜÁõÆÂΩïÂç≥ÂèØÔºåÂΩìÁÑ∂Ôºå‰∫åËÄÖ‰∏çÂèØËÉΩÂêåÊó∂‰∏∫Èõ∂ ID„ÄÇÊ†∏ÂøÉ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">////////
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#include&lt;/span> &lt;span style="color:#828b96;font-style:italic">&amp;#34;executor.hpp&amp;#34;&lt;/span>&lt;span style="color:#828b96;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#include&lt;/span> &lt;span style="color:#828b96;font-style:italic">&amp;lt;git2.h&amp;gt;&lt;/span>&lt;span style="color:#828b96;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">struct&lt;/span> &lt;span style="color:#58a1dd">commit_t&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">commit_t&lt;/span>() &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">default&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">~&lt;/span>&lt;span style="color:#58a1dd">commit_t&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">tree&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nullptr&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">git_tree_free&lt;/span>(&lt;span style="color:#58a1dd">tree&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">commit&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nullptr&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">git_commit_free&lt;/span>(&lt;span style="color:#58a1dd">commit&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">git_commit&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">commit&lt;/span>{&lt;span style="color:#ff636f">nullptr&lt;/span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">git_tree&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">tree&lt;/span>{&lt;span style="color:#ff636f">nullptr&lt;/span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">bool&lt;/span> &lt;span style="color:#58a1dd">lookup&lt;/span>(&lt;span style="color:#58a1dd">git_repository&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">repo&lt;/span>, &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">git_oid&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">id&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">git_commit_lookup&lt;/span>(&lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">commit&lt;/span>, &lt;span style="color:#58a1dd">repo&lt;/span>, &lt;span style="color:#58a1dd">id&lt;/span>) &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">false&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">git_commit_tree&lt;/span>(&lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">tree&lt;/span>, &lt;span style="color:#58a1dd">commit&lt;/span>) &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">class&lt;/span> &lt;span style="color:#58a1dd">executor_base&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">public&lt;/span>&lt;span style="color:#ff636f">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">executor_base&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">git_libgit2_init&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">~&lt;/span>&lt;span style="color:#58a1dd">executor_base&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">repo_&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nullptr&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">git_repository_free&lt;/span>(&lt;span style="color:#58a1dd">repo_&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">git_libgit2_shutdown&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">bool&lt;/span> &lt;span style="color:#58a1dd">open&lt;/span>(&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string_view&lt;/span> &lt;span style="color:#58a1dd">path&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">git_repository_open&lt;/span>(&lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">repo_&lt;/span>, &lt;span style="color:#58a1dd">path&lt;/span>.&lt;span style="color:#58a1dd">data&lt;/span>()) &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">git_repository&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">repo&lt;/span>() { &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">repo_&lt;/span>; }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">private&lt;/span>&lt;span style="color:#ff636f">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">git_repository&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">repo_&lt;/span>{&lt;span style="color:#ff636f">nullptr&lt;/span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Executor&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">Executor&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// initialzie todo
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">base&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">new&lt;/span> &lt;span style="color:#58a1dd">executor_base&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Executor&lt;/span>&lt;span style="color:#ff636f">::~&lt;/span>&lt;span style="color:#58a1dd">Executor&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// delete
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">delete&lt;/span> &lt;span style="color:#58a1dd">base&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">bool&lt;/span> &lt;span style="color:#58a1dd">Executor&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">InitializeRules&lt;/span>(&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string_view&lt;/span> &lt;span style="color:#58a1dd">sv&lt;/span>, &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string_view&lt;/span> &lt;span style="color:#58a1dd">ref&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">ref&lt;/span>.&lt;span style="color:#58a1dd">compare&lt;/span>(&lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#ff636f">sizeof&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;refs/heads/&amp;#34;&lt;/span>) &lt;span style="color:#ff636f">-&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;refs/heads/&amp;#34;&lt;/span>) &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">true&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">branch&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">ref&lt;/span>.&lt;span style="color:#58a1dd">substr&lt;/span>(&lt;span style="color:#ff636f">sizeof&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;refs/heads/&amp;#34;&lt;/span>) &lt;span style="color:#ff636f">-&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">engine&lt;/span>.&lt;span style="color:#58a1dd">PreInitialize&lt;/span>(&lt;span style="color:#58a1dd">sv&lt;/span>, &lt;span style="color:#58a1dd">branch&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">////////////////////////////////////////////////
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">git_treewalk_impl&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">root&lt;/span>, &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">git_tree_entry&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">entry&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">void&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">payload&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">e&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">reinterpret_cast&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">Executor&lt;/span> &lt;span style="color:#ff636f">*&amp;gt;&lt;/span>(&lt;span style="color:#58a1dd">payload&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string&lt;/span> &lt;span style="color:#58a1dd">name&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">root&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">name&lt;/span>.&lt;span style="color:#58a1dd">append&lt;/span>(&lt;span style="color:#58a1dd">git_tree_entry_name&lt;/span>(&lt;span style="color:#58a1dd">entry&lt;/span>));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">e&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">FullMatch&lt;/span>(&lt;span style="color:#58a1dd">name&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">fprintf&lt;/span>(&lt;span style="color:#58a1dd">stderr&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;Path %s is readonly&lt;/span>&lt;span style="color:#a6be9d">\n&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">name&lt;/span>.&lt;span style="color:#58a1dd">c_str&lt;/span>());
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#ff636f">-&lt;/span>&lt;span style="color:#a6be9d">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">bool&lt;/span> &lt;span style="color:#58a1dd">Executor&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">ExecuteTreeWalk&lt;/span>(&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string_view&lt;/span> &lt;span style="color:#58a1dd">rev&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">git_oid&lt;/span> &lt;span style="color:#58a1dd">oid&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">git_oid_fromstrn&lt;/span>(&lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">oid&lt;/span>, &lt;span style="color:#58a1dd">rev&lt;/span>.&lt;span style="color:#58a1dd">data&lt;/span>(), &lt;span style="color:#58a1dd">rev&lt;/span>.&lt;span style="color:#58a1dd">size&lt;/span>()) &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">false&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">commit_t&lt;/span> &lt;span style="color:#58a1dd">commit&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#ff636f">!&lt;/span>&lt;span style="color:#58a1dd">commit&lt;/span>.&lt;span style="color:#58a1dd">lookup&lt;/span>(&lt;span style="color:#58a1dd">base&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">repo&lt;/span>(), &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">oid&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">false&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> (&lt;span style="color:#58a1dd">git_tree_walk&lt;/span>(&lt;span style="color:#58a1dd">commit&lt;/span>.&lt;span style="color:#58a1dd">tree&lt;/span>, &lt;span style="color:#58a1dd">GIT_TREEWALK_PRE&lt;/span>, &lt;span style="color:#58a1dd">git_treewalk_impl&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">this&lt;/span>) &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">git_diff_callback&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">git_diff_delta&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">delta&lt;/span>, &lt;span style="color:#ff636f">float&lt;/span> &lt;span style="color:#58a1dd">progress&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">void&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">payload&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#ff636f">void&lt;/span>)&lt;span style="color:#58a1dd">progress&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">e&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">reinterpret_cast&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">Executor&lt;/span> &lt;span style="color:#ff636f">*&amp;gt;&lt;/span>(&lt;span style="color:#58a1dd">payload&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">switch&lt;/span> (&lt;span style="color:#58a1dd">delta&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">status&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">case&lt;/span> &lt;span style="color:#58a1dd">GIT_DELTA_ADDED&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/*fallthrough*/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">case&lt;/span> &lt;span style="color:#58a1dd">GIT_DELTA_MODIFIED&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/*fallthrough*/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">case&lt;/span> &lt;span style="color:#58a1dd">GIT_DELTA_COPIED&lt;/span>: &lt;span style="color:#828b96;font-style:italic">// copy to new path
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">e&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">FullMatch&lt;/span>(&lt;span style="color:#58a1dd">delta&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">new_file&lt;/span>.&lt;span style="color:#58a1dd">path&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">fprintf&lt;/span>(&lt;span style="color:#58a1dd">stderr&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;Path &amp;#39;%s&amp;#39; is readonly&lt;/span>&lt;span style="color:#a6be9d">\n&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">delta&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">old_file&lt;/span>.&lt;span style="color:#58a1dd">path&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">break&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">case&lt;/span> &lt;span style="color:#58a1dd">GIT_DELTA_DELETED&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">e&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">FullMatch&lt;/span>(&lt;span style="color:#58a1dd">delta&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">old_file&lt;/span>.&lt;span style="color:#58a1dd">path&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">fprintf&lt;/span>(&lt;span style="color:#58a1dd">stderr&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;Path &amp;#39;%s&amp;#39; is readonly&lt;/span>&lt;span style="color:#a6be9d">\n&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">delta&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">old_file&lt;/span>.&lt;span style="color:#58a1dd">path&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">break&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">default&lt;/span>&lt;span style="color:#ff636f">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// ex. GIT_DELTA_RENAMED
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">e&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">FullMatch&lt;/span>(&lt;span style="color:#58a1dd">delta&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">new_file&lt;/span>.&lt;span style="color:#58a1dd">path&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">fprintf&lt;/span>(&lt;span style="color:#58a1dd">stderr&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;Path &amp;#39;%s&amp;#39; is readonly&lt;/span>&lt;span style="color:#a6be9d">\n&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">delta&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">old_file&lt;/span>.&lt;span style="color:#58a1dd">path&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">e&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">FullMatch&lt;/span>(&lt;span style="color:#58a1dd">delta&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">old_file&lt;/span>.&lt;span style="color:#58a1dd">path&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">fprintf&lt;/span>(&lt;span style="color:#58a1dd">stderr&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;Path &amp;#39;%s&amp;#39; is readonly&lt;/span>&lt;span style="color:#a6be9d">\n&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">delta&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">old_file&lt;/span>.&lt;span style="color:#58a1dd">path&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">break&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">struct&lt;/span> &lt;span style="color:#58a1dd">diff_t&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">~&lt;/span>&lt;span style="color:#58a1dd">diff_t&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">p&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nullptr&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">git_diff_free&lt;/span>(&lt;span style="color:#58a1dd">p&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">git_diff&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">p&lt;/span>{&lt;span style="color:#ff636f">nullptr&lt;/span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">bool&lt;/span> &lt;span style="color:#58a1dd">Executor&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">Execute&lt;/span>(&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string_view&lt;/span> &lt;span style="color:#58a1dd">path&lt;/span>, &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string_view&lt;/span> &lt;span style="color:#58a1dd">oldrev&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string_view&lt;/span> &lt;span style="color:#58a1dd">newrev&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">engine&lt;/span>.&lt;span style="color:#58a1dd">Empty&lt;/span>()) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// Engine rules empty so return
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">true&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#ff636f">!&lt;/span>&lt;span style="color:#58a1dd">base&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">open&lt;/span>(&lt;span style="color:#58a1dd">path&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">false&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">constexpr&lt;/span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#58a1dd">zerooid&lt;/span>[] &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;0000000000000000000000000000000000000000&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">oldrev&lt;/span> &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#58a1dd">zerooid&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">ExecuteTreeWalk&lt;/span>(&lt;span style="color:#58a1dd">newrev&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">newrev&lt;/span> &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#58a1dd">zerooid&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">ExecuteTreeWalk&lt;/span>(&lt;span style="color:#58a1dd">oldrev&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">git_oid&lt;/span> &lt;span style="color:#58a1dd">ooid&lt;/span>, &lt;span style="color:#58a1dd">noid&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">git_oid_fromstrn&lt;/span>(&lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">ooid&lt;/span>, &lt;span style="color:#58a1dd">oldrev&lt;/span>.&lt;span style="color:#58a1dd">data&lt;/span>(), &lt;span style="color:#58a1dd">oldrev&lt;/span>.&lt;span style="color:#58a1dd">size&lt;/span>()) &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">false&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">git_oid_fromstrn&lt;/span>(&lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">noid&lt;/span>, &lt;span style="color:#58a1dd">newrev&lt;/span>.&lt;span style="color:#58a1dd">data&lt;/span>(), &lt;span style="color:#58a1dd">newrev&lt;/span>.&lt;span style="color:#58a1dd">size&lt;/span>()) &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">false&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">commit_t&lt;/span> &lt;span style="color:#58a1dd">oldcommit&lt;/span>, &lt;span style="color:#58a1dd">newcommit&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#ff636f">!&lt;/span>&lt;span style="color:#58a1dd">oldcommit&lt;/span>.&lt;span style="color:#58a1dd">lookup&lt;/span>(&lt;span style="color:#58a1dd">base&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">repo&lt;/span>(), &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">ooid&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">false&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#ff636f">!&lt;/span>&lt;span style="color:#58a1dd">newcommit&lt;/span>.&lt;span style="color:#58a1dd">lookup&lt;/span>(&lt;span style="color:#58a1dd">base&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">repo&lt;/span>(), &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">noid&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">false&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">diff_t&lt;/span> &lt;span style="color:#58a1dd">diff&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">git_diff_options&lt;/span> &lt;span style="color:#58a1dd">opts&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">git_diff_init_options&lt;/span>(&lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">opts&lt;/span>, &lt;span style="color:#58a1dd">GIT_DIFF_OPTIONS_VERSION&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">git_diff_tree_to_tree&lt;/span>(&lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">diff&lt;/span>.&lt;span style="color:#58a1dd">p&lt;/span>, &lt;span style="color:#58a1dd">base&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">repo&lt;/span>(), &lt;span style="color:#58a1dd">oldcommit&lt;/span>.&lt;span style="color:#58a1dd">tree&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">newcommit&lt;/span>.&lt;span style="color:#58a1dd">tree&lt;/span>, &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">opts&lt;/span>) &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">false&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">git_diff_foreach&lt;/span>(&lt;span style="color:#58a1dd">diff&lt;/span>.&lt;span style="color:#58a1dd">p&lt;/span>, &lt;span style="color:#58a1dd">git_diff_callback&lt;/span>, &lt;span style="color:#ff636f">nullptr&lt;/span>, &lt;span style="color:#ff636f">nullptr&lt;/span>, &lt;span style="color:#ff636f">nullptr&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">this&lt;/span>) &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>update Â∑•ÂÖ∑Ê∫êÁ†ÅÂú∞ÂùÄ‰∏∫Ôºö&lt;a href="https://gitee.com/oscstudio/git-analyze/tree/master/tools/update">https://gitee.com/oscstudio/git-analyze/tree/master/tools/update&lt;/a>„ÄÇ&lt;/p>
&lt;p>Âú®Êú¨ÊñπÊ°à‰∏≠ÔºåÊàë‰ª¨Áõ¥Êé•ÊØîËæÉ oldrev-newrev ÁöÑÂ∑ÆÂºÇÔºåËÄå‰∏çÊòØÂõûÊ∫ØÈÄíÂΩíÂéªÂà§Êñ≠ commit ‰∏é parent-commit ÁöÑÂ∑ÆÂºÇÔºåËøôÊúâ‰ª•‰∏ãËÄÉËôëÔºö&lt;/p>
&lt;ul>
&lt;li>Êàë‰ª¨ÈúÄË¶ÅÈôêÂà∂ÁöÑÊòØÊúÄÁªàÁöÑÁªìÊûúËÄåÊó†ÈúÄËÄÉËôë‰∏≠Èó¥ÁöÑËøáÁ®ãÔºåÊó†ËÆ∫‰∏≠Èó¥ÁéØËäÇÂ¶Ç‰ΩïÂèòÂåñÔºåÂè™Ë¶ÅÊúÄÁªàÁöÑÂè™ËØªÁõÆÂΩïÔºåÊñá‰ª∂Êú™ÂèëÁîü‰øÆÊîπÂç≥ÂèØ„ÄÇÊú™ÂèëÁîü‰øÆÊîπË°®Á§∫ blob ‰∏çÂèòÔºåtree ‰∏çÂèò„ÄÇ&lt;/li>
&lt;li>Êàë‰ª¨Âè™ diff oldrev-newrev ‰∏§ËÄÖÔºåÈÅøÂÖçÊ†°È™å‰∏≠Èó¥ÁéØÂ¢ÉËÉΩÂ§üÈôç‰ΩéÂè™ËØªÊñá‰ª∂ÂäüËÉΩÈÄ†Êàê‰ª£Á†ÅÊé®ÈÄÅÁöÑÂìçÂ∫îÈÄüÁéá‰∏ãÈôç„ÄÇ&lt;/li>
&lt;/ul>
&lt;p>ËøôÂÆûÈôÖ‰∏ä‰∏é‰ΩøÁî® &lt;code>update&lt;/code> Èí©Â≠êÂÆûÁé∞Â§ßÊñá‰ª∂Ê£ÄÊµãÁöÑÁ≠ñÁï•ÊúâÂæàÂ§ßÁöÑ‰∏çÂêåÔºåÂ§ßÊñá‰ª∂Ê£ÄÊµãÂ¶ÇÊûú‰∏çÂõûÊ∫ØÂéªÊ£ÄÊµãÔºåÂàôÂèØËÉΩ‰ºöÂøΩÁï•‰∏≠Èó¥ commit ÂºïÂÖ•ÁöÑÂ§ßÊñá‰ª∂ÔºåËøô‰∫õÂ§ßÊñá‰ª∂‰ºö‰∏ÄÁõ¥Â≠òÂú®‰∫éÂ≠òÂÇ®Â∫ì‰∏≠ÔºåÂØºËá¥Â≠òÂÇ®Â∫ì‰ΩìÁßØËæÉÂ§ßÔºåÊâìÂåÖÂõ∞ÈöæÔºå‰º†ËæìÊó∂Èó¥Èïø„ÄÇËøô‰πüÊòØÊàë‰ΩøÁî® pre-receive Èí©Â≠êÂü∫‰∫éÁéØÂ¢ÉÈöîÁ¶ªÔºå‰ΩøÁî® Pack-Index Êñá‰ª∂Ê£ÄÊµãÂ§ßÊñá‰ª∂Âèñ‰ª£ update Èí©Â≠êÁöÑÂéüÂõ†‰πã‰∏Ä„ÄÇ&lt;/p>
&lt;p>Âú® git diff ÁöÑÊñá‰ª∂‰øÆÊîπ‰∏≠ÔºåÊñá‰ª∂Ë∑ØÂæÑ‰∏∫Áõ∏ÂØπË∑ØÂæÑÔºåÂ¶ÇÊûúÊòØÂú® worktree ‰∏≠Ôºådiff ÁöÑËæìÂá∫ÁªìÊûú‰∏éÂΩìÂâçÁõÆÂΩïÊúâÂÖ≥ÔºåËÄåÂú®Ë£∏Â≠òÂÇ®Â∫ì‰∏≠Ôºådiff ÁöÑÊñá‰ª∂Ë∑ØÂæÑ‰∏éÊòØÁõ∏ÂØπ‰∫é Â≠òÂÇ®Â∫ì worktree Ê†πÁõÆÂΩïÁöÑË∑ØÂæÑ„ÄÇÈÇ£‰πàÊàë‰ª¨Âú®ÁîüÊàêË∑ØÂæÑÊ†°È™åËßÑÂàôÊó∂ÔºåÂàôÈúÄÂØπÊñá‰ª∂Ë∑ØÂæÑËøõË°åÂ§ÑÁêÜ‰ª•Á¨¶ÂêàÁõ∏ÂØπË∑ØÂæÑ„ÄÇÂπ∂‰∏î git diff ÁöÑÊñá‰ª∂Ë∑ØÂæÑ‰ª• &lt;code>/&lt;/code> ÂàÜÂâ≤ÔºåË¶ÅÂà§Êñ≠‰∏Ä‰∏™Ë∑ØÂæÑÊòØÂê¶‰∏∫Âè™ËØªÊñá‰ª∂ÊàñËÄÖÂ±û‰∫éÂè™ËØªÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂ÔºåÂè™ÈúÄË¶ÅÂà§Êñ≠Êñá‰ª∂Ë∑ØÂæÑË¢´ÂåÖÂê´Âú®Âè™ËØªË∑ØÂæÑ‰πã‰∏≠Âç≥ÂèØ„ÄÇ&lt;/p>
&lt;p>Êàë‰ª¨ÂÖàÂ∞ÜË∑ØÂæÑËßÑËåÉÂåñÔºå‰πüÂ∞±ÊòØÂéªÈô§Â§ö‰ΩôÁöÑ &lt;code>/&lt;/code>ÔºåÁÑ∂ÂêéÊØîËæÉÊñá‰ª∂Ë∑ØÂæÑ‰ª•Âè™ËØªË∑ØÂæÑÂºÄÂ§¥Âπ∂‰∏îÂ≠òÂú®Â¶Ç‰∏ã‰∏§ÁßçÊÉÖÂÜµÔºö&lt;/p>
&lt;ul>
&lt;li>Êñá‰ª∂Ë∑ØÂæÑÈïøÂ∫¶‰∏éÂè™ËØªË∑ØÂæÑÈïøÂ∫¶Áõ∏Á¨¶ÔºåÊñá‰ª∂Ë∑ØÂæÑ‰∏∫Âè™ËØªÊñá‰ª∂Ë∑ØÂæÑ„ÄÇ&lt;/li>
&lt;li>Âè™ËØªË∑ØÂæÑÈïøÂ∫¶‰∏∫ lÔºåÊñá‰ª∂Ë∑ØÂæÑ‰∏∫Á¨¶Âè∑ PÔºåÂÖ∂‰∏≠ &lt;code>P[l]='/'&lt;/code>ÔºåÊ≠§Êó∂Ë∑ØÂæÑ‰∏∫Âè™ËØªË∑ØÂæÑÁöÑÂ≠êË∑ØÂæÑ„ÄÇ&lt;/li>
&lt;/ul>
&lt;p>Ë∑ØÂæÑÂåÖÂê´Âà§Êñ≠‰ª£Á†ÅÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// when sub startswith parant
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// 1. size equal --&amp;gt; path equal
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// 2. path[p.size()]==&amp;#39;/&amp;#39; At this point, &amp;#39;path&amp;#39; is a subpath of p
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">inline&lt;/span> &lt;span style="color:#ff636f">bool&lt;/span> &lt;span style="color:#58a1dd">IsPathContains&lt;/span>(&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string_view&lt;/span> &lt;span style="color:#58a1dd">parent&lt;/span>, &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">string_view&lt;/span> &lt;span style="color:#58a1dd">sub&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> (&lt;span style="color:#58a1dd">parent&lt;/span>.&lt;span style="color:#58a1dd">size&lt;/span>() &lt;span style="color:#ff636f">&amp;lt;=&lt;/span> &lt;span style="color:#58a1dd">sub&lt;/span>.&lt;span style="color:#58a1dd">size&lt;/span>() &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">memcmp&lt;/span>(&lt;span style="color:#58a1dd">parent&lt;/span>.&lt;span style="color:#58a1dd">data&lt;/span>(), &lt;span style="color:#58a1dd">sub&lt;/span>.&lt;span style="color:#58a1dd">data&lt;/span>(), &lt;span style="color:#58a1dd">parent&lt;/span>.&lt;span style="color:#58a1dd">size&lt;/span>()) &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#58a1dd">sub&lt;/span>.&lt;span style="color:#58a1dd">size&lt;/span>() &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#58a1dd">parent&lt;/span>.&lt;span style="color:#58a1dd">size&lt;/span>() &lt;span style="color:#ff636f">||&lt;/span> &lt;span style="color:#58a1dd">sub&lt;/span>[&lt;span style="color:#58a1dd">parent&lt;/span>.&lt;span style="color:#58a1dd">size&lt;/span>()] &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">&amp;#39;/&amp;#39;&lt;/span>));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Â¶ÇÊûú‰ΩøÁî® &lt;code>update&lt;/code> Èí©Â≠êÂÆûÁé∞ commit ÁßÅÊúâÈÇÆÁÆ±ËøáÊª§Ôºå‰∏∫‰∫ÜÈÅøÂÖçÁßÅÊúâÈÇÆÁÆ±ÈÄÉÈÄ∏ÔºåÂàôÈúÄË¶ÅÂõûÊ∫Ø„ÄÇ&lt;/p>
&lt;h2 id="ÂèçÊÄù">ÂèçÊÄù&lt;/h2>
&lt;p>ËôΩÁÑ∂Êú¨ÊñáËÆ≤Ëø∞‰∫ÜÂÆûÁé∞ Git ÁõÆÂΩïÊùÉÈôêÊéßÂà∂ÁöÑÂÆûÁé∞ÁöÑ‰∏ÄÁßçÈÄîÂæÑÔºå‰ΩÜÁ¨îËÄÖÊØîËæÉÂèçÂØπËøáÂàÜ‰ΩøÁî® Git ÊúçÂä°Á´ØÈí©Â≠êÂÆûÁé∞ËøáÂ§öÈ¢ùÂ§ñÁöÑÂäüËÉΩ„ÄÇ‰∏ÄÊñπÈù¢ÔºåËøô‰∫õÂäüËÉΩÂπ∂Èùû‰∏çÂèØÊõø‰ª£ÔºåÂ§ßÂ§öÊï∞ÈÉΩËÉΩÂèØ‰ª•ÈÄöËøáËßÑËåÉÁöÑÂçè‰ΩúÊñπÂºèÂÆûÁé∞Áõ∏ÂêåÁöÑÁõÆÁöÑ„ÄÇÊØîÂ¶ÇÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî® fork-RP Ê®°ÂûãÂèÇ‰∏éÂçè‰ΩúÂºÄÂèëÔºåÁÑ∂ÂêéÂú®‰∏ªÂ≠òÂÇ®Â∫ì‰∏≠ËÆæÁΩÆ‰øùÊä§ÂàÜÊîØÔºå‰∏•Ê†ºÈôêÂà∂‰øÆÊîπÔºåÊàë‰ª¨ËøòÂèØ‰ª•ÂÆûÁé∞Âè™ËØªÂ≠òÂÇ®Â∫ìÔºåÂç≥‰øÆÊîπÂè™ËÉΩÈÄöËøá PR ‰øÆÊîπÂ≠òÂÇ®Â∫ìÔºåÊãíÁªù‰ªéÂÆ¢Êà∑Á´ØÊé®ÈÄÅÁ≠â„ÄÇ&lt;/p>
&lt;p>Âè¶‰∏ÄÊñπÈù¢ÔºåÂ¶ÇÊûúÂú®Èí©Â≠ê‰∏≠ÂÆûÁé∞ÁöÑÂäüËÉΩËøáÂ§öÔºåËøôÂäøÂøÖ‰ºöÂØºËá¥ÊúçÂä°Âô®‰∏äÂ≠òÂÇ®Â∫ìÂìçÂ∫îÊó∂Èó¥ÂèòÈïøÔºåÊúçÂä°Âô®Âπ∂ÂèëÈôç‰ΩéÔºåËøôÊó∂ÂÄôÂä†Êú∫Âô®‰πüÊïàÊûúÊúâÈôêÔºåÁâπÂà´ÊòØÁ°¨‰ª∂ËÆæÊñΩ‰∏çË∂≥ÁöÑÂΩ±ÂìçÊõ¥Â§ß„ÄÇÂäüËÉΩËøáÂ§ö‰πü‰ºöÂØºËá¥ÂºÄÂèëÂèòÂæóÂºÇÂ∏∏Â§çÊùÇÔºåÈí©Â≠êÈô§‰∫ÜÂÅöËøô‰∏™ËøòË¶ÅÂÅöÈÇ£‰∏™ÔºåÊï¥‰∏™ÊµÅÁ®ãÂ§ÑÁêÜÊµÅÁ®ã‰∏ÄÁéØÊâ£‰∏ÄÁéØÔºåËøôÂØπÂºÄÂèëËÄÖË¶ÅÊ±ÇÊØîËæÉÈ´ò„ÄÇÂ¶ÇÊûúÂá∫‰∫éÊïàÁéáÂéüÂõ†‰øÆÊîπ git Ê∫êÁ†ÅÂÆûÁé∞Ëøô‰∫õÂäüËÉΩÂàôÂèØËÉΩÂ∏¶Êù•Ëá™Ë°åÁª¥Êä§ git ÂàÜÊîØÁöÑÂõ∞Â¢ÉÔºåÁâπÂà´ÊòØ git ‰πüÊòØÂú®‰∏çÊñ≠ÂèëÂ±ïÁöÑÔºåÊØîÂ¶Ç git ËÆ°ÂàíÂÆûÊñΩÁöÑÈÉ®ÂàÜÂÖãÈöÜÔºåSHA1 Âà∞ SHA-256 ÁöÑËΩ¨Êç¢Ôºåv2 ÂçèËÆÆÁöÑËøõ‰∏ÄÊ≠•ÂèëÂ±ïÔºå‰ª•Âèä VFSforGit ÁßªÊ§çÂà∞ Linux„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÂÖÖË∂≥ÁöÑ‰∫∫ÂäõÂéªÁª¥Êä§Ëøô‰∫õ‰øÆÊîπÔºåÂæàÂÆπÊòìÂ∞±Ë∑ü‰∏ç‰∏ä git ÁöÑÊ≠•‰ºêÔºåÂàôÂæàÂÆπÊòìÂú®‰ª£Á†ÅÊâòÁÆ°Âπ≥Âè∞ÁöÑÁ´û‰∫â‰∏≠ËêΩÂêé„ÄÇ&lt;/p>
&lt;h2 id="Â§áÊ≥®">Â§áÊ≥®&lt;/h2>
&lt;ol>
&lt;li>Git ÂºïÁî®ÂêçÊ†ºÂºèÊ£ÄÊü•Ôºö&lt;a href="https://git-scm.com/docs/git-check-ref-format">https://git-scm.com/docs/git-check-ref-format&lt;/a>&lt;/li>
&lt;/ol>
- https://forcemz.net/posts/2019/2019-04-01-implement-git-dir-accesss-control/ - Copyright (c) 2009-2024 J23</description></item><item><title>ËÆ∞ÂΩï SSH ÁöÑ‰∏Ä‰∏™ Bug</title><link>https://forcemz.net/posts/2019/2019-03-18-ssh-one-bug/</link><pubDate>Mon, 18 Mar 2019 18:00:00 +0800</pubDate><guid>https://forcemz.net/posts/2019/2019-03-18-ssh-one-bug/</guid><description>Charlie's Rethinking https://forcemz.net/posts/2019/2019-03-18-ssh-one-bug/ -&lt;h2 id="ÊúçÂä°Âô®‰∏äÈîôËØØÁöÑÂëΩ‰ª§Ë°å">ÊúçÂä°Âô®‰∏äÈîôËØØÁöÑÂëΩ‰ª§Ë°å&lt;/h2>
&lt;p>ÊúÄËøëÂú®ÊîπËøõ BSSHDÔºåÂ∞Ü‰∏çË¢´ÂÖÅËÆ∏ÁöÑÂëΩ‰ª§ÊâìÂç∞Âà∞Êó•ÂøóÔºå‰ΩÜÊòØÊàëÈÅáÂà∞‰∫Ü‰∏Ä‰∏™‰∏çÁ¨¶ÂêàÈ¢ÑÊúüÁöÑËæìÂá∫ÔºåÊØîÂ¶ÇÔºåÂú®ÂÆ¢Êà∑Á´ØËøêË°å SSHÔºåÂëΩ‰ª§Â¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>ssh git@localhost &lt;span style="color:#58a1dd">echo&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;There are spaces in the statement&amp;#34;&lt;/span> &lt;span style="color:#ff636f">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÊàëÂ∞ÜÂëΩ‰ª§Ë°å‰ΩøÁî®Â¶Ç‰∏ãÂ§ÑÁêÜÂêéËæìÂá∫Ôºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">fmt&lt;/span>.&lt;span style="color:#58a1dd">Fprintf&lt;/span>(&lt;span style="color:#58a1dd">os&lt;/span>.&lt;span style="color:#58a1dd">Stderr&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;%s\n&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">strings&lt;/span>.&lt;span style="color:#58a1dd">Join&lt;/span>(&lt;span style="color:#58a1dd">s&lt;/span>.&lt;span style="color:#58a1dd">Command&lt;/span>(), &lt;span style="color:#a6be9d">&amp;#34;;&amp;#34;&lt;/span>))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Êàë‰ª¨Âú®ÊúçÂä°Âô®‰∏äÂëΩ‰ª§Ë°åÁöÑËæìÂá∫Â¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>echo;There;are;spaces;in;the;statement;&lt;span style="color:#ff636f">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>‰∏äËø∞ËæìÂá∫‰∏éÈ¢ÑÊúüÂÆåÂÖ®‰∏ç‰∏ÄËá¥ÔºåÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÂëΩ‰ª§Ë°åÁöÑËæìÂá∫Â∫îËØ•Â¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>echo;There are spaces in the statement;&lt;span style="color:#ff636f">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Êàë‰ª¨ÂèØ‰ª•ÁºñËØë‰∏Ä‰∏™ÂëΩ‰ª§Ë°åÁ®ãÂ∫èÈ™åËØÅ‰∏Ä‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// echo.go
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// go build echo.go
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">package&lt;/span> &lt;span style="color:#58a1dd">main&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">import&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;strings&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">func&lt;/span> &lt;span style="color:#58a1dd">main&lt;/span>(){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">fmt&lt;/span>.&lt;span style="color:#58a1dd">Fprintf&lt;/span>(&lt;span style="color:#58a1dd">os&lt;/span>.&lt;span style="color:#58a1dd">Stderr&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;%s\n&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">strings&lt;/span>.&lt;span style="color:#58a1dd">Join&lt;/span>(&lt;span style="color:#58a1dd">os&lt;/span>.&lt;span style="color:#58a1dd">Args&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;;&amp;#34;&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÁÑ∂ÂêéËøêË°åËæìÂá∫ÁªìÊûúÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>./echo &lt;span style="color:#a6be9d">&amp;#34;There are spaces in the statement&amp;#34;&lt;/span> &lt;span style="color:#ff636f">done&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>./echo;There are spaces in the statement;&lt;span style="color:#ff636f">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ËøôÂ∞±ËØ¥ÊòéÔºåSSH ÁöÑËß£ÊûêÂá∫‰∫ÜÈóÆÈ¢ò„ÄÇÊàë‰ª¨‰ΩøÁî®ÁöÑÊòØ &lt;a href="https://github.com/gliderlabs/ssh">github.com/gliderlabs/ssh&lt;/a>ÔºåËøô‰∏™ÈóÆÈ¢òÊòØÂê¶ÊòØ‰∏é &lt;code>gliderlabs/ssh&lt;/code> Ëß£ÊûêÊúâÂÖ≥ÔºåÊàë‰ª¨‰∏çËÉΩËøáÊó©ÁöÑ‰∏ãÁªìËÆ∫ÔºåÊàë‰ª¨ÂèØ‰ª•‰øÆÊîπ &lt;code>gliderlabs/ssh&lt;/code> ÁöÑÊ∫êÁ†ÅÈ™åËØÅ‰∏ÄÁï™„ÄÇ&lt;/p>
&lt;p>&lt;code>gliderlabs/ssh&lt;/code> ÁöÑÂëΩ‰ª§Ë°åËß£Êûê‰ª£Á†ÅÂú®Ôºö&lt;a href="https://github.com/gliderlabs/ssh/blob/ef6d89046be36104109e42ac1fee6601f9be95d7/session.go#L217">https://github.com/gliderlabs/ssh/blob/ef6d89046be36104109e42ac1fee6601f9be95d7/session.go#L217&lt;/a>Ôºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">var&lt;/span> &lt;span style="color:#58a1dd">payload&lt;/span> = &lt;span style="color:#ff636f">struct&lt;/span>{ &lt;span style="color:#58a1dd">Value&lt;/span> &lt;span style="color:#ff636f">string&lt;/span> }{}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">gossh&lt;/span>.&lt;span style="color:#58a1dd">Unmarshal&lt;/span>(&lt;span style="color:#58a1dd">req&lt;/span>.&lt;span style="color:#58a1dd">Payload&lt;/span>, &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">payload&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">sess&lt;/span>.&lt;span style="color:#58a1dd">cmd&lt;/span>, &lt;span style="color:#58a1dd">_&lt;/span> = &lt;span style="color:#58a1dd">shlex&lt;/span>.&lt;span style="color:#58a1dd">Split&lt;/span>(&lt;span style="color:#58a1dd">payload&lt;/span>.&lt;span style="color:#58a1dd">Value&lt;/span>, &lt;span style="color:#ff636f">true&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// If there&amp;#39;s a session policy callback, we need to confirm before
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#828b96;font-style:italic">// accepting the session.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">sess&lt;/span>.&lt;span style="color:#58a1dd">sessReqCb&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span> !&lt;span style="color:#58a1dd">sess&lt;/span>.&lt;span style="color:#58a1dd">sessReqCb&lt;/span>(&lt;span style="color:#58a1dd">sess&lt;/span>, &lt;span style="color:#58a1dd">req&lt;/span>.&lt;span style="color:#58a1dd">Type&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">sess&lt;/span>.&lt;span style="color:#58a1dd">cmd&lt;/span> = &lt;span style="color:#ff636f">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">req&lt;/span>.&lt;span style="color:#58a1dd">Reply&lt;/span>(&lt;span style="color:#ff636f">false&lt;/span>, &lt;span style="color:#ff636f">nil&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Êàë‰ª¨ÂèØ‰ª•Âú® &lt;code>shlex.Split&lt;/code> ÂâçÈù¢ÊèíÂÖ•‰∏ÄÊÆµ‰ª£Á†Å&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">fmt&lt;/span>.&lt;span style="color:#58a1dd">Fprintf&lt;/span>(&lt;span style="color:#58a1dd">os&lt;/span>.&lt;span style="color:#58a1dd">Stderr&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;command: [%s]\n&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">payload&lt;/span>.&lt;span style="color:#58a1dd">Value&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÁÑ∂ÂêéÊàñÂæó BSSHD ÂëΩ‰ª§Ë°åËæìÂá∫Ôºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-txt" data-lang="txt">&lt;span style="display:flex;">&lt;span>command: [echo There are spaces in the statement done]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo;There;are;spaces;in;the;statement;done
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ËÄå command ÁöÑÂÜÖÂÆπÁõ¥Êé•‰ªé SSH Exe ËØ∑Ê±ÇÁöÑÂä†ÂØÜÊï∞ÊçÆËß£ÊûêÂá∫Êù•ÁöÑÔºåËøôÂ∞±ÊÑèÂë≥ÁùÄ SSH ‰º†ÂÖ•‰∫ÜÈîôËØØÁöÑÂëΩ‰ª§„ÄÇÈÇ£‰πàÊàë‰ª¨ÁøªÈòÖ OpenSSH Ê∫êÁ†Å„ÄÇ&lt;/p>
&lt;h2 id="ÊôÆÈÅçÁöÑÁ≥üÁ≥ï">ÊôÆÈÅçÁöÑÁ≥üÁ≥ï&lt;/h2>
&lt;p>Âú® OpenSSH ÁöÑÊ∫êÁ†ÅÈïúÂÉè‰∏≠Ôºö&lt;a href="https://github.com/openssh/openssh-portable/blob/9edbd7821e6837e98e7e95546cede804dac96754/ssh.c#L1061">https://github.com/openssh/openssh-portable/blob/9edbd7821e6837e98e7e95546cede804dac96754/ssh.c#L1061&lt;/a> Êúâ‰∏ÄÊÆµ‰ª£Á†ÅÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/* A command has been specified. Store it into the buffer. */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">for&lt;/span> (&lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>; &lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span> &lt;span style="color:#58a1dd">ac&lt;/span>; &lt;span style="color:#58a1dd">i&lt;/span>&lt;span style="color:#ff636f">++&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> ((&lt;span style="color:#58a1dd">r&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">sshbuf_putf&lt;/span>(&lt;span style="color:#58a1dd">command&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;%s%s&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">?&lt;/span> &lt;span style="color:#a6be9d">&amp;#34; &amp;#34;&lt;/span> &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">av&lt;/span>[&lt;span style="color:#58a1dd">i&lt;/span>])) &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">fatal&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;%s: buffer error: %s&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">__func__&lt;/span>, &lt;span style="color:#58a1dd">ssh_err&lt;/span>(&lt;span style="color:#58a1dd">r&lt;/span>));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ËøôÊÆµ‰ª£Á†ÅÂ∞ÜÂ≠óÁ¨¶‰∏≤Êï∞ÁªÑÂèòÊàê‰∫ÜÂ≠óÁ¨¶‰∏≤Ôºå‰ΩÜÂøòËÆ∞‰∫ÜÂ≠óÁ¨¶‰∏≤Êï∞ÁªÑ‰∏≠ÁöÑÊØè‰∏Ä‰∏™ÈÉΩÊúâÂèØËÉΩÂê´ÊúâÁ©∫Ê†ºÂ≠óÁ¨¶ÔºåÈÇ£‰πàÂú®ÂëΩ‰ª§Ë°åËß£Êûê‰πãÊó∂Â∞±‰ºöÂá∫Áé∞‰∏éÈ¢ÑÊúü‰∏ç‰∏ÄËá¥ÁöÑÁªìÊûú„ÄÇËøô‰∏™ÈóÆÈ¢òÂú® Dropbear SSH ‰∏≠‰πüÂá∫Áé∞‰∫ÜÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">//https://github.com/mkj/dropbear/blob/cb945f9f670e95305c7c5cc5ff344d1f2707b602/cli-runopts.c#L390
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span> (&lt;span style="color:#ff636f">unsigned&lt;/span> &lt;span style="color:#ff636f">int&lt;/span>)&lt;span style="color:#58a1dd">argc&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/* Build the command to send */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">cmdlen&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">for&lt;/span> (&lt;span style="color:#58a1dd">j&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">i&lt;/span>; &lt;span style="color:#58a1dd">j&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span> (&lt;span style="color:#ff636f">unsigned&lt;/span> &lt;span style="color:#ff636f">int&lt;/span>)&lt;span style="color:#58a1dd">argc&lt;/span>; &lt;span style="color:#58a1dd">j&lt;/span>&lt;span style="color:#ff636f">++&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">cmdlen&lt;/span> &lt;span style="color:#ff636f">+=&lt;/span> &lt;span style="color:#58a1dd">strlen&lt;/span>(&lt;span style="color:#58a1dd">argv&lt;/span>[&lt;span style="color:#58a1dd">j&lt;/span>]) &lt;span style="color:#ff636f">+&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>; &lt;span style="color:#828b96;font-style:italic">/* +1 for spaces */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/* Allocate the space */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">cli_opts&lt;/span>.&lt;span style="color:#58a1dd">cmd&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> (&lt;span style="color:#ff636f">char&lt;/span>&lt;span style="color:#ff636f">*&lt;/span>)&lt;span style="color:#58a1dd">m_malloc&lt;/span>(&lt;span style="color:#58a1dd">cmdlen&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">cli_opts&lt;/span>.&lt;span style="color:#58a1dd">cmd&lt;/span>[&lt;span style="color:#a6be9d">0&lt;/span>] &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">&amp;#39;\0&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/* Append all the bits */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">for&lt;/span> (&lt;span style="color:#58a1dd">j&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">i&lt;/span>; &lt;span style="color:#58a1dd">j&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span> (&lt;span style="color:#ff636f">unsigned&lt;/span> &lt;span style="color:#ff636f">int&lt;/span>)&lt;span style="color:#58a1dd">argc&lt;/span>; &lt;span style="color:#58a1dd">j&lt;/span>&lt;span style="color:#ff636f">++&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">strlcat&lt;/span>(&lt;span style="color:#58a1dd">cli_opts&lt;/span>.&lt;span style="color:#58a1dd">cmd&lt;/span>, &lt;span style="color:#58a1dd">argv&lt;/span>[&lt;span style="color:#58a1dd">j&lt;/span>], &lt;span style="color:#58a1dd">cmdlen&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">strlcat&lt;/span>(&lt;span style="color:#58a1dd">cli_opts&lt;/span>.&lt;span style="color:#58a1dd">cmd&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34; &amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">cmdlen&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/* It&amp;#39;ll be null-terminated here */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">TRACE&lt;/span>((&lt;span style="color:#a6be9d">&amp;#34;cmd is: %s&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">cli_opts&lt;/span>.&lt;span style="color:#58a1dd">cmd&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ËÄåÂÉè libssh libssh2 ‰ª•Âèä go &lt;code>crypto/ssh&lt;/code> ÁöÑÊÉØÁî®ÊñπÊ≥ï‰πüÊú™ËÄÉËôëÂà∞ÂëΩ‰ª§Ë°åÂ≠òÂú®Á©∫Ê†ºÁöÑÈóÆÈ¢òÔºåÂõ†Ê≠§ÔºåÂæàÂ§öÂü∫‰∫éËøô‰∫õÂ∫ìÂÆûÁé∞ÁöÑÂÆ¢Êà∑Á´Ø‰πüÊú™ËÄÉËôëËøô‰∏™ÈóÆÈ¢ò„ÄÇ&lt;/p>
&lt;p>Âè¶Â§ñÔºåÂú® &lt;a href="https://tools.ietf.org/html/rfc4254#section-6.5">SSH RFC 4252&lt;/a> ‰∏≠ÔºåÂØπ &lt;code>exec&lt;/code> ÂëΩ‰ª§Ë°åÁöÑËß£ÊûêÔºå‰ªÖ‰ªÖÂè™ÊúâÂ¶Ç‰∏ã‰∏ÄÊÆµËØùÔºö&lt;/p>
&lt;pre tabindex="0">&lt;code> byte SSH_MSG_CHANNEL_REQUEST
uint32 recipient channel
string &amp;#34;exec&amp;#34;
boolean want reply
string command
This message will request that the server start the execution of the
given command. The &amp;#39;command&amp;#39; string may contain a path. Normal
precautions MUST be taken to prevent the execution of unauthorized
commands.
&lt;/code>&lt;/pre>&lt;p>SSH ÁöÑËßÑËåÉÂπ∂Ê≤°ÊúâÊåáÂá∫ÂëΩ‰ª§Ë°åÁöÑËß£ÊûêÊ†ºÂºèËßÑÂàôÔºå‰ΩÜÂÆûÈôÖ‰∏äÔºå&lt;code>command&lt;/code> ÁöÑËß£ÊûêÂ∫îÂΩìÁ¨¶Âêà POSIX 1003.1 ÁöÑ Shell ÈÉ®ÂàÜ„ÄÇÂΩìÁÑ∂ÔºåÊòæÂºèÊèèËø∞‰∏Ä‰∏ã‰ºöÊõ¥Â•Ω„ÄÇ&lt;/p>
&lt;p>ÊàëËßâÂæó Windows Ëøô‰∏ÄÁÇπÂÅöÁöÑÊØîËæÉÂ•ΩÔºåÊñáÊ°£ËßÑËåÉÊØîËæÉÂÆåÂ§áÔºö&lt;a href="https://docs.microsoft.com/en-us/previous-versions/ms880421(v=msdn.10)">Parsing C Command-Line Arguments&lt;/a>„ÄÇ&lt;/p>
&lt;h2 id="openssh-ÊúçÂä°Á´ØÁöÑÂëΩ‰ª§Ë°åËß£Êûê">OpenSSH ÊúçÂä°Á´ØÁöÑÂëΩ‰ª§Ë°åËß£Êûê&lt;/h2>
&lt;p>Âú® OpenSSH SSHD ÁöÑÊ∫êÁ†Å‰∏≠ÔºåÂëΩ‰ª§Ë°åÁöÑÂ§ÑÁêÜÊµÅÁ®ãÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;p>ÂΩìËØ∑Ê±Ç‰∏∫ &lt;code>exec&lt;/code> Êó∂Ôºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">//https://github.com/openssh/openssh-portable/blob/9edbd7821e6837e98e7e95546cede804dac96754/session.c#L2221
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">strcmp&lt;/span>(&lt;span style="color:#58a1dd">rtype&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;shell&amp;#34;&lt;/span>) &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">success&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">session_shell_req&lt;/span>(&lt;span style="color:#58a1dd">ssh&lt;/span>, &lt;span style="color:#58a1dd">s&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#ff636f">else&lt;/span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">strcmp&lt;/span>(&lt;span style="color:#58a1dd">rtype&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;exec&amp;#34;&lt;/span>) &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">success&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">session_exec_req&lt;/span>(&lt;span style="color:#58a1dd">ssh&lt;/span>, &lt;span style="color:#58a1dd">s&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#ff636f">else&lt;/span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">strcmp&lt;/span>(&lt;span style="color:#58a1dd">rtype&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;pty-req&amp;#34;&lt;/span>) &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">success&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">session_pty_req&lt;/span>(&lt;span style="color:#58a1dd">ssh&lt;/span>, &lt;span style="color:#58a1dd">s&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#ff636f">else&lt;/span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">strcmp&lt;/span>(&lt;span style="color:#58a1dd">rtype&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;x11-req&amp;#34;&lt;/span>) &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">success&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">session_x11_req&lt;/span>(&lt;span style="color:#58a1dd">ssh&lt;/span>, &lt;span style="color:#58a1dd">s&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#ff636f">else&lt;/span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">strcmp&lt;/span>(&lt;span style="color:#58a1dd">rtype&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;auth-agent-req@openssh.com&amp;#34;&lt;/span>) &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">success&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">session_auth_agent_req&lt;/span>(&lt;span style="color:#58a1dd">ssh&lt;/span>, &lt;span style="color:#58a1dd">s&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#ff636f">else&lt;/span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">strcmp&lt;/span>(&lt;span style="color:#58a1dd">rtype&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;subsystem&amp;#34;&lt;/span>) &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">success&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">session_subsystem_req&lt;/span>(&lt;span style="color:#58a1dd">ssh&lt;/span>, &lt;span style="color:#58a1dd">s&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#ff636f">else&lt;/span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">strcmp&lt;/span>(&lt;span style="color:#58a1dd">rtype&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;env&amp;#34;&lt;/span>) &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">success&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">session_env_req&lt;/span>(&lt;span style="color:#58a1dd">ssh&lt;/span>, &lt;span style="color:#58a1dd">s&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Ëé∑Âæó &lt;code>Command&lt;/code> Âπ∂ÊâßË°åÂëΩ‰ª§Ôºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">//https://github.com/openssh/openssh-portable/blob/9edbd7821e6837e98e7e95546cede804dac96754/session.c#L2047
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">static&lt;/span> &lt;span style="color:#ff636f">int&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">session_exec_req&lt;/span>(&lt;span style="color:#ff636f">struct&lt;/span> &lt;span style="color:#58a1dd">ssh&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">ssh&lt;/span>, &lt;span style="color:#58a1dd">Session&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">s&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">u_int&lt;/span> &lt;span style="color:#58a1dd">success&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">r&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">command&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">NULL&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> ((&lt;span style="color:#58a1dd">r&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">sshpkt_get_cstring&lt;/span>(&lt;span style="color:#58a1dd">ssh&lt;/span>, &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">command&lt;/span>, &lt;span style="color:#58a1dd">NULL&lt;/span>)) &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span> &lt;span style="color:#ff636f">||&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#58a1dd">r&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">sshpkt_get_end&lt;/span>(&lt;span style="color:#58a1dd">ssh&lt;/span>)) &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">sshpkt_fatal&lt;/span>(&lt;span style="color:#58a1dd">ssh&lt;/span>, &lt;span style="color:#58a1dd">r&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;%s: parse packet&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">__func__&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">success&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">do_exec&lt;/span>(&lt;span style="color:#58a1dd">ssh&lt;/span>, &lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">command&lt;/span>) &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">free&lt;/span>(&lt;span style="color:#58a1dd">command&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">success&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Êó†ËÆ∫ÊòØ‰ΩïÁßçÈÄîÂæÑÔºåÂú® OpenSSH ‰∏≠Ôºåsshd ÂêØÂä®ËøõÁ®ãÈÉΩÊòØÈÄöËøá &lt;code>sh -c&lt;/code> ËøôÊ†∑ÁöÑÊñπÂºèÂÆûÁé∞ÁöÑÔºåËøôÂ∞±ÊÑèÂë≥ÁùÄÔºåÂëΩ‰ª§Ë°åÂ∫îÂΩìÁ¨¶Âêà shell ÁöÑÊ†áÂáÜ„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// https://github.com/openssh/openssh-portable/blob/9edbd7821e6837e98e7e95546cede804dac96754/session.c#L1681
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#ff636f">!&lt;/span>&lt;span style="color:#58a1dd">command&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#58a1dd">argv0&lt;/span>[&lt;span style="color:#a6be9d">256&lt;/span>];
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/* Start the shell. Set initial character to &amp;#39;-&amp;#39;. */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">argv0&lt;/span>[&lt;span style="color:#a6be9d">0&lt;/span>] &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">&amp;#39;-&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">strlcpy&lt;/span>(&lt;span style="color:#58a1dd">argv0&lt;/span> &lt;span style="color:#ff636f">+&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#58a1dd">shell0&lt;/span>, &lt;span style="color:#ff636f">sizeof&lt;/span>(&lt;span style="color:#58a1dd">argv0&lt;/span>) &lt;span style="color:#ff636f">-&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">&amp;gt;=&lt;/span> &lt;span style="color:#ff636f">sizeof&lt;/span>(&lt;span style="color:#58a1dd">argv0&lt;/span>) &lt;span style="color:#ff636f">-&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">errno&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">EINVAL&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">perror&lt;/span>(&lt;span style="color:#58a1dd">shell&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exit&lt;/span>(&lt;span style="color:#a6be9d">1&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/* Execute the shell. */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">argv&lt;/span>[&lt;span style="color:#a6be9d">0&lt;/span>] &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">argv0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">argv&lt;/span>[&lt;span style="color:#a6be9d">1&lt;/span>] &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">NULL&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">execve&lt;/span>(&lt;span style="color:#58a1dd">shell&lt;/span>, &lt;span style="color:#58a1dd">argv&lt;/span>, &lt;span style="color:#58a1dd">env&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/* Executing the shell failed. */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">perror&lt;/span>(&lt;span style="color:#58a1dd">shell&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exit&lt;/span>(&lt;span style="color:#a6be9d">1&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"> * Execute the command using the user&amp;#39;s shell. This uses the -c
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"> * option to execute the command.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">argv&lt;/span>[&lt;span style="color:#a6be9d">0&lt;/span>] &lt;span style="color:#ff636f">=&lt;/span> (&lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>) &lt;span style="color:#58a1dd">shell0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">argv&lt;/span>[&lt;span style="color:#a6be9d">1&lt;/span>] &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;-c&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">argv&lt;/span>[&lt;span style="color:#a6be9d">2&lt;/span>] &lt;span style="color:#ff636f">=&lt;/span> (&lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>) &lt;span style="color:#58a1dd">command&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">argv&lt;/span>[&lt;span style="color:#a6be9d">3&lt;/span>] &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">NULL&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">execve&lt;/span>(&lt;span style="color:#58a1dd">shell&lt;/span>, &lt;span style="color:#58a1dd">argv&lt;/span>, &lt;span style="color:#58a1dd">env&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">perror&lt;/span>(&lt;span style="color:#58a1dd">shell&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exit&lt;/span>(&lt;span style="color:#a6be9d">1&lt;/span>);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ËøôÈáåËøòÊúâ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÊúçÂä°Âô®‰∏äÁöÑ Shell ÂèØËÉΩÊòØ Dash shellÔºåÊäëÊàñÊòØ Bash ShellÔºåËøòÊúâÂèØËÉΩÊòØ Zsh Á≠âÁ≠âÔºå‰∏çÂêåÁöÑ shell ËØ≠Ê≥ïÁöÑÊùëÂ≠ê‰∏ÄÂÆöÁöÑÂ∑ÆÂºÇÔºåÂØπ &lt;code>sh -c '$command'&lt;/code> ÁöÑËß£ÊûêÂπ∂‰∏ç‰∏ÄÂÆöÁõ∏ÂêåÔºåËøô‰πüÂèØËÉΩÂØºËá¥Êõ¥Â§öÁöÑ‰∏çÁ°ÆÂÆöÊÄß„ÄÇ&lt;/p>
&lt;h2 id="Â∞ùËØï‰øÆÂ§ç">Â∞ùËØï‰øÆÂ§ç&lt;/h2>
&lt;p>ÊàëÂàõÂª∫‰∫Ü‰∏Ä‰∏™ PRÔºö&lt;a href="https://github.com/openssh/openssh-portable/pull/123">Fix SSH incorrect command line conversion&lt;/a>ÔºåËøô‰∏™ PR Â∞ÜÂëΩ‰ª§Ë°åÂèÇÊï∞ÁºñÁ†ÅÔºåÊ†∏ÂøÉ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">static&lt;/span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span>&lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#58a1dd">escape_argument&lt;/span>(&lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">buf&lt;/span>, &lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">bufsize&lt;/span>, &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">arg&lt;/span>){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">len&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">strlen&lt;/span>(&lt;span style="color:#58a1dd">arg&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">len&lt;/span> &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">\&amp;#34;\&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span>(&lt;span style="color:#58a1dd">len&lt;/span>&lt;span style="color:#ff636f">+&lt;/span>&lt;span style="color:#a6be9d">2&lt;/span>&lt;span style="color:#ff636f">&amp;gt;=&lt;/span>&lt;span style="color:#58a1dd">bufsize&lt;/span>){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">arg&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">hasspace&lt;/span>, &lt;span style="color:#58a1dd">i&lt;/span> ,&lt;span style="color:#58a1dd">n&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">hasspace&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">n&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">len&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">for&lt;/span> (&lt;span style="color:#58a1dd">i&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#a6be9d">0&lt;/span>; &lt;span style="color:#58a1dd">i&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">len&lt;/span>; &lt;span style="color:#58a1dd">i&lt;/span>&lt;span style="color:#ff636f">++&lt;/span>){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">switch&lt;/span>(&lt;span style="color:#58a1dd">arg&lt;/span>[&lt;span style="color:#58a1dd">i&lt;/span>]){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">case&lt;/span> &lt;span style="color:#a6be9d">&amp;#39;&amp;#34;&amp;#39;&lt;/span>&lt;span style="color:#ff636f">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">case&lt;/span> &lt;span style="color:#a6be9d">&amp;#39;\\&amp;#39;&lt;/span>&lt;span style="color:#ff636f">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">n&lt;/span>&lt;span style="color:#ff636f">++&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">break&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">case&lt;/span> &lt;span style="color:#a6be9d">&amp;#39; &amp;#39;&lt;/span>&lt;span style="color:#ff636f">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">case&lt;/span> &lt;span style="color:#a6be9d">&amp;#39;\t&amp;#39;&lt;/span>&lt;span style="color:#ff636f">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">hasspace&lt;/span> &lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#a6be9d">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">break&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">default&lt;/span>&lt;span style="color:#ff636f">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">break&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span>(&lt;span style="color:#58a1dd">hasspace&lt;/span>){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">n&lt;/span>&lt;span style="color:#ff636f">+=&lt;/span>&lt;span style="color:#a6be9d">2&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">n&lt;/span> &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#58a1dd">len&lt;/span>&lt;span style="color:#ff636f">||&lt;/span>&lt;span style="color:#58a1dd">bufsize&lt;/span>&lt;span style="color:#ff636f">+&lt;/span>&lt;span style="color:#a6be9d">1&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">n&lt;/span>){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">arg&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">j&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">slashes&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span>(&lt;span style="color:#58a1dd">hasspace&lt;/span>){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">buf&lt;/span>[&lt;span style="color:#58a1dd">j&lt;/span>]&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;&amp;#34;&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">j&lt;/span>&lt;span style="color:#ff636f">++&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">for&lt;/span>(&lt;span style="color:#58a1dd">i&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#a6be9d">0&lt;/span>; &lt;span style="color:#58a1dd">i&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">len&lt;/span>; &lt;span style="color:#58a1dd">i&lt;/span>&lt;span style="color:#ff636f">++&lt;/span>){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">switch&lt;/span>(&lt;span style="color:#58a1dd">arg&lt;/span>[&lt;span style="color:#58a1dd">i&lt;/span>]){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">case&lt;/span> &lt;span style="color:#a6be9d">&amp;#39;\\&amp;#39;&lt;/span>&lt;span style="color:#ff636f">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">slashes&lt;/span>&lt;span style="color:#ff636f">++&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">buf&lt;/span>[&lt;span style="color:#58a1dd">j&lt;/span>]&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#58a1dd">arg&lt;/span>[&lt;span style="color:#58a1dd">i&lt;/span>];
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">break&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">case&lt;/span> &lt;span style="color:#a6be9d">&amp;#39;&amp;#34;&amp;#39;&lt;/span>&lt;span style="color:#ff636f">:&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">for&lt;/span>(;&lt;span style="color:#58a1dd">slashes&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span>&lt;span style="color:#a6be9d">0&lt;/span>;&lt;span style="color:#58a1dd">slashes&lt;/span>&lt;span style="color:#ff636f">--&lt;/span>){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">buf&lt;/span>[&lt;span style="color:#58a1dd">j&lt;/span>]&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;\\&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">j&lt;/span>&lt;span style="color:#ff636f">++&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">buf&lt;/span>[&lt;span style="color:#58a1dd">j&lt;/span>]&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;\\&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">j&lt;/span>&lt;span style="color:#ff636f">++&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">buf&lt;/span>[&lt;span style="color:#58a1dd">j&lt;/span>]&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#58a1dd">arg&lt;/span>[&lt;span style="color:#58a1dd">i&lt;/span>];
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">break&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">default&lt;/span>&lt;span style="color:#ff636f">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">slashes&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">buf&lt;/span>[&lt;span style="color:#58a1dd">j&lt;/span>]&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#58a1dd">arg&lt;/span>[&lt;span style="color:#58a1dd">i&lt;/span>];
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">break&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">j&lt;/span>&lt;span style="color:#ff636f">++&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span>(&lt;span style="color:#58a1dd">hasspace&lt;/span>){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">for&lt;/span>(;&lt;span style="color:#58a1dd">slashes&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span>&lt;span style="color:#a6be9d">0&lt;/span>;&lt;span style="color:#58a1dd">slashes&lt;/span>&lt;span style="color:#ff636f">--&lt;/span>){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">buf&lt;/span>[&lt;span style="color:#58a1dd">j&lt;/span>]&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;\\&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">j&lt;/span>&lt;span style="color:#ff636f">++&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">buf&lt;/span>[&lt;span style="color:#58a1dd">j&lt;/span>]&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;&amp;#34;&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">j&lt;/span>&lt;span style="color:#ff636f">++&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">buf&lt;/span>[&lt;span style="color:#58a1dd">j&lt;/span>]&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">//memchr(, int __c, size_t __n)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">buf&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>‰ΩÜ PR Ë¢´ÂÖ≥Èó≠‰∫Ü,Ëøô‰∏™ÈóÆÈ¢òÊúÄÁªàÈúÄË¶Å SSH ÂçèËÆÆÁöÑÊîπËøõÔºåÂê¶ÂàôÈöæ‰ª•‰øÆÂ§ç„ÄÇËÄåÂú® OpenSSH BUG Á§æÂå∫ÂÆûÈôÖ‰∏äÊó©ÊúâËÆ®ËÆ∫Ôºö&lt;a href="http://bugzilla.mindrot.org/show_bug.cgi?id=2283">http://bugzilla.mindrot.org/show_bug.cgi?id=2283&lt;/a>„ÄÇ&lt;/p>
&lt;h2 id="ÊúÄÂêé">ÊúÄÂêé&lt;/h2>
&lt;p>SSH Âπ∂‰∏çÂÆåÁæéÔºåOpenSSH ‰πü‰∏çÂÆåÁæé„ÄÇ&lt;/p>
- https://forcemz.net/posts/2019/2019-03-18-ssh-one-bug/ - Copyright (c) 2009-2024 J23</description></item><item><title>ÊûÑÂª∫ÊÅ∞ÂΩìÁöÑ Git SSH Server</title><link>https://forcemz.net/posts/2019/2019-03-15-make-a-git-ssh-server/</link><pubDate>Fri, 15 Mar 2019 18:00:00 +0800</pubDate><guid>https://forcemz.net/posts/2019/2019-03-15-make-a-git-ssh-server/</guid><description>Charlie's Rethinking https://forcemz.net/posts/2019/2019-03-15-make-a-git-ssh-server/ -&lt;h2 id="ÂâçË®Ä">ÂâçË®Ä&lt;/h2>
&lt;p>Áõ∏ÂØπ‰∫é HTTP(HTTPS) ÂçèËÆÆÔºåGit Âú®‰ΩøÁî® SSH ÂçèËÆÆÊìç‰ΩúËøúÁ®ãÂ≠òÂÇ®Â∫ìÊó∂ÔºåÂõ†‰∏∫ÁúÅÂéª‰∫ÜËæìÂÖ•Áî®Êà∑ÂêçÂØÜÁ†ÅÁöÑÁéØËäÇÔºåÂæÄÂæÄË¶ÅÊõ¥Êñπ‰æø‰∏Ä‰∫õÔºåÂπ∂‰∏îÔºåÂú® Gitlab ËøôÊ†∑ÁöÑ‰ª£Á†ÅÊâòÁÆ°ÊúçÂä°‰∏≠ÔºåSSH Âú®Êó∂Èïø‰∏äÊõ¥ÂÖ∑‰ºòÂäøÔºåÊó©Êúü Gitlab ‰ΩøÁî®‰∫Ü Grack Êèê‰æõ Git HTTP ËÆøÈóÆÊîØÊåÅÔºåÁî±‰∫é Unicron+Grack Âõ∫ÂÆöÊï∞ÁõÆÂ§öÁ∫øÁ®ãÂêåÊ≠•Ê®°ÂûãÂØºËá¥ÊúçÂä°Âô®‰∏äÁöÑ HTTP Ë∂ÖÊó∂‰∏çÂæó‰∏çËÆæÁΩÆÈùûÂ∏∏Â∞èÔºåËÄå SSH fork Â§öÁ∫øÁ®ãÂêåÊ≠•Ê®°ÂûãÂèçËÄåËÉΩÂ§üÊîØÊåÅÊõ¥Â§ßÁöÑËÆøÈóÆÊó∂Èïø„ÄÇÂÆûÈôÖÊÉÖÂÜµ‰∏≠ÔºåGitee Âπ≥Âè∞Èáå Git Êé•ÂÖ•ÁöÑÊúÄÂ§ß‰ªΩÈ¢ù‰πüÊòØ SSH„ÄÇÊûÑÂª∫ÊÅ∞ÂΩìÁöÑ Git SSH Server ÂØπ‰∫éÊï¥‰∏™ Gitee Âπ≥Âè∞‰πüÂ∞±ÈùûÂ∏∏ÈáçË¶Å„ÄÇ&lt;/p>
&lt;h2 id="git-ssh-Âü∫‰∫é-openssh">Git SSH Âü∫‰∫é OpenSSH&lt;/h2>
&lt;p>Âú® OpenSSH ÁöÑ &lt;a href="https://linux.die.net/man/5/sshd_config">&lt;code>sshd_config&lt;/code>&lt;/a> ‰∏≠Êúâ‰∏Ä‰∫õÂÖ≥ÈîÆÈÖçÁΩÆÈ°π &lt;code>AuthorizedKeysFile&lt;/code> (ÈÄöÂ∏∏‰∏∫ &lt;code>.ssh/authorized_keys&lt;/code>) &lt;code>AuthorizedKeysCommand&lt;/code>„ÄÇGit SSH ÁöÑÊéàÊùÉ‰πüÊòØÁî±Ëøô‰∫õÁâπÊÄßÂÆûÁé∞ÁöÑÔºåÂÖ∑‰ΩìÁöÑÂÆûÁé∞ÂèØ‰ª•ÂèÇËÄÉ &lt;a href="https://github.com/gitlabhq/gitlab-shell">gitlab-shell&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>git pull/push over ssh -&amp;gt; gitlab-shell -&amp;gt; API call to gitlab-rails (Authorization) -&amp;gt; accept or decline -&amp;gt; execute git command&lt;/p>
&lt;/blockquote>
&lt;p>Êó©Âú® 2015 Âπ¥ÔºåGitee Áî± NFS Êû∂ÊûÑËΩ¨Âêë‰∏∫ÁõÆÂâçÁöÑÂàÜÂ∏ÉÂºèÊû∂ÊûÑ‰πãÂàùÔºåÊàë‰ª¨Èù¢‰∏¥‰∫Ü‰∏Ä‰∏™ÈöæÈ¢òÔºåÂ¶Ç‰Ωï‰ΩøÂæó Git SSH ÁöÑÊµÅÈáèÂàÜÂèëÂà∞‰∏çÂêåÁöÑÂ≠òÂÇ®ÂêéÁ´ØÔºåÊúÄÂàùÁöÑÊÉ≥Ê≥ïÊòØËøòÊòØ‰ΩøÁî® OpenSSHÔºåÂü∫‰∫éÁ´ØÂè£ËΩ¨ÂèëÔºå‰ΩÜÁ´ØÂè£ËΩ¨ÂèëÁöÑÊµÅÈáèÂú®ÂÜÖÁΩë‰∏≠‰ªçÁÑ∂ÈúÄË¶ÅÈáçÂ§çÂä†ÂØÜËß£ÂØÜÔºåËøôÈùûÂ∏∏Ê∂àËÄó CPU ËµÑÊ∫ê„ÄÇÂπ∂‰∏îÈ™åËØÅÊµÅÁ®ã‰∏çÊòØÂæàÊ∏ÖÊô∞ÔºåÈúÄË¶ÅÂêØÂä®ÂëΩ‰ª§ÂÆåÊàêÈ™åËØÅÔºåËøôÂØπ‰∫é‰ΩìÈáèËæÉÂ§ßÁöÑ‰ª£Á†ÅÊâòÁÆ°Âπ≥Âè∞Êù•ËØ¥ÊòØ‰∏çËÉΩÂøçÂèóÁöÑ„ÄÇ&lt;/p>
&lt;h2 id="gitee-ÁöÑ-ssh-server">Gitee ÁöÑ SSH Server&lt;/h2>
&lt;p>Âú® Gitee ÂàÜÂ∏ÉÂºèÊû∂ÊûÑÊºîËøõÁöÑËøáÁ®ã‰∏≠ÔºåÊàë‰ª¨ÂºÄÂèë‰∫Ü git-srvÔºåÊúÄÂàùÂÆûÁé∞‰∫Ü git-upload-packÔºågit-receive-pack ËøôÊ†∑ÁöÑÂëΩ‰ª§ÔºåËøô‰∫õÂëΩ‰ª§‰ºöÂèñ‰ª£ÂâçÁ´ØÊúçÂä°Âô®‰∏äÁöÑ git-upload-pack/git-receive-packÔºåÂΩìË¢´ÊâìÂºÄÊó∂Ôºå‰ºöÊü•ËØ¢Â≠òÂÇ®ÊúçÂä°Âô®Ë∑ØÁî±Âπ∂‰∏éÂ≠òÂÇ®ÊúçÂä°Âô®‰∏äÁöÑ git-srv ÈÄöËÆØÔºåÊúÄÁªàÂú®Â≠òÂÇ®ÊúçÂä°Âô®‰∏äËøêË°å git-upload-pack/git-receive-pack„ÄÇËøôÁßçÊñπÊ°à‰∏éÁõÆÂâç Gitlab gitlay ÁöÑÊû∂ÊûÑÁ±ª‰ºº„ÄÇ‰ΩÜÊ≠§ÊñπÊ°à‰ªçÁÑ∂ÊúâÂæàÂ§ö‰∏çË∂≥ÔºåÊØèÊù•‰∏Ä‰∏™ËØ∑Ê±ÇÔºåÂàôÈúÄË¶ÅÂêØÂä®‰∏Ä‰∏™Â≠êËøõÁ®ã„ÄÇÂ≠êËøõÁ®ãËøòË¶ÅÁªèÂéÜ‰∏Ä‰∫õÂ§çÊùÇÁöÑÊìç‰ΩúÊâçËÉΩ‰∏éÂêéÁ´ØÂª∫Á´ãËøûÊé•ÔºåËøôÂπ∂‰∏çÈ´òÊïà„ÄÇ&lt;/p>
&lt;p>Âõ†Ê≠§Êàë‰ª¨Áõ¥Êé•Â∞Ü ÂÖºÂÆπÁöÑ git-receive-pack/git-upload-pack Ëøô‰∏Ä‰∏≠Èó¥ÁªÑ‰ª∂ÊãøÊéâÔºåÂÆûÁé∞‰∏Ä‰∏™ SSH ÊúçÂä°‰∏é Git-SRV ÈÄö‰ø°„ÄÇ‰∫éÊòØÊàë‰ª¨Âü∫‰∫é libssh ÂºÄÂèë‰∫Ü Basalt SSHD„ÄÇÁî±‰∫é libssh Âü∫Êú¨‰∏äÊòØ‰∏Ä‰∏™ÂêåÊ≠•ÈòªÂ°ûÁöÑÂ∫ìÔºåÔºàlibssh2 Ê≤°ÊúâÊúçÂä°Á´Ø APIÔºâ, sshd ‰πüÂ∞±Âè™ËÉΩ‰ΩøÁî® pre-fork Ê®°ÂûãÔºåËøô‰∏é OpenSSH Á±ª‰ºº„ÄÇ&lt;/p>
&lt;p>‰ΩÜ Gitee ÁöÑ SSH Server Âπ∂‰∏çÈúÄË¶Å fork Â≠êËøõÁ®ãÊâßË°åÔºåpre-fork Ê®°Âûã‰πüÂ∞±ÊòæÂæóÈùûÂ∏∏È∏°ËÇã„ÄÇÂêéÊù•Êàë‰ª¨Âèà‰ΩøÁî® Golang &lt;a href="https://github.com/gliderlabs/ssh">gliderlabs/ssh&lt;/a> ÂÆûÁé∞‰∫Ü‰∏Ä‰∏™ SSH Server„ÄÇÁõÆÂâç Gitee ËøêË°åÁöÑ SSH ÊúçÂä°Êúâ‰∏§‰∏™ÁâàÊú¨Ôºå‰∏Ä‰∏™ÊòØÂü∫‰∫é libssh ÁöÑ Basalt v1Ôºå‰∏Ä‰∏™ÊòØÂü∫‰∫é Golang ÁöÑ Basalt v2„ÄÇË¶ÅÊü•Áúã Gitee ‰ΩøÁî®ÁöÑ SSH Server ÁâàÊú¨ÔºåÂèØ‰ª•ËøêË°å &lt;code>ssh -Tv git@gitee.com&lt;/code>„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"># libssh&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>debug1: Remote protocol version 2.0, remote software version Basalt-1.2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"># Golang&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>debug1: Remote protocol version 2.0, remote software version Basalt-2.5.2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ssh-server-ÁöÑÈÄâÂûãÊØîËæÉ">SSH Server ÁöÑÈÄâÂûãÊØîËæÉ&lt;/h2>
&lt;p>SSH ÂçèËÆÆÊåáÁöÑÊòØ &lt;a href="https://en.wikipedia.org/wiki/Secure_Shell">ÂÆâÂÖ® Shell (Secure Shell)&lt;/a> ÂçèËÆÆÔºåSSH Áî®‰∫éÊõø‰ª£‰∏çÂÆâÂÖ®ÁöÑ Telnet ÂçèËÆÆÂíå Shell ÂçèËÆÆÔºåÊâÄÊúâÁöÑÊµÅÈáèÂùáÈÄöËøáÂä†ÂØÜ‰º†ËæìÔºåÂçèËÆÆÁöÑ‰∏ªË¶ÅÁâàÊú¨Êúâ SSH-1ÔºåSSH-2„ÄÇSSH ËßÑËåÉÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;ul>
&lt;li>RFC 4250, The Secure Shell (SSH) Protocol Assigned Numbers&lt;/li>
&lt;li>RFC 4251, The Secure Shell (SSH) Protocol Architecture&lt;/li>
&lt;li>RFC 4252, The Secure Shell (SSH) Authentication Protocol&lt;/li>
&lt;li>RFC 4253, The Secure Shell (SSH) Transport Layer Protocol&lt;/li>
&lt;li>RFC 4254, The Secure Shell (SSH) Connection Protocol&lt;/li>
&lt;li>RFC 4255, Using DNS to Securely Publish Secure Shell (SSH) Key Fingerprints&lt;/li>
&lt;li>RFC 4256, Generic Message Exchange Authentication for the Secure Shell Protocol (SSH)&lt;/li>
&lt;li>RFC 4335, The Secure Shell (SSH) Session Channel Break Extension&lt;/li>
&lt;li>RFC 4344, The Secure Shell (SSH) Transport Layer Encryption Modes&lt;/li>
&lt;li>RFC 4345, Improved Arcfour Modes for the Secure Shell (SSH) Transport Layer Protocol&lt;/li>
&lt;/ul>
&lt;p>‰øÆÊîπÂíåÊâ©Â±ïÔºö&lt;/p>
&lt;ul>
&lt;li>RFC 4419, Diffie-Hellman Group Exchange for the Secure Shell (SSH) Transport Layer Protocol (March 2006)&lt;/li>
&lt;li>RFC 4432, RSA Key Exchange for the Secure Shell (SSH) Transport Layer Protocol (March 2006)&lt;/li>
&lt;li>RFC 4462, Generic Security Service Application Program Interface (GSS-API) Authentication and Key Exchange for the Secure Shell (SSH) Protocol (May 2006)&lt;/li>
&lt;li>RFC 4716, The Secure Shell (SSH) Public Key File Format (November 2006)&lt;/li>
&lt;li>RFC 4819: Secure Shell Public Key Subsystem (March 2007)&lt;/li>
&lt;li>RFC 5647: AES Galois Counter Mode for the Secure Shell Transport Layer Protocol (August 2009)&lt;/li>
&lt;li>RFC 5656, Elliptic Curve Algorithm Integration in the Secure Shell Transport Layer (December 2009)&lt;/li>
&lt;li>RFC 6187: X.509v3 Certificates for Secure Shell Authentication (March 2011)&lt;/li>
&lt;li>RFC 6239: Suite B Cryptographic Suites for Secure Shell (SSH) (May 2011)&lt;/li>
&lt;li>RFC 6594: Use of the SHA-256 Algorithm with RSA, Digital Signature Algorithm (DSA), and Elliptic Curve DSA (ECDSA) in SSHFP Resource Records&lt;/li>
&lt;li>RFC 6668, SHA-2 Data Integrity Verification for the Secure Shell (SSH) Transport Layer Protocol (July 2012)&lt;/li>
&lt;li>RFC 7479: [[Ed25519]] SSHFP Resource Records&lt;/li>
&lt;/ul>
&lt;p>ËôΩÁÑ∂ SSH ÊúçÂä°Âô®ÂíåÂÆ¢Êà∑Á´ØÊØîËæÉÂ§ö&lt;sup>1&lt;/sup>Ôºå‰ΩÜÂü∫‰∫éÁé∞ÊàêÁöÑ SSH Â∫ìÂºÄÂèë SSH Server ÁöÑÈÄâÊã©Âπ∂‰∏çÂ§öÔºåÂú® C ÊàñËÄÖ C++ ‰∏≠ÔºåÂü∫Êú¨‰∏äÂè™Êúâ libssh ÂèØÈÄâÔºålibssh Ë¢´Áî®Êù•ÂÆûÁé∞ Git SSH Server ÁöÑÊúâ Gitee Âíå Github„ÄÇ‰ΩÜÁõÆÂâç Github ÁöÑ SSH Server Ê†áËØÜÂèòÊàê‰∫Ü &lt;code>babeld-9d924d26&lt;/code>ÔºåÁõÆÂâçÊòØÂê¶ÂàáÊç¢Âà∞ÂÖ∂‰ªñÂÆûÁé∞‰∏çÂæóËÄåÁü•„ÄÇ&lt;/p>
&lt;p>Libssh ÁöÑÁº∫ÁÇπ‰πüÊØîËæÉÊòéÊòæÔºåÂºÇÊ≠•ÈùûÈòªÂ°ûÊîØÊåÅÊØîËæÉÂº±ÔºåÂè¶Â§ñÂºÄÂèëËÄÖÊØîËæÉÂ∞ëÔºåÈïøÊúüÂè™Êúâ Andreas Schneider ‰∏Ä‰∏™‰∫∫Êèê‰∫§„ÄÇÂπ∂‰∏î Bug ÊØîËæÉÂ§öÔºåGitee Á∫ø‰∏äÁöÑ Libssh ‰πüÊòØÈúÄË¶ÅÂ∫îÁî®ÁâπÂÆöÁöÑ Patch ÊâçË°å„ÄÇÁª¥Êä§ SSHD ÈúÄË¶ÅÁªèÂ∏∏ÁôªÈôÜ &lt;a href="https://bugs.libssh.org/">https://bugs.libssh.org/&lt;/a> Êü•Áúã libssh Âä®ÊÄÅ„ÄÇ&lt;/p>
&lt;p>ÂÖ∂‰ªñËØ≠Ë®ÄÂèØ‰ª•‰ΩøÁî® libssh ÁöÑÁªëÂÆöÊù•ÂºÄÂèë SSH ÊúçÂä°Âô®Ôºå‰πüÂèØ‰ª•‰ΩøÁî®ÂØπÂ∫îËØ≠Ë®ÄÁöÑ SSH Â∫ìÂÆûÁé∞Ôºå‰∏ãÈù¢ÊòØ‰∏Ä‰∫õÂ∏∏ËßÅÁöÑËØ≠Ë®Ä‰∏éÂØπÂ∫îÁöÑ SSH Â∫ìÂÆûÁé∞Ôºö&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ËØ≠Ë®Ä&lt;/th>
&lt;th>Â∫ì&lt;/th>
&lt;th>ÁâπÁÇπ&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Go&lt;/td>
&lt;td>&lt;a href="https://github.com/golang/crypto/tree/master/ssh">crypto/ssh&lt;/a>&lt;/td>
&lt;td>ÂºÇÊ≠•ÔºåGolang ÂÆòÊñπÊîØÊåÅÔºå‰ΩøÁî®ÂπøÊ≥õ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Java&lt;/td>
&lt;td>&lt;a href="https://github.com/apache/mina-sshd">Apache Mina SSHD&lt;/a>&lt;/td>
&lt;td>È´òÊÄßËÉΩÔºåÂäüËÉΩÂÆåÊï¥&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Rust&lt;/td>
&lt;td>&lt;a href="https://pijul.org/thrussh/">Thrussh&lt;/a>&lt;/td>
&lt;td>ÂºÇÊ≠• IOÔºåÁºìÂÜ≤Âå∫ÂÆâÂÖ®&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>C#&lt;/td>
&lt;td>&lt;a href="https://github.com/Aimeast/FxSsh">FxSsh&lt;/a>&lt;/td>
&lt;td>‰∏ªË¶ÅÁî®‰∫é GitCandyÔºåÂäüËÉΩÊúâÈôê&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Âü∫‰∫é Golang &lt;code>crypto/ssh&lt;/code> ÂÆûÁé∞ÁöÑ SSH Server ÊØîËæÉÂ§öÔºåËÄåÂü∫‰∫é Golang ÁöÑÂºÄÊ∫ê‰ª£Á†ÅÊâòÁÆ°Âπ≥Âè∞ Gogs/Gitea Âùá‰ΩøÁî®‰∫Ü &lt;code>crypto/ssh&lt;/code>„ÄÇ&lt;/p>
&lt;p>Apache Mina SSHD Âú® Java Á§æÂå∫ÈáåË¢´ÂπøÊ≥õ‰ΩøÁî®ÔºåÊØîÂ¶Ç Jenkins CI Â∞±Êúâ‰∏™ &lt;a href="https://mvnrepository.com/artifact/org.jenkins-ci.modules/sshd">SSH Server&lt;/a> Ê®°Âùó„ÄÇÂü∫‰∫é Scala (JVM) ÁöÑ‰ª£Á†ÅÊâòÁÆ°Âπ≥Âè∞ &lt;a href="https://github.com/gitbucket/gitbucket">https://github.com/gitbucket/gitbucket&lt;/a> ‰ΩøÁî®‰∫Ü Apache Mina SSHD ÂÆûÁé∞ Git SSH Server„ÄÇ&lt;/p>
&lt;p>ËÄå Thrussh Âàô‰∏ªË¶ÅË¢´Áî®‰∫éÂü∫‰∫é Rust ÁöÑÁâàÊú¨ÊéßÂà∂Â∑•ÂÖ∑ &lt;a href="https://pijul.org/">pijul&lt;/a> ÊèêÈ´ò SSH ÂçèËÆÆÊîØÊåÅ„ÄÇ&lt;/p>
&lt;p>ËøòÊúâ‰∏Ä‰∫õÂïÜ‰∏ö‰∏äÁöÑ SSH Server Â∫ìÔºå‰ΩøÁî®ËæÉÂ∞ë„ÄÇ&lt;/p>
&lt;h2 id="git-ssh-server-ÊäÄÊúØÁªÜËäÇ">Git SSH Server ÊäÄÊúØÁªÜËäÇ&lt;/h2>
&lt;p>ÂÆûÁé∞ Git SSH Server ‰∏éÂÆûÁé∞Â∏∏ËßÑÁöÑ SSH Server ÁöÑÂå∫Âà´‰∏ªË¶ÅÊòØÔºåGit SSH Server Âè™ÊòØ‰∏Ä‰∏™‰∏•Ê†ºÁöÑÂ≠êÈõÜÔºåsession Èò∂ÊÆµÂè™ÈúÄË¶ÅÂÆûÁé∞ &lt;code>env&lt;/code> &lt;code>exec&lt;/code> ‰∏§ÁßçËØ∑Ê±Ç„ÄÇ‰∏çÈúÄË¶ÅÂÆûÁé∞ &lt;code>sftp&lt;/code> ÂíåÁ´ØÂè£ËΩ¨Âèë„ÄÇ&lt;/p>
&lt;p>Âõ†Ê≠§ÁÆÄÂçïÁöÑÂÆûÁé∞‰∏Ä‰∏™ Git SSH Server Âç≥ÂèØÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">package&lt;/span> &lt;span style="color:#58a1dd">main&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">import&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;errors&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;net&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;os/exec&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;os/user&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;path&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;path/filepath&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;strconv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;strings&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;syscall&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;github.com/gliderlabs/ssh&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// Error
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">var&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">ErrPublicKeyNotFound&lt;/span> = &lt;span style="color:#58a1dd">errors&lt;/span>.&lt;span style="color:#58a1dd">New&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;Public key not found&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">ErrEncodeHandshake&lt;/span> = &lt;span style="color:#58a1dd">errors&lt;/span>.&lt;span style="color:#58a1dd">New&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;Handshake encode error&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">ErrRepositoryNotFound&lt;/span> = &lt;span style="color:#58a1dd">errors&lt;/span>.&lt;span style="color:#58a1dd">New&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;Repository Not Found&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">ErrUnreachablePath&lt;/span> = &lt;span style="color:#58a1dd">errors&lt;/span>.&lt;span style="color:#58a1dd">New&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;Path is unreachable&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// StrSplitSkipEmpty skip empty string suggestcap is suggest cap
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">func&lt;/span> &lt;span style="color:#58a1dd">StrSplitSkipEmpty&lt;/span>(&lt;span style="color:#58a1dd">s&lt;/span> &lt;span style="color:#ff636f">string&lt;/span>, &lt;span style="color:#58a1dd">sep&lt;/span> &lt;span style="color:#ff636f">byte&lt;/span>, &lt;span style="color:#58a1dd">suggestcap&lt;/span> &lt;span style="color:#ff636f">int&lt;/span>) []&lt;span style="color:#ff636f">string&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">sv&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">make&lt;/span>([]&lt;span style="color:#ff636f">string&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#58a1dd">suggestcap&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">var&lt;/span> &lt;span style="color:#58a1dd">first&lt;/span>, &lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">int&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">for&lt;/span> ; &lt;span style="color:#58a1dd">i&lt;/span> &amp;lt; &lt;span style="color:#58a1dd">len&lt;/span>(&lt;span style="color:#58a1dd">s&lt;/span>); &lt;span style="color:#58a1dd">i&lt;/span>&lt;span style="color:#ff636f">++&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>[&lt;span style="color:#58a1dd">i&lt;/span>] &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#58a1dd">sep&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">first&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#58a1dd">i&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">sv&lt;/span> = &lt;span style="color:#58a1dd">append&lt;/span>(&lt;span style="color:#58a1dd">sv&lt;/span>, &lt;span style="color:#58a1dd">s&lt;/span>[&lt;span style="color:#58a1dd">first&lt;/span>:&lt;span style="color:#58a1dd">i&lt;/span>])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">first&lt;/span> = &lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">+&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">first&lt;/span> &amp;lt; &lt;span style="color:#58a1dd">len&lt;/span>(&lt;span style="color:#58a1dd">s&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">sv&lt;/span> = &lt;span style="color:#58a1dd">append&lt;/span>(&lt;span style="color:#58a1dd">sv&lt;/span>, &lt;span style="color:#58a1dd">s&lt;/span>[&lt;span style="color:#58a1dd">first&lt;/span>:])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">sv&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// RepoPathClean todo
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">func&lt;/span> &lt;span style="color:#58a1dd">RepoPathClean&lt;/span>(&lt;span style="color:#58a1dd">p&lt;/span> &lt;span style="color:#ff636f">string&lt;/span>) (&lt;span style="color:#ff636f">string&lt;/span>, &lt;span style="color:#ff636f">error&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">xp&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">path&lt;/span>.&lt;span style="color:#58a1dd">Clean&lt;/span>(&lt;span style="color:#58a1dd">p&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">pv&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">StrSplitSkipEmpty&lt;/span>(&lt;span style="color:#58a1dd">xp&lt;/span>, &lt;span style="color:#a6be9d">&amp;#39;/&amp;#39;&lt;/span>, &lt;span style="color:#a6be9d">4&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">len&lt;/span>(&lt;span style="color:#58a1dd">pv&lt;/span>) &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#a6be9d">2&lt;/span> &lt;span style="color:#ff636f">||&lt;/span> &lt;span style="color:#58a1dd">len&lt;/span>(&lt;span style="color:#58a1dd">pv&lt;/span>[&lt;span style="color:#a6be9d">0&lt;/span>]) &amp;lt; &lt;span style="color:#a6be9d">2&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">ErrUnreachablePath&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">pv&lt;/span>[&lt;span style="color:#a6be9d">0&lt;/span>] &lt;span style="color:#ff636f">+&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;/&amp;#34;&lt;/span> &lt;span style="color:#ff636f">+&lt;/span> &lt;span style="color:#58a1dd">strings&lt;/span>.&lt;span style="color:#58a1dd">TrimSuffix&lt;/span>(&lt;span style="color:#58a1dd">pv&lt;/span>[&lt;span style="color:#a6be9d">1&lt;/span>], &lt;span style="color:#a6be9d">&amp;#34;.git&amp;#34;&lt;/span>), &lt;span style="color:#ff636f">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// GetSessionEnv env
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">func&lt;/span> &lt;span style="color:#58a1dd">GetSessionEnv&lt;/span>(&lt;span style="color:#58a1dd">s&lt;/span> &lt;span style="color:#58a1dd">ssh&lt;/span>.&lt;span style="color:#58a1dd">Session&lt;/span>, &lt;span style="color:#58a1dd">key&lt;/span> &lt;span style="color:#ff636f">string&lt;/span>) &lt;span style="color:#ff636f">string&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">prefix&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">key&lt;/span> &lt;span style="color:#ff636f">+&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;=&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">kl&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">len&lt;/span>(&lt;span style="color:#58a1dd">prefix&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">for&lt;/span> &lt;span style="color:#58a1dd">_&lt;/span>, &lt;span style="color:#58a1dd">str&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#ff636f">range&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>.&lt;span style="color:#58a1dd">Environ&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">kl&lt;/span> &lt;span style="color:#ff636f">&amp;gt;=&lt;/span> &lt;span style="color:#58a1dd">len&lt;/span>(&lt;span style="color:#58a1dd">str&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">strings&lt;/span>.&lt;span style="color:#58a1dd">HasPrefix&lt;/span>(&lt;span style="color:#58a1dd">str&lt;/span>, &lt;span style="color:#58a1dd">prefix&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">str&lt;/span>[&lt;span style="color:#58a1dd">kl&lt;/span>:]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// RepoPathStat stat repo
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">func&lt;/span> &lt;span style="color:#58a1dd">RepoPathStat&lt;/span>(&lt;span style="color:#58a1dd">repo&lt;/span> &lt;span style="color:#ff636f">string&lt;/span>) (&lt;span style="color:#ff636f">string&lt;/span>, &lt;span style="color:#ff636f">error&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">r&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">filepath&lt;/span>.&lt;span style="color:#58a1dd">Join&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;/home/git/root&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">repo&lt;/span>[&lt;span style="color:#a6be9d">0&lt;/span>:&lt;span style="color:#a6be9d">2&lt;/span>], &lt;span style="color:#58a1dd">repo&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> !&lt;span style="color:#58a1dd">strings&lt;/span>.&lt;span style="color:#58a1dd">HasSuffix&lt;/span>(&lt;span style="color:#58a1dd">r&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;.git&amp;#34;&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">r&lt;/span> &lt;span style="color:#ff636f">+=&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;.git&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">_&lt;/span>, &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">os&lt;/span>.&lt;span style="color:#58a1dd">Stat&lt;/span>(&lt;span style="color:#58a1dd">r&lt;/span>); &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">ErrRepositoryNotFound&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">r&lt;/span>, &lt;span style="color:#ff636f">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// GitCommand exe git-*
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">func&lt;/span> &lt;span style="color:#58a1dd">GitCommand&lt;/span>(&lt;span style="color:#58a1dd">s&lt;/span> &lt;span style="color:#58a1dd">ssh&lt;/span>.&lt;span style="color:#58a1dd">Session&lt;/span>, &lt;span style="color:#58a1dd">scmd&lt;/span> &lt;span style="color:#ff636f">string&lt;/span>, &lt;span style="color:#58a1dd">repo&lt;/span> &lt;span style="color:#ff636f">string&lt;/span>) &lt;span style="color:#ff636f">int&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>.&lt;span style="color:#58a1dd">User&lt;/span>() &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;git&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// filter unallowed user
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">fmt&lt;/span>.&lt;span style="color:#58a1dd">Fprintf&lt;/span>(&lt;span style="color:#58a1dd">s&lt;/span>.&lt;span style="color:#58a1dd">Stderr&lt;/span>(), &lt;span style="color:#a6be9d">&amp;#34;Permission denied, user: \x1b[31m&amp;#39;%s&amp;#39;\x1b[0m\n&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">s&lt;/span>.&lt;span style="color:#58a1dd">User&lt;/span>())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">127&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">pwn&lt;/span>, &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">RepoPathClean&lt;/span>(&lt;span style="color:#58a1dd">repo&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">fmt&lt;/span>.&lt;span style="color:#58a1dd">Fprintf&lt;/span>(&lt;span style="color:#58a1dd">s&lt;/span>.&lt;span style="color:#58a1dd">Stderr&lt;/span>(), &lt;span style="color:#a6be9d">&amp;#34;Permission denied: \x1b[31m%v\x1b[0m\n&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">127&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// TODO AUTH
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">diskrepo&lt;/span>, &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">RepoPathStat&lt;/span>(&lt;span style="color:#58a1dd">pwn&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">fmt&lt;/span>.&lt;span style="color:#58a1dd">Fprintf&lt;/span>(&lt;span style="color:#58a1dd">s&lt;/span>.&lt;span style="color:#58a1dd">Stderr&lt;/span>(), &lt;span style="color:#a6be9d">&amp;#34;Access deined: \x1b[31m%v\x1b[0m\n&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">127&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">version&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">GetSessionEnv&lt;/span>(&lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;GIT_PROTOCOL&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">cmd&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">exec&lt;/span>.&lt;span style="color:#58a1dd">Command&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;git&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">scmd&lt;/span>, &lt;span style="color:#58a1dd">diskrepo&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">ProcAttr&lt;/span>(&lt;span style="color:#58a1dd">cmd&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">cmd&lt;/span>.&lt;span style="color:#58a1dd">Env&lt;/span> = &lt;span style="color:#58a1dd">append&lt;/span>(&lt;span style="color:#58a1dd">environ&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;GL_ID=key-&amp;#34;&lt;/span>&lt;span style="color:#ff636f">+&lt;/span>&lt;span style="color:#58a1dd">strconv&lt;/span>.&lt;span style="color:#58a1dd">FormatInt&lt;/span>(&lt;span style="color:#a6be9d">1111&lt;/span>, &lt;span style="color:#a6be9d">10&lt;/span>)) &lt;span style="color:#828b96;font-style:italic">/// to set envid
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">len&lt;/span>(&lt;span style="color:#58a1dd">version&lt;/span>) &amp;gt; &lt;span style="color:#a6be9d">0&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">cmd&lt;/span>.&lt;span style="color:#58a1dd">Env&lt;/span> = &lt;span style="color:#58a1dd">append&lt;/span>(&lt;span style="color:#58a1dd">environ&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;GIT_PROTOCOL=&amp;#34;&lt;/span>&lt;span style="color:#ff636f">+&lt;/span>&lt;span style="color:#58a1dd">version&lt;/span>) &lt;span style="color:#828b96;font-style:italic">/// to set envid
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">cmd&lt;/span>.&lt;span style="color:#58a1dd">Env&lt;/span> = &lt;span style="color:#58a1dd">append&lt;/span>(&lt;span style="color:#58a1dd">environ&lt;/span>, &lt;span style="color:#58a1dd">s&lt;/span>.&lt;span style="color:#58a1dd">Environ&lt;/span>()&lt;span style="color:#ff636f">...&lt;/span>) &lt;span style="color:#828b96;font-style:italic">/// include other
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">cmd&lt;/span>.&lt;span style="color:#58a1dd">Stderr&lt;/span> = &lt;span style="color:#58a1dd">s&lt;/span>.&lt;span style="color:#58a1dd">Stderr&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">cmd&lt;/span>.&lt;span style="color:#58a1dd">Stdin&lt;/span> = &lt;span style="color:#58a1dd">s&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">cmd&lt;/span>.&lt;span style="color:#58a1dd">Stdout&lt;/span> = &lt;span style="color:#58a1dd">s&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// FIXME: check timeout
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span> = &lt;span style="color:#58a1dd">cmd&lt;/span>.&lt;span style="color:#58a1dd">Start&lt;/span>(); &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">fmt&lt;/span>.&lt;span style="color:#58a1dd">Fprintln&lt;/span>(&lt;span style="color:#58a1dd">s&lt;/span>.&lt;span style="color:#58a1dd">Stderr&lt;/span>(), &lt;span style="color:#a6be9d">&amp;#34;Server internal error, unable to run git-&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">scmd&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">log&lt;/span>.&lt;span style="color:#58a1dd">Printf&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;Server internal error, unable to run git-%s error: %v&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">scmd&lt;/span>, &lt;span style="color:#58a1dd">err&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">127&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">var&lt;/span> &lt;span style="color:#58a1dd">exitcode&lt;/span> &lt;span style="color:#ff636f">int&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exitChain&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">make&lt;/span>(&lt;span style="color:#ff636f">chan&lt;/span> &lt;span style="color:#ff636f">bool&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">go&lt;/span> &lt;span style="color:#ff636f">func&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span> = &lt;span style="color:#58a1dd">cmd&lt;/span>.&lt;span style="color:#58a1dd">Wait&lt;/span>(); &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exitcode&lt;/span> = &lt;span style="color:#a6be9d">127&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exitChain&lt;/span> &lt;span style="color:#ff636f">&amp;lt;-&lt;/span> &lt;span style="color:#ff636f">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">for&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">select&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">case&lt;/span> &lt;span style="color:#ff636f">&amp;lt;-&lt;/span>&lt;span style="color:#58a1dd">exitChain&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">exitcode&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">case&lt;/span> &lt;span style="color:#ff636f">&amp;lt;-&lt;/span>&lt;span style="color:#58a1dd">s&lt;/span>.&lt;span style="color:#58a1dd">Context&lt;/span>().&lt;span style="color:#58a1dd">Done&lt;/span>():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">cmd&lt;/span>.&lt;span style="color:#58a1dd">Process&lt;/span>.&lt;span style="color:#58a1dd">Kill&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">func&lt;/span> &lt;span style="color:#58a1dd">sshAuth&lt;/span>(&lt;span style="color:#58a1dd">ctx&lt;/span> &lt;span style="color:#58a1dd">ssh&lt;/span>.&lt;span style="color:#58a1dd">Context&lt;/span>, &lt;span style="color:#58a1dd">key&lt;/span> &lt;span style="color:#58a1dd">ssh&lt;/span>.&lt;span style="color:#58a1dd">PublicKey&lt;/span>) &lt;span style="color:#ff636f">bool&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/// TODO auth
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#ff636f">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">func&lt;/span> &lt;span style="color:#58a1dd">sessionHandler&lt;/span>(&lt;span style="color:#58a1dd">s&lt;/span> &lt;span style="color:#58a1dd">ssh&lt;/span>.&lt;span style="color:#58a1dd">Session&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">cmd&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>.&lt;span style="color:#58a1dd">Command&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">len&lt;/span>(&lt;span style="color:#58a1dd">cmd&lt;/span>) &amp;lt; &lt;span style="color:#a6be9d">2&lt;/span> &lt;span style="color:#ff636f">||&lt;/span> !&lt;span style="color:#58a1dd">strings&lt;/span>.&lt;span style="color:#58a1dd">HasPrefix&lt;/span>(&lt;span style="color:#58a1dd">cmd&lt;/span>[&lt;span style="color:#a6be9d">0&lt;/span>], &lt;span style="color:#a6be9d">&amp;#34;git-&amp;#34;&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">s&lt;/span>.&lt;span style="color:#58a1dd">Stderr&lt;/span>().&lt;span style="color:#58a1dd">Write&lt;/span>([]&lt;span style="color:#58a1dd">byte&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;bad command &amp;#34;&lt;/span> &lt;span style="color:#ff636f">+&lt;/span> &lt;span style="color:#58a1dd">cmd&lt;/span>[&lt;span style="color:#a6be9d">0&lt;/span>] &lt;span style="color:#ff636f">+&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;\n&amp;#34;&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">GitCommand&lt;/span>(&lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#58a1dd">strings&lt;/span>.&lt;span style="color:#58a1dd">TrimPrefix&lt;/span>(&lt;span style="color:#58a1dd">cmd&lt;/span>[&lt;span style="color:#a6be9d">0&lt;/span>], &lt;span style="color:#a6be9d">&amp;#34;git-&amp;#34;&lt;/span>), &lt;span style="color:#58a1dd">cmd&lt;/span>[&lt;span style="color:#a6be9d">1&lt;/span>])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// Userid get
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">var&lt;/span> &lt;span style="color:#58a1dd">Userid&lt;/span> &lt;span style="color:#ff636f">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// Groupid in
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">var&lt;/span> &lt;span style="color:#58a1dd">Groupid&lt;/span> &lt;span style="color:#ff636f">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// NeedSetsid is
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">var&lt;/span> &lt;span style="color:#58a1dd">NeedSetsid&lt;/span> &lt;span style="color:#ff636f">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// ProcAttr is
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">func&lt;/span> &lt;span style="color:#58a1dd">ProcAttr&lt;/span>(&lt;span style="color:#58a1dd">cmd&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">exec&lt;/span>.&lt;span style="color:#58a1dd">Cmd&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">NeedSetsid&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">cmd&lt;/span>.&lt;span style="color:#58a1dd">SysProcAttr&lt;/span> = &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">syscall&lt;/span>.&lt;span style="color:#58a1dd">SysProcAttr&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Credential&lt;/span>: &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">syscall&lt;/span>.&lt;span style="color:#58a1dd">Credential&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Uid&lt;/span>: &lt;span style="color:#58a1dd">Userid&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Gid&lt;/span>: &lt;span style="color:#58a1dd">Groupid&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> },
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Setsid&lt;/span>: &lt;span style="color:#ff636f">true&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">//InitializeUtils ini
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">func&lt;/span> &lt;span style="color:#58a1dd">InitializeUtils&lt;/span>() &lt;span style="color:#ff636f">error&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">syscall&lt;/span>.&lt;span style="color:#58a1dd">Getuid&lt;/span>() &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">NeedSetsid&lt;/span> = &lt;span style="color:#ff636f">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Userid&lt;/span> = &lt;span style="color:#58a1dd">uint32&lt;/span>(&lt;span style="color:#58a1dd">syscall&lt;/span>.&lt;span style="color:#58a1dd">Getuid&lt;/span>())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Groupid&lt;/span> = &lt;span style="color:#58a1dd">uint32&lt;/span>(&lt;span style="color:#58a1dd">syscall&lt;/span>.&lt;span style="color:#58a1dd">Getgid&lt;/span>())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">user&lt;/span>, &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">user&lt;/span>.&lt;span style="color:#58a1dd">Lookup&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;git&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">xid&lt;/span>, &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">strconv&lt;/span>.&lt;span style="color:#58a1dd">ParseUint&lt;/span>(&lt;span style="color:#58a1dd">user&lt;/span>.&lt;span style="color:#58a1dd">Uid&lt;/span>, &lt;span style="color:#a6be9d">10&lt;/span>, &lt;span style="color:#a6be9d">32&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">environ&lt;/span> = &lt;span style="color:#58a1dd">os&lt;/span>.&lt;span style="color:#58a1dd">Environ&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">for&lt;/span> &lt;span style="color:#58a1dd">i&lt;/span>, &lt;span style="color:#58a1dd">s&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#ff636f">range&lt;/span> &lt;span style="color:#58a1dd">environ&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">strings&lt;/span>.&lt;span style="color:#58a1dd">HasPrefix&lt;/span>(&lt;span style="color:#58a1dd">s&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;HOME=&amp;#34;&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">environ&lt;/span>[&lt;span style="color:#58a1dd">i&lt;/span>] = &lt;span style="color:#58a1dd">fmt&lt;/span>.&lt;span style="color:#58a1dd">Sprintf&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;HOME=%s&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">user&lt;/span>.&lt;span style="color:#58a1dd">HomeDir&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Userid&lt;/span> = &lt;span style="color:#58a1dd">uint32&lt;/span>(&lt;span style="color:#58a1dd">xid&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">zid&lt;/span>, &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">strconv&lt;/span>.&lt;span style="color:#58a1dd">ParseUint&lt;/span>(&lt;span style="color:#58a1dd">user&lt;/span>.&lt;span style="color:#58a1dd">Gid&lt;/span>, &lt;span style="color:#a6be9d">10&lt;/span>, &lt;span style="color:#a6be9d">32&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Groupid&lt;/span> = &lt;span style="color:#58a1dd">uint32&lt;/span>(&lt;span style="color:#58a1dd">zid&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">NeedSetsid&lt;/span> = &lt;span style="color:#ff636f">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">var&lt;/span> &lt;span style="color:#58a1dd">environ&lt;/span> []&lt;span style="color:#ff636f">string&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">func&lt;/span> &lt;span style="color:#58a1dd">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">srv&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">ssh&lt;/span>.&lt;span style="color:#58a1dd">Server&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Handler&lt;/span>: &lt;span style="color:#58a1dd">sessionHandler&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">PublicKeyHandler&lt;/span>: &lt;span style="color:#58a1dd">sshAuth&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">MaxTimeout&lt;/span>: &lt;span style="color:#58a1dd">time&lt;/span>.&lt;span style="color:#58a1dd">Second&lt;/span> &lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#a6be9d">180&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">IdleTimeout&lt;/span>: &lt;span style="color:#58a1dd">time&lt;/span>.&lt;span style="color:#58a1dd">Second&lt;/span> &lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#a6be9d">3600&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Version&lt;/span>: &lt;span style="color:#a6be9d">&amp;#34;Basalt-2.0-Single&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">InitializeUtils&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">log&lt;/span>.&lt;span style="color:#58a1dd">Println&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;starting ssh server on port 2222...&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">ln&lt;/span>, &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">net&lt;/span>.&lt;span style="color:#58a1dd">Listen&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;tcp&amp;#34;&lt;/span>, &lt;span style="color:#a6be9d">&amp;#34;:2222&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">srv&lt;/span>.&lt;span style="color:#58a1dd">Serve&lt;/span>(&lt;span style="color:#58a1dd">ln&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Ëøô‰∏™È°πÁõÆÈùûÂ∏∏ÁÆÄÂçïÔºå‰ΩÜË∂≥‰ª•ËØ¥ÊòéÂÆûÁé∞ Git SSH Server ÁöÑÁªÜËäÇ„ÄÇ&lt;/p>
&lt;p>Ë¶ÅÁîüÊàê SSH Key ‰πüÈùûÂ∏∏ÁÆÄÂçïÔºå‰∏ãÈù¢ÊòØ ECDSA RSA ED25519 SSH Key ÁîüÊàêÁ§∫‰æãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">package&lt;/span> &lt;span style="color:#58a1dd">main&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">import&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;crypto/ecdsa&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;crypto/elliptic&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;crypto/rand&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;crypto/rsa&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;crypto/x509&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;encoding/pem&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;io/ioutil&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">mrand&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;math/rand&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;golang.org/x/crypto/ed25519&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;golang.org/x/crypto/ssh&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// Thanks https://github.com/mikesmitty/edkey
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// MarshalED25519PrivateKey todo
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">/* Writes ed25519 private keys into the new OpenSSH private key format.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">I have no idea why this isn&amp;#39;t implemented anywhere yet, you can do seemingly
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">everything except write it to disk in the OpenSSH private key format. */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">func&lt;/span> &lt;span style="color:#58a1dd">MarshalED25519PrivateKey&lt;/span>(&lt;span style="color:#58a1dd">key&lt;/span> &lt;span style="color:#58a1dd">ed25519&lt;/span>.&lt;span style="color:#58a1dd">PrivateKey&lt;/span>) []&lt;span style="color:#ff636f">byte&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// Add our key header (followed by a null byte)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">magic&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">append&lt;/span>([]&lt;span style="color:#58a1dd">byte&lt;/span>(&lt;span style="color:#a6be9d">&amp;#34;openssh-key-v1&amp;#34;&lt;/span>), &lt;span style="color:#a6be9d">0&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">var&lt;/span> &lt;span style="color:#58a1dd">w&lt;/span> &lt;span style="color:#ff636f">struct&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">CipherName&lt;/span> &lt;span style="color:#ff636f">string&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">KdfName&lt;/span> &lt;span style="color:#ff636f">string&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">KdfOpts&lt;/span> &lt;span style="color:#ff636f">string&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">NumKeys&lt;/span> &lt;span style="color:#ff636f">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">PubKey&lt;/span> []&lt;span style="color:#ff636f">byte&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">PrivKeyBlock&lt;/span> []&lt;span style="color:#ff636f">byte&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// Fill out the private key fields
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">pk1&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#ff636f">struct&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Check1&lt;/span> &lt;span style="color:#ff636f">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Check2&lt;/span> &lt;span style="color:#ff636f">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Keytype&lt;/span> &lt;span style="color:#ff636f">string&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Pub&lt;/span> []&lt;span style="color:#ff636f">byte&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Priv&lt;/span> []&lt;span style="color:#ff636f">byte&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Comment&lt;/span> &lt;span style="color:#ff636f">string&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Pad&lt;/span> []&lt;span style="color:#ff636f">byte&lt;/span> &lt;span style="color:#a6be9d">`ssh:&amp;#34;rest&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }{}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// Set our check ints
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">ci&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">mrand&lt;/span>.&lt;span style="color:#58a1dd">Uint32&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">pk1&lt;/span>.&lt;span style="color:#58a1dd">Check1&lt;/span> = &lt;span style="color:#58a1dd">ci&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">pk1&lt;/span>.&lt;span style="color:#58a1dd">Check2&lt;/span> = &lt;span style="color:#58a1dd">ci&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// Set our key type
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">pk1&lt;/span>.&lt;span style="color:#58a1dd">Keytype&lt;/span> = &lt;span style="color:#58a1dd">ssh&lt;/span>.&lt;span style="color:#58a1dd">KeyAlgoED25519&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// Add the pubkey to the optionally-encrypted block
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">pk&lt;/span>, &lt;span style="color:#58a1dd">ok&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">key&lt;/span>.&lt;span style="color:#58a1dd">Public&lt;/span>().(&lt;span style="color:#58a1dd">ed25519&lt;/span>.&lt;span style="color:#58a1dd">PublicKey&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> !&lt;span style="color:#58a1dd">ok&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">//fmt.Fprintln(os.Stderr, &amp;#34;ed25519.PublicKey type assertion failed on an ed25519 public key. This should never ever happen.&amp;#34;)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">pubKey&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> []&lt;span style="color:#58a1dd">byte&lt;/span>(&lt;span style="color:#58a1dd">pk&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">pk1&lt;/span>.&lt;span style="color:#58a1dd">Pub&lt;/span> = &lt;span style="color:#58a1dd">pubKey&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// Add our private key
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">pk1&lt;/span>.&lt;span style="color:#58a1dd">Priv&lt;/span> = []&lt;span style="color:#58a1dd">byte&lt;/span>(&lt;span style="color:#58a1dd">key&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// Might be useful to put something in here at some point
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">pk1&lt;/span>.&lt;span style="color:#58a1dd">Comment&lt;/span> = &lt;span style="color:#a6be9d">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// Add some padding to match the encryption block size within PrivKeyBlock (without Pad field)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#828b96;font-style:italic">// 8 doesn&amp;#39;t match the documentation, but that&amp;#39;s what ssh-keygen uses for unencrypted keys. *shrug*
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">bs&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#a6be9d">8&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">blockLen&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">len&lt;/span>(&lt;span style="color:#58a1dd">ssh&lt;/span>.&lt;span style="color:#58a1dd">Marshal&lt;/span>(&lt;span style="color:#58a1dd">pk1&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">padLen&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> (&lt;span style="color:#58a1dd">bs&lt;/span> &lt;span style="color:#ff636f">-&lt;/span> (&lt;span style="color:#58a1dd">blockLen&lt;/span> &lt;span style="color:#ff636f">%&lt;/span> &lt;span style="color:#58a1dd">bs&lt;/span>)) &lt;span style="color:#ff636f">%&lt;/span> &lt;span style="color:#58a1dd">bs&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">pk1&lt;/span>.&lt;span style="color:#58a1dd">Pad&lt;/span> = &lt;span style="color:#58a1dd">make&lt;/span>([]&lt;span style="color:#ff636f">byte&lt;/span>, &lt;span style="color:#58a1dd">padLen&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// Padding is a sequence of bytes like: 1, 2, 3...
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">for&lt;/span> &lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>; &lt;span style="color:#58a1dd">i&lt;/span> &amp;lt; &lt;span style="color:#58a1dd">padLen&lt;/span>; &lt;span style="color:#58a1dd">i&lt;/span>&lt;span style="color:#ff636f">++&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">pk1&lt;/span>.&lt;span style="color:#58a1dd">Pad&lt;/span>[&lt;span style="color:#58a1dd">i&lt;/span>] = &lt;span style="color:#58a1dd">byte&lt;/span>(&lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">+&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// Generate the pubkey prefix &amp;#34;\0\0\0\nssh-ed25519\0\0\0 &amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">prefix&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> []&lt;span style="color:#ff636f">byte&lt;/span>{&lt;span style="color:#a6be9d">0x0&lt;/span>, &lt;span style="color:#a6be9d">0x0&lt;/span>, &lt;span style="color:#a6be9d">0x0&lt;/span>, &lt;span style="color:#a6be9d">0x0b&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">prefix&lt;/span> = &lt;span style="color:#58a1dd">append&lt;/span>(&lt;span style="color:#58a1dd">prefix&lt;/span>, []&lt;span style="color:#58a1dd">byte&lt;/span>(&lt;span style="color:#58a1dd">ssh&lt;/span>.&lt;span style="color:#58a1dd">KeyAlgoED25519&lt;/span>)&lt;span style="color:#ff636f">...&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">prefix&lt;/span> = &lt;span style="color:#58a1dd">append&lt;/span>(&lt;span style="color:#58a1dd">prefix&lt;/span>, []&lt;span style="color:#ff636f">byte&lt;/span>{&lt;span style="color:#a6be9d">0x0&lt;/span>, &lt;span style="color:#a6be9d">0x0&lt;/span>, &lt;span style="color:#a6be9d">0x0&lt;/span>, &lt;span style="color:#a6be9d">0x20&lt;/span>}&lt;span style="color:#ff636f">...&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// Only going to support unencrypted keys for now
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">w&lt;/span>.&lt;span style="color:#58a1dd">CipherName&lt;/span> = &lt;span style="color:#a6be9d">&amp;#34;none&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">w&lt;/span>.&lt;span style="color:#58a1dd">KdfName&lt;/span> = &lt;span style="color:#a6be9d">&amp;#34;none&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">w&lt;/span>.&lt;span style="color:#58a1dd">KdfOpts&lt;/span> = &lt;span style="color:#a6be9d">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">w&lt;/span>.&lt;span style="color:#58a1dd">NumKeys&lt;/span> = &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">w&lt;/span>.&lt;span style="color:#58a1dd">PubKey&lt;/span> = &lt;span style="color:#58a1dd">append&lt;/span>(&lt;span style="color:#58a1dd">prefix&lt;/span>, &lt;span style="color:#58a1dd">pubKey&lt;/span>&lt;span style="color:#ff636f">...&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">w&lt;/span>.&lt;span style="color:#58a1dd">PrivKeyBlock&lt;/span> = &lt;span style="color:#58a1dd">ssh&lt;/span>.&lt;span style="color:#58a1dd">Marshal&lt;/span>(&lt;span style="color:#58a1dd">pk1&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">magic&lt;/span> = &lt;span style="color:#58a1dd">append&lt;/span>(&lt;span style="color:#58a1dd">magic&lt;/span>, &lt;span style="color:#58a1dd">ssh&lt;/span>.&lt;span style="color:#58a1dd">Marshal&lt;/span>(&lt;span style="color:#58a1dd">w&lt;/span>)&lt;span style="color:#ff636f">...&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">magic&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// AuthenticationKeyGenerationRSA RSA
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">func&lt;/span> &lt;span style="color:#58a1dd">AuthenticationKeyGenerationRSA&lt;/span>(&lt;span style="color:#58a1dd">keyPath&lt;/span> &lt;span style="color:#ff636f">string&lt;/span>) &lt;span style="color:#ff636f">error&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">privKey&lt;/span>, &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">rsa&lt;/span>.&lt;span style="color:#58a1dd">GenerateKey&lt;/span>(&lt;span style="color:#58a1dd">rand&lt;/span>.&lt;span style="color:#58a1dd">Reader&lt;/span>, &lt;span style="color:#a6be9d">2048&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// generate public key
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">publicKey&lt;/span>, &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">ssh&lt;/span>.&lt;span style="color:#58a1dd">NewPublicKey&lt;/span>(&lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">privKey&lt;/span>.&lt;span style="color:#58a1dd">PublicKey&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">pemKey&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">pem&lt;/span>.&lt;span style="color:#58a1dd">Block&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Type&lt;/span>: &lt;span style="color:#a6be9d">&amp;#34;RSA PRIVATE KEY&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Bytes&lt;/span>: &lt;span style="color:#58a1dd">x509&lt;/span>.&lt;span style="color:#58a1dd">MarshalPKCS1PrivateKey&lt;/span>(&lt;span style="color:#58a1dd">privKey&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">privateKey&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">pem&lt;/span>.&lt;span style="color:#58a1dd">EncodeToMemory&lt;/span>(&lt;span style="color:#58a1dd">pemKey&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">authorizedKey&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">ssh&lt;/span>.&lt;span style="color:#58a1dd">MarshalAuthorizedKey&lt;/span>(&lt;span style="color:#58a1dd">publicKey&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span> = &lt;span style="color:#58a1dd">ioutil&lt;/span>.&lt;span style="color:#58a1dd">WriteFile&lt;/span>(&lt;span style="color:#58a1dd">keyPath&lt;/span>, &lt;span style="color:#58a1dd">privateKey&lt;/span>, &lt;span style="color:#a6be9d">0600&lt;/span>); &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">ioutil&lt;/span>.&lt;span style="color:#58a1dd">WriteFile&lt;/span>(&lt;span style="color:#58a1dd">keyPath&lt;/span>&lt;span style="color:#ff636f">+&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;.pub&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">authorizedKey&lt;/span>, &lt;span style="color:#a6be9d">0644&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// AuthenticationKeyGenerationECDSA ecdsa
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// by default we gen 256
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">func&lt;/span> &lt;span style="color:#58a1dd">AuthenticationKeyGenerationECDSA&lt;/span>(&lt;span style="color:#58a1dd">keyPath&lt;/span> &lt;span style="color:#ff636f">string&lt;/span>) &lt;span style="color:#ff636f">error&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">privKey&lt;/span>, &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">ecdsa&lt;/span>.&lt;span style="color:#58a1dd">GenerateKey&lt;/span>(&lt;span style="color:#58a1dd">elliptic&lt;/span>.&lt;span style="color:#58a1dd">P256&lt;/span>(), &lt;span style="color:#58a1dd">rand&lt;/span>.&lt;span style="color:#58a1dd">Reader&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">publicKey&lt;/span>, &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">ssh&lt;/span>.&lt;span style="color:#58a1dd">NewPublicKey&lt;/span>(&lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">privKey&lt;/span>.&lt;span style="color:#58a1dd">PublicKey&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">pembyte&lt;/span>, &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">x509&lt;/span>.&lt;span style="color:#58a1dd">MarshalECPrivateKey&lt;/span>(&lt;span style="color:#58a1dd">privKey&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">// EC PRIVATE KEY
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#58a1dd">pemKey&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">pem&lt;/span>.&lt;span style="color:#58a1dd">Block&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Type&lt;/span>: &lt;span style="color:#a6be9d">&amp;#34;EC PRIVATE KEY&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Bytes&lt;/span>: &lt;span style="color:#58a1dd">pembyte&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">privateKey&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">pem&lt;/span>.&lt;span style="color:#58a1dd">EncodeToMemory&lt;/span>(&lt;span style="color:#58a1dd">pemKey&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">authorizedKey&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">ssh&lt;/span>.&lt;span style="color:#58a1dd">MarshalAuthorizedKey&lt;/span>(&lt;span style="color:#58a1dd">publicKey&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span> = &lt;span style="color:#58a1dd">ioutil&lt;/span>.&lt;span style="color:#58a1dd">WriteFile&lt;/span>(&lt;span style="color:#58a1dd">keyPath&lt;/span>, &lt;span style="color:#58a1dd">privateKey&lt;/span>, &lt;span style="color:#a6be9d">0600&lt;/span>); &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">ioutil&lt;/span>.&lt;span style="color:#58a1dd">WriteFile&lt;/span>(&lt;span style="color:#58a1dd">keyPath&lt;/span>&lt;span style="color:#ff636f">+&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;.pub&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">authorizedKey&lt;/span>, &lt;span style="color:#a6be9d">0644&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// AuthenticationKeyGenerationED25519 ED25519 keygen
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">func&lt;/span> &lt;span style="color:#58a1dd">AuthenticationKeyGenerationED25519&lt;/span>(&lt;span style="color:#58a1dd">keyPath&lt;/span> &lt;span style="color:#ff636f">string&lt;/span>) &lt;span style="color:#ff636f">error&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">pubKey&lt;/span>, &lt;span style="color:#58a1dd">privKey&lt;/span>, &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">ed25519&lt;/span>.&lt;span style="color:#58a1dd">GenerateKey&lt;/span>(&lt;span style="color:#58a1dd">rand&lt;/span>.&lt;span style="color:#58a1dd">Reader&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">publicKey&lt;/span>, &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">ssh&lt;/span>.&lt;span style="color:#58a1dd">NewPublicKey&lt;/span>(&lt;span style="color:#58a1dd">pubKey&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">pemKey&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">pem&lt;/span>.&lt;span style="color:#58a1dd">Block&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Type&lt;/span>: &lt;span style="color:#a6be9d">&amp;#34;OPENSSH PRIVATE KEY&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Bytes&lt;/span>: &lt;span style="color:#58a1dd">MarshalED25519PrivateKey&lt;/span>(&lt;span style="color:#58a1dd">privKey&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">privateKey&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">pem&lt;/span>.&lt;span style="color:#58a1dd">EncodeToMemory&lt;/span>(&lt;span style="color:#58a1dd">pemKey&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">authorizedKey&lt;/span> &lt;span style="color:#ff636f">:=&lt;/span> &lt;span style="color:#58a1dd">ssh&lt;/span>.&lt;span style="color:#58a1dd">MarshalAuthorizedKey&lt;/span>(&lt;span style="color:#58a1dd">publicKey&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span> = &lt;span style="color:#58a1dd">ioutil&lt;/span>.&lt;span style="color:#58a1dd">WriteFile&lt;/span>(&lt;span style="color:#58a1dd">keyPath&lt;/span>, &lt;span style="color:#58a1dd">privateKey&lt;/span>, &lt;span style="color:#a6be9d">0600&lt;/span>); &lt;span style="color:#58a1dd">err&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">ioutil&lt;/span>.&lt;span style="color:#58a1dd">WriteFile&lt;/span>(&lt;span style="color:#58a1dd">keyPath&lt;/span>&lt;span style="color:#ff636f">+&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;.pub&amp;#34;&lt;/span>, &lt;span style="color:#58a1dd">authorizedKey&lt;/span>, &lt;span style="color:#a6be9d">0644&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="svnssh-ÂÆûÁé∞">SVN+SSH ÂÆûÁé∞&lt;/h2>
&lt;p>Gitee ÁõÆÂâçÊèê‰æõ &lt;code>svn+ssh&lt;/code> ÂçèËÆÆËÆøÈóÆÔºåËÄåÊ≠§ÂçèËÆÆÂÆûÈôÖ‰∏äÊòØÈÄöËøáÂú®ÊúçÂä°Âô®‰∏äËøêË°å &lt;code>svnserve -t&lt;/code>Ôºå‰ªéËÄåËØªÂÜôÂ≠òÂÇ®Â∫ìÊï∞ÊçÆÔºåËÄå Gitee ÁöÑ svn ÂäüËÉΩÂü∫‰∫é git-as-svn ÔºåÊàë‰ª¨Âè™ÈúÄÂú®ËØ∑Ê±ÇÂëΩ‰ª§‰∏∫ &lt;code>svnserve&lt;/code> Êó∂ÔºåÂ∞ÜÊµÅÈáè‰ª£ÁêÜËΩ¨ÂèëÂà∞ git-as-svn ‰∏äÂç≥ÂèØ„ÄÇÂú® Gitee ‰∏äÈÄöËøá ssh+svn ËÆøÈóÆÂ≠òÂÇ®Â∫ìÈúÄË¶ÅÁî®Êà∑ÂØπÂ≠òÂÇ®Â∫ìÂÖ∑ÊúâÂÜôÊùÉÈôêÔºåËøôÊòØÁâπÊÑèËÄå‰∏∫‰πã„ÄÇ&lt;/p>
&lt;h2 id="ÈôÑÂΩï">ÈôÑÂΩï&lt;/h2>
&lt;ol>
&lt;li>&lt;a href="https://en.wikipedia.org/wiki/Comparison_of_SSH_clients">Comparison of SSH clients&lt;/a> , &lt;a href="https://en.wikipedia.org/wiki/Comparison_of_SSH_servers">Comparison of SSH servers&lt;/a>&lt;/li>
&lt;/ol>
- https://forcemz.net/posts/2019/2019-03-15-make-a-git-ssh-server/ - Copyright (c) 2009-2024 J23</description></item><item><title>Êñá‰ª∂ÁöÑËß£Êûê</title><link>https://forcemz.net/posts/2019/2019-01-25-file-parsing/</link><pubDate>Fri, 25 Jan 2019 10:00:00 +0800</pubDate><guid>https://forcemz.net/posts/2019/2019-01-25-file-parsing/</guid><description>Charlie's Rethinking https://forcemz.net/posts/2019/2019-01-25-file-parsing/ -&lt;h2 id="ÂâçË®Ä">ÂâçË®Ä&lt;/h2>
&lt;p>Êú¨ÊñáÊé¢ËÆ®ÁöÑÊòØËÆ°ÁÆóÊú∫Êñá‰ª∂Ôºå&lt;strong>ËÆ°ÁÆóÊú∫Êñá‰ª∂&lt;/strong> Áî®‰∫éËÆ∞ÂΩïÊï∞ÊçÆÂà∞ËÆ°ÁÆóÊú∫ËÆæÂ§á‰∏äÔºåÁª¥Âü∫ÁôæÁßë‰∏äÊúâÁÆÄÁü≠ÁöÑ‰ªãÁªçÔºö&lt;/p>
&lt;blockquote>
&lt;p>A computer file is a computer resource for recording data discretely in a computer storage device. Just as words can be written to paper, so can information be written to a computer file.&lt;/p>
&lt;/blockquote>
&lt;p>ÂΩì‰∫∫‰ª¨ÈúÄË¶Å‰ΩøÁî®Ëøô‰∫õÊñá‰ª∂ÁöÑÊó∂ÂÄôÔºåÈúÄË¶Å‰ªéÂÖâÁõòÔºåÁ£ÅÁõòÔºåÈó™Â≠òÁ≠âËÆæÂ§á‰∏äÂ∞ÜÊñá‰ª∂ËØªÂèñÂà∞ÂÜÖÂ≠òÔºåÊåâÁÖßÊñá‰ª∂ÁöÑÊ†ºÂºèËøõË°åËß£ÊûêÔºåÁÑ∂Âêé‰æõÁî®Êà∑‰ΩøÁî®„ÄÇÂú®Ëøô‰∏™ËøáÁ®ã‰∏≠ÔºåÊ≠£Á°ÆÁöÑËé∑ÂæóÊñá‰ª∂Ê†ºÂºè‰ø°ÊÅØÊòØÈùûÂ∏∏ÈáçË¶ÅÁöÑÔºåÂè™ÊúâÂú®ËØÜÂà´Âá∫Êñá‰ª∂Ê†ºÂºè‰πãÂêéÔºåÊâçËÉΩÂ§üÈÄâÊã©Ê≠£Á°ÆÁöÑÁöÑÂ§ÑÁêÜÁ®ãÂ∫èÂØπÊñá‰ª∂ËøõË°åËß£Êûê„ÄÇÂú® Windows ‰∏äÈÄöÂ∏∏ÊòØ Shell Â§ñÂ£≥Ôºà&lt;code>Shell32.dll&lt;/code>ÔºâÂú®Ê≥®ÂÜåË°®‰∏≠Êü•ÊâæÊñá‰ª∂ÂêéÁºÄÂêçÁöÑÂÖ≥ËÅîÁ®ãÂ∫èÔºåÁÑ∂Âêé‰∫§Áî±ÂÖ≥ËÅîÁ®ãÂ∫èÂ§ÑÁêÜÁõ∏Â∫îÁöÑÊñá‰ª∂ÔºåÊØîÂ¶Ç &lt;code>.docx&lt;/code> ÁöÑÂÖ≥ËÅîÁ®ãÂ∫èÂæÄÂæÄÊòØ &lt;code>Microsoft Word&lt;/code>„ÄÇ&lt;code>.txt&lt;/code> ÁöÑÂÖ≥ËÅîÁ®ãÂ∫èÊòØ &lt;code>Notepad&lt;/code>„ÄÇ‰ΩÜÂ¶ÇÊûúÊñá‰ª∂Ê≤°ÊúâÂêéÁºÄÂêçÊó∂ÔºåWindows Shell Â∞±ÈúÄË¶ÅÁî®Áî®Êà∑Ëá™Â∑±ÈÄâÊã©ÂØπÂ∫îÁöÑÂÖ≥ËÅîÁ®ãÂ∫è‰∫Ü„ÄÇ&lt;/p>
&lt;p>Âú® Unix Êìç‰ΩúÁ≥ªÁªü‰∏äÔºåÂëΩ‰ª§Ë°å‰∏ãÊ£ÄÊµãÊñá‰ª∂Ê†ºÂºèÁöÑÊ£ÄÊµãÈÄöÂ∏∏‰ΩøÁî® &lt;code>file&lt;/code> (&lt;a href="https://linux.die.net/man/1/file">&lt;code>file ‚Äî determine file type&lt;/code>&lt;/a>) Ôºåfile ÁöÑÊ∫êÁ†ÅÂèØ‰ª•Âú® Github ‰∏äÊúâÊâæÂà∞Ôºö&lt;a href="https://github.com/file/file">https://github.com/file/file&lt;/a>„ÄÇfile ËøôÊ†∑ÁöÑÂ∑•ÂÖ∑ÈÄöËøáÂàÜÊûêÊñá‰ª∂È≠îÊï∞ÔºåÊñá‰ª∂Â§¥ÈÉ®ÁâπÂæÅÂàÜÊûêÊñá‰ª∂Ê†ºÂºè„ÄÇËøôÊ†∑ÁöÑÂ∑•ÂÖ∑‰∏•Èáç‰æùËµñ &lt;strong>Magdir&lt;/strong>ÔºåMagic Êñá‰ª∂Ë∂äÂ§öÊîØÊåÅÁöÑÊ†ºÂºèË∂ä‰∏∞ÂØå„ÄÇ‰∏é Windows ËµÑÊ∫êÁÆ°ÁêÜÂô®Áõ∏ÊØîÔºåfile ÂØπÊñá‰ª∂Ê†ºÂºèÁöÑÊÑüÁü•ÂÆûÈôÖ‰∏äÊõ¥Âä†Âº∫Â§ß„ÄÇ&lt;/p>
&lt;p>Âú® Unix like ÂõæÂΩ¢Á≥ªÁªü‰∏≠ÔºåÊñá‰ª∂ÁöÑÊ£ÄÊµãÁî±Êñá‰ª∂ÁÆ°ÁêÜÂô®ÂÆûÁé∞ÔºåÂÉè &lt;code>Gnome Nemo&lt;/code> ËøôÊ†∑ÁöÑÊñá‰ª∂ÁÆ°ÁêÜÂô®‰ºö‰ºòÂÖàÂ§ÑÁêÜÊñá‰ª∂ÂêéÁºÄÂêçÔºåÂú®ËØÜÂà´‰∏çÂà∞Êñá‰ª∂Ê†ºÂºèÊó∂Êâç‰ºöÂéªÊ†πÊçÆÊñá‰ª∂ÁâπÂæÅÊ£ÄÊµãÊñá‰ª∂Ê†ºÂºè„ÄÇNemo ‰æùËµñ glib(gio &lt;a href="https://github.com/GNOME/glib/blob/cbfa776fc149fcc3e351fbdf68c1a299519f4905/gio/xdgmime/xdgmimemagic.c#L657">&lt;code>_xdg_mime_magic_lookup_data&lt;/code>&lt;/a>)ÔºåËß£ÊûêÊñá‰ª∂Ê†ºÂºèÁöÑÂéüÁêÜ‰∏é file Á±ª‰ººÔºå‰ΩÜ‰∏çÂèä file Âº∫Â§ß„ÄÇ&lt;/p>
&lt;p>&lt;code>file&lt;/code> Á®ãÂ∫èÁõÆÂâçÂ∑≤ÁªèË¢´ÁßªÊ§çÂà∞ Windows ‰ΩøÁî®ÔºåÊØîÂ¶Ç &lt;code>Cygwin&lt;/code>Ôºå&lt;code>MSYS2&lt;/code> ÁöÑ Bash ÁéØÂ¢É‰∏≠ÔºåÂùáÊê∫Â∏¶Êúâ &lt;code>file&lt;/code> ÂëΩ‰ª§„ÄÇ&lt;/p>
&lt;p>ÊàëÊúÄÂºÄÂßãÂéª‰∫ÜËß£Êñá‰ª∂Á±ªÂûãÁöÑÊ£ÄÊµãÊòØÂú®ÂÆûÁé∞ LFS ÊúçÂä°Âô®ÁöÑÊó∂ÂÄôÔºåÂü∫‰∫é C++ ÁºñÂÜôÁöÑ LFS ÊúçÂä°Âô®‰ΩøÁî®ÁöÑÊòØ &lt;code>libmagic&lt;/code>, libmagic Âç≥ &lt;code>file&lt;/code> ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåËÄåÂü∫‰∫é &lt;code>Golang&lt;/code> ÁºñÂÜôÁöÑ LFS ÊúçÂä°Âô®‰ΩøÁî®ÁöÑÂàôÊòØ &lt;a href="https://github.com/h2non/filetype">https://github.com/h2non/filetype&lt;/a>&lt;/p>
&lt;p>Âú®ÈáçÊûÑÂÆå &lt;code>Privexec&lt;/code> ‰πãÂêéÔºåÁ™ÅÁÑ∂ÊÉ≥ÂÜô‰∏Ä‰∏™Êñá‰ª∂Á±ªÂûãÊ£ÄÊµãÂ∑•ÂÖ∑ÔºåÊúÄÂºÄÂßãÂè´ÂÅö &lt;code>FileView&lt;/code> ÂêéÊù•ÊîπÂêç‰∏∫ &lt;code>Planck&lt;/code>ÔºåÂΩì &lt;code>Planck&lt;/code> Â§ßÊ¶ÇËÉΩÁî®ÁöÑÊó∂ÂÄôÔºåÊÉ≥Êää‰∏Ä‰∫õËßÅËß£ÂàÜ‰∫´ÁªôÂ§ßÂÆ∂Ôºå‰∫éÊòØÊúâ‰∫ÜÊ≠§ÁØáÊñáÁ´†„ÄÇ&lt;/p>
&lt;h2 id="ËÉåÊôØÁü•ËØÜ">ËÉåÊôØÁü•ËØÜ&lt;/h2>
&lt;h3 id="Â≠óËäÇÂ∫è">Â≠óËäÇÂ∫è&lt;/h3>
&lt;p>Â≠óËäÇÂ∫èÔºö&lt;a href="https://en.wikipedia.org/wiki/Endianness">Endianness&lt;/a>ÔºåÂ≠óËäÇÈ°∫Â∫èÔºåÂèàÁß∞Á´ØÂ∫èÊàñÂ∞æÂ∫èÔºàËã±ËØ≠ÔºöEndiannessÔºâÔºåÂú®ËÆ°ÁÆóÊú∫ÁßëÂ≠¶È¢ÜÂüü‰∏≠ÔºåÊåáÂ≠òÂÇ®Âô®‰∏≠ÊàñÂú®Êï∞Â≠óÈÄö‰ø°ÈìæË∑Ø‰∏≠ÔºåÁªÑÊàêÂ§öÂ≠óËäÇÁöÑÂ≠óÁöÑÂ≠óËäÇÁöÑÊéíÂàóÈ°∫Â∫è„ÄÇ&lt;/p>
&lt;ul>
&lt;li>x86„ÄÅMOS Technology 6502„ÄÅZ80„ÄÅVAX„ÄÅPDP-11Á≠âÂ§ÑÁêÜÂô®‰∏∫Â∞èÁ´ØÂ∫èÔºõ&lt;/li>
&lt;li>Motorola 6800„ÄÅMotorola 68000„ÄÅPowerPC 970„ÄÅSystem/370„ÄÅSPARCÔºàÈô§V9Â§ñÔºâÁ≠âÂ§ÑÁêÜÂô®‰∏∫Â§ßÁ´ØÂ∫èÔºõ&lt;/li>
&lt;li>ARM„ÄÅPowerPCÔºàÈô§PowerPC 970Â§ñÔºâ„ÄÅDEC Alpha„ÄÅSPARC V9„ÄÅMIPS„ÄÅPA-RISCÂèäIA64ÁöÑÂ≠óËäÇÂ∫èÊòØÂèØÈÖçÁΩÆÁöÑ„ÄÇ&lt;/li>
&lt;/ul>
&lt;p>ÁΩëÁªúÂ≠óËäÇÂ∫è‰∏∫ &lt;code>Big Endian&lt;/code>ÔºåÁõÆÂâç Windows x86, AMD64, ARM, ARM64 Âùá‰∏∫ &lt;code>Little Endian&lt;/code>„ÄÇ&lt;/p>
&lt;p>Planck ‰∏≠Â≠óËäÇÂ∫èËΩ¨Êç¢‰ª£Á†ÅÂú®Ôºö&lt;a href="https://github.com/fcharlie/Planck/blob/c6f677dda9a894de97f1f55639b90ff722c04a0d/include/endian.hpp">https://github.com/fcharlie/Planck/blob/c6f677dda9a894de97f1f55639b90ff722c04a0d/include/endian.hpp&lt;/a>„ÄÇ&lt;/p>
&lt;h3 id="Êñá‰ª∂ÂçÅÂÖ≠ËøõÂà∂Êü•ÁúãÂ∑•ÂÖ∑">Êñá‰ª∂ÂçÅÂÖ≠ËøõÂà∂Êü•ÁúãÂ∑•ÂÖ∑&lt;/h3>
&lt;p>Êü•ÁúãÊñá‰ª∂‰ø°ÊÅØÂèØ‰ª•‰ΩøÁî®ÊîØÊåÅ 16 ËøõÂà∂ÁöÑÂ∑•ÂÖ∑Êü•ÁúãÔºåGUI ÁöÑÂ∑•ÂÖ∑Êúâ &lt;code>Sublime Text&lt;/code>Ôºå&lt;code>010Editor&lt;/code> Á≠âÔºåCLI ÁöÑÂ∑•ÂÖ∑Êúâ &lt;code>hexdump&lt;/code>Ôºå&lt;code>xxd&lt;/code>ÔºåËøòÊúâÊúÄËøëÂ∏¶È¢úËâ≤È´ò‰∫ÆÁöÑ&lt;/p>
&lt;ul>
&lt;li>Hastyhex: &lt;a href="https://github.com/skeeto/hastyhex">https://github.com/skeeto/hastyhex&lt;/a>&lt;/li>
&lt;li>Hexyl: &lt;a href="https://github.com/sharkdp/hexyl">https://github.com/sharkdp/hexyl&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Hastyhex Âü∫‰∫é C ÁºñÂÜôÔºå‰ΩÜ‰∏çÊîØÊåÅÊåáÂÆöÈïøÂ∫¶ÔºåÂØπ Windows 10 ÊéßÂà∂Âè∞ÊîØÊåÅ‰∏çÂ§™Â•ΩÔºå‰∫éÊòØÊàë fork HastyhexÔºåÂØπÂÖ∂ÊîπËøõÔºå‰ΩøÂÖ∂ÊîØÊåÅÁâπÂÆöÈïøÂ∫¶Âíå‰ªéÊåáÂÆö‰ΩçÁΩÆÂºÄÂßãËØªÂèñ„ÄÇÂú® Windows ‰∏äÊîπËøõ‰∫ÜÊéßÂà∂Âè∞È¢úËâ≤ËæìÂá∫„ÄÇ&lt;/p>
&lt;p>Unix ÁâàÊú¨Ôºö&lt;a href="https://github.com/fcharlie/hastyhex">HastyHex : a faster hex dumper&lt;/a>&lt;br>
ÈíàÂØπ Windows 10 ÊéßÂà∂Âè∞ÊîπËøõÁöÑÁâàÊú¨Ôºö&lt;a href="https://github.com/fcharlie/Planck/tree/c6f677dda9a894de97f1f55639b90ff722c04a0d/utils/hastyhex">https://github.com/fcharlie/Planck/tree/c6f677dda9a894de97f1f55639b90ff722c04a0d/utils/hastyhex&lt;/a>&lt;/p>
&lt;h2 id="Êñá‰ª∂Á°¨ÈìæÊé•ËΩØËøûÊé•Âø´Êç∑ÊñπÂºè">Êñá‰ª∂ÔºåÁ°¨ÈìæÊé•ÔºåËΩØËøûÊé•ÔºåÂø´Êç∑ÊñπÂºè&lt;/h2>
&lt;p>Âú®Â≠òÂÇ®ËÆæÂ§á‰∏äÔºå‰∏Ä‰∏™Êñá‰ª∂ÈÄöÂ∏∏ÊòØÂ∏∏ËßÑÊñá‰ª∂Ôºå‰ΩÜÊñá‰ª∂‰πüÊúâÂèØËÉΩÊåáÂêëÂÖ∂ÂÆÉÊñá‰ª∂„ÄÇ&lt;/p>
&lt;h3 id="Á°¨ÈìæÊé•‰∏éËΩØÈìæÊé•">Á°¨ÈìæÊé•‰∏éËΩØÈìæÊé•&lt;/h3>
&lt;p>&lt;a href="https://en.wikipedia.org/wiki/Hard_link">Hard Link&lt;/a> ÈÄöÂ∏∏ÊÑèÂë≥ÁùÄ‰∏Ä‰∏™ÂéüÂßãÊñá‰ª∂ÂèØËÉΩÂ≠òÂú®ÊúâÂ§ö‰∏™Êñá‰ª∂ÂêçÔºåÊØîÂ¶Ç Linux ‰∏Ä‰∏™ inode ÂØπÂ∫îÂ§ö‰∏™Ë∑ØÂæÑ„ÄÇ&lt;/p>
&lt;blockquote>
&lt;p>In computing, a hard link is a directory entry that associates a name with a file on a file system. All directory-based file systems must have at least one hard link giving the original name for each file. The term ‚Äúhard link‚Äù is usually only used in file systems that allow more than one hard link for the same file.&lt;/p>
&lt;/blockquote>
&lt;p>Windows NTFSÔºåUnix EXT4ÔºåZFSÔºåBtrfs Á≠âÊñá‰ª∂Á≥ªÁªüÂùáÊîØÊåÅÁ°¨ÈìæÊé•ÔºåReFS ÊöÇÊó∂‰∏çÊîØÊåÅÁ°¨ÈìæÊé•„ÄÇ&lt;/p>
&lt;p>Âú® Windows ‰∏≠ÔºåÁ°¨ÈìæÊé•Ë¢´ÂπøÊ≥õ‰ΩøÁî®ÔºåÂ∞§ÂÖ∂ÊòØ &lt;a href="https://en.wikipedia.org/wiki/Side-by-side_assembly">Side-by-side assembly&lt;/a> Êú∫Âà∂Â§ßÈáè‰ΩøÁî®‰∫ÜÁ°¨ÈìæÊé• ÔºåÊü•Áúã &lt;code>C:\Windows\System32&lt;/code> ÁöÑÊñá‰ª∂ÔºåÂü∫Êú¨ÈÉΩ‰ºöÊúâÁõ∏Â∫îÁöÑÁ°¨ÈìæÊé•Â≠òÂú®‰∫é &lt;code>C:\Windows\WinSxS&lt;/code>„ÄÇ&lt;/p>
&lt;p>Git Âú®ÂÖãÈöÜÊú¨Âú∞Â≠òÂÇ®Â∫ìÊó∂Ôºå&lt;code>objects&lt;/code> ÁõÆÂΩïÁöÑÂØπË±°Êñá‰ª∂Ôºà‰∏ªË¶ÅÊòØ packÔºâÂàõÂª∫ÁöÑÊòØÁ°¨ÈìæÊé•„ÄÇËøôÊ†∑ÈÅøÂÖç‰∫ÜÂ§çÂà∂Ôºågit ÁöÑ&lt;strong>ÂØπË±°&lt;/strong>Êñá‰ª∂Âêç‰∏éÂÖ∂ÂÜÖÂÆπÁöÑ SHA1 ‰∏ÄËá¥ÔºåÂΩìÊñá‰ª∂ÂÜÖÂÆπÊîπÂèòÊó∂ÔºåÊñá‰ª∂Âêç‰πü‰ºöÊîπÂèòÔºågit ‰øÆÊîπÂ≠òÂÇ®Â∫ì pack Êñá‰ª∂ÁöÑÊµÅÁ®ãÂÆûÈôÖ‰∏äÊòØ &lt;code>Êñ∞Âª∫&lt;/code>&amp;ndash;&lt;code>Âà†Èô§&lt;/code>ÔºåÂõ†Ê≠§Ôºå‰ΩøÁî®Á°¨ÈìæÊé•‰∏çÁî®ÂΩìÂøÉ‰∫íÁõ∏‰øÆÊîπÁ†¥Âùè„ÄÇ&lt;/p>
&lt;p>Âú® Windows ‰∏≠ÔºåÂèØ‰ª•‰ΩøÁî® &lt;code>GetFileInformationByHandle&lt;/code>, &lt;code>FindFirstFileNameW&lt;/code>, &lt;code>FindNextFileNameW&lt;/code> ÁªÑÂêàÊü•ËØ¢Êñá‰ª∂ÊâÄÊúâÁöÑÁ°¨ÈìæÊé•„ÄÇ
Âú® POSIX Á≥ªÁªü‰∏≠ÔºåÊü•ËØ¢Á°¨ÈìæÊé•ÈúÄË¶ÅËß£ÊûêÂØπÂ∫îÁöÑ inodeÔºåÂ¶ÇÊûú inode ÂÄºÁõ∏ÂêåÔºåÂàô‰∫í‰∏∫Á°¨ÈìæÊé•„ÄÇ&lt;code>struct stat&lt;/code> ÁªìÊûÑ‰∏≠Êúâ &lt;code>st_nlink&lt;/code> Ë°®Á§∫Ê≠§Êñá‰ª∂ÊúâÂ§öÂ∞ë‰∏™Á°¨ÈìæÊé•„ÄÇ&lt;/p>
&lt;p>&lt;a href="https://en.wikipedia.org/wiki/Symbolic_link">Symbolic link&lt;/a> Á¨¶Âè∑ÈìæÊé•ÔºàËΩØÈìæÊé•ÔºâÊòØ‰∏ÄÁ±ªÁâπÊÆäÁöÑÊñá‰ª∂Ôºå ÂÖ∂ÂåÖÂê´Êúâ‰∏ÄÊù°‰ª•ÁªùÂØπË∑ØÂæÑÊàñËÄÖÁõ∏ÂØπË∑ØÂæÑÁöÑÂΩ¢ÂºèÊåáÂêëÂÖ∂ÂÆÉÊñá‰ª∂ÊàñËÄÖÁõÆÂΩïÁöÑÂºïÁî®„ÄÇ&lt;/p>
&lt;p>ËΩØÈìæÊé•Âú® Unix Á≥ªÁªü‰∏≠Ë¢´ÂπøÊ≥õ‰ΩøÁî®ÔºåÂú®ÁªàÁ´Ø‰∏≠ËæìÂÖ•ÂëΩ‰ª§Ôºö&lt;code>ls -l /usr/bin&lt;/code> ÂèØ‰ª•ÁúãÂà∞Â§ßÈáèÁöÑËΩØÈìæÊé•„ÄÇ&lt;/p>
&lt;p>Êó©ÊúüÁ¨¶Âè∑ÈìæÊé•ÁöÑÂÆûÁé∞ÔºåÈááÁî®Áõ¥Êé•ÂàÜÈÖçÁ£ÅÁõòÁ©∫Èó¥Êù•Â≠òÂÇ®Á¨¶Âè∑ÈìæÊé•ÁöÑ‰ø°ÊÅØÔºåËøôÁßçÊú∫Âà∂‰∏éÊôÆÈÄöÊñá‰ª∂‰∏ÄËá¥„ÄÇËøôÁßçÁ¨¶Âè∑ÈìæÊé•Êñá‰ª∂ÈáåÂåÖÂê´Êúâ‰∏Ä‰∏™ÊåáÂêëÁõÆÊ†áÊñá‰ª∂ÁöÑÊñáÊú¨ÂΩ¢ÂºèÁöÑÂºïÁî®Ôºå‰ª•Âèä‰∏Ä‰∏™ÊåáÁ§∫Ëá™Â∑±‰∏∫Á¨¶Âè∑ÈìæÊé•ÁöÑÊ†áÂøó„ÄÇ&lt;/p>
&lt;p>ËøôÊ†∑ÁöÑÂ≠òÂÇ®ÊñπÂºèË¢´ËØÅÊòéÊúâ‰∫õÁºìÊÖ¢ÔºåÂπ∂‰∏îÊó©‰∏Ä‰∫õÂ∞èÂûãÁ≥ªÁªü‰∏ä‰ºöÊµ™Ë¥πÁ£ÅÁõòÁ©∫Èó¥„ÄÇ‰∏ÄÁßçÂêç‰∏∫Âø´ÈÄüÁ¨¶Âè∑ÈìæÊé•ÁöÑÊñ∞ÂûãÂ≠òÂÇ®ÊñπÂºèËÉΩÂ§üÂ∞ÜÊñáÊú¨ÂΩ¢ÂºèÁöÑÈìæÊé•Â≠òÂÇ®Âú®Áî®‰∫éÂ≠òÊîæÊñá‰ª∂‰ø°ÊÅØÁöÑÁ£ÅÁõò‰∏äÁöÑÊ†áÂáÜÊï∞ÊçÆÁªìÊûÑ‰πã‰∏≠ÔºàinodeÔºâ„ÄÇ‰∏∫‰∫ÜË°®Á§∫Âå∫Âà´ÔºåÂéüÂÖàÁöÑÁ¨¶Âè∑ÈìæÊé•Â≠òÂÇ®ÊñπÂºè‰πüË¢´Áß∞‰ΩúÊÖ¢ÈÄüÁ¨¶Âè∑ÈìæÊé•„ÄÇNTFS Êñá‰ª∂Á≥ªÁªüÁöÑÁ¨¶Âè∑ÈìæÊé•ÊòØÂü∫‰∫é NTFS ReparsePoint ÂäüËÉΩÂÆûÁé∞„ÄÇ&lt;/p>
&lt;p>Âú® POSIX Á≥ªÁªü‰∏≠Ôºå&lt;code>readlink&lt;/code> ÂèØ‰ª•Ëß£ÊûêÁ¨¶Âè∑ÈìæÊé•Ëé∑ÂæóÁúüÂÆûÁöÑÁõÆÊ†áË∑ØÂæÑÔºåÂú® Windows ‰∏≠ÔºåÂàôÂèØ‰ª•‰ΩøÁî® &lt;code>GetFinalPathNameByHandleW&lt;/code> Ëé∑ÂæóÊñá‰ª∂ÁúüÂÆûÁöÑË∑ØÂæÑ„ÄÇ&lt;/p>
&lt;p>NTFS Á≥ªÁªüËøòÊîØÊåÅ‰∏Ä‰∫õÂÖ∂‰ªñÁöÑÈáçËß£ÊûêÁÇπÔºåÂåÖÊã¨ &lt;code>MountPoint&lt;/code>, ‰∏é UWP Âø´Êç∑ÂëΩ‰ª§ÁõÆÊ†áÁõ∏ÂÖ≥ÁöÑ &lt;code>AppExecLink&lt;/code>, ‰∏é Windows 10 Unix domain socket Áõ∏ÂÖ≥ÁöÑ &lt;code>AF Unix&lt;/code>, ‰∏é OneDrive Áõ∏ÂÖ≥ÁöÑ &lt;code>OneDrive&lt;/code>, ‰∏é Git VFSÔºàGVFSÔºâ Áõ∏ÂÖ≥ÁöÑ &lt;code>ProjFS&lt;/code>, ‰ª•Âèä‰∏é WIM ÊåÇËΩΩÁõ∏ÂÖ≥ÁöÑ &lt;code>WimImage&lt;/code> ËøòÊúâ &lt;a href="https://devblogs.microsoft.com/oldnewthing/20190618-00/?p=102597">WOF - Windows Overlay Filter&lt;/a> Á≠âÁ≠â„ÄÇPlanck ‰∏≠ÂÆûÁé∞‰∫ÜÂáΩÊï∞ &lt;a href="https://github.com/fcharlie/Planck/blob/a400828e62804b9c38c4e164e9f3efe559245e50/lib/inquisitive/resolve.cc#L82">&lt;code>ResolveTarget&lt;/code>&lt;/a> Áî®‰∫éÂàÜÊûêÈáçËß£ÊûêÁÇπ„ÄÇ&lt;/p>
&lt;h3 id="Âø´Êç∑ÊñπÂºèÂíåÊ°åÈù¢Êñá‰ª∂">Âø´Êç∑ÊñπÂºèÂíåÊ°åÈù¢Êñá‰ª∂&lt;/h3>
&lt;p>Âú® Windows Á≥ªÁªü‰∏≠ÔºåÊ°åÈù¢Âø´Êç∑ÊñπÂºèÊñá‰ª∂ÁöÑÂêéÁºÄÂêç‰∏∫ &lt;code>.lnk&lt;/code>ÔºåÁî®Êà∑Âè™ÈúÄË¶ÅÁÇπÂáªÊ°åÈù¢‰∏äÁöÑÂø´Êç∑ÊñπÂºèÂ∞±ÂèØ‰ª•ÂæàÊñπ‰æøÁöÑÊâìÂºÄÂ∫îÁî®Á®ãÂ∫èÔºåÁΩëÁ´ôÊàñËÄÖÊñá‰ª∂„ÄÇÂø´Êç∑ÊñπÂºèÁöÑÊ†ºÂºèÂêçÁß∞Âè´ÂÅö &lt;code>Shell Link&lt;/code>ÔºåÊòØ‰∏ÄÁßç‰∫åËøõÂà∂Ê†ºÂºèÊñá‰ª∂ÔºåÁõ∏Â∫îÁöÑËßÑËåÉÂú® &lt;a href="https://msdn.microsoft.com/en-us/library/dd871305.aspx">[MS-SHLLINK]: Shell Link (.LNK) Binary File Format&lt;/a>„ÄÇÂú® Planck ‰∏≠ÔºåShellLink ÁöÑÂÆö‰πâÂíåÂÆûÁé∞ÂàÜÂà´ÊòØ &lt;a href="https://github.com/fcharlie/Planck/blob/a400828e62804b9c38c4e164e9f3efe559245e50/lib/inquisitive/shl.hpp">lib/inquisitive/shl.hpp&lt;/a> Âíå &lt;a href="https://github.com/fcharlie/Planck/blob/a400828e62804b9c38c4e164e9f3efe559245e50/lib/inquisitive/shl.cc">lib/inquisitive/shl.cc&lt;/a>ÔºåÁõÆÂâçÂè™ÊîØÊåÅËß£Êûê &lt;code>HasLinkInfo&lt;/code> ‰ª•Âèä &lt;code>HasRelativePath&lt;/code> Ê†áÂøóÁöÑÂø´Êç∑ÊñπÂºè„ÄÇ&lt;/p>
&lt;p>Âú® X-Window Á≥ªÁªü‰∏äÔºå‰πüÂ≠òÂú®‰∏ÄÁßçÁ±ª‰ººÊ°åÈù¢Âø´Êç∑ÊñπÂºèÁöÑÊñá‰ª∂ÔºåÂêéÁºÄÂêç‰∏∫ &lt;code>.desktop&lt;/code> ÔºåÂΩìÊñá‰ª∂Â±ûÊÄß‰∏∫ÂèØÊâßË°åÊó∂ÔºåÊñá‰ª∂ÁÆ°ÁêÜÂô®‰ºöËß£Êûê &lt;code>Icon&lt;/code>Ôºå&lt;code>Name&lt;/code> ÁÑ∂ÂêéËØªÂèñËÆæÁΩÆÁöÑÂõæÊ†áÔºåÂêçÁß∞ÊòæÁ§∫Âá∫Êù•„ÄÇ‰∏ãÈù¢ÊòØÊàë‰ΩøÁî®ÁöÑ Ubuntu Á≥ªÁªü‰∏äÁöÑ &lt;code>wireshark.desktop&lt;/code> Êñá‰ª∂ÂÜÖÂÆπ„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#!/usr/bin/env xdg-open
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">[&lt;/span>Desktop Entry&lt;span style="color:#ff636f">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Name&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>Wireshark
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Comment&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>Wireshark build
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">GenericName&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>Demo Application
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Exec&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>/opt/wireshark/bin/wireshark
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Icon&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>wireshark
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Type&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>Application
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">StartupNotify&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#58a1dd">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Categories&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>GNOME;GTK;Development;Documentation;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">MimeType&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>text/plain;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÂèØ‰ª•ÁúãÂá∫ÔºåËøôÊòØ‰∏Ä‰∏™Ê†áÂáÜÁöÑ &lt;a href="https://en.wikipedia.org/wiki/Shebang_(Unix)">&lt;code>Shebang&lt;/code>&lt;/a> ÂèØÊâßË°åÊñá‰ª∂ÔºåÂú® Ubuntu ‰∏≠Ôºå&lt;code>xdg-open&lt;/code> Ëá™Ë∫´‰∏∫ &lt;code>Shell&lt;/code> ËÑöÊú¨ÔºàÂú®MacOS X‰∏ãÁöÑDarwin‰∏≠ÔºåËß£ÈáäÂô®ÊåáÂÆöÁöÑÊñá‰ª∂ÂøÖÈ°ªÊòØÂèØÊâßË°åÁöÑ‰∫åËøõÂà∂Êñá‰ª∂ÔºåÂπ∂‰∏îÊú¨Ë∫´‰∏çËÉΩÊòØËÑöÊú¨„ÄÇÔºâÔºåËôΩÁÑ∂ËøôÊòØ‰∏Ä‰∏™ &lt;code>Shebang&lt;/code> ÂèØÊâßË°åÊñá‰ª∂Ôºå‰ΩÜÈÅóÊÜæÁöÑÊòØÔºåÂú® Ubuntu ‰∏≠Ôºå‰Ω†Êó†Ê≥ïÁõ¥Êé•‰ªéÂëΩ‰ª§Ë°å‰∏≠‰ΩøÁî® &lt;code>xdg-open&lt;/code> ÂêØÂä®Áõ∏Â∫îÁöÑÁ®ãÂ∫èÔºåËøôÊòØ‰∏Ä‰∏™Â≠òÂú®‰∫ÜË∂ÖËøá 9 Âπ¥ÁöÑ BUG: &lt;a href="https://bugs.launchpad.net/ubuntu/+source/glib2.0/+bug/378783">xdg-open *.desktop opens text editor&lt;/a>&lt;/p>
&lt;h2 id="ÊñáÊú¨Êñá‰ª∂ËøòÊòØ‰∫åËøõÂà∂">ÊñáÊú¨Êñá‰ª∂ËøòÊòØ‰∫åËøõÂà∂&lt;/h2>
&lt;p>Âú®ËÆ°ÁÆóÊú∫‰∏≠ÔºåÊñáÊú¨Êñá‰ª∂ÂÆûÈôÖ‰∏äÊîØÊåÅ‰∫åËøõÂà∂Êñá‰ª∂ÁöÑ‰∏ÄÁßçÔºåËøôÁßçÊñá‰ª∂Âá†‰πéÂè™Áî±ÂèØÊâìÂç∞Â≠óÁ¨¶ÔºåÊéßÂà∂Â≠óÁ¨¶ÁªÑÊàêÔºåËÄå‰∫åËøõÂà∂Êñá‰ª∂ÂàôÂåÖÂê´Â§ßÈáèÁöÑ‰∏çÂèØËßÅÂ≠óÁ¨¶„ÄÇÂ§ÑÁêÜÁ®ãÂ∫èÂ∞ÜÊåâÁÖßÂÆö‰πâÁöÑ‰∫åËøõÂà∂Ê†ºÂºèÂØπ‰∫åËøõÂà∂Êñá‰ª∂ËøõË°åËß£Êûê„ÄÇ&lt;/p>
&lt;h3 id="Âø´ÈÄüÂå∫ÂàÜÊñáÊú¨‰∫åËøõÂà∂">Âø´ÈÄüÂå∫ÂàÜÊñáÊú¨‰∫åËøõÂà∂&lt;/h3>
&lt;p>ÊñáÊú¨Êñá‰ª∂ËøòÊòØÂÅ∂Â∞î‰ºöÊê∫Â∏¶‰∏çÂèØËßÅÂ≠óÁ¨¶ÔºåËøôÊ†∑ÊÉÖÂÜµ‰∏ãÊàë‰ª¨ÂæàÈöæ 100% Âå∫ÂàÜ‰∏Ä‰∏™Êñá‰ª∂ÊòØÂê¶ÊòØÊñáÊú¨Êñá‰ª∂Ôºà‰∫åËøõÂà∂Êñá‰ª∂Ôºâ„ÄÇÂ¶ÇÊûúÊàë‰ª¨ËÉΩÂ§üÂÆπÂøç‰∏Ä‰∫õËØØÂ∑ÆÔºå
ÔºåÂàôÂèØ‰ª•ÈÄöËøáÊ£ÄÊµãÊñá‰ª∂‰∏≠ÊòØÂê¶Â≠òÂú® &lt;code>NUL&lt;/code> Êù•Âå∫ÂàÜÊñá‰ª∂ÊòØÊñáÊú¨Êñá‰ª∂ËøòÊòØ‰∫åËøõÂà∂Êñá‰ª∂„ÄÇËøôÁßçÊñπÊ≥ïÁöÑÊ£ÄÊµãËøáÁ®ãÈùûÂ∏∏ÁÆÄÂçïÔºåÈÄüÂ∫¶‰πüÈùûÂ∏∏ÂèØËßÇÔºåËøôÁßçÊñπÊ≥ï‰πüË¢´ &lt;code>git&lt;/code> ‰ΩøÁî®ÔºåÁî®‰∫éÂú® diff ËøáÁ®ã‰∏≠Âà§Êñ≠Êñá‰ª∂ÊòØÂê¶ÊòØ‰∫åËøõÂà∂Ôºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">//https://github.com/git/git/blob/d166e6afe5f257217836ef24a73764eba390c58d/xdiff-interface.c#L188
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">int&lt;/span> &lt;span style="color:#58a1dd">buffer_is_binary&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">ptr&lt;/span>, &lt;span style="color:#ff636f">unsigned&lt;/span> &lt;span style="color:#ff636f">long&lt;/span> &lt;span style="color:#58a1dd">size&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">FIRST_FEW_BYTES&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span> &lt;span style="color:#58a1dd">size&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">size&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">FIRST_FEW_BYTES&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#ff636f">!!&lt;/span>&lt;span style="color:#58a1dd">memchr&lt;/span>(&lt;span style="color:#58a1dd">ptr&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#58a1dd">size&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Êàë‰ª¨Áü•ÈÅìÔºåÂú® C ËØ≠Ë®ÄÁöÑÊ†áÂáÜÂ∫ìÂáΩÊï∞ &lt;code>strlen&lt;/code> ‰∏≠ÔºåÂ≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶ËÆ°ÁÆóÊòØÈÄöËøáÂà§Êñ≠Â≠óÁ¨¶ÊòØÂê¶ÊòØ &lt;a href="https://en.wikipedia.org/wiki/Null-terminated_string">Null-terminated string&lt;/a>ÔºåËøôÂ∞±ÊÑèÂë≥ÁùÄÂ§ßÂ§öÊï∞Êó∂ÂÄôÔºåASCII ÊñáÊú¨Êñá‰ª∂‰∏çÂ∫îËØ•Êúâ &lt;code>NUL&lt;/code>ÔºåÂú® UTF-8 ‰∏é ASCII ÂÖºÂÆπÔºåËøôÁßçÊÉÖÂÜµ‰∏ãÊòØ‰∏ÄËá¥ÁöÑ„ÄÇÂΩìÁÑ∂ËøôÁßçËÆæËÆ°‰πüÈ•±ÂèóÊâπËØÑÔºö&lt;a href="http://queue.acm.org/detail.cfm?id=2010365">The Most Expensive One-byte Mistake&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">size_t&lt;/span> &lt;span style="color:#58a1dd">strlen&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">s&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">a&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">for&lt;/span> (; &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">s&lt;/span>; &lt;span style="color:#58a1dd">s&lt;/span>&lt;span style="color:#ff636f">++&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">s&lt;/span>&lt;span style="color:#ff636f">-&lt;/span>&lt;span style="color:#58a1dd">a&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="ÁºñÁ†ÅÁöÑÊñáÊú¨">ÁºñÁ†ÅÁöÑÊñáÊú¨&lt;/h3>
&lt;p>ASCII ÁºñÁ†ÅÁöÑËåÉÂõ¥ÊòØ 0 ~127ÔºåËøôÂ∞±ÊÑèÂë≥ÁùÄÂè™ËÉΩÁî®‰∫é &lt;code>A-Z;a-z;0-9,+-&lt;/code> Êï∞Â≠óÔºåËã±ÊñáÂ≠óÊØç‰∏Ä‰∫õÂü∫Êú¨Á¨¶Âè∑ÊéßÂà∂Â≠óÁ¨¶Á≠âÂ∞ëÈáèÁöÑÂ≠óÁ¨¶ÔºåÂ¶ÇÊûúÂ≠òÂÇ®ÈùûËã±ËØ≠ÂõΩÂÆ∂ÁöÑÊñáÂ≠óÂü∫Êú¨‰∏äÊòØ‰∏çÁé∞ÂÆûÁöÑÔºåÂ∞±ÁÆóÊää 128 ~ 255 ÂÖ®ÈÉ®Áî®‰∏äÔºåÂÉè‰∏≠ÊñáËøôÁßçÊúâÂá†ÂçÉ‰∏ä‰∏áÊñáÂ≠óÁöÑËØ≠Ë®ÄÊòØÊó†Ê≥ïË°®Á§∫ÁöÑ„ÄÇ‰∏∫‰∫ÜÊîØÊåÅÊõ¥Â§öÁöÑÊñáÂ≠óÔºåÂêéÊù•‰∫∫‰ª¨Âà∂ÂÆö‰∫ÜÂõΩÈôÖÊ†áÂáÜÂåñÁöÑ US4(UTF-32) US2(UTF-16)ÔºåUTF-8ÔºåÂõΩÂÜÖÂà∂ÂÆö GBK„ÄÇÂΩìÁºñÁ†ÅÁöÑÁßçÁ±ªÂ§öËµ∑Êù•ÁöÑÊó∂ÂÄôÔºåÈóÆÈ¢òÂèàÊù•‰∫ÜÔºåÂ¶Ç‰ΩïÁ°ÆÂÆöÊñá‰ª∂ÁºñÁ†ÅÔºü&lt;/p>
&lt;p>‰æãÂ¶Ç &lt;code>UTF-16&lt;/code>Ôºå&lt;code>UTF-32&lt;/code> ËøôÊ†∑ÁöÑÁºñÁ†ÅÔºåÁî±‰∫éÊòØÂ§öÂ≠óËäÇÁöÑÔºåÂõ†Ê≠§ÂèØËÉΩÂ≠òÂú®Â§öÂ≠óËäÇÂ∫èÔºåÈÄöËøáÊ£ÄÊµãÂ§öÂ≠óËäÇÂ∫èÂ∞±ÂèØ‰ª•ÁÆÄÂçïÁöÑËé∑ÂæóÊñá‰ª∂ÁºñÁ†ÅÔºö&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ÁºñÁ†Å&lt;/th>
&lt;th>Ëµ∑ÂßãÂ≠óÁ¨¶&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>UTF-32 BE&lt;/td>
&lt;td>0x0,0x0,0xFE,0xFF&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>UTF-32 LE&lt;/td>
&lt;td>0xFF,0xFE,0x00,0x00&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>UTF-16 BE&lt;/td>
&lt;td>0xFE,0xFF&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>UTF-16 LE&lt;/td>
&lt;td>0xFF,0xFE&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>UTF-8 with BOM&lt;/td>
&lt;td>0xEF,0xBB,0xBF&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>UTF-8 ÊòØ‰∏ÄÁßçÂ≠óËäÇÂ∫èÊó†ÂÖ≥ÁöÑÂèØÂèòÂ≠óËäÇÁºñÁ†ÅÔºà1 ~ 4 Â≠óËäÇÔºâÔºåÂõ†Ê≠§Ôºå‰∏çÂ∏¶Â≠óËäÇÂ∫èÊ≤°Êúâ‰ªª‰ΩïÈóÆÈ¢òÔºåÂπ∂‰∏î ASCII ÁºñÁ†Å 0 ~ 127 ÂÆåÂÖ®ÊòØ UTF-8 ÁöÑÂ≠êÈõÜÔºåÂ¶ÇÊûú‰∏çÊê∫Â∏¶Â≠óËäÇÂ∫èÔºåÂàôËÉΩÂ§üÂæàÂ•ΩÁöÑÂÖºÂÆπ‰ª•ÂâçÁöÑ ASCII ÊñáÊú¨„ÄÇËøô‰πüÊòØ UTF-8 Âú® Unix Á≥ªÁªü‰∏äË¢´ÂπøÊ≥õ‰ΩøÁî®ÁöÑÂéüÂõ†‰πã‰∏Ä„ÄÇËÄå Windows ËÆ∞‰∫ãÊú¨ÈááÁî® UTF-8 with BOM ‰πüÁî±‰∫é‰∏çÂÖºÂÆπ ASCII ËÄåÂπøÂèóÊâπËØÑ„ÄÇ&lt;/p>
&lt;p>Windows Á≥ªÁªüÊòØ‰∏Ä‰∏™ÂõΩÈôÖÂåñÂÅöÁöÑÈùûÂ∏∏Ê£íÁöÑÊìç‰ΩúÁ≥ªÁªüÔºåÂØπ‰∫éÂêÑÂõΩÁöÑÊú¨Âú∞Â≠óÁ¨¶ÈõÜÊîØÊåÅ‰πüÈùûÂ∏∏Â•ΩÔºåÊØîÂ¶ÇÔºåÂú®‰∏≠ÂõΩÂ§ßÈôÜÔºåÊñáÊú¨ÁºñËæëÂô®ÁöÑÈªòËÆ§ÁºñÁ†ÅÊòØ ANSIÔºåÊòØ ASCII Êâ©Â±ïÁºñÁ†ÅÔºå0 ~ 127 ÁºñÁ†Å‰∏é ASCII Áõ∏ÂêåÔºå0x80 ~ 0xFFFF ÂàôË°®Á§∫ÂØπÂ∫î‰ª£Á†ÅÈ°µÁöÑÊâÄÊúâÁºñÁ†Å„ÄÇÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÔºåANSI ÁºñÁ†ÅÁöÑËåÉÂõ¥Â∞è‰∫é UTF-8ÔºåÂπ∂‰∏îÁªùÂ§ßÂ§öÊï∞ ANSI Â≠óÁ¨¶ÁöÑÁ†ÅÁÇπÁõ∏ÂêåÊï∞Â≠óÁöÑ UTF-8 Á†ÅÁÇπÈÉΩÊòØÊúâÊïàÁöÑ UTF-8 Â≠óÁ¨¶ÔºåÂõ†Ê≠§Â¶ÇÊûúË¶ÅÂå∫ÂàÜ &lt;code>UTF-8 without BOM&lt;/code> ËøòÊòØ &lt;code>ANSI&lt;/code>ÔºåÂÆûÈôÖ‰∏äÁõ∏ÂΩìÈ∫ªÁÉ¶„ÄÇ&lt;/p>
&lt;p>ÊúâÊïàÁöÑ UTF-8 Â≠óÁ¨¶Âå∫Èó¥Ôºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"> * legal utf-8 byte sequence
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"> * http://www.unicode.org/versions/Unicode6.0.0/ch03.pdf - page 94
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"> *
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"> * Code Points 1st 2s 3s 4s
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"> * U+0000..U+007F 00..7F
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"> * U+0080..U+07FF C2..DF 80..BF
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"> * U+0800..U+0FFF E0 A0..BF 80..BF
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"> * U+1000..U+CFFF E1..EC 80..BF 80..BF
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"> * U+D000..U+D7FF ED 80..9F 80..BF
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"> * U+E000..U+FFFF EE..EF 80..BF 80..BF
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"> * U+10000..U+3FFFF F0 90..BF 80..BF 80..BF
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"> * U+40000..U+FFFFF F1..F3 80..BF 80..BF 80..BF
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"> * U+100000..U+10FFFF F4 80..8F 80..BF 80..BF
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"> *
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"> */&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Âè¶Â§ñÔºåÂØπ‰∫é ANSI ËÄåË®ÄÔºå‰∏çÂêåÂ≠óÁ¨¶ÈõÜÁöÑÈÉΩÈáçÂ§ç‰ΩøÁî®ÁùÄ 0x80 ~ 0xFFFF ÁºñÁ†ÅÂå∫Èó¥ÔºåËøôËøõ‰∏ÄÊ≠•Âä†Â§ß‰∫ÜÊñáÊú¨Â≠óÁ¨¶Ê£ÄÊµãÁöÑÈöæÂ∫¶„ÄÇ&lt;/p>
&lt;p>ÊñáÊú¨ÁºñÁ†ÅÁöÑÊ£ÄÊµãÊúâ‰∏§‰∏™ÊØîËæÉÊµÅË°åÁöÑÂÆûÁé∞Ôºå‰∏Ä‰∏™ÊòØ IE ÁöÑ &lt;a href="https://docs.microsoft.com/en-us/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa741022(v=vs.85)">IMultiLanguage&lt;/a>ÔºåÂè¶‰∏Ä‰∏™ÊòØ Firefox ÁöÑ &lt;a href="https://github.com/mozilla/gecko-dev/tree/52568d10660dfb0ce950f6983b20228374602efe/extensions/universalchardet/src/base">UniversalCharsetDetection&lt;/a>ÔºåÂêéËÄÖÁöÑÂáÜÁ°ÆÊÄßÊõ¥È´òÔºå‰ΩøÁî®Êõ¥Âä†ÂπøÊ≥õÔºåÊØîÂ¶Ç &lt;code>Notepad++&lt;/code> Â∞±ÊòØ‰ΩøÁî®‰∫Ü &lt;code>universalchardet&lt;/code>„ÄÇ&lt;/p>
&lt;p>Áî®Êà∑ÈÄöÂ∏∏‰∏çÂ∫îÁõ¥Êé•‰ΩøÁî® Mozilla ÁõÆÂΩï‰∏≠ÁöÑ &lt;code>Universalchardet&lt;/code>Ôºå&lt;code>Universalchardet&lt;/code> ‰∏é Firefox Êï¥ÂêàËæÉ‰∏∫Á¥ßÂØÜÔºåÂâ•Á¶ªÁ®çÂæÆÊúâÁÇπÈ∫ªÁÉ¶ÔºåÊúÄËøëÁöÑÁâàÊú¨Âè™ÊúâÂæàÂ∞ëÁöÑÂá†‰∏™ &lt;code>LangModels&lt;/code> ÂÆûÁé∞„ÄÇÂ¶ÇÊûúË¶Å‰ΩøÁî® &lt;code>Universalchardet&lt;/code>ÔºåÂèØ‰ª•‰ΩøÁî® Freedesktop Áª¥Êä§ÁöÑÔºö&lt;a href="https://www.freedesktop.org/wiki/Software/uchardet/">uchardet&lt;/a>ÔºåËøô‰∏™Â∫ìÂü∫‰∫é &lt;code>Universalchardet&lt;/code> ÂèëÂ±ïËµ∑Êù•ÁöÑÔºåËÉΩÁºñËØëÊàêÂä®ÊÄÅÂ∫ìÊàñËÄÖÈùôÊÄÅÂ∫ì‰æõÂºÄÂèëËÄÖÊï¥ÂêàÂà∞Ëá™Â∑±ÁöÑÁ®ãÂ∫è‰πã‰∏≠„ÄÇ&lt;/p>
&lt;p>‰ΩÜ &lt;code>uchardet&lt;/code> ÁöÑËÆ∏ÂèØËØÅ‰∏∫ &lt;code>MPL 1.1&lt;/code> ,&lt;code>GPL 2.0&lt;/code> &lt;code>LGPL 2.1&lt;/code>ÔºåÁ®ãÂ∫èÂú®‰æùËµñ &lt;code>uchardet&lt;/code> Êó∂Ë¶ÅËÄÉËôëËÆ∏ÂèØËØÅÁöÑÈóÆÈ¢ò„ÄÇÂ¶ÇÊûú‰ªÖ‰ªÖÂè™ÈúÄË¶ÅÂà§Êñ≠ÊñáÊú¨ÊòØÂê¶ÊòØ UTF-8ÔºåÂèØ‰ª•ÊåâÁÖß‰∏äÂõæÁöÑ UTF-8 ÁºñÁ†ÅÂå∫Èó¥ÂØπÊñá‰ª∂ËøõË°åÂàÜÊûêÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// Thanks
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// https://github.com/lemire/Code-used-on-Daniel-Lemire-s-blog/blob/master/2018/05/08/checkutf8.c
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">static&lt;/span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">uint8_t&lt;/span> &lt;span style="color:#58a1dd">utf8d&lt;/span>[] &lt;span style="color:#ff636f">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#828b96;font-style:italic">// 00..1f
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#828b96;font-style:italic">// 20..3f
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#828b96;font-style:italic">// 40..5f
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#828b96;font-style:italic">// 60..7f
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">9&lt;/span>, &lt;span style="color:#a6be9d">9&lt;/span>, &lt;span style="color:#a6be9d">9&lt;/span>, &lt;span style="color:#a6be9d">9&lt;/span>, &lt;span style="color:#a6be9d">9&lt;/span>, &lt;span style="color:#a6be9d">9&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">9&lt;/span>, &lt;span style="color:#a6be9d">9&lt;/span>, &lt;span style="color:#a6be9d">9&lt;/span>, &lt;span style="color:#a6be9d">9&lt;/span>, &lt;span style="color:#a6be9d">9&lt;/span>, &lt;span style="color:#a6be9d">9&lt;/span>, &lt;span style="color:#a6be9d">9&lt;/span>, &lt;span style="color:#a6be9d">9&lt;/span>, &lt;span style="color:#a6be9d">9&lt;/span>, &lt;span style="color:#a6be9d">9&lt;/span>, &lt;span style="color:#828b96;font-style:italic">// 80..9f
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#a6be9d">7&lt;/span>, &lt;span style="color:#828b96;font-style:italic">// a0..bf
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">8&lt;/span>, &lt;span style="color:#a6be9d">8&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#828b96;font-style:italic">// c0..df
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">0xa&lt;/span>, &lt;span style="color:#a6be9d">0x3&lt;/span>, &lt;span style="color:#a6be9d">0x3&lt;/span>, &lt;span style="color:#a6be9d">0x3&lt;/span>, &lt;span style="color:#a6be9d">0x3&lt;/span>, &lt;span style="color:#a6be9d">0x3&lt;/span>, &lt;span style="color:#a6be9d">0x3&lt;/span>, &lt;span style="color:#a6be9d">0x3&lt;/span>, &lt;span style="color:#a6be9d">0x3&lt;/span>, &lt;span style="color:#a6be9d">0x3&lt;/span>, &lt;span style="color:#a6be9d">0x3&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">0x3&lt;/span>, &lt;span style="color:#a6be9d">0x3&lt;/span>, &lt;span style="color:#a6be9d">0x4&lt;/span>, &lt;span style="color:#a6be9d">0x3&lt;/span>, &lt;span style="color:#a6be9d">0x3&lt;/span>, &lt;span style="color:#828b96;font-style:italic">// e0..ef
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">0xb&lt;/span>, &lt;span style="color:#a6be9d">0x6&lt;/span>, &lt;span style="color:#a6be9d">0x6&lt;/span>, &lt;span style="color:#a6be9d">0x6&lt;/span>, &lt;span style="color:#a6be9d">0x5&lt;/span>, &lt;span style="color:#a6be9d">0x8&lt;/span>, &lt;span style="color:#a6be9d">0x8&lt;/span>, &lt;span style="color:#a6be9d">0x8&lt;/span>, &lt;span style="color:#a6be9d">0x8&lt;/span>, &lt;span style="color:#a6be9d">0x8&lt;/span>, &lt;span style="color:#a6be9d">0x8&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">0x8&lt;/span>, &lt;span style="color:#a6be9d">0x8&lt;/span>, &lt;span style="color:#a6be9d">0x8&lt;/span>, &lt;span style="color:#a6be9d">0x8&lt;/span>, &lt;span style="color:#a6be9d">0x8&lt;/span> &lt;span style="color:#828b96;font-style:italic">// f0..ff
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">static&lt;/span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">uint8_t&lt;/span> &lt;span style="color:#58a1dd">utf8d_transition&lt;/span>[] &lt;span style="color:#ff636f">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">0x0&lt;/span>, &lt;span style="color:#a6be9d">0x1&lt;/span>, &lt;span style="color:#a6be9d">0x2&lt;/span>, &lt;span style="color:#a6be9d">0x3&lt;/span>, &lt;span style="color:#a6be9d">0x5&lt;/span>, &lt;span style="color:#a6be9d">0x8&lt;/span>, &lt;span style="color:#a6be9d">0x7&lt;/span>, &lt;span style="color:#a6be9d">0x1&lt;/span>, &lt;span style="color:#a6be9d">0x1&lt;/span>, &lt;span style="color:#a6be9d">0x1&lt;/span>, &lt;span style="color:#a6be9d">0x4&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">0x6&lt;/span>, &lt;span style="color:#a6be9d">0x1&lt;/span>, &lt;span style="color:#a6be9d">0x1&lt;/span>, &lt;span style="color:#a6be9d">0x1&lt;/span>, &lt;span style="color:#a6be9d">0x1&lt;/span>, &lt;span style="color:#828b96;font-style:italic">// s0..s0
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#828b96;font-style:italic">// s1..s2
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#828b96;font-style:italic">// s3..s4
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">2&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">3&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">3&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#828b96;font-style:italic">// s5..s6
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">3&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">3&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">3&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">3&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#828b96;font-style:italic">//
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#a6be9d">1&lt;/span>, &lt;span style="color:#828b96;font-style:italic">// s7..s8
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">static&lt;/span> &lt;span style="color:#ff636f">inline&lt;/span> &lt;span style="color:#ff636f">uint32_t&lt;/span> &lt;span style="color:#58a1dd">updatestate&lt;/span>(&lt;span style="color:#ff636f">uint32_t&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">state&lt;/span>, &lt;span style="color:#ff636f">uint32_t&lt;/span> &lt;span style="color:#58a1dd">byte&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">uint32_t&lt;/span> &lt;span style="color:#58a1dd">type&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">utf8d&lt;/span>[&lt;span style="color:#58a1dd">byte&lt;/span>];
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">state&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">utf8d_transition&lt;/span>[&lt;span style="color:#a6be9d">16&lt;/span> &lt;span style="color:#ff636f">*&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">state&lt;/span> &lt;span style="color:#ff636f">+&lt;/span> &lt;span style="color:#58a1dd">type&lt;/span>];
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">state&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">bool&lt;/span> &lt;span style="color:#58a1dd">validate_utf8&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">c&lt;/span>, &lt;span style="color:#58a1dd">size_t&lt;/span> &lt;span style="color:#58a1dd">len&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">unsigned&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">cu&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> (&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#ff636f">unsigned&lt;/span> &lt;span style="color:#ff636f">char&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>)&lt;span style="color:#58a1dd">c&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">uint32_t&lt;/span> &lt;span style="color:#58a1dd">state&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">for&lt;/span> (&lt;span style="color:#58a1dd">size_t&lt;/span> &lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>; &lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span> &lt;span style="color:#58a1dd">len&lt;/span>; &lt;span style="color:#58a1dd">i&lt;/span>&lt;span style="color:#ff636f">++&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">uint32_t&lt;/span> &lt;span style="color:#58a1dd">byteval&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> (&lt;span style="color:#ff636f">uint32_t&lt;/span>)&lt;span style="color:#58a1dd">cu&lt;/span>[&lt;span style="color:#58a1dd">i&lt;/span>];
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">updatestate&lt;/span>(&lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">state&lt;/span>, &lt;span style="color:#58a1dd">byteval&lt;/span>) &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#58a1dd">UTF8_REJECT&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">false&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">true&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ÂèØÊâßË°åÊñá‰ª∂">ÂèØÊâßË°åÊñá‰ª∂&lt;/h2>
&lt;p>Âú®ËÆ°ÁÆóÊú∫‰∏≠ÔºåÂèØÊâßË°åÊñá‰ª∂ÊòØÈùûÂ∏∏ÁâπÊÆäÁöÑÂ≠òÂú®ÔºåÁé∞‰ª£ËÆ°ÁÆóÊú∫ÁöÑËøêË°åÁ¶ª‰∏çÂºÄÂ∫îÁî®Á®ãÂ∫èÔºåËÄåÂ∫îÁî®Á®ãÂ∫èÂú®Á£ÅÁõò‰∏äÁöÑÂΩ¢ÂºèÂ∞±ÊòØÂèØÊâßË°åÊñá‰ª∂ÔºåÁª¥Âü∫ÁôæÁßë‰∏äÊúâÁÆÄÁü≠ÁöÑ‰ªãÁªçÔºö&lt;/p>
&lt;blockquote>
&lt;p>ÂèØÊâßË°åÊñá‰ª∂Âú®ËÆ°ÁÆóÊú∫ÁßëÂ≠¶‰∏äÔºåÊåá‰∏ÄÁßçÂÜÖÂÆπÂèØË¢´ËÆ°ÁÆóÊú∫Ëß£Èáä‰∏∫Á®ãÂ∫èÁöÑËÆ°ÁÆóÊú∫Êñá‰ª∂„ÄÇÈÄöÂ∏∏ÂèØÊâßË°åÊñá‰ª∂ÂÜÖÔºåÂê´Êúâ‰ª•‰∫åËøõÂà∂ÁºñÁ†ÅÁöÑÂæÆÂ§ÑÁêÜÂô®Êåá‰ª§Ôºå‰πüÂõ†Ê≠§ÂèØÊâßË°åÊñá‰ª∂ÊúâÊó∂Áß∞‰∏∫‰∫åËøõÂà∂Ê°£„ÄÇËøô‰∫õ‰∫åËøõÂà∂ÂæÆÂ§ÑÁêÜÂô®Êåá‰ª§ÁöÑÁºñÁ†ÅÔºå‰∫éÂêÑÁßçÂæÆÂ§ÑÁêÜÂô®ÊúâÊâÄ‰∏çÂêåÔºåÊïÖÊ≠§ÂèØÊâßË°åÊñá‰ª∂Â§öÊï∞Ë¶ÅÂàÜÂºÄ‰∏çÂêåÁöÑÂæÆÂ§ÑÁêÜÁâàÊú¨„ÄÇ‰∏Ä‰∏™ËÆ°ÁÆóÊú∫Êñá‰ª∂ÊòØÂê¶‰∏∫ÂèØÊâßË°åÊñá‰ª∂Ôºå‰∏ªË¶ÅÁî±Êìç‰ΩúÁ≥ªÁªüÁöÑ‰º†ÁªüÂÜ≥ÂÆö„ÄÇ‰æãÂ¶ÇÊ†πÊçÆÁâπÂÆöÁöÑÂëΩÂêçÊñπÊ≥ïÔºàÂ¶ÇÊâ©Â±ïÂêç‰∏∫exeÔºâÊàñÊñá‰ª∂ÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÔºà‰æãÂ¶ÇUNIXÁ≥ªÁªüËÆæÁΩÆ‚ÄúÂèØÊâßË°å‚ÄùÊùÉÈôêÔºâ„ÄÇ&lt;/p>
&lt;/blockquote>
&lt;p>ÂèØÊâßË°åÊñá‰ª∂ÁöÑÊ†ºÂºèÈùûÂ∏∏Â§öÔºå‰ΩÜÁõÆÂâçÂ∫îÁî®ÊØîËæÉÂπøÊ≥õÁöÑÂè™Êúâ PE(PE32+)ÔºåELFÔºåMach-O„ÄÇ‰∏ªË¶ÅÁöÑÊìç‰ΩúÁ≥ªÁªüÂàÜÂà´ÊòØ WindowsÔºåLinuxÔºåmacOS„ÄÇ&lt;/p>
&lt;h3 id="ÂèØÊâßË°åÊñá‰ª∂ÁöÑÊØîËæÉ">ÂèØÊâßË°åÊñá‰ª∂ÁöÑÊØîËæÉ&lt;/h3>
&lt;p>‰∏çÂêåÁöÑÂèØÊâßË°åÊñá‰ª∂ÁöÑÁâπÊÄßÊúâ‰∏Ä‰∫õ‰∏çÂêåÔºåÁª¥Âü∫ÁôæÁßë‰∏äÊúâ‰∏™ÊØîËæÉÔºö&lt;a href="https://en.wikipedia.org/wiki/Comparison_of_executable_file_formats">Comparison of executable file formats&lt;/a>„ÄÇ&lt;/p>
&lt;p>ÊàëËøôÈáåÂ∞Ü PE(PE32+)ÔºåELFÔºåMach-O ÁöÑÊ†ºÂºèÊØîËæÉË¥¥Âá∫Êù•Ôºö&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Ê†ºÂºèÂêç&lt;/th>
&lt;th>Êìç‰ΩúÁ≥ªÁªü&lt;/th>
&lt;th>Êñá‰ª∂Êâ©Â±ïÂêç&lt;/th>
&lt;th>ÊòæÂºèÂ§ÑÁêÜÂô®Â£∞Êòé&lt;/th>
&lt;th>‰ªªÊÑèËäÇÔºàSectionsÔºâ&lt;/th>
&lt;th>ÂÖÉÊï∞ÊçÆ&lt;/th>
&lt;th>Á≠æÂêç&lt;/th>
&lt;th>Â≠óÁ¨¶‰∏≤Ë°®&lt;/th>
&lt;th>Á¨¶Âè∑Ë°®&lt;/th>
&lt;th>64‰Ωç&lt;/th>
&lt;th>ËÉñ‰∫åËøõÂà∂&lt;/th>
&lt;th>ÂèØ‰ª•ÂåÖÂê´ÂõæÊ†á&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>PE&lt;/td>
&lt;td>Windows, ReactOSÔºåHX DOS ExtenderÔºåBeOS (&amp;gt;=R3)&lt;/td>
&lt;td>.EXE&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚ùå&lt;/td>
&lt;td>‚ùå&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>PE32+&lt;/td>
&lt;td>Windows 64-bit&lt;/td>
&lt;td>.EXE&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ELF&lt;/td>
&lt;td>Unix-like, OpenVMS&lt;/td>
&lt;td>none&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>Extension&lt;/td>
&lt;td>Extension&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Mach-O&lt;/td>
&lt;td>NeXTSTEPÔºåmacOS, iOS, watchOSÔºåtvOS&lt;/td>
&lt;td>none&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>&lt;code>&amp;lt;=256&lt;/code>&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚úî&lt;/td>
&lt;td>‚ùå&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="pe">PE&lt;/h3>
&lt;p>PE ÊòØ Windows NT Á≥ªÁªüÁöÑÂèØÊâßË°åÊñá‰ª∂Ê†ºÂºèÔºåÂêåÊ†∑ËøòË¢´ ReactOS ‰ΩøÁî®ÔºåPE32+ ÊòØ PE Ê†ºÂºèÁöÑ‰∏ÄÁßçÊîπËøõÔºåÁî®‰∫éÊîØÊåÅ 64‰ΩçÂ§ÑÁêÜÂô®„ÄÇË¶ÅÊü•Áúã PE Êñá‰ª∂Ê†ºÂºèÂèØ‰ª•Êü•ÁúãÔºö&lt;a href="https://docs.microsoft.com/en-us/windows/desktop/Debug/pe-format">PE Format&lt;/a>„ÄÇÂú® Windows SDK ‰∏≠Ôºå&lt;code>winnt.h&lt;/code> Â∑≤ÁªèÂÆö‰πâ‰∫ÜÂ§ßÈáèÁöÑ PE ÁªìÊûÑÔºå‰ΩÜÂπ∂‰∏çÂÆåÊï¥ÔºåÂ¶ÇÊûúË¶ÅËé∑ÂæóÊõ¥Âä†ÂÆåÊï¥ÁöÑÁªìÊûÑÔºåÈúÄË¶Å‰ΩøÁî® Windows WDK ÁöÑ &lt;code>ntimage.h&lt;/code>Ôºå‰ΩÜ‰∏Ä‰∫õÊñ∞ÁöÑÁ°¨‰ª∂ÂÆö‰πâÈúÄË¶ÅÂéª &lt;a href="https://docs.microsoft.com/en-us/windows/desktop/Debug/pe-format">PE Format&lt;/a> Êü•Êâæ„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">/// #define PROCESSOR_ARCHITECTURE_ARM32_ON_WIN64 13
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#ifndef IMAGE_FILE_MACHINE_ARM64
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">//// IMAGE_FILE_MACHINE_ARM64 is Windows
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_FILE_MACHINE_ARM64 0xAA64 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// ARM64 Little-Endian
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#ifndef IMAGE_FILE_MACHINE_RISCV32
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_FILE_MACHINE_RISCV32 0x5032
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#ifndef IMAGE_FILE_MACHINE_RISCV64
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_FILE_MACHINE_RISCV64 0x5064
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#ifndef IMAGE_FILE_MACHINE_RISCV128
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_FILE_MACHINE_RISCV128 0x5128
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#ifndef IMAGE_FILE_MACHINE_CHPE_X86
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_FILE_MACHINE_CHPE_X86 0x3A64 &lt;/span>&lt;span style="color:#828b96;font-style:italic">/// defined in ntimage.h
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#ifndef IMAGE_SUBSYSTEM_XBOX_CODE_CATALOG
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_SUBSYSTEM_XBOX_CODE_CATALOG 17 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// XBOX Code Catalog
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>EXEÔºåDLL Êñá‰ª∂ÁöÑÈ≠îÊï∞ÊòØ &lt;code>{'M','Z',0x90,0x0}&lt;/code> ËøôÂÆûÈôÖ‰∏äÊòØ &lt;code>IMAGE_DOS_HEADER.e_magic&lt;/code> ÁöÑÂÄºÔºå‰∏çÂêåÁ≥ªÁªüÁöÑÁ≠æÂêçÂπ∂‰∏ç‰∏ÄÊ†∑Ôºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#ifndef _MAC
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#include&lt;/span> &lt;span style="color:#828b96;font-style:italic">&amp;#34;pshpack4.h&amp;#34;&lt;/span>&lt;span style="color:#828b96;font-style:italic"> &lt;/span>&lt;span style="color:#828b96;font-style:italic">// 4 byte packing is the default
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_DOS_SIGNATURE 0x5A4D &lt;/span>&lt;span style="color:#828b96;font-style:italic">// MZ
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_OS2_SIGNATURE 0x454E &lt;/span>&lt;span style="color:#828b96;font-style:italic">// NE
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_OS2_SIGNATURE_LE 0x454C &lt;/span>&lt;span style="color:#828b96;font-style:italic">// LE
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_VXD_SIGNATURE 0x454C &lt;/span>&lt;span style="color:#828b96;font-style:italic">// LE
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_NT_SIGNATURE 0x00004550 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// PE00
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#include&lt;/span> &lt;span style="color:#828b96;font-style:italic">&amp;#34;pshpack2.h&amp;#34;&lt;/span>&lt;span style="color:#828b96;font-style:italic"> &lt;/span>&lt;span style="color:#828b96;font-style:italic">// 16 bit headers are 2 byte packed
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#else
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#include&lt;/span> &lt;span style="color:#828b96;font-style:italic">&amp;#34;pshpack1.h&amp;#34;&lt;/span>&lt;span style="color:#828b96;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_DOS_SIGNATURE 0x4D5A &lt;/span>&lt;span style="color:#828b96;font-style:italic">// MZ
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_OS2_SIGNATURE 0x4E45 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// NE
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_OS2_SIGNATURE_LE 0x4C45 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// LE
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_NT_SIGNATURE 0x50450000 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// PE00
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>PE Ê†ºÂºèÁöÑ &lt;code>IMAGE_NT_HEADERS&lt;/code> ÊâçÊòØÁúüÊ≠£ÁöÑ NT Â§¥ÔºåDOS Â§¥ÊàñËÄÖ OS2 Â§¥ÔºåÁõÆÂâçÂ≠òÂú®ÁöÑÂéüÂõ†ÊòØ‰∏∫‰∫Ü‰øùÊåÅÂÖºÂÆπÔºåÊØïÁ´ü Windows Êìç‰ΩúÁ≥ªÁªüÊòØ‰ªé 16 ‰ΩçËøáÊù•ÁöÑ„ÄÇ&lt;/p>
&lt;p>&lt;code>IMAGE_FILE_HEADER&lt;/code> ÁªìÊûÑÂ≠òÂÇ®‰∫ÜÊú∫Âô®Êû∂ÊûÑÔºåÂèØÊâßË°åÊñá‰ª∂ÁâπÂæÅÂíåÂèØÈÄâÂ§¥Â§ßÂ∞èÁ≠âÔºåËß£ÊûêÂà∞ &lt;code>IMAGE_OPTIONAL_HEADER&lt;/code> ÊâçÁÆóÊ≠£ÂºèËß£Êûê PE„ÄÇIMAGE_OPTIONAL_HEADER32 ‰∏é IMAGE_OPTIONAL_HEADER64 ‰∏≠ÁöÑÊàêÂëòÈ°∫Â∫èÊúâ‰∏Ä‰∫õÂ∑ÆÂà´ÔºåËøôÊ†∑ÁöÑÂ•ΩÂ§ÑÊòØÂú®‰ª• 32‰Ωç IMAGE_OPTIONAL_HEADER ËØªÂèñ 64 ‰Ωç PE Êó∂‰æùÁÑ∂ËÉΩÂ§üËß£ÊûêÂà∞Âü∫Êú¨Â≠óÊÆµÔºàÂèç‰πã‰πüÊòØ‰∏ÄÊ†∑Ôºâ„ÄÇËß£Êûê PE ÂæàÈáçË¶ÅÁöÑ‰∏Ä‰∏™ÂáΩÊï∞ÊòØ &lt;a href="https://docs.microsoft.com/en-us/windows/desktop/api/dbghelp/nf-dbghelp-imagervatova">&lt;code>ImageRvaToVa&lt;/code>&lt;/a> Âú®Êò†Â∞Ñ‰∏∫Êñá‰ª∂ÁöÑÊñá‰ª∂ÁöÑÊò†ÂÉèÂ§¥‰∏≠Êü•ÊâæÁõ∏ÂØπËôöÊãüÂú∞ÂùÄÔºàRVAÔºâÔºåÂπ∂ËøîÂõûÊñá‰ª∂‰∏≠Áõ∏Â∫îÂ≠óËäÇÁöÑËôöÊãüÂú∞ÂùÄ„ÄÇ&lt;/p>
&lt;p>Ëß£Êûê PE Êñá‰ª∂ÂØºÂÖ•ÂØºÂá∫ÔºåËµÑÊ∫êÁ≠âÈúÄË¶ÅËß£ÊûêÂèØÈÄâÂ§¥ÁöÑ &lt;code>DataDirectory&lt;/code> Êï∞ÁªÑÔºåÊï∞ÁªÑÁöÑÂ∫èÂè∑ÂØπÂ∫îÁöÑÊó∂‰∏çÂêåÁöÑËµÑÊ∫êÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_DIRECTORY_ENTRY_EXPORT 0 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// Export Directory
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_DIRECTORY_ENTRY_IMPORT 1 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// Import Directory
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_DIRECTORY_ENTRY_RESOURCE 2 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// Resource Directory
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_DIRECTORY_ENTRY_EXCEPTION 3 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// Exception Directory
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_DIRECTORY_ENTRY_SECURITY 4 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// Security Directory
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_DIRECTORY_ENTRY_BASERELOC 5 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// Base Relocation Table
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_DIRECTORY_ENTRY_DEBUG 6 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// Debug Directory
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// IMAGE_DIRECTORY_ENTRY_COPYRIGHT 7 // (X86 usage)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_DIRECTORY_ENTRY_ARCHITECTURE 7 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// Architecture Specific Data
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_DIRECTORY_ENTRY_GLOBALPTR 8 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// RVA of GP
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_DIRECTORY_ENTRY_TLS 9 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// TLS Directory
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_DIRECTORY_ENTRY_LOAD_CONFIG 10 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// Load Configuration Directory
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_DIRECTORY_ENTRY_BOUND_IMPORT 11 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// Bound Import Directory in headers
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_DIRECTORY_ENTRY_IAT 12 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// Import Address Table
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_DIRECTORY_ENTRY_DELAY_IMPORT 13 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// Delay Load Import Descriptors
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#828b96;font-style:italic">#define IMAGE_DIRECTORY_ENTRY_COM_DESCRIPTOR 14 &lt;/span>&lt;span style="color:#828b96;font-style:italic">// COM Runtime descriptor
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Ëß£Êûê PE Êñá‰ª∂‰æùËµñÈúÄË¶ÅËß£Êûê &lt;code>IMAGE_DIRECTORY_ENTRY_IMPORT&lt;/code> ÁõÆÂΩïÔºåËÄå &lt;code>IMAGE_DIRECTORY_ENTRY_COM_DESCRIPTOR&lt;/code> ÂØπÂ∫îÁöÑ 14 Âú® .Net ‰∏≠Ë¢´‰ΩøÁî®ÔºåÁî®‰∫éÊåáÂêë &lt;code>IMAGE_COR20_HEADER&lt;/code> ‰ø°ÊÅØ„ÄÇ&lt;/p>
&lt;p>Ëß£Êûê PE Êñá‰ª∂ÁöÑÂ∫ìÈùûÂ∏∏Â§öÔºåÊúâË¢´ &lt;a href="https://github.com/avast-tl/pelib">&lt;code>Avast Threat Labs&lt;/code>&lt;/a> ‰ΩøÁî®ÁöÑ &lt;code>pelib&lt;/code>ÔºàÊ≤°ÈîôÔºåÂ∞±ÊòØÈÇ£‰∏™ÊùÄÊØíËΩØ‰ª∂ AvastÔºâÔºåËøòÊúâ &lt;a href="https://github.com/hasherezade/bearparser">https://github.com/hasherezade/bearparser&lt;/a>Ôºå&lt;a href="https://github.com/lief-project/LIEF">https://github.com/lief-project/LIEF&lt;/a> Á≠âÈùûÂ∏∏‰ºòÁßÄÁöÑÂºÄÊ∫êÂ∫ì„ÄÇÂú® .NET Âπ≥Âè∞ËøòÊúâ &lt;a href="https://github.com/secana/PeNet">PeNet&lt;/a>„ÄÇÂÖ∂‰∏≠ &lt;code>LIFF&lt;/code> ËøòÊîØÊåÅ ELFÔºåMach-OÔºåARTÔºåOAT Á≠âÊ†ºÂºè„ÄÇÂú® LLVM ÁöÑÊ∫êÁ†Å‰∏≠ PE Êñá‰ª∂Ëß£Êûê‰ª£Á†ÅÂú® &lt;a href="https://github.com/llvm/llvm-project/blob/master/llvm/lib/Object/COFFObjectFile.cpp">llvm/lib/Object/COFFObjectFile.cpp&lt;/a> Êñá‰ª∂‰∏≠„ÄÇ&lt;/p>
&lt;p>ÂÖ≥‰∫é PE Êñá‰ª∂Ê†ºÂºèÂàÜÊûêÁöÑÊñáÁ´†ÈùûÂ∏∏Â§öÔºåËøôÈáåÊúâ‰∏ÄÁØáÊØîËæÉËØ¶ÁªÜÁöÑÔºö&lt;a href="https://en.wikibooks.org/wiki/X86_Disassembly/Windows_Executable_Files">x86 Disassembly/Windows Executable Files&lt;/a>&lt;/p>
&lt;p>ÂàÜÊûê PE ÁöÑÂ∑•ÂÖ∑ÈùûÂ∏∏Â§öÔºåWindows Internal 7th ‰ΩúËÄÖ‰πã‰∏ÄÁöÑ Pavel Yosifovich ‰πüÂºÄÂèë‰∫Ü‰∏Ä‰∏™ &lt;a href="https://github.com/zodiacon/PEExplorer">Portable Executable Explorer&lt;/a>„ÄÇ&lt;/p>
&lt;p>Planck ÂàÜÊûê‰∫Ü &lt;a href="https://github.com/fcharlie/Planck/blob/master/lib/inquisitive/pe.cc">PE&lt;/a> Êñá‰ª∂ÁöÑÊú∫Âô®Á±ªÂûãÔºåÂ≠êÁ≥ªÁªüÔºå‰æùËµñÔºåÁâπÂæÅÁ≠â„ÄÇÂêéÊù•Âà©Áî® Planck ÁöÑÊàêÊûúÂ∞Ü &lt;a href="https://github.com/fcharlie/PEAnalyzer">PEAnalyzer&lt;/a> ÈáçÊûÑ‰∫Ü‰∏ÄÁï™ÔºåÊà™ÂõæÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;p>&lt;img src="https://github.com/fcharlie/PEAnalyzer/raw/master/docs/images/view.png" alt="PEAnalyze">&lt;/p>
&lt;p>ÊàëÊúâÊó∂ÂÄôÈúÄË¶Å‰ªé &lt;code>MSYS2 Mingw64&lt;/code> ‰∏≠ÊèêÂèñ &lt;code>wget.exe&lt;/code>ÔºåÁªèÂ∏∏ÈúÄË¶ÅÊâãÂä®Êü•ÁúãÊñá‰ª∂‰æùËµñÔºåÈùûÂ∏∏È∫ªÁÉ¶ÔºåÂÆûÁé∞ Planck PE Ëß£ÊûêÊ®°ÂùóÂêéÔºå‰∫éÊòØÁºñÂÜô‰∫Ü &lt;a href="https://github.com/fcharlie/nodeps">Nodeps&lt;/a> Áî®‰∫éÂ∞Ü PE Êñá‰ª∂Â∞ÜÂêåÁõÆÂΩï‰∏ãÁöÑÊâÄÊúâ‰æùËµñÊã∑Ë¥ùÂà∞ÁõÆÊ†áÁõÆÂΩï„ÄÇ&lt;/p>
&lt;h3 id="elf">ELF&lt;/h3>
&lt;p>&lt;a href="https://en.wikipedia.org/wiki/Executable_and_Linkable_Format">Executable and Linkable Format (ELF, formerly named Extensible Linking Format)&lt;/a> ÊòØ‰∏ÄÁßçËøêÁî®ÈùûÂ∏∏ÂπøÊ≥õÁöÑÂèØÊâßË°åÊñá‰ª∂Ê†ºÂºèÔºåÁõÆÂâç Unix-like Êìç‰ΩúÁ≥ªÁªüÁöÑÂèØÊâßË°åÊñá‰ª∂Ê†ºÂºèÁªùÂ§ßÂ§öÊï∞ÈÉΩÊòØ ELF „ÄÇELF ÁöÑÈ≠îÊï∞ÊòØ &lt;code>{0x7f,'E','L','F'}&lt;/code>„ÄÇELF Ëß£ÊûêÂ∫ìÊúâÂâçÈù¢ÁöÑ &lt;a href="https://github.com/lief-project/LIEF">LIFF&lt;/a> ËøòÊúâË¢´ &lt;code>Avast Threat Labs&lt;/code> ‰ΩøÁî®ÁöÑ &lt;a href="https://github.com/avast-tl/elfio">elfio&lt;/a> ÂÆòÊñπÁâàÊú¨Âú∞ÂùÄÊòØÔºö&lt;a href="https://github.com/serge1/ELFIO">https://github.com/serge1/ELFIO&lt;/a>&lt;/p>
&lt;p>‰∏é PE ÊòæËëó‰∏çÂêåÁöÑÊòØÔºåELF Êñá‰ª∂ÂèØ‰ª•Êúâ &lt;code>SONAME&lt;/code> &lt;code>RPATH&lt;/code> &lt;code>RUPATH&lt;/code> ËøôÊ†∑ÁöÑËäÇ„ÄÇÈô§‰∫ÜÂèØÊâßË°åÊñá‰ª∂‰∏ªÂä®Âä†ËΩΩ‰æùËµñÂä®ÊÄÅÂ∫ìÔºåÊúâÊìç‰ΩúÁ≥ªÁªüÊàñËÄÖÂèØÊâßË°åÊñá‰ª∂Âä†ËΩΩÂô®Ë¢´Âä®Âä†ËΩΩ‰æùËµñÊó∂ÔºåPE Êñá‰ª∂‰æùËµñ dll ÂèØ‰ª•‰ªé PATH ‰ª•Âèä PE Êñá‰ª∂ÊâÄÂú®ÁõÆÂΩïÂä†ËΩΩÔºåËÄå ELF Âè™ËÉΩÂä†ËΩΩ LD_LIBRARY_PATH ‰ª•Âèä RPATH RUPATH ÊåáÂÆöÁõÆÂΩï‰∏ãÁöÑÂä®ÊÄÅÈìæÊé•Â∫ì„ÄÇPE ÁöÑÊú∫Âà∂ÂÆπÊòìÂ∏¶Êù•Ê≥®ÂÖ•ÈóÆÈ¢òÔºåËÄå Windows Êìç‰ΩúÁ≥ªÁªüÁõÆÂâç‰πüÂ¢ûÂä†‰∫Ü KnownDlls Êú∫Âà∂ÂáèÂ∞ëÊ≠§Á±ªÈóÆÈ¢òÁöÑÂèëÁîü„ÄÇËÄå ELF ÁöÑÊú∫Âà∂Âú®ÂàÜÂèë‰∫åËøõÂà∂Êó∂ÂÆπÊòìÂ∏¶Êù•‰∏Ä‰∫õÈ∫ªÁÉ¶Ôºå‰ΩÜÁõÆÂâçÂæàÂ§öÊìç‰ΩúÁ≥ªÁªüÂ∑≤ÁªèÊîØÊåÅ &lt;code>RUPATH=$ORIGIN/../lib&lt;/code> ËøôÊ†∑ÁöÑÊñπÂºèËÆæÁΩÆ &lt;code>RUPATH&lt;/code>„ÄÇÂè¶Â§ñ ELF ËÆ°ÁÆóÁúüÂÆûÂú∞ÂùÄÊó∂‰∏çÂÉè PÈúÄË¶Å‰ΩøÁî® &lt;code>ImageRvaToVa&lt;/code> Êç¢ÁÆóÔºåÂú® ELF Êñá‰ª∂ÁöÑÂ§ÑÁêÜËøáÁ®ã‰∏≠ÔºåÂè™ÈúÄË¶ÅÂ∞ÜÂÅèÁßªÂú∞ÂùÄ‰∏éÊñá‰ª∂Êò†Â∞ÑÁöÑËµ∑ÂßãÂú∞ÂùÄÁõ∏Âä†Âç≥ÂèØÂæóÂà∞Êï∞ÊçÆÂú∞ÂùÄ„ÄÇ&lt;/p>
&lt;p>ELF Á®ãÂ∫èÂú®ÂÆâË£ÖÁöÑÊó∂ÂÄôÂèØ‰ª•‰∏ªÂä®‰øÆÊîπ RPATH/RUPATHÔºåcmake ‰πüÊîØÊåÅ &lt;code>CMAKE_INSTALL_RPATH&lt;/code> Áî®‰∫éËÆæÁΩÆ &lt;code>RPATH/RUPATH&lt;/code>„ÄÇRPATH Âíå RUPATH ÁöÑÂå∫Âà´ÊúâÁØáÂçöÂÆ¢Êúâ‰ªãÁªçÔºö&lt;a href="https://blog.qt.io/blog/2011/10/28/rpath-and-runpath/">RPATH and RUNPATH&lt;/a>Ôºå‰∏çÂêåÊìç‰ΩúÁ≥ªÁªüÈìæÊé•Âô®ÁöÑÂ§ÑÁêÜ‰πüÁ®çÂæÆÊúâ‰∏Ä‰∫õÂ∑ÆÂà´ÔºåÂ§ßÂ§öÊï∞Êó∂ÂÄôÂè™Ë¶ÅËÆæÁΩÆ‰∏Ä‰∏™Âç≥ÂèØ„ÄÇ&lt;/p>
&lt;p>ÊàëÂ∞Ü cmake ‰∏≠ÊõøÊç¢ RPATH ÁöÑÂäüËÉΩÊäΩÂá∫Êù•ÔºåÂàõÂª∫‰∫ÜÈ°πÁõÆÔºö &lt;a href="https://github.com/fcharlie/cmchrpath">cmchrpath&lt;/a>ÔºåÂú® cmchrpath ‰∏≠ËøòÊúâ &lt;code>elfinfo&lt;/code> Áî®‰∫éÊü•Áúã ELF ÁöÑ‰∏Ä‰∫õÂü∫Êú¨‰ø°ÊÅØ„ÄÇ&lt;/p>
&lt;h3 id="mach-o">Mach-O&lt;/h3>
&lt;p>ÊàëÊ≤°Êúâ‰ªª‰Ωï mac ËÆæÂ§áÔºåÂõ†Ê≠§Ê≤°ÊúâËøõ‰∏ÄÊ≠•ÂàÜÊûê Mach-O Ê†ºÂºèÔºåÂÆûÈôÖ‰∏äÂæàÂ§öÂâçËæà‰ª¨ÂÜô‰∫ÜÈùûÂ∏∏‰∏çÈîôÁöÑÊñáÁ´†ÔºåÊØîÂ¶ÇÔºö&lt;a href="https://lowlevelbits.org/parsing-mach-o-files/">PARSING MACH-O FILES&lt;/a>„ÄÇ&lt;/p>
&lt;p>Mach-O ‰∏Ä‰∏™È≤úÊòéÁöÑÁâπÊÄßÂ∞±ÊòØÂÆÉÊòØ‰∏Ä‰∏™ÊîØÊåÅ FatBinaryÁöÑÊ†ºÂºèÔºàPE32+ ÂÆûÈôÖ‰∏ä‰πüÊîØÊåÅÔºå‰ΩÜ‰ΩøÁî®ËæÉÂ∞ëÔºâÔºåËøôÊÑèÂë≥ÁùÄ‰∏çÂêåÁöÑÂ§ÑÁêÜÂô®Êû∂ÊûÑÊåá‰ª§ËÉΩÂ§üÂ≠òÂÇ®Âú®Âêå‰∏ÄÊñá‰ª∂ÂΩì‰∏≠ÔºåÂú® Mac Â∞ÜÂ§ÑÁêÜÂô®‰ªé PowerPC Êû∂ÊûÑËøÅÁßªÂà∞ Intel ÁöÑËøáÁ®ã‰∏≠ËøêÁî®ÈùûÂ∏∏ÂπøÊ≥õ„ÄÇ&lt;/p>
&lt;p>Âú® Planck ‰∏≠ÔºåMach-O Ê†ºÂºèÁöÑÂÆö‰πâÁõÆÂΩï‰∏∫Ôºö&lt;a href="https://github.com/fcharlie/Planck/blob/master/lib/inquisitive/macho.hpp">lib/inquisitive/macho.hpp&lt;/a>&lt;/p>
&lt;h3 id="ÂèØÊâßË°åÊñá‰ª∂ÁöÑË∑®Âπ≥Âè∞">ÂèØÊâßË°åÊñá‰ª∂ÁöÑË∑®Âπ≥Âè∞&lt;/h3>
&lt;p>‰∏äËø∞ÈõÜ‰∏≠ÂèØÊâßË°åÊñá‰ª∂Ê†ºÂºèÈÉΩÊîØÊåÅËã•Âπ≤‰∏™Âπ≥Âè∞Ôºå‰ΩÜËøôÂπ∂‰∏çÊÑèÂë≥ÁùÄËøô‰∫õÂèØÊâßË°åÊñá‰ª∂ÂèØ‰ª•Ë∑®Âπ≥Âè∞ÔºåÂèØÊâßË°åÊñá‰ª∂Ë∑®Âπ≥Âè∞ÁöÑ‰∏ªË¶ÅÈòªÁ¢çÊúâ‰∏§ÁÇπÔºå‰∏Ä‰∏™ÊòØÊìç‰ΩúÁ≥ªÁªü‰∏çÂêåÔºå‰∫åÊòØÂ§ÑÁêÜÂô®Êû∂ÊûÑ‰∏çÂêå„ÄÇ&lt;/p>
&lt;p>Êìç‰ΩúÁ≥ªÁªü‰∏çÂêåÔºåÈááÁî®ÁöÑÂèØÊâßË°åÊñá‰ª∂Ê†ºÂºè‰∏çÂêåÔºåÊØîÂ¶Ç WindowsÈááÁî®‰∫Ü PE/PE32+ÔºåLinux ÈááÁî®‰∫Ü ELFÔºåmacOS ÈááÁî®‰∫Ü Mach-OÔºåÈô§‰∫ÜÂèØÊâßË°åÊñá‰ª∂‰∏çÂêå‰πãÂ§ñÔºåÊìç‰ΩúÁ≥ªÁªüÁöÑÂÜÖÊ†∏ÔºåÁ≥ªÁªüË∞ÉÁî®Á≠âÁ≠âÂùá‰∏çÁõ∏Âêå„ÄÇËøôÂ∞±ÁªôÂèØÊâßË°åÊñá‰ª∂Ë∑®Âπ≥Âè∞Â∏¶Êù•‰∫ÜÈáçÈáçÈòªÈöî„ÄÇËôΩÁÑ∂ÂèØÊâßË°åÊñá‰ª∂Ë∑®Âπ≥Âè∞ÊîØÊåÅÈùûÂ∏∏È∫ªÁÉ¶Ôºå‰ΩÜÁ°ÆÂÆûÊúâ‰∏Ä‰∫õÈ°πÁõÆÂÅöÂà∞‰∫ÜÂú®ÂÖ∂‰ªñÊìç‰ΩúÁ≥ªÁªü‰∏äÊîØÊåÅÂè¶‰∏ÄÊìç‰ΩúÁ≥ªÁªüÁöÑÂèØÊâßË°åÊñá‰ª∂„ÄÇ&lt;/p>
&lt;p>ÂØπ‰∫é‰∏Ä‰∫õÂºÄÂèëËÄÖËÄåË®ÄÔºåWindows 10 ÊúÄÊåØÂ•ã‰∫∫ÂøÉÁöÑÂäüËÉΩËé´Ëøá‰∫éÔºö&lt;a href="https://docs.microsoft.com/en-us/windows/wsl/about">Windows Subsytem for Linux&lt;/a>Ôºåwsl ÊîØÊåÅÂú® Windows Á≥ªÁªü‰∏äËøêË°åÊú™Áªè‰øÆÊîπÁöÑ ELF Êñá‰ª∂ÔºàÁõÆÂâçÊîØÊåÅÁöÑÊúâ Windows 64/ARM64 Á≥ªÁªüÔºâ„ÄÇWSL Ë¶ÅÂÅöÂà∞ÊîØÊåÅËøêË°å ELF ÔºåÈ¶ñÂÖàÂæóÂÜÖÂä†ËΩΩ ELF Âà∞ÂÜÖÂ≠òÔºåÁÑ∂ÂêéËÉΩÂàõÂª∫ Linux ËøõÁ®ãÔºåÂÜçÁÑ∂ÂêéÊòØÊîØÊåÅ Linux Á≥ªÁªüË∞ÉÁî®ÔºåÊñá‰ª∂Á≥ªÁªü‰πüË¶ÅÂÆûÁé∞ Linux ÁâπÊÄßÔºàÊØîÂ¶ÇÂ§ßÂ∞èÂÜôÊïèÊÑüÔºåÂèØÊâßË°åÊùÉÈôêÁ≠âÔºâ„ÄÇWSL ÂàõÂª∫ Linux ËøõÁ®ãÂÆûÈôÖ‰∏ä‰æùËµñÁöÑÊòØ &lt;a href="https://blogs.msdn.microsoft.com/wsl/2016/05/23/pico-process-overview/">Pico process&lt;/a> ÁâπÊÄß„ÄÇLinux ËøõÁ®ãÂèëËµ∑ÁöÑÁ≥ªÁªüË∞ÉÁî®‰ºöË¢´ËΩ¨Âèò‰∏∫ NT ÂÜÖÊ†∏ÁöÑÁ≥ªÁªüË∞ÉÁî®Ôºö&lt;a href="https://blogs.msdn.microsoft.com/wsl/2016/06/08/wsl-system-calls/">WSL System Calls&lt;/a>ÔºåÁõÆÂâç NTFS Êñá‰ª∂Á≥ªÁªü‰πüÊîØÊåÅ‰∫Ü Linux Êñá‰ª∂Á≥ªÁªüÔºàEXT4 BtrfsÔºâÁöÑ‰∏Ä‰∫õÁâπÊÄßÔºö&lt;a href="https://blogs.msdn.microsoft.com/wsl/2016/06/15/wsl-file-system-support/">WSL File System Support&lt;/a>„ÄÇ&lt;/p>
&lt;p>Github ‰∏äËøòÊúâ‰∏™ &lt;a href="https://github.com/wishstudio/flinux">Foreign LINUX&lt;/a> ‰∏é WSL ÊÄùË∑ØÁ±ª‰ººÔºå‰πüÊòØÂú® Windows Á≥ªÁªü‰∏äËøêË°åÊú™‰øÆÊîπÁöÑ ELF Êñá‰ª∂Ôºå‰ΩÜÊàêÁÜüÂ∫¶ÈùûÂ∏∏‰Ωé„ÄÇWSL Êé®Âá∫Âêé‰πüÂ∞±Ê≤°ÊúâÁª¥Êä§‰∫Ü„ÄÇ&lt;/p>
&lt;p>Âú® LinuxÔºåmacOSÔºåFreeBSD Á≠âÊìç‰ΩúÁ≥ªÁªü‰∏ä‰πüÊúâ‰∏™È°πÁõÆÁî®‰∫éÊîØÊåÅÂú®Ëøô‰∫õÂπ≥Âè∞ËøêË°å PE/PE32+ ÂèØÊâßË°åÊñá‰ª∂Ôºö&lt;a href="https://www.winehq.org/">Wine: Wine Is Not an Emulator&lt;/a>„ÄÇÊ≠§È°πÁõÆÁöÑÂéÜÂè≤ÊØî WSL Êõ¥‰πÖÔºåÂéüÁêÜÂ§ßÂêåÂ∞èÂºÇ„ÄÇÂõΩÂÜÖÁöÑ Linux ÂèëË°åÁâàÊ∑±Â∫¶ÁöÑÊãõÁâåÁâπÊÄßÂ∞±ÊòØÂíå Wine ÂÆòÊñπÂêà‰ΩúÔºåÂåÖÂê´ÂïÜ‰∏öÁâàÁöÑ WineÔºåÊõ¥Â•ΩÁöÑËøêË°å QQ Á≠âËΩØ‰ª∂„ÄÇ&lt;/p>
&lt;p>Github ‰∏ä‰πüÊúâÂºÄÂèëËÄÖÂÆûÁé∞‰∫ÜÂú® macOS Á≥ªÁªü‰∏äËøêË°å Linux ELF Êñá‰ª∂Ôºö &lt;a href="https://github.com/linux-noah/noah">Bash on Ubuntu on macOS&lt;/a>&lt;/p>
&lt;p>Âú® Linux ‰∏äÂä†ËΩΩËøêË°å Mach-O ÁöÑÈ°πÁõÆÊòØÔºö&lt;a href="https://github.com/shinh/maloader">Mach-o loader for linux&lt;/a>&lt;/p>
&lt;p>Github ‰∏äÊúâ‰∏™È°πÁõÆÂè´ &lt;code>loadlibrary&lt;/code>: &lt;a href="https://github.com/taviso/loadlibrary">Porting Windows Dynamic Link Libraries to Linux&lt;/a>ÔºåÁî®‰∫éÂú® Linux Á≥ªÁªü‰∏äÁõ¥Êé•Ë∞ÉÁî® PE DLL Âä®ÊÄÅÂ∫ì„ÄÇ&lt;/p>
&lt;p>Â¶ÇÊûúÊìç‰ΩúÁ≥ªÁªüÁõ∏ÂêåÔºåËÄå CPU Â§ÑÁêÜÂô®Êû∂ÊûÑ‰∏çÂêåÔºåÊØîÂ¶ÇÂú® Windows ARM64 Á≥ªÁªü‰∏äËøêË°å x86 PEÔºåËøôÈúÄË¶ÅÂÆûÁé∞Ê®°ÊãüÂô®ËøõË°å CPU Êåá‰ª§ËΩ¨Êç¢ÔºåÂπ∂‰∏îÂ∞Ü x86 ÁöÑ NT Ë∞ÉÁî®ËΩ¨Âèò‰Ωç ARM64 NT ÁöÑÁ≥ªÁªüË∞ÉÁî®ÔºåÂ¶ÇÊûúÂ§ÑÁêÜÂô®Êû∂ÊûÑÁõ∏ÂêåÔºåÊØîÂ¶ÇÂú® Windows AMD64 Á≥ªÁªü‰∏äËøêË°å x86 PEÔºåÂàôÁúÅÂéª‰∫ÜCPU Êåá‰ª§ËΩ¨Êç¢Ëøô‰∏ÄÁéØËäÇÔºåx86-64 ÂÆåÂÖ®ÂÖºÂÆπ x86„ÄÇ&lt;/p>
&lt;h3 id="Ëá™Ëß£ÂéãÊñá‰ª∂ÂíåÂÆâË£ÖÁ®ãÂ∫è">Ëá™Ëß£ÂéãÊñá‰ª∂ÂíåÂÆâË£ÖÁ®ãÂ∫è&lt;/h3>
&lt;p>&lt;a href="https://en.wikipedia.org/wiki/Self-extracting_archive">Self-extracting archive&lt;/a> ÊòØ‰∏ÄÁßçÁâπÊÆäÁöÑÂèØÊâßË°åÊñá‰ª∂ÔºåËøêË°åËá™Ëß£ÂéãÊñá‰ª∂Êó∂ÔºåËá™Ëß£ÂéãÊñá‰ª∂Â∞ÜÂéãÁº©ÂåÖËß£ÂéãÂà∞Áî®Êà∑ÊåáÂÆöÁõÆÂΩïÔºåËá™Ëß£ÂéãÊñá‰ª∂‰∏çÈúÄË¶ÅÂÖ∂‰ªñÁöÑÂéãÁº©ËΩØ‰ª∂Âç≥ÂèØËøêË°åÔºåÂπ∂‰∏îËøòËÉΩÊâßË°å‰∏Ä‰∫õÂàóÁöÑÂä®‰ΩúÔºåÂú® Windows Á≥ªÁªü‰∏≠ÈÄöÂ∏∏Ë¢´Áî®Êù•ÂÆûÁé∞ËΩØ‰ª∂ÂÆâË£Ö„ÄÇÂæàÂ§öÂÆâË£ÖÁ®ãÂ∫èÂ∞±ÊòØ‰∏Ä‰∏™Ëá™Ëß£ÂéãÊñá‰ª∂Ôºå‰Ω†Â¶Ç NSIS ÂÆâË£ÖÂåÖÂèØ‰ª•Áõ¥Êé•‰ΩøÁî® 7z Ëß£Âéã„ÄÇÂ∏∏ËßÅÁöÑ 7z WinRAR ÂùáÊîØÊåÅÂàõÂª∫Ëá™Ëß£ÂéãÊñá‰ª∂„ÄÇ&lt;/p>
&lt;p>Êúâ‰∫õÂÆâË£ÖÁ®ãÂ∫èÂπ∂‰∏çÊòØÂ∏∏ËßÑÁöÑËá™Ëß£ÂéãÊñá‰ª∂ÔºåÊØîÂ¶Ç &lt;code>InstallShield&lt;/code> Âà∂‰ΩúÁöÑÂÆâË£ÖÁ®ãÂ∫èÔºåÂÆÉ‰ª¨Â∞Ü MSI Package Â≠òÂÇ®Âú® PE Êñá‰ª∂ÁöÑËµÑÊ∫êÁõÆÂΩïÔºåËøêË°åÊó∂Áõ¥Êé•ÊèêÂèñÔºåÁÑ∂ÂêéË∞ÉÁî® msiexec ËøõË°åÂÆâË£Ö„ÄÇ&lt;/p>
&lt;p>Ëá™Ëß£ÂéãÊñá‰ª∂ÂíåÂÆâË£ÖÁ®ãÂ∫èÔºåÈÉΩÂ≠òÂú®‰∏Ä‰∏™ÈùûÂ∏∏Â§ßÁöÑÁº∫ÁÇπÔºåÂç≥Êñá‰ª∂ÁöÑÂ§ßÂ∞è‰∏çËÉΩË∂ÖËøá CPU ÂØªÂùÄÈïøÂ∫¶ÔºåÊØîÂ¶Ç 32‰ΩçÁ≥ªÁªü‰∏çËÉΩË∂ÖËøá 4 GB„ÄÇËøôÊòØÂõ†‰∏∫Êìç‰ΩúÁ≥ªÁªüÂú®ËøêË°åÂèØÊâßË°åÊñá‰ª∂Êó∂ÔºåÈúÄË¶ÅÂ∞ÜÂèØÊâßË°åÊñá‰ª∂ &lt;code>mmap&lt;/code> Âà∞ÂÜÖÂ≠òÔºåÊñá‰ª∂Â§ßÂ∞è‰∏çËÉΩË∂ÖËøáËøõÁ®ãÁöÑËôöÊãüÂú∞ÂùÄÊúÄÂ§ßÈïøÂ∫¶„ÄÇ&lt;/p>
&lt;p>Âú® Unix Á≥ªÁªü‰∏äÔºåÂæàÂ∞ëÊúâ‰ΩøÁî® ELF Âà∂‰ΩúÂÆâË£ÖÂåÖÁöÑÔºåÈÄöÂ∏∏‰ΩøÁî® Shell Script Êù•Âà∂‰Ωú STGZ ÂÆâË£ÖÂåÖÔºåÊØîÂ¶Ç cmake Âú® Unix Á≥ªÁªü‰∏≠ËøêË°å cpack ÈªòËÆ§ÊâìÂåÖÊó∂‰ºöÂ∞ÜÊ®°Âùó &lt;a href="https://github.com/Kitware/CMake/blob/master/Modules/CPack.STGZ_Header.sh.in">CPack.STGZ_Header.sh.in&lt;/a> ‰∏éÂéãÁº©ÂåÖÂêàÂπ∂Âà∂‰ΩúÊàê‰∏Ä‰∏™ &lt;code>.sh&lt;/code> ÁöÑÂÆâË£ÖÁ®ãÂ∫è„ÄÇ&lt;/p>
&lt;p>‰ªéËá™Ëß£ÂéãÊñá‰ª∂ÊàñËÄÖÂÆâË£ÖÂåÖ‰∏≠ÊèêÂèñÁªøËâ≤ËΩØ‰ª∂ÈÄöÂ∏∏ÁöÑÂÅöÊ≥ïÊòØ‰ΩøÁî® 7z Ëß£Âéã„ÄÇËÄå MSI ÁöÑÊñá‰ª∂ÂèØ‰ª•‰ΩøÁî® msiexec ÊèêÂèñÔºå‰πüÂèØ‰ª•‰ΩøÁî®ÂõæÂΩ¢ÂåñÁöÑ MSI ÊèêÂèñÂ∑•ÂÖ∑ &lt;a href="https://github.com/fcharlie/Krycekium">Krycekium Installer&lt;/a> ÊèêÂèñÔºåmsiexec ÁöÑÂëΩ‰ª§‰ΩøÁî®Â¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-powershell" data-lang="powershell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#https://github.com/fstudio/clangbuilder/blob/master/modules/Devi/Devi.psm1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">Function&lt;/span> &lt;span style="color:#58a1dd">Expand-Msi&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">param&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#58a1dd">String&lt;/span>]&lt;span style="color:#58a1dd">$Path&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#58a1dd">String&lt;/span>]&lt;span style="color:#58a1dd">$DestinationPath&lt;/span> &lt;span style="color:#828b96;font-style:italic">### Full dir of destination path&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">$process&lt;/span> = &lt;span style="color:#58a1dd">Start-Process&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;msiexec&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-ArgumentList&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;/a &lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$Path&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d"> /qn TARGETDIR=&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$DestinationPath&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-PassThru&lt;/span> &lt;span style="color:#58a1dd">-Wait&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$process&lt;/span>.&lt;span style="color:#58a1dd">ExitCode&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Expand-Msi: &lt;/span>&lt;span style="color:#58a1dd">$Path&lt;/span>&lt;span style="color:#a6be9d"> failed. &lt;/span>$(&lt;span style="color:#58a1dd">$process&lt;/span>.&lt;span style="color:#58a1dd">ExitCode&lt;/span>)&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">$process&lt;/span>.&lt;span style="color:#58a1dd">ExitCode&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Âü∫‰∫é InnoSetup Âà∂‰ΩúÁöÑÂÆâË£ÖÂåÖÂèØ‰ª•‰ΩøÁî® &lt;a href="https://sourceforge.net/projects/innounp/">Inno Setup Unpacker&lt;/a> ÊàñËÄÖÊòØ &lt;a href="https://github.com/dscharrer/innoextract/">innoextract&lt;/a> ÊèêÂèñ„ÄÇ&lt;/p>
&lt;h2 id="ÊñáÊ°£Ê†ºÂºè">ÊñáÊ°£Ê†ºÂºè&lt;/h2>
&lt;p>Áé∞‰ª£ËÆ°ÁÆóÊú∫ÈùûÂ∏∏ÈáçË¶ÅÁöÑ‰∏Ä‰∏™ÂäüËÉΩÂ∞±ÊòØÊñáÊ°£Â§ÑÁêÜÔºåÁâπÂà´ÊòØÂäûÂÖ¨ÂÆ§ÁôΩÈ¢ÜÔºåÊ∞ëÂ∑•ÁªèÂ∏∏ÈúÄË¶ÅÊé•Ëß¶Âà∞ÊñáÊ°£Â§ÑÁêÜËΩØ‰ª∂ÔºåÊØîÂ¶ÇÂÅöÊºîÁ§∫Ë¶ÅÂÜô PPTÔºåÊ±ÇËÅåÁÆÄÂéÜË¶ÅÁî® WORDÔºåÊü•ÁúãÊäÄÊúØÊñáÊ°£ÈúÄË¶Å PDF ÈòÖËØªÂô®Á≠âÁ≠â„ÄÇ&lt;/p>
&lt;p>ÊñáÊ°£Ê†ºÂºèÊúâÈùûÂ∏∏Â§öÁöÑÁßçÁ±ªÔºåÊúâÂØåÊñáÊú¨Ê†ºÂºè RTFÔºåOLE ÊñáÊ°£Ê†ºÂºè &lt;code>Microsoft Word .doc&lt;/code>ÔºåÊúâ‰æøÊê∫ÂºèÊñáÊ°£Ê†ºÂºè PDFÔºåÊúâ Office Open XML (.docx) Á≠âÁ≠â„ÄÇ&lt;/p>
&lt;p>RTF ÁöÑÊ†ºÂºèÊòØ‰∏ÄÁßçÊñáÊú¨Ê†ºÂºèÔºåÁî±ÊéßÂà∂Â≠óÁ¨¶‰∏≤ÂíåÊñáÊ°£ÂÜÖÂÆπÁªÑÊàêÔºåRTF ÁöÑÊ†ºÂºèËßÑËåÉ‰∏ãËΩΩÂú∞ÂùÄ‰∏∫Ôºö&lt;a href="https://www.microsoft.com/en-us/download/details.aspx?id=10725">Word 2007: Rich Text Format (RTF) Specification, version 1.9.1&lt;/a>„ÄÇ&lt;/p>
&lt;p>‰∏Ä‰∏™Á©∫ RTF ÊñáÊ°£ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-txt" data-lang="txt">&lt;span style="display:flex;">&lt;span>{\rtf1}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>RTF ÂÆûÈôÖ‰∏äË°®Áé∞ÂäõÂ∫¶ÊúâÈôêÔºåÂú® 2007 Âπ¥‰πãÂâçÔºåMicrosoft Word ‰ºòÂÖàÊîØÊåÅÁöÑÊ†ºÂºèÊòØ‰∫åËøõÂà∂ word Ê†ºÂºèÔºåËøôÊòØ‰∏ÄÁßç OLE ÊµÅÊ†ºÂºèÔºåÁõ∏ÂÖ≥ÁöÑËßÑËåÉÂèØ‰ª•ËÆøÈóÆÔºö&lt;a href="https://docs.microsoft.com/zh-cn/previous-versions/office/gg615596(v=office.14)">‰∫ÜËß£ Word MS-DOC ‰∫åËøõÂà∂Êñá‰ª∂Ê†ºÂºè&lt;/a>„ÄÇÂÆûÈôÖ‰∏äÊó†ËÆ∫ÊòØ &lt;code>.doc&lt;/code> ËøòÊòØ &lt;code>.xls&lt;/code> ‰ª•Âèä &lt;code>.ppt&lt;/code>Ôºå‰∏âÁßçÊñá‰ª∂Ê†ºÂºèÂÆûÈôÖ‰∏äÈÉΩÊòØ‰∫åËøõÂà∂ÊñáÊ°£Ê†ºÂºè‰∏ãÁöÑÁâπÊÆäÂÆûÁé∞ÔºåÂü∫Êú¨‰∏äÊó†Ê≥ïÂè™Ê£ÄÊµã Magic Â∞±Âà§Êñ≠Êñá‰ª∂Âà∞Â∫ïÊòØÂì™‰∏Ä‰∏™Á±ªÂûãÔºåËøòÈúÄË¶ÅËøõ‰∏ÄÊ≠•Ê£ÄÊµã„ÄÇ&lt;/p>
&lt;p>PDF ÊñáÊ°£Ë¢´Áî®Êù•‰º†Êí≠Â±ÖÂ§öÔºåÂ§ßÂ§öÊï∞Êó∂ÂÄô‰∫∫‰ª¨‰ΩøÁî®ÂÖ∂‰ªñÂ∑•ÂÖ∑ÊàñËÄÖËØ≠Ë®ÄÁºñÂÜôÊñáÊ°£ÔºåÁÑ∂ÂêéÁîüÊàê PDF ÊñáÊ°£Âπ∂ÂèëÂ∏ÉÂà∞‰∫íËÅîÁΩëÔºåPDF ÊñáÊ°£Ê†ºÂºèÁ±ª‰ºº RTFÔºå‰πüÊòØ‰∏Ä‰∏™ÊéßÂà∂Â≠óÁ¨¶‰∏≤+ÊñáÊ°£ÂÜÖÂÆπÁöÑÊ†ºÂºèÔºåÊñáÊ°£‰ª• &lt;code>%PDF-$version&lt;/code> ÂºÄÂ§¥„ÄÇ&lt;/p>
&lt;p>Âú® Microsoft Office 2007 ‰∏≠ÔºåÂæÆËΩØÂ∞Ü Office ÁöÑÈªòËÆ§ÊñáÊ°£Ê†ºÂºèÂàáÊç¢Âà∞ &lt;code>Office Open XML&lt;/code>ÔºåËøôÁßçÊ†ºÂºè‰ΩøÁî® xml ‰Ωú‰∏∫ÊèèËø∞ËØ≠Ë®ÄÔºåÂ∞ÜÂõæÁâáÊñáÊ°£Ôºå‰∏ªÈ¢òÁ≠âÂçïÁã¨Â≠òÂÇ®Âú®ÁâπÂÆöÁõÆÂΩïÔºåÊúÄÂêéÂ∞ÜÊñáÊ°£ÁõÆÂΩï‰ΩøÁî® Zip ÂéãÁº©Ëµ∑Êù•ÔºåËøôÁßçÊ†ºÂºèÁöÑ‰ºòÁÇπÊòØÊ†ºÂºèËß£ÊûêÊõ¥ÁÆÄÂçïÔºåÂéãÁº©ÂêéÁöÑÊñáÊ°£‰ΩìÁßØÊõ¥Â∞è„ÄÇË¶ÅÊ£ÄÊµãÊñá‰ª∂ÊòØÂê¶ÊòØ PPTX DOCX XLSX Âè™ÈúÄË¶ÅÂú®Ê£ÄÊµãÊñá‰ª∂ÊòØ Zip Êñá‰ª∂ÁöÑÂâçÊèê‰∏ãÔºåÂà§Êñ≠ Zip ÂéãÁº©ÂåÖÁöÑÁõÆÂΩïÁªìÊûÑÊòØÂê¶Áî±ÁâπÊÆäÁöÑÊñá‰ª∂Âêç„ÄÇÂèØ‰ª•ÂèÇËÄÉ Planck ÂÆûÁé∞Ôºö &lt;a href="https://github.com/fcharlie/Planck/blob/master/lib/inquisitive/zip.cc">lib/inquisitive/zip.cc&lt;/a>&lt;/p>
&lt;h2 id="Êñá‰ª∂ÁöÑÂéãÁº©">Êñá‰ª∂ÁöÑÂéãÁº©&lt;/h2>
&lt;p>Â∞ÜÊñá‰ª∂ÈÄöËøáÂéãÁº©ÁÆóÊ≥ïÂáèÂ∞èÂ≠òÂÇ®Êàñ‰º†ËæìÁöÑ‰ΩìÁßØËøôÊòØÂéãÁº©ËΩØ‰ª∂‰∏ªË¶ÅÁöÑÂàùË°∑„ÄÇÂéãÁº©ËΩØ‰ª∂Êó¢Ë¶ÅÊîØÊåÅÂ∞Ü‰∏çÂêåÁöÑÊñá‰ª∂ÂΩíÊ°£Âà∞Âêå‰∏ÄÊñá‰ª∂ËøòË¶ÅÂ∞ÜÊñá‰ª∂ÂéãÁº©Ôºå
Â∏∏ËßÅÁöÑÂéãÁº©Êñá‰ª∂Ê†ºÂºèÊúâ &lt;code>.zip&lt;/code>Ôºå&lt;code>.7z&lt;/code>Ôºå&lt;code>.rar&lt;/code>Ôºå&lt;code>.tar.gz&lt;/code>ÔºåÈô§‰∫Ü &lt;code>tar.*&lt;/code> Ê†ºÂºè‰πãÂ§ñÔºåÂÖ∂‰ªñÂéãÁº©Ê†ºÂºèÂ§ßÂ§öÊòØËá™ÊúâÁöÑÂΩíÊ°£Êú∫Âà∂ÔºåÈÄöÂ∏∏ÂéãÁº©ÂíåÂΩíÊ°£ÂêàÂπ∂Âú®‰∏ÄËµ∑ÔºåËÄåÂØπ‰∫é &lt;code>tar.*&lt;/code> ËÄåË®ÄÔºåÂÖà‰ΩøÁî® tar Â∞ÜÊñá‰ª∂ÂΩíÊ°£ÔºåÁÑ∂ÂêéÂÜç‰ΩøÁî®ÁâπÂÆöÁöÑÂéãÁº©ÁÆóÊ≥ïÂ∞ÜÂÖ∂ÂéãÁº©„ÄÇ‰∏çÂêåÁöÑÊñá‰ª∂Ê†ºÂºèÊîØÊåÅÁöÑÂéãÁº©ÁÆóÊ≥ï‰∏çÂêåÔºåÈÄöÂ∏∏Â¶Ç‰∏ãÔºö&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Format&lt;/th>
&lt;th>Compression methods&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>zip&lt;/td>
&lt;td>Deflate&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>7z&lt;/td>
&lt;td>LZMA, LZMA2, Bzip2, PPMd, Deflate, Zstd, Brotli&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Rar&lt;/td>
&lt;td>PPMII&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tar.gz&lt;/td>
&lt;td>Deflate&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tar.bz2&lt;/td>
&lt;td>Bzip2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tar.xz&lt;/td>
&lt;td>LZMA/LZMA2&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>ÊúâÂÖ≥ÂéãÁº©ËΩØ‰ª∂ÁöÑÊØîËæÉÂèØ‰ª•ÂèÇËÄÉÔºö&lt;a href="https://en.wikipedia.org/wiki/Comparison_of_file_archivers">Comparison of file archivers&lt;/a>&lt;/p>
&lt;h3 id="zip-Êñá‰ª∂Ê†ºÂºè">Zip Êñá‰ª∂Ê†ºÂºè&lt;/h3>
&lt;p>Zip ÊòØ‰∏ÄÁßçÊØîËæÉÊÇ†‰πÖÁöÑÂéãÁº©Êñá‰ª∂Ê†ºÂºèÔºåÊñá‰ª∂Â§¥‰∏∫ &lt;code>{'P','K'}&lt;/code>ÔºåËøôÊòØ‰ª• &lt;a href="https://en.wikipedia.org/wiki/Phil_Katz">Phil Katz&lt;/a> ÁöÑÂêçÂ≠óÁº©ÂÜôÂºÄÂ§¥ÔºåÂú® Windows Á≥ªÁªü‰∏äÔºåËµÑÊ∫êÁÆ°ÁêÜÂô®ÈªòËÆ§ÊîØÊåÅÊâìÂºÄ Zip Êñá‰ª∂ÔºåÂú® Unix Á≥ªÁªü‰∏äÔºåÂèØ‰ª•‰ΩøÁî® unzip ÂëΩ‰ª§Ëß£Âéã zip Êñá‰ª∂Ôºåzip Ê†ºÂºèËøòË¢´Áî®‰∫éÂÖ∂‰ªñÊñá‰ª∂Ê†ºÂºè‰Ωú‰∏∫ÂÆπÂô®Ê†ºÂºèÔºåÂ¶Ç
&lt;code>Office Open XML&lt;/code>Ôºå&lt;code>OpenDocument&lt;/code>Ôºå&lt;code>EPUB&lt;/code>ÔºåËøòÊúâ Windows UWP appx Á≠âÂùá‰ΩøÁî®‰∫Ü zip Ê†ºÂºè„ÄÇ&lt;/p>
&lt;p>Zip Ê†ºÂºèÊï∞ÊçÆÂ∏ÉÂ±ÄÔºö&lt;/p>
&lt;p>&lt;img src="https://upload.wikimedia.org/wikipedia/commons/6/63/ZIP-64_Internal_Layout.svg" alt="ZIP-64_Internal_Layout">&lt;/p>
&lt;p>Zip ÈÄöÂ∏∏‰ΩøÁî® &lt;code>Deflate&lt;/code> ÂéãÁº©ÁÆóÊ≥ïÔºåËß£Êûê Zip Êñá‰ª∂ÂèØ‰ª•‰ΩøÁî® &lt;a href="https://github.com/madler/zlib/tree/master/contrib/minizip">&lt;code>zlib: contrib/minizip&lt;/code>&lt;/a>„ÄÇzlib Â∫ìË¢´ÈùûÂ∏∏Â§öÁöÑËΩØ‰ª∂‰ΩøÁî®ÔºåÊØîÂ¶Ç git ‰ª•Âèä libgit2 ÈÉΩ‰æùËµñ zlibÔºàgit ÁöÑÂØπË±°ÂéãÁº©ÁÆóÊ≥ïÂ∞±ÊòØ DeflateÔºâ„ÄÇ&lt;/p>
&lt;h2 id="ÊÄªÁªì">ÊÄªÁªì&lt;/h2>
&lt;p>Êñá‰ª∂Ê†ºÂºèÁßçÁ±ªÁπÅÂ§öÔºå‰∏Ä‰∏ÄÁ†îÁ©∂‰πüÂçÅÂàÜÂêÉÂäõÔºåÊéåÊè°Êñá‰ª∂ÁöÑÊ†ºÂºèËßÑÂæãÔºå‰∏çÂ§±‰∏∫‰∏ÄÊù°Êç∑ÂæÑ„ÄÇ&lt;/p>
- https://forcemz.net/posts/2019/2019-01-25-file-parsing/ - Copyright (c) 2009-2024 J23</description></item><item><title>Privexec ÊùÇË∞à</title><link>https://forcemz.net/posts/2018/2018-11-30-privexec-new/</link><pubDate>Fri, 30 Nov 2018 21:00:00 +0800</pubDate><guid>https://forcemz.net/posts/2018/2018-11-30-privexec-new/</guid><description>Charlie's Rethinking https://forcemz.net/posts/2018/2018-11-30-privexec-new/ -&lt;h1 id="ÂâçË®Ä">ÂâçË®Ä&lt;/h1>
&lt;p>Êú¨Á´ôÁöÑÂºÄÁØáÂ∞±ÊòØËÆ≤ÁöÑ &lt;a href="https://forcemz.net/container/2015/06/12/AppContainer/">„ÄäWindows AppContainer ÈôçÊùÉÔºåÈöîÁ¶ª‰∏éÂÆâÂÖ®„Äã&lt;/a>Ôºå‰∏ÄÊôÉ‰∏âÂπ¥Â§öËøáÂéª‰∫ÜÔºåËøô‰∏âÂπ¥‰πã‰∏≠ÔºåÊàëÂºÄÂèë‰∫Ü‰∏Ä‰∏™ &lt;a href="https://github.com/M2Team/Privexec">Privexec&lt;/a>Ôºå‰∏Ä‰∏™‰ª•ÂÖ∂‰ªñÊùÉÈôêÂêØÂä®ËøõÁ®ãÁöÑÂ∑•ÂÖ∑ÔºåÊîØÊåÅÂêØÂä® &lt;code>AppContainer&lt;/code> ËøõÁ®ãÔºåÂâçÊÆµÂÆûÁé∞ÊúâÁî®Êà∑ÂèëËµ∑‰∫ÜÂäüËÉΩËØ∑Ê±Ç&lt;sup>1&lt;/sup>ÔºåËÆ© &lt;code>Privexec&lt;/code> ÊîØÊåÅËÆæÁΩÆ &lt;code>AppContainer&lt;/code> ÁöÑ &lt;code>Capabilities&lt;/code>ÔºåËÄå‰∏çÊòØÂÉè‰ª•Ââç‰∏ÄÊ†∑Âú®ÂêØÂä® &lt;code>AppContainer&lt;/code> ËøõÁ®ãÊó∂‰ΩøÁî® &lt;code>CreateWellKnownSid&lt;/code> ÂàõÂª∫ÊâÄÊúâÁöÑ‰∏é &lt;code>AppContainer&lt;/code> Áõ∏ÂÖ≥ÁöÑ &lt;code>Capabilities SIDs&lt;/code>„ÄÇ‰∫éÊòØ‰πéÔºåÊàëÂ∞±Ëä±‰∫Ü‰∏ÄÁÇπÊó∂Èó¥Â∞Ü Privexec ÈáçÊûÑ‰∫Ü‰∏ÄÁï™ÔºåÊúâÊâÄÊÑüÊÇüÔºå‰æøÂ∞ÜÂÖ∂ÂÜô‰∏ãÊù•„ÄÇ&lt;/p>
&lt;h2 id="process">Process&lt;/h2>
&lt;p>Âú® Windows Âπ≥Âè∞‰∏äÔºåÂàõÂª∫ËøõÁ®ãÊúâ &lt;code>WinExec&lt;/code>Ôºå&lt;code>system&lt;/code>Ôºå&lt;code>_spawn/_wspawn&lt;/code>Ôºå&lt;code>CreateProcess&lt;/code>Ôºå&lt;code>ShellExecute&lt;/code> Á≠âÂ§öÁßçÈÄîÂæÑÔºå‰ΩÜ‰∏äËø∞ÂáΩÊï∞Âü∫Êú¨‰∏äËøòÊòØÁî± &lt;code>CreateProcess Family&lt;/code> Â∞ÅË£ÖÁöÑ„ÄÇÂú® Windows ‰ΩøÁî® &lt;code>C/C++&lt;/code> ÂàõÂª∫ËøõÁ®ãÂ∫îÂΩì‰ºòÂÖà‰ΩøÁî® &lt;code>CreateProcess&lt;/code>ÔºåCreateProcess Êúâ‰∏â‰∏™Âèò‰ΩìÔºå‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÊîØÊåÅ‰ª•ÂÖ∂‰ªñÊùÉÈôêÂêØÂä®ËøõÁ®ãÔºå CreateProcess ÂèäÂÖ∂Âèò‰ΩìÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Function&lt;/th>
&lt;th>Feature&lt;/th>
&lt;th>Details&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>CreateProcessW/A&lt;/td>
&lt;td>ÂàõÂª∫Â∏∏ËßÑËøõÁ®ãÔºåÊùÉÈôêÁªßÊâøÁà∂ËøõÁ®ãÊùÉÈôê&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>CreateProcessAsUserW/A&lt;/td>
&lt;td>‰ΩøÁî®‰∏ª Token ÂàõÂª∫ËøõÁ®ãÔºåÂ≠êËøõÁ®ãÊùÉÈôê‰∏é Token ÈôêÂÆö‰∏ÄËá¥&lt;/td>
&lt;td>ÂøÖÈ°ªÂºÄÂêØ &lt;code>SE_INCREASE_QUOTA_NAME&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>CreateProcessWithTokenW&lt;/td>
&lt;td>‰ΩøÁî®‰∏ª Token ÂàõÂª∫ËøõÁ®ãÔºåÂ≠êËøõÁ®ãÊùÉÈôê‰∏é Token ÈôêÂÆö‰∏ÄËá¥&lt;/td>
&lt;td>ÂøÖÈ°ªÂºÄÂêØ &lt;code>SE_IMPERSONATE_NAME&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>CreateProcessWithLogonW/A&lt;/td>
&lt;td>‰ΩøÁî®ÊåáÂÆöÁî®Êà∑Âá≠ÊçÆÂêØÂä®ËøõÁ®ã&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;code>CreateProcessWithLogonW&lt;/code> ‰ΩøÁî®Áî®Êà∑Âá≠ÊçÆËé∑ÂæóÁî®Êà∑‰ª§ÁâåÔºåÁÑ∂ÂêéÂêØÂä®ËøõÁ®ãÔºåËøôÁ≠â‰ª∑‰∫é‰ΩøÁî® &lt;code>LogonUser&lt;/code> +&lt;code>CreateProcessAsUser&lt;/code> ÂêØÂä®ËøõÁ®ã„ÄÇ&lt;/p>
&lt;p>&lt;code>CreateProcessWithTokenW&lt;/code> ÊòØ &lt;code>Windows Vista&lt;/code> ÊâçÂºïÂÖ•Ê°åÈù¢Á≥ªÁªüÁöÑÔºåÊ≤°Êúâ ANSI ÁâàÊú¨ÔºåGithub ‰∏äÊúÄÂ∏∏ËßÅÁöÑÁî®Ê≥ïÊòØÊâìÂºÄÊ°åÈù¢ËøõÁ®ãÔºåËé∑ÂèñÂÖ∂ TokenÔºåÁÑ∂ÂêéÊã∑Ë¥ùËøô‰∏™ Token ÂàõÂª∫‰∏éÊ°åÈù¢ÊùÉÈôê‰∏ÄËá¥ÁöÑËøõÁ®ãÔºåËøôÊòØ‰∏ÄÁßçÈôçÊùÉÊú∫Âà∂Ôºå‰ªÖÂΩìÂΩìÂâçÁôªÂΩïÁî®Êà∑ÊòØÊ†áÂáÜÁî®Êà∑ÊâçËÉΩÈôçÊùÉÊàêÂäü„ÄÇ
&lt;code>CreateProcessWithTokenW&lt;/code> ÂÜÖÈÉ®Âú®Ë∞ÉÁî®Â•ΩÂá†‰∏™ÂáΩÊï∞‰πãÂêéÊâç‰ºöË∞ÉÁî® &lt;code>CreateProcessAsUserW&lt;/code>ÔºåÂú® &lt;code>Privexec&lt;/code> ‰∏≠Âπ∂Êú™‰ΩøÁî®ÂÆÉ„ÄÇ
Âú® &lt;code>ReactOS&lt;/code> ‰∏≠ÔºåÊ≤°ÊúâÂÆûÁé∞ &lt;code>CreateProcessWithTokenW&lt;/code>Ôºå‰∏ãÈù¢ÈôÑ‰∏ä &lt;code>CreateProcessWithTokenW&lt;/code> Ë∞ÉÁî®ÂõæÔºö&lt;/p>
&lt;p>&lt;img src="https://user-images.githubusercontent.com/6904176/62693095-6645d980-ba04-11e9-92bf-53fb526d11e9.png" alt="CreateProcessWithTokenW">
&lt;img src="https://user-images.githubusercontent.com/6904176/62693086-62b25280-ba04-11e9-84ee-d0ec5786bed3.png" alt="CreateProcessWithTokenW">&lt;/p>
&lt;p>ÂÆûÈôÖ‰∏äÂú® &lt;code>ReactOS&lt;/code> ‰∏≠Ôºå&lt;code>CreateProcessAsUser&lt;/code> ÊúÄÁªà‰æùÁÑ∂Ë∞ÉÁî®ÁöÑÊòØ &lt;code>CreateProcess&lt;/code> ÂàõÂª∫ËøõÁ®ãÔºåÁÑ∂ÂêéÂ∞ÜËøõÁ®ãÊåÇËµ∑ÔºåËÆæÁΩÆÂ•Ω &lt;code>Token&lt;/code> ÂêéÂÜçÊÅ¢Â§çËøõÁ®ã„ÄÇÂú® Windows ‰∏≠Ôºå‰Ω†ÂèØ‰ª•‰ΩøÁî® &lt;code>Process Monitor&lt;/code> Ë∑üË∏™ &lt;code>CreateProcessAsUser&lt;/code> ÁöÑË∞ÉÁî®Â†ÜÊ†àÔºåÂú® Windows 10 18.09 (10.0.17763.167) ‰∏≠Ôºå&lt;code>CreateProcessAsUser&lt;/code> ‰ºöË∞ÉÁî® &lt;code>CreateProcessInternalW&lt;/code>ÔºåËÄå CreateProcess ‰πüÊòØË∞ÉÁî® &lt;code>CreateProcessInternalW&lt;/code>„ÄÇÂ¶ÇÊûúÁî® &lt;code>IDA Freeware&lt;/code> &lt;sup>2&lt;/sup> ÂèçÊ±áÁºñ &lt;code>KernelBase.dll&lt;/code> ÂèØ‰ª•ÂèëÁé∞ &lt;code>CreateProcessAsUserW&lt;/code> ÁöÑÊùÉÈôêÊúÄÂêé‰º†ÈÄíÂà∞ &lt;code>CreateProcessInternalW&lt;/code> Áî± &lt;code>CreateProcessInternalW&lt;/code> Â§ÑÁêÜ‰∫ÜÔºåËøôÈáå‰∏é &lt;code>ReactOS&lt;/code> Êúâ‰∏ÄÂÆöÂ∑ÆÂà´„ÄÇ&lt;/p>
&lt;p>&lt;img src="https://github.com/M2Team/Privexec/raw/master/docs/images/austack.png" alt="CreateProcessAsUserW">&lt;/p>
&lt;p>ËÄåÂÜÖÊ†∏‰∏≠ÂàõÂª∫ËøõÁ®ãÁöÑÁªÜËäÇËÆ≤Ëµ∑Êù•ÁØáÂπÖËøáÈïøÔºåÂ§ßÂÆ∂ÂèØ‰ª•ÂèÇËÄÉ „ÄäÊ∑±ÂÖ•Ëß£Êûê Windows Êìç‰ΩúÁ≥ªÁªü Á¨¨ÂÖ≠ÁâàÔºà‰∏äÂÜåÔºâ„ÄãP364 &lt;em>CreateProcessÁöÑÊµÅÁ®ã&lt;/em> „ÄÇ&lt;/p>
&lt;p>Âú® Windows ‰∏≠ÔºåÂ¶ÇÊûúË¶ÅÂÆûÁé∞ &lt;code>UAC&lt;/code> ÊèêÊùÉÔºåÈúÄË¶ÅË∞ÉÁî® &lt;code>ShellExecute&lt;/code> ‰ª• &lt;code>runas&lt;/code> ÁöÑÂèÇÊï∞ÂêØÂä®Êñ∞ÁöÑËøõÁ®ã„ÄÇÂ¶ÇÊûúÂú®Á®ãÂ∫èÁºñËØëÁöÑÊ∏ÖÂçïÊñá‰ª∂‰∏≠Ê∑ªÂä†‰∫ÜÂ¶Ç‰∏ãÊ∏ÖÂçï‰ª£Á†ÅÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-xml" data-lang="xml">&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;lt;trustInfo&lt;/span> &lt;span style="color:#58a1dd">xmlns=&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;urn:schemas-microsoft-com:asm.v2&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;lt;security&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;lt;requestedPrivileges&lt;/span> &lt;span style="color:#58a1dd">xmlns=&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;urn:schemas-microsoft-com:asm.v3&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;lt;requestedExecutionLevel&lt;/span> &lt;span style="color:#58a1dd">level=&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;requireAdministrator&amp;#39;&lt;/span> &lt;span style="color:#58a1dd">uiAccess=&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;false&amp;#39;&lt;/span> &lt;span style="color:#58a1dd">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;lt;/requestedPrivileges&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;lt;/security&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;lt;/trustInfo&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Shell Âú®ÂêØÂä®Ê∏ÖÂçïÈôÑÂ∏¶Êúâ UAC ÊèêÊùÉÁöÑÂèØÊâßË°åÊñá‰ª∂Êó∂‰πü‰ºöÂèëÁîüÊèêÊùÉ„ÄÇ‰ª• &lt;code>Windows 10&lt;/code> ‰∏∫‰æãÔºåÊèêÊùÉÊúÄÁªàÁî± &lt;code>AicLaunchAdminProcess&lt;/code> ÂáΩÊï∞ÂÆûÁé∞ÔºåÊ≠§ÂáΩÊï∞ÁõÆÂâçÂÆûÁé∞Âú® &lt;code>Windows.Storage.dll&lt;/code> ‰∏≠ÔºåUAC ÊèêÊùÉÈúÄË¶Å‰∏é &lt;code>Appinfo&lt;/code> ÊúçÂä°ÈÄö‰ø°Ôºå&lt;code>Appinfo&lt;/code> È™åËØÅÊèêÊùÉË°å‰∏∫Âêé‰ΩøÁî® &lt;code>CreateProcessAsUserW&lt;/code> ÂêØÂä®ËøõÁ®ãÔºåÂπ∂Â∞ÜÂÖ∂Áà∂ËøõÁ®ãËÆæÁΩÆ‰∏∫ &lt;code>ShellExecute&lt;/code> Ë∞ÉÁî®ËÄÖ„ÄÇË∞ÉÁî®ÁªÜËäÇ(Windows Vista)&lt;sup>3&lt;/sup>Â¶Ç‰∏ãÔºö&lt;/p>
&lt;ol>
&lt;li>AppInfo goes and talks to the Local Security Authority to get the elevated token of the logged in user of Session 1.&lt;/li>
&lt;li>AppInfo loads up a STARTUPINFOEX structure (new to Vista), and calls the brand new Vista API InitializeProcThreadAttributeList() with room for one attribute.&lt;/li>
&lt;li>OpenProcess() is called to get a handle to the process that initiated the RPC call.&lt;/li>
&lt;li>UpdateProcThreadAttribute() is called with &lt;code>PROC_THREAD_ATTRIBUTE_PARENT_PROCESS&lt;/code>, and uses the handle retrieved in step 3.&lt;/li>
&lt;li>CreateProcessAsUser() is called with &lt;code>EXTENDED_STARTUPINFO_PRESENT&lt;/code> and the results of steps 1 and 4.&lt;/li>
&lt;li>DeleteProcThreadAttributeList() is called.&lt;/li>
&lt;li>Results are gathered, and handles are cleaned up.&lt;/li>
&lt;/ol>
&lt;p>Appinfo ÊúçÂä°ÊèèËø∞Ôºö&lt;/p>
&lt;blockquote>
&lt;p>‰ΩøÁî®ËæÖÂä©ÁÆ°ÁêÜÊùÉÈôê‰æø‰∫é‰∫§‰∫íÂºèÂ∫îÁî®Á®ãÂ∫èÁöÑËøêË°å„ÄÇÂ¶ÇÊûúÂÅúÊ≠¢Ê≠§ÊúçÂä°ÔºåÁî®Êà∑Â∞ÜÊó†Ê≥ï‰ΩøÁî®ËæÖÂä©ÁÆ°ÁêÜÊùÉÈôêÂêØÂä®Â∫îÁî®Á®ãÂ∫èÔºåËÄåÊâßË°åÊâÄÈúÄÁî®Êà∑‰ªªÂä°ÂèØËÉΩÈúÄË¶ÅËøô‰∫õÊùÉÈôê„ÄÇ&lt;/p>
&lt;/blockquote>
&lt;p>ÂΩìÊàë‰ª¨‰∫ÜËß£Âà∞ Windows ÂàõÂª∫ËøõÁ®ãÁöÑÁ≤óÁï•ÁªÜËäÇÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•ÂØπ Privexec ÂàõÂª∫ÂÖ∂‰ªñÊùÉÈôêÁöÑËøõÁ®ãÂÅöÂá∫Â∞ÅË£Ö‰∫Ü„ÄÇPrivexec ÊîØÊåÅÁöÑÊùÉÈôêÁ±ªÂûãÊúâÔºö&lt;/p>
&lt;ul>
&lt;li>AppContainer&lt;/li>
&lt;li>Mandatory Integrity Control&lt;/li>
&lt;li>No Elevated(UAC)&lt;/li>
&lt;li>Administrator&lt;/li>
&lt;li>System&lt;/li>
&lt;li>TrustedInstaller&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>AppContainer&lt;/strong> ÈÄöÂ∏∏ÂèØ‰ª•‰ΩøÁî® &lt;code>CreateProcess&lt;/code> ÂàõÂª∫Ôºå‰ΩøÁî® &lt;code>EXTENDED_STARTUPINFO_PRESENT&lt;/code> È¢ùÂ§ñÁöÑ &lt;code>dwCreateFlags&lt;/code> ÂàõÂª∫ÊùÉÈôê‰∏∫ &lt;code>AppContainer&lt;/code> ÁöÑËøõÁ®ãÂç≥ÂèØ„ÄÇAppContainer ÈÖçÁΩÆÈúÄÁî± &lt;code>CreateAppContainerProfile&lt;/code> ÂàõÂª∫ÔºåÁõ∏Â∫îÁöÑ &lt;code>Capability SID&lt;/code> ÂèØÁî± &lt;code>DeriveCapabilitySidsFromName&lt;/code> ÊàñËÄÖ &lt;code>CreateWellKnownSid&lt;/code> ÂàõÂª∫Ôºå&lt;del>ËÄå &lt;code>Privexec(GUI)&lt;/code> ÂèóÈôê‰∏é UI ÈôêÂà∂ÔºåÁõÆÂâç‰ªÖÊîØÊåÅ 9 ‰∏™ &lt;code>WellKnownSid&lt;/code>ÔºåËÄå&lt;/del>, &lt;code>Privexec (GUI)&lt;/code> ÊîØÊåÅ‰ªé ListView ‰∏≠ÈÄâÊã©Â∏∏ËßÅÁöÑ &lt;code>Capabilities&lt;/code> ‰πüÊîØÊåÅ‰ªéÊ∏ÖÂçïÊñá‰ª∂‰∏≠ËØªÂèñÔºå‰∏§ÁßçÈÄîÂæÑËé∑ÂæóÁöÑ &lt;code>Capabilities&lt;/code> ‰ºöË¢´ÂêàÂπ∂Ôºå &lt;code>wsudo&lt;/code> ÊîØÊåÅ &lt;code>--appx&lt;/code> ‰ªéÊñá‰ª∂‰∏≠ËÆæÁΩÆ &lt;code>Capabilities&lt;/code>Ôºå&lt;code>wsudo&lt;/code> ‰∏≠‰ΩøÁî®‰∫Ü &lt;code>DeriveCapabilitySidsFromName&lt;/code> ÂàõÂª∫ &lt;code>Capabilities SID&lt;/code>„ÄÇ&lt;/p>
&lt;p>ÂèÇÊï∞ &lt;code>EXTENDED_STARTUPINFO_PRESENT&lt;/code> Ë°®Á§∫‰ΩøÁî® &lt;code>STARTUPINFOEX&lt;/code> ÁªìÊûÑÔºå‰ΩøÁî® &lt;code>InitializeProcThreadAttributeList&lt;/code> ÂàùÂßãÂåñ &lt;code>STARTUPINFOEX::lpAttributeList&lt;/code>, ‰ΩøÁî® &lt;code>UpdateProcThreadAttribute&lt;/code> ËÆæÁΩÆ &lt;code>lpAttributeList&lt;/code> ‰∏∫ &lt;code>PROC_THREAD_ATTRIBUTE_SECURITY_CAPABILITIES&lt;/code> Âπ∂Â∞Ü &lt;code>SECURITY_CAPABILITIES &lt;/code> ÁªëÂÆöÂà∞ &lt;code>STARTUPINFOEX&lt;/code> ‰∏ä„ÄÇ&lt;/p>
&lt;p>&lt;strong>Mandatory Integrity Control&lt;/strong> ‰∏ªË¶Å‰ΩøÁî® &lt;code>SetTokenInformation&lt;/code> Â∞ÜÈ´òÂÆåÊï¥ÊÄßÁ∫ßÂà´ÁöÑ &lt;code>Token&lt;/code> ËÆæÁΩÆ‰∏∫‰ΩéÂÆåÊï¥ÊÄßÁ∫ßÂà´ÁöÑ &lt;code>Token&lt;/code> ÁÑ∂Âêé‰ΩøÁî® &lt;code>CreateProcessAsUser&lt;/code> ÂàõÂª∫ËøõÁ®ã„ÄÇ&lt;/p>
&lt;p>&lt;strong>No Elevated(UAC)&lt;/strong> ÂΩìÂΩìÂâçÁî®Êà∑‰∏∫ÁÆ°ÁêÜÂëòÊó∂ÈúÄË¶Å‰ΩøÁî®ËÆ°Âàí‰ªªÂä°ÂêØÂä® UAC Êú™ÊèêÂçáËøõÁ®ãÔºåËÄåËÆ°Âàí‰ªªÂä°‰∏ªÊú∫ËøõÁ®ã‰πüÊòØ‰ΩøÁî® &lt;code>CreateProcessAsUser&lt;/code> ÂêØÂä®ÈùûÊèêÂçáÁöÑËøõÁ®ã„ÄÇÂΩìÂΩìÂâçÁî®Êà∑‰∏ç‰∏∫ÁÆ°ÁêÜÂëòÊó∂Ôºå‰ΩøÁî® &lt;code>CreateProcess&lt;/code> ÂàõÂª∫ËøõÁ®ãÂç≥ÂèØ„ÄÇÂΩìÁÑ∂Â¶ÇÊûúÂΩìÂâçÁÆ°ÁêÜÂëòÊùÉÈôêËøõÁ®ãÊ®°Êãü‰∫Ü &lt;code>System&lt;/code> ‰ª§ÁâåÔºåÂèØ‰ª•ÂºÄÂêØËøõÁ®ã &lt;code>SE_TCB_NAME&lt;/code> ÊùÉÈôêÔºåÁÑ∂Âêé‰ΩøÁî® &lt;code>WTSQueryUserToken&lt;/code> Ëé∑ÂæóÂΩìÂâçÊ†áÂáÜÁî®Êà∑ÁöÑ‰ª§ÁâåÔºåÊã∑Ë¥ù‰∏Ä‰ªΩÊ≠§‰ª§ÁâåÔºå‰ΩøÁî® &lt;code>CreateProcessAsUser&lt;/code> Âç≥ÂèØÂêØÂä®Êú™ÊèêÊùÉÁöÑËøõÁ®ã„ÄÇ&lt;/p>
&lt;p>&lt;strong>Administrator&lt;/strong> ÂΩìÂΩìÂâçËøõÁ®ã‰∏ç‰∏∫ÁÆ°ÁêÜÂëòÔºåÂàôÈúÄË¶Å UAC ÊèêÊùÉÔºåÁªÜËäÇÂâçÊñáÁî±ÊèèËø∞„ÄÇÂèç‰πãÂàô‰ΩøÁî® &lt;code>CreateProcess&lt;/code> Âç≥ÂèØ„ÄÇ&lt;/p>
&lt;p>&lt;strong>System&lt;/strong> ÂΩìÂâçËøõÁ®ãÂøÖÈ°ªÊòØÁÆ°ÁêÜÂëòÊùÉÈôêÁ≠âÁ∫ßÂèä‰ª•‰∏äËøõÁ®ãÔºåÈúÄË¶ÅÂºÄÂêØ &lt;code>SE_DEBUG_NAME&lt;/code> ÊùÉÈôêÔºåÁÑ∂ÂêéËé∑ÂæóÁ≥ªÁªüÊùÉÈôêËøõÁ®ãÁöÑ Token, Â∞ÜËá™Ë∫´ÊùÉÈôêÊ®°Êãü &lt;code>System&lt;/code> TokenÔºåÁÑ∂ÂêéÊã∑Ë¥ùËá™Ë∫´ &lt;code>Token&lt;/code> ‰øÆÊîπ &lt;code>Token&lt;/code> ‰∏∫ &lt;code>Primary Token&lt;/code>ÔºåÂç≥ &lt;code>hPrimary&lt;/code>ÔºåÂõ†‰∏∫Âè™Êúâ‰∏ª Token ÊâçËÉΩË¢´Áî®‰∫éÂàõÂª∫Â≠êËøõÁ®ã„ÄÇ„ÄäWindows Internal 7th Edition„Äã‰ΩúËÄÖ‰πã‰∏Ä &lt;a href="https://github.com/zodiacon">Pavel Yosifovich&lt;/a> Â∞±ÂÜô‰∫Ü‰∏Ä‰∏™ sysrun ÁöÑ‰æãÂ≠êÔºö&lt;a href="https://github.com/zodiacon/sysrun">sysrun&lt;/a>„ÄÇ&lt;/p>
&lt;p>&lt;strong>TrustedInstaller&lt;/strong> Ê≠§ÊùÉÈôê‰∏•Ê†ºÊÑè‰πâ‰∏äÊù•ËØ¥ÔºåÊòØÂ±û‰∫é &lt;strong>Windows Modules Installer&lt;/strong> ÊúçÂä°ÁöÑ‰∏ìÊúâÊùÉÈôêÔºå&lt;strong>Windows Modules Installer&lt;/strong> ÁöÑÊúçÂä°ÊèèËø∞‰∏∫Ôºö&lt;/p>
&lt;blockquote>
&lt;p>ÂêØÁî® Windows Êõ¥Êñ∞ÂíåÂèØÈÄâÁªÑ‰ª∂ÁöÑÂÆâË£Ö„ÄÅ‰øÆÊîπÂíåÁßªÈô§„ÄÇÂ¶ÇÊûúÊ≠§ÊúçÂä°Ë¢´Á¶ÅÁî®ÔºåÂàôÊ≠§ËÆ°ÁÆóÊú∫ÁöÑ Windows Êõ¥Êñ∞ÁöÑÂÆâË£ÖÊàñÂç∏ËΩΩÂèØËÉΩ‰ºöÂ§±Ë¥•„ÄÇ&lt;/p>
&lt;/blockquote>
&lt;p>Âõ†Ê≠§Ë¶ÅËé∑ÂæóÊ≠§ÊùÉÈôêÔºåÈúÄË¶ÅÂÖàÊ®°ÊãüÂà∞ &lt;code>System&lt;/code> ÊùÉÈôêÔºåÁÑ∂ÂêéÂêØÂä® &lt;code>TrustedInstaller&lt;/code> ÊúçÂä°ÔºåÁÑ∂ÂêéËé∑ÂæóÊúçÂä°ËøõÁ®ãÁöÑÊùÉÈôêÂè•ÊüÑÔºå‰ª•ËØ•Âè•ÊüÑÊã∑Ë¥ùÂêØÂä®Êñ∞ÁöÑËøõÁ®ã„ÄÇ&lt;/p>
&lt;p>Privexec ÁöÑËøõÁ®ãÂêØÂä®Áõ∏ÂÖ≥‰ª£Á†ÅÂú®Ôºö&lt;a href="https://github.com/M2Team/Privexec/tree/master/lib/ProcessCore">https://github.com/M2Team/Privexec/tree/master/lib/ProcessCore&lt;/a>Ôºå‰ΩøÁî® C++17ÔºåÂà©Áî® &lt;em>Lambda&lt;/em>Ôºå&lt;em>RIIA&lt;/em> ËøôÊ†∑ÁöÑÂäüËÉΩÂèØ‰ª•ËΩªÊòìÁöÑÂÜôÂá∫Âè•ÊüÑÂÆâÂÖ®ÁöÑ‰ª£Á†Å„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">template&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">class&lt;/span> &lt;span style="color:#58a1dd">F&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#ff636f">class&lt;/span> &lt;span style="color:#58a1dd">final_act&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">public&lt;/span>&lt;span style="color:#ff636f">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">explicit&lt;/span> &lt;span style="color:#58a1dd">final_act&lt;/span>(&lt;span style="color:#58a1dd">F&lt;/span> &lt;span style="color:#58a1dd">f&lt;/span>) &lt;span style="color:#ff636f">noexcept&lt;/span> &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">f_&lt;/span>(&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">move&lt;/span>(&lt;span style="color:#58a1dd">f&lt;/span>)), &lt;span style="color:#58a1dd">invoke_&lt;/span>(&lt;span style="color:#58a1dd">true&lt;/span>) {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">final_act&lt;/span>(&lt;span style="color:#58a1dd">final_act&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">other&lt;/span>) &lt;span style="color:#ff636f">noexcept&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">:&lt;/span> &lt;span style="color:#58a1dd">f_&lt;/span>(&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">move&lt;/span>(&lt;span style="color:#58a1dd">other&lt;/span>.&lt;span style="color:#58a1dd">f_&lt;/span>)), &lt;span style="color:#58a1dd">invoke_&lt;/span>(&lt;span style="color:#58a1dd">other&lt;/span>.&lt;span style="color:#58a1dd">invoke_&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">other&lt;/span>.&lt;span style="color:#58a1dd">invoke_&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">false&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">final_act&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">final_act&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&lt;/span>) &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">delete&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">final_act&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#ff636f">operator&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">final_act&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&lt;/span>) &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">delete&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">~&lt;/span>&lt;span style="color:#58a1dd">final_act&lt;/span>() &lt;span style="color:#ff636f">noexcept&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">invoke_&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">f_&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">private&lt;/span>&lt;span style="color:#ff636f">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">F&lt;/span> &lt;span style="color:#58a1dd">f_&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">bool&lt;/span> &lt;span style="color:#58a1dd">invoke_&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">// finally() - convenience function to generate a final_act
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span>&lt;span style="color:#ff636f">template&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">class&lt;/span> &lt;span style="color:#58a1dd">F&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#ff636f">inline&lt;/span> &lt;span style="color:#58a1dd">final_act&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">F&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#58a1dd">finally&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">F&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">f&lt;/span>) &lt;span style="color:#ff636f">noexcept&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">final_act&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">F&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span>(&lt;span style="color:#58a1dd">f&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">template&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">class&lt;/span> &lt;span style="color:#58a1dd">F&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#ff636f">inline&lt;/span> &lt;span style="color:#58a1dd">final_act&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">F&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#58a1dd">finally&lt;/span>(&lt;span style="color:#58a1dd">F&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">f&lt;/span>) &lt;span style="color:#ff636f">noexcept&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">final_act&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">F&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span>(&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">forward&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">F&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span>(&lt;span style="color:#58a1dd">f&lt;/span>));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">bool&lt;/span> &lt;span style="color:#58a1dd">filetodo&lt;/span>(&lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">wstring_view&lt;/span> &lt;span style="color:#58a1dd">file&lt;/span>){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">hFile&lt;/span>&lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">CreateFileW&lt;/span>(&lt;span style="color:#58a1dd">file&lt;/span>.&lt;span style="color:#58a1dd">data&lt;/span>(),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">GENERIC_READ&lt;/span>, &lt;span style="color:#58a1dd">FILE_SHARE_READ&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">nullptr&lt;/span>, &lt;span style="color:#58a1dd">OPEN_EXISTING&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">FILE_ATTRIBUTE_NORMAL&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">nullptr&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">hFile&lt;/span>&lt;span style="color:#ff636f">==&lt;/span>&lt;span style="color:#58a1dd">INVALID_HANDLE_VALUE&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">false&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">closer&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">finally&lt;/span>([&lt;span style="color:#ff636f">&amp;amp;&lt;/span>] {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">hFile&lt;/span>&lt;span style="color:#ff636f">!=&lt;/span>&lt;span style="color:#58a1dd">INVALID_HANDLE_VALUE&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">CloseHandle&lt;/span>(&lt;span style="color:#58a1dd">hFile&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> });
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/// some codes...
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">&lt;/span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">true&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÂõûËøáÂ§¥Êù•ËØ¥Ôºå‰Ω†ÂÆåÂÖ®ÂºÄÂèë‰∏Ä‰∏™ÊúçÂä°Êù•ÂÆûÁé∞‰ª•ÂÖ∂‰ªñÁî®Êà∑ÊùÉÈôêÂêØÂä®ËøõÁ®ãÔºåÁÑ∂ÂêéÂ∞ÅË£Ö‰∏Ä‰∏™ÂëΩ‰ª§ÔºåÂëΩ‰ª§ÈúÄË¶ÅÂêØÂä®ËøõÁ®ãÊó∂‰∏éÊúçÂä°ËøõË°åÈÄö‰ø°ÔºåÂú®ÊúçÂä°‰∏≠‰ΩøÁî® &lt;code>CreateProcessAsUser&lt;/code> ÂêØÂä®Êñ∞ÁöÑËøõÁ®ã„ÄÇ‰ΩøÁî®ÊúçÂä°ÂÆûÁé∞Ê≠§ÂäüËÉΩÊó∂ÔºåÈúÄË¶ÅÈÅøÂÖç‰∏çÂèØ‰ø°ÁöÑÊèêÊùÉÂèëÁîü„ÄÇ&lt;/p>
&lt;p>&lt;a href="https://github.com/MouriNaruto">ÊØõÂà©&lt;/a> ÁöÑ &lt;a href="https://github.com/M2Team/NSudo">NSudo&lt;/a> ‰∏é Privexec Á±ª‰ººÔºå‰ΩÜÂÆûÁé∞Âü∫Êú¨‰∏äÊòØ‰ΩøÁî® &lt;code>CreateProcessAsUser&lt;/code> + &lt;code>Token&lt;/code> ÂàõÂª∫ËøõÁ®ã„ÄÇ&lt;/p>
&lt;p>È¢òÂ§ñËØùÔºöÂú® Windows Âπ≥Âè∞‰∏äÔºåÂêØÂä®ËøõÁ®ã‰æùÁÑ∂Êúâ‰∏çÂ∞èÁöÑ‰ª£‰ª∑Ôºå‰∏≠Èó¥ÁéØËäÇÂ§öÔºåËÄåÂú® Unix Âπ≥Âè∞ÔºåÂêØÂä®ËøõÁ®ãÊúâ &lt;code>fork/exec&lt;/code>ÔºåÂÆûÈôÖ‰∏äË¶ÅÂÆûÁé∞Á±ª‰ºº &lt;code>CreateProcess&lt;/code> ‰πãÁ±ªÁöÑÈÄªËæëÈúÄË¶Å‰ΩøÁî® &lt;code>fork/exec&lt;/code> ËÅîÂêà‰ΩøÁî®„ÄÇÁé∞ÂÆûÂ∏¶Êù•‰∫ÜÈÅóÊÜæÔºåWindows ‰∏äÂÆûÁé∞ &lt;code>fork&lt;/code> Âíå Unix ÂÆûÁé∞Êõ¥È´òÊïàÁöÑ &lt;code>CreateProcess&lt;/code> Êàê‰∫Ü‰∏§‰∏™Â§ßÈöæÈ¢ò„ÄÇÂΩìÁÑ∂ÔºåÂú®ÂÆûÁé∞ &lt;code>Windows Subsystem for Linux&lt;/code>&lt;sup>4&lt;/sup>ÔºåÂæÆËΩØ‰πüÂú®ÊîπËøõÂÖ∂ÂàõÂª∫ËøõÁ®ãÁöÑÊµÅÁ®ãÔºå‰ΩÜÁõÆÂâç‰∏∫Ê≠¢ &lt;code>Minimal process&lt;/code> Âπ∂Ê≤°ÊúâËÆ© &lt;code>cygwin&lt;/code> ËøôÊ†∑ÁöÑÁ≥ªÁªüÂèóÁõä„ÄÇ&lt;/p>
&lt;p>&lt;img src="https://msdnshared.blob.core.windows.net/media/2016/05/picoProcess-1024x763.png" alt="picoprocess">&lt;/p>
&lt;h2 id="privexec-gui">Privexec (GUI)&lt;/h2>
&lt;p>Privexec Áã≠‰πâ‰∏äÊòØÊåá &lt;code>Privexec (GUI)&lt;/code> Ëøô‰∏™Á®ãÂ∫èÔºåÁé∞Âú®Â∫îËØ•Êåá &lt;code>Privexec&lt;/code> Êï¥‰∏™È°πÁõÆÔºåÂåÖÊã¨ &lt;code>wsudo&lt;/code>„ÄÇÂú® Windows Âπ≥Âè∞‰∏äÔºå‰ΩøÁî® C++ ÂºÄÂèëÊ°åÈù¢Â∫îÁî®ËôΩÁÑ∂ÊúâÂæàÂ§öÈÄâÊã©ÔºåÊØîÂ¶Ç &lt;code>API, MFC, WTL, QT, DirectUI&lt;/code> Á≠âÁ≠âÔºå‰ΩÜÂÆûÈôÖ‰∏äÂü∫Êú¨Ê≤°Êúâ‰∏Ä‰∏™ &lt;strong>Áé∞‰ª£ÁöÑ UI Ê°ÜÊû∂&lt;/strong> ÂèØ‰ª•‰æõ‰Ω†ÈÄâÊã©Ôºå‰∏äËø∞ UI Ê°ÜÊû∂ÊàñÁº∫Â∞ëËá™ÈÄÇÂ∫îÂ§ßÂ∞èÊîØÊåÅÔºåÊàñÁº∫Â∞ëÈ´ò &lt;code>DPI&lt;/code> ÊîØÊåÅÔºå‰πüÂèØËÉΩÁº∫Â∞ë Emoji ÊîØÊåÅÁ≠âÁ≠âÔºåÂè¶‰∏ÄÊñπÈù¢‰∏çÊñ≠Ëß£ÂÜ≥‰æùËµñÈóÆÈ¢ò‰πüËÆ©‰∫∫ÂéåÂÄ¶„ÄÇPrivexec ‰ΩøÁî® Win32 API Âç≥ÂèØÔºå‰øùÊåÅÊûÅÁÆÄÈ£éÊ†º‰πü‰∏çÈîô„ÄÇPrivexec ÊúÄÂàùÂè™ÊòØÊàëËá™Â∑±ÂºÄÂèëÂ•ΩÁé©ÁöÑ‰∏Ä‰∏™Â∑•ÂÖ∑ÔºàÁõÆÂâçÂ§ßÊ¶Ç‰æùÁÑ∂ÊòØÔºâÔºåUI ÂºÄÂèëÈÄâÊã©ÊùÉÂú®ÊàëËá™Â∑±ÔºåËÄå Windows 10 &lt;sup>5&lt;/sup>ÊîπËøõ‰∫ÜÂü∫‰∫éÂØπËØùÊ°ÜÂ∫îÁî®È´ò DPI ÁöÑÊîØÊåÅÔºå‰∏∫‰∫ÜÊîØÊåÅÊàëÁöÑ &lt;code>Surface Pro 4&lt;/code> Ôºå‰∫éÊòØÈÄâÊã©‰∫Ü‰ΩøÁî®ÂØπËØùÊ°ÜÂÅö‰∏ªÁïåÈù¢„ÄÇ ÁïåÈù¢Â¶Ç‰∏ãÔºö&lt;/p>
&lt;p>&lt;img src="https://github.com/M2Team/Privexec/raw/master/docs/images/appcontainer.png" alt="Privexec">&lt;/p>
&lt;p>Âú®Ê≠§Ê¨°ÊîπÈÄ†‰πãÂâç Privexec ‰ΩøÁî®‰º†ÁªüÁöÑ &lt;code>Win32 API+ ÂÖ®Â±ÄÂèòÈáè&lt;/code> ËøôÊ†∑ÁöÑ‰ª£Á†ÅÈÄªËæëÔºåÂú®‰∏çÊñ≠Ê∑ªÂä†ÂäüËÉΩÂêéÂèëÁé∞‰ª£Á†ÅË∂äÊù•Ë∂äÊùÇ‰π±Êó†Á´†Ôºå‰∫éÊòØÂ∞±Áî® C++ Á±ªÈáçÊûÑ‰∫ÜÔºåÂ§ßÈáè‰ΩøÁî® C++17 ‰ª£Á†Å„ÄÇ‰ª£Á†ÅÂú∞ÂùÄ‰∏∫Ôºö&lt;a href="https://github.com/M2Team/Privexec/tree/master/Privexec">https://github.com/M2Team/Privexec/tree/master/Privexec&lt;/a>„ÄÇ&lt;/p>
&lt;p>Êàë‰ª¨ÈÉΩÁü•ÈÅìÔºåÁõÆÂâç C ÁöÑ API ÊîØÊåÅÂõûË∞ÉÂáΩÊï∞ÁöÑ‰∏ÄÂÆöÂè™ËÉΩ‰ΩøÁî®ÂÖ®Â±ÄÂáΩÊï∞ÊàñËÄÖÈùôÊÄÅÊàêÂëòÂáΩÊï∞„ÄÇÂú®‰ΩøÁî® C++ Èù¢ÂêëÂØπË±°ÂºÄÂèë UI Á®ãÂ∫èÊó∂ÔºåÈúÄË¶ÅÂú®Á™óÂè£Ê∂àÊÅØÂõûË∞ÉÂáΩÊï∞‰∏≠ÂÖàËé∑ÂèñÂØπË±°ÁöÑ &lt;code>this&lt;/code> ÊåáÈíàÔºåÁÑ∂ÂêéÂÜçË∞ÉÁî®ÂØπË±°ÁöÑ‰∫ã‰ª∂Â§ÑÁêÜÁ®ãÂ∫è„ÄÇÊñπÊ°àÁî±Â§öÁßçÔºåÊØîÂ¶Ç ATL ‰ΩøÁî®ÁöÑ &lt;code>Thunk&lt;/code>&lt;sup>6&lt;/sup>ÔºåËøòÊúâÈÄöËøá &lt;code>GWLP_USERDATA&lt;/code> Âéª‰º†ÈÄí &lt;code>this&lt;/code> ÊåáÈíàÔºåËøôÁßçÁî®Êà∑ÂõûË∞ÉÊê∫Â∏¶ &lt;code>this&lt;/code> ÊåáÈíàÁöÑÂÅöÊ≥ïÁÆÄÁõ¥Â§™Â∏∏ËßÅ‰∫Ü„ÄÇ&lt;/p>
&lt;p>ATL Thunk Áõ∏ÂÖ≥ÁöÑÊñáÁ´†ÊúâÔºö&lt;a href="https://www.hackcraft.net/cpp/windowsThunk/">https://www.hackcraft.net/cpp/windowsThunk/&lt;/a>&lt;/p>
&lt;p>ÂÆûÈôÖ‰∏äÔºåPrivexec Âπ∂‰∏çÈúÄË¶ÅÂ≠¶‰π† ATL/WTL ÈÇ£Ê†∑Ôºå‰ΩøÁî® &lt;code>Thunk&lt;/code> ÊäÄÊúØÔºåÂÆåÂÖ®Ê≤°ÊúâÂà∞ÈÇ£‰∏™Á®ãÂ∫¶ÔºåÊâÄ‰ª•Êàë‰ΩøÁî®‰∫Ü &lt;code>GWLP_USERDATA&lt;/code> ÁöÑÂÅöÊ≥ïÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">INT_PTR&lt;/span> &lt;span style="color:#58a1dd">WINAPI&lt;/span> &lt;span style="color:#58a1dd">App&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">WindowProc&lt;/span>(&lt;span style="color:#58a1dd">HWND&lt;/span> &lt;span style="color:#58a1dd">hWnd&lt;/span>, &lt;span style="color:#58a1dd">UINT&lt;/span> &lt;span style="color:#58a1dd">message&lt;/span>, &lt;span style="color:#58a1dd">WPARAM&lt;/span> &lt;span style="color:#58a1dd">wParam&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">LPARAM&lt;/span> &lt;span style="color:#58a1dd">lParam&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">App&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">app&lt;/span>{&lt;span style="color:#ff636f">nullptr&lt;/span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">message&lt;/span> &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#58a1dd">WM_INITDIALOG&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">app&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">reinterpret_cast&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">App&lt;/span> &lt;span style="color:#ff636f">*&amp;gt;&lt;/span>(&lt;span style="color:#58a1dd">lParam&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">SetWindowLongPtr&lt;/span>(&lt;span style="color:#58a1dd">hWnd&lt;/span>, &lt;span style="color:#58a1dd">GWLP_USERDATA&lt;/span>, &lt;span style="color:#ff636f">reinterpret_cast&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">LONG_PTR&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span>(&lt;span style="color:#58a1dd">app&lt;/span>));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">app&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">Initialize&lt;/span>(&lt;span style="color:#58a1dd">hWnd&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#ff636f">else&lt;/span> &lt;span style="color:#58a1dd">if&lt;/span> ((&lt;span style="color:#58a1dd">app&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">GetThisFromHandle&lt;/span>(&lt;span style="color:#58a1dd">hWnd&lt;/span>)) &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#ff636f">nullptr&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">app&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">MessageHandler&lt;/span>(&lt;span style="color:#58a1dd">message&lt;/span>, &lt;span style="color:#58a1dd">wParam&lt;/span>, &lt;span style="color:#58a1dd">lParam&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">FALSE&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Âú® Windows ‰∏≠ÔºåÂæàÂ§ö API ÂÆûÈôÖ‰∏äÊòØÁî± &lt;code>COM&lt;/code> ÁªÑ‰ª∂Á±ªÊèê‰æõÔºåÁõ¥Êé•Âú® C++ ‰∏≠‰ΩøÁî® COM ÂØπË±°ÈúÄË¶ÅÂ∞èÂøÉÁøºÁøºÈÅøÂÖçËµÑÊ∫êÊ≥ÑÊºèÔºåÂà∞‰∫Ü 8102 Âπ¥Ôºå‰Ω†Â∫îËØ•‰ΩøÁî®Êô∫ËÉΩÊåáÈíàÊàñËÄÖ &lt;code>ComPtr&lt;/code> ÂéªÂåÖË£π COM ÂØπË±°ÔºåÊàñËÄÖ‰ΩøÁî®Á±ª‰ºº‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºå‰ΩøÁî® RAII Êù•ÈÅøÂÖçËµÑÊ∫êÊ≥ÑÊºè„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">template&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">class&lt;/span> &lt;span style="color:#58a1dd">T&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#ff636f">class&lt;/span> &lt;span style="color:#58a1dd">comptr&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">public&lt;/span>&lt;span style="color:#ff636f">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">comptr&lt;/span>() { &lt;span style="color:#58a1dd">ptr&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">NULL&lt;/span>; }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">comptr&lt;/span>(&lt;span style="color:#58a1dd">T&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">p&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">ptr&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">p&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">ptr&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#58a1dd">NULL&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">ptr&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">AddRef&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">comptr&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">comptr&lt;/span>&lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#58a1dd">T&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">sptr&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">ptr&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">sptr&lt;/span>.&lt;span style="color:#58a1dd">ptr&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">ptr&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#58a1dd">NULL&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">ptr&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">AddRef&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">T&lt;/span> &lt;span style="color:#ff636f">**&lt;/span>&lt;span style="color:#ff636f">operator&lt;/span>&lt;span style="color:#ff636f">&amp;amp;&lt;/span>() { &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">ptr&lt;/span>; }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">T&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#ff636f">operator&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>() { &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">ptr&lt;/span>; }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">T&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#ff636f">operator&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>(&lt;span style="color:#58a1dd">T&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">p&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#ff636f">this&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#58a1dd">p&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">ptr&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">p&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">ptr&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#58a1dd">NULL&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">ptr&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">AddRef&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#ff636f">this&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">operator&lt;/span> &lt;span style="color:#58a1dd">T&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>() &lt;span style="color:#ff636f">const&lt;/span> { &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">ptr&lt;/span>; }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">template&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span>&lt;span style="color:#ff636f">class&lt;/span> &lt;span style="color:#58a1dd">I&lt;/span>&lt;span style="color:#ff636f">&amp;gt;&lt;/span> &lt;span style="color:#58a1dd">HRESULT&lt;/span> &lt;span style="color:#58a1dd">QueryInterface&lt;/span>(&lt;span style="color:#58a1dd">REFCLSID&lt;/span> &lt;span style="color:#58a1dd">rclsid&lt;/span>, &lt;span style="color:#58a1dd">I&lt;/span> &lt;span style="color:#ff636f">**&lt;/span>&lt;span style="color:#58a1dd">pp&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">pp&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#58a1dd">NULL&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">ptr&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">QueryInterface&lt;/span>(&lt;span style="color:#58a1dd">rclsid&lt;/span>, (&lt;span style="color:#ff636f">void&lt;/span> &lt;span style="color:#ff636f">**&lt;/span>)&lt;span style="color:#58a1dd">pp&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#ff636f">else&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">E_FAIL&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">HRESULT&lt;/span> &lt;span style="color:#58a1dd">CoCreateInstance&lt;/span>(&lt;span style="color:#58a1dd">REFCLSID&lt;/span> &lt;span style="color:#58a1dd">clsid&lt;/span>, &lt;span style="color:#58a1dd">IUnknown&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">pUnknown&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">REFIID&lt;/span> &lt;span style="color:#58a1dd">interfaceId&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">DWORD&lt;/span> &lt;span style="color:#58a1dd">dwClsContext&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">CLSCTX_ALL&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">HRESULT&lt;/span> &lt;span style="color:#58a1dd">hr&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">CoCreateInstance&lt;/span>(&lt;span style="color:#58a1dd">clsid&lt;/span>, &lt;span style="color:#58a1dd">pUnknown&lt;/span>, &lt;span style="color:#58a1dd">dwClsContext&lt;/span>, &lt;span style="color:#58a1dd">interfaceId&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#ff636f">void&lt;/span> &lt;span style="color:#ff636f">**&lt;/span>)&lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">ptr&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">hr&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">~&lt;/span>&lt;span style="color:#58a1dd">comptr&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">ptr&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#58a1dd">NULL&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">ptr&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">Release&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">private&lt;/span>&lt;span style="color:#ff636f">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">T&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">ptr&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Privexec ‰ΩøÁî®‰∫Ü &lt;code>pugixml&lt;/code> Áî®‰∫éËß£Êûê &lt;code>AppManifest&lt;/code>Ôºå‰ΩøÁî® &lt;code>json.hpp&lt;/code> Ëß£Êûê Alias ÈÖçÁΩÆÊñá‰ª∂„ÄÇ&lt;/p>
&lt;p>Âú® Privexec ‰∏≠ÁöÑÈîôËØØÊèêÁ§∫ &lt;code>MessageBox&lt;/code> ÂÆûÈôÖ‰∏äÊòØ‰ΩøÁî® &lt;code>TaskDialog&lt;/code> ÁºñÂÜôÔºåËÄåÂÖ≥‰∫éÂØπËØùÊ°ÜÂêåÊ†∑‰πüÊòØ„ÄÇÊü•ÊâæÊñá‰ª∂/Êñá‰ª∂Â§πÂØπËØùÊ°Ü‰ΩøÁî®ÁöÑÊòØ &lt;code>IFileDialog&lt;/code>„ÄÇ&lt;/p>
&lt;h2 id="wsudo">WSUDO&lt;/h2>
&lt;p>WSUDO ÊòØ Priexec ÁöÑÂëΩ‰ª§Ë°åÁâàÊú¨„ÄÇÂæàÊó©Â∞±ÊîØÊåÅÈ¢úËâ≤È´ò‰∫ÆÔºåÂú®ÂâçÊñá‰∏≠ÊõæÂÜôËøá‰∏ÄÁØáÊñáÁ´† &lt;a href="https://forcemz.net/windows/2017/06/06/ColorConsole/">„ÄäPrivexec ÁöÑÂÜÖÂπïÔºà‰∏ÄÔºâÊ†áÂáÜËæìÂá∫ÂéüÁêÜ‰∏éÂΩ©Ëâ≤ËæìÂá∫ÂÆûÁé∞„Äã&lt;/a> ÂØπÊ≠§ÊúâËØ¶ÁªÜÁöÑ‰ªãÁªç„ÄÇÊ≠§Ê¨°ÈáçÊûÑ WSUDOÔºåÊîπËøõ‰∫ÜÂëΩ‰ª§Ë°åËß£ÊûêÊ®°ÂºèÔºåÂèØ‰ª•ÈÄöËøáÂëΩ‰ª§Ë°åËÆæÁΩÆÂêØÂä®ËøõÁ®ãÁöÑ&lt;strong>ÂêØÂä®ÁõÆÂΩï&lt;/strong>Ôºå&lt;strong>ÁéØÂ¢ÉÂèòÈáè&lt;/strong>Ôºå&lt;strong>AppConatiner&lt;/strong> Ê∏ÖÂçïÊñá‰ª∂ÔºåÂÖ∑‰ΩìÁöÑÂëΩ‰ª§Ë°åÂÜÖÂÆπÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;p>&lt;img src="https://github.com/M2Team/Privexec/raw/master/docs/images/wsudo.png" alt="WSUDO">&lt;/p>
&lt;p>Âú®ÂàõÂª∫ËøõÁ®ãÊó∂ÔºåÂ¶ÇÊûú &lt;code>CreateProcess&lt;/code> ÁöÑÂèÇÊï∞ &lt;a href="https://docs.microsoft.com/en-us/windows/desktop/api/processthreadsapi/nf-processthreadsapi-createprocessw">&lt;code>lpEnvironment&lt;/code>&lt;/a> ‰∏∫ &lt;code>NULL&lt;/code> Êó∂ÔºåÂ≠êËøõÁ®ãÂ∞ÜÁªßÊâøÁà∂ËøõÁ®ãÁöÑÁéØÂ¢ÉÂèòÈáèÔºåËøô‰∏é &lt;code>Unix&lt;/code> (&lt;code>exec&lt;/code> ÂáΩÊï∞ÂÆ∂Êóè) Á≥ªÁªüÊòØ‰∏ÄËá¥ÁöÑ„ÄÇÂ¶ÇÊûúÊàë‰ª¨Ë¶ÅËÆæÁΩÆÂ≠êËøõÁ®ãÁöÑÁéØÂ¢ÉÂèòÈáèÔºåÊàë‰ª¨ÂèØ‰ª•‰øÆÊîπ wsudo ÁöÑÁéØÂ¢ÉÂèòÈáè‰º†ÈÄíÁªôÂ≠êËøõÁ®ãÂç≥ÂèØ„ÄÇËøôÊ¨°ÔºåÊàëÁªô WSUDO Ê∑ªÂä†‰∫Ü &lt;code>-e(--env)&lt;/code> flag. ÂèØ‰ª•‰ΩøÁî® &lt;code>-eK=V&lt;/code>Ôºå&lt;code>-e K=V&lt;/code> &lt;code>--env=K=V&lt;/code>Ôºå&lt;code>--env K=V&lt;/code> ËøôÊ†∑ÁöÑÊñπÂºèËÆæÁΩÆÁéØÂ¢ÉÂèòÈáè„ÄÇ&lt;/p>
&lt;p>WSUDO ÁõÆÂâçËøòÊîØÊåÅ &lt;code>--new-console&lt;/code> &lt;code>--wait&lt;/code> ËøôÊ†∑ÁöÑ flagÔºåÂú® Windows ‰∏≠ÔºåÂàõÂª∫ CUI ËøõÁ®ãÊó∂ÔºåÈªòËÆ§ÂèÇÊï∞‰∏ãÔºåÂ¶ÇÊûúÁ®ãÂ∫èÁöÑÂ≠êÁ≥ªÁªüÊòØ &lt;code>Windows CUI&lt;/code>ÔºåÂ¶ÇÊûúÁà∂ËøõÁ®ã‰πüÊòØ &lt;code>CUI&lt;/code> Á®ãÂ∫èÂ∞±‰ºöÁªßÊâøÁà∂ËøõÁ®ãÁöÑÊéßÂà∂Âè∞Á™óÂè£ÔºåÂê¶Âàô‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÊéßÂà∂Âè∞Á™óÂè£„ÄÇËøôÂ∞±ÊÑèÂë≥Ëøô WSUDO Âú®ÂêØÂä® CUI Â≠êËøõÁ®ãÊó∂ÔºåCUI Â≠êËøõÁ®ãÂÆûÈôÖ‰∏äÁöÑÁ™óÂè£‰πü‰ºöÁªßÊâø WSUDO ÁöÑÂΩìÂâçÁ™óÂè£ÔºåËÄå‰πãÂâçÁöÑ WSUDO Âú®Â≠êËøõÁ®ãÂêØÂä®ÂêéÂ∞±ÁªìÊùü‰∫ÜÔºåCMD/PowerShell ÁöÑÁ≠âÂæÖ‰πüÂ∞±ÁªìÊùü‰∫ÜÔºåËøôÊó∂ÂÄôÂ¶ÇÊûú CUI Â≠êËøõÁ®ãËøòÊ¥ªË∑ÉÔºåÂèØËÉΩÂØπÊéßÂà∂Âè∞Á™óÂè£ËØªÂÜô‰ªéËÄå‰ºöÂØºËá¥ÊéßÂà∂Âè∞Á™óÂè£ËæìÂÖ•ËæìÂá∫Á¥ä‰π±„ÄÇËøô‰∏™ÈóÆÈ¢òÁöÑËß£ÂÜ≥ÊñπÊ≥ïÊúâÔºö&lt;/p>
&lt;ul>
&lt;li>WSUDO Á≠âÂæÖÂ≠êËøõÁ®ãÁªìÊùü&lt;/li>
&lt;li>ÊàñËÄÖÂêØÂä®Êñ∞ÊéßÂà∂Âè∞&lt;/li>
&lt;/ul>
&lt;p>ËÄåËøôÊ¨°ÈáçÊûÑ‰∏ìÈó®Â¢ûÂä†‰∫Ü &lt;code>--new-console&lt;/code> Âíå &lt;code>--wait&lt;/code>ÔºåÂπ∂‰øÆÊîπ WSUDO ÁöÑÂêØÂä®ËøõÁ®ãÁöÑÈªòËÆ§Ë°å‰∏∫ÔºåÂÖ∑‰ΩìÊÉÖÂΩ¢Â¶Ç‰∏ãÔºö&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Â≠êÁ≥ªÁªü&lt;/th>
&lt;th>&amp;ndash;new-console&lt;/th>
&lt;th>&amp;ndash;wait&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Windows CUI&lt;/td>
&lt;td>ÈªòËÆ§ÂÖ≥Èó≠&lt;/td>
&lt;td>ÈªòËÆ§ÂºÄÂêØ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows GUI&lt;/td>
&lt;td>N/A&lt;/td>
&lt;td>ÈªòËÆ§ÂÖ≥Èó≠&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Â¶ÇÊûúÂ≠êËøõÁ®ãÂ≠êÁ≥ªÁªüÊòØ &lt;code>Windows GUI&lt;/code> ‰∏îÂëΩ‰ª§Ë°åÂèÇÊï∞ÂåÖÂê´ &lt;code>--wait&lt;/code>ÔºåWSUDO ‰æùÁÑ∂‰ºöÁ≠âÂæÖÂ≠êËøõÁ®ãÁªìÊùü„ÄÇ&lt;/p>
&lt;p>Âú®ÂêØÂä®Â≠êËøõÁ®ãÁöÑ‰πãÂâçÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáËß£Êûê &lt;code>PE&lt;/code> Êñá‰ª∂Ê†ºÂºèÂéªÊÑüÁü•ÂèØÊâßË°åÁ®ãÂ∫èÂ≠êÁ≥ªÁªüÊòØÂê¶ÊòØ &lt;code>Windows CUI&lt;/code>ÔºåÂÖ∑‰Ωì‰ª£Á†ÅÂú®Ôºö&lt;a href="https://github.com/M2Team/Privexec/blob/f9a2cbbfa57a3bda65e6c70b74e80b8cc67af333/include/pe.hpp#L130">PESubsystemIsConsole&lt;/a>&lt;/p>
&lt;p>Â¶ÇÊûúË¶ÅÊîØÊåÅ &lt;code>AppExecLink(IO_REPARSE_TAG_APPEXECLINK)&lt;/code> ËøôÊ†∑ÁâπÊÆäÁöÑÊñá‰ª∂ÔºàËøôÁßçÊñá‰ª∂Á±ª‰ºº‰∫é Windows Symbolic FileÔºåÊòØ UWP App ÁöÑÁ®ãÂ∫èÁöÑÁâπÊÆäÈìæÊé•Êñá‰ª∂„ÄÇÔºâÈúÄË¶ÅËß£ÊûêÈáçËß£ÊûêÁÇπÔºåÂ§ßËá¥‰ª£Á†ÅÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">inline&lt;/span> &lt;span style="color:#ff636f">bool&lt;/span> &lt;span style="color:#58a1dd">readlink&lt;/span>(&lt;span style="color:#ff636f">const&lt;/span> &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">wstring&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">symfile&lt;/span>, &lt;span style="color:#58a1dd">std&lt;/span>&lt;span style="color:#ff636f">::&lt;/span>&lt;span style="color:#58a1dd">wstring&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">realfile&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">hFile&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">CreateFileW&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">symfile&lt;/span>.&lt;span style="color:#58a1dd">c_str&lt;/span>(), &lt;span style="color:#a6be9d">0&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">FILE_SHARE_READ&lt;/span> &lt;span style="color:#ff636f">|&lt;/span> &lt;span style="color:#58a1dd">FILE_SHARE_WRITE&lt;/span> &lt;span style="color:#ff636f">|&lt;/span> &lt;span style="color:#58a1dd">FILE_SHARE_DELETE&lt;/span>, &lt;span style="color:#ff636f">nullptr&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">OPEN_EXISTING&lt;/span>, &lt;span style="color:#58a1dd">FILE_FLAG_BACKUP_SEMANTICS&lt;/span> &lt;span style="color:#ff636f">|&lt;/span> &lt;span style="color:#58a1dd">FILE_FLAG_OPEN_REPARSE_POINT&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">nullptr&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">hFile&lt;/span> &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#58a1dd">INVALID_HANDLE_VALUE&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">false&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">ReparseBuffer&lt;/span> &lt;span style="color:#58a1dd">rbuf&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">DWORD&lt;/span> &lt;span style="color:#58a1dd">dwBytes&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">DeviceIoControl&lt;/span>(&lt;span style="color:#58a1dd">hFile&lt;/span>, &lt;span style="color:#58a1dd">FSCTL_GET_REPARSE_POINT&lt;/span>, &lt;span style="color:#ff636f">nullptr&lt;/span>, &lt;span style="color:#a6be9d">0&lt;/span>, &lt;span style="color:#58a1dd">rbuf&lt;/span>.&lt;span style="color:#58a1dd">data&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">MAXIMUM_REPARSE_DATA_BUFFER_SIZE&lt;/span>, &lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">dwBytes&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">nullptr&lt;/span>) &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#58a1dd">TRUE&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">CloseHandle&lt;/span>(&lt;span style="color:#58a1dd">hFile&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">false&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">CloseHandle&lt;/span>(&lt;span style="color:#58a1dd">hFile&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">switch&lt;/span> (&lt;span style="color:#58a1dd">rbuf&lt;/span>.&lt;span style="color:#58a1dd">data&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">ReparseTag&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">case&lt;/span> &lt;span style="color:#58a1dd">IO_REPARSE_TAG_SYMLINK&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">wstr&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">rbuf&lt;/span>.&lt;span style="color:#58a1dd">data&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">SymbolicLinkReparseBuffer&lt;/span>.&lt;span style="color:#58a1dd">PathBuffer&lt;/span> &lt;span style="color:#ff636f">+&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#58a1dd">rbuf&lt;/span>.&lt;span style="color:#58a1dd">data&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">SymbolicLinkReparseBuffer&lt;/span>.&lt;span style="color:#58a1dd">SubstituteNameOffset&lt;/span> &lt;span style="color:#ff636f">/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">sizeof&lt;/span>(&lt;span style="color:#58a1dd">WCHAR&lt;/span>));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">wlen&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">rbuf&lt;/span>.&lt;span style="color:#58a1dd">data&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">SymbolicLinkReparseBuffer&lt;/span>.&lt;span style="color:#58a1dd">SubstituteNameLength&lt;/span> &lt;span style="color:#ff636f">/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">sizeof&lt;/span>(&lt;span style="color:#58a1dd">WCHAR&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">wlen&lt;/span> &lt;span style="color:#ff636f">&amp;gt;=&lt;/span> &lt;span style="color:#a6be9d">4&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">0&lt;/span>] &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;\\&amp;#39;&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">1&lt;/span>] &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;?&amp;#39;&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">2&lt;/span>] &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;?&amp;#39;&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">3&lt;/span>] &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;\\&amp;#39;&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/* Starts with \??\ */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">wlen&lt;/span> &lt;span style="color:#ff636f">&amp;gt;=&lt;/span> &lt;span style="color:#a6be9d">6&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ((&lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">4&lt;/span>] &lt;span style="color:#ff636f">&amp;gt;=&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;A&amp;#39;&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">4&lt;/span>] &lt;span style="color:#ff636f">&amp;lt;=&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;Z&amp;#39;&lt;/span>) &lt;span style="color:#ff636f">||&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">4&lt;/span>] &lt;span style="color:#ff636f">&amp;gt;=&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;a&amp;#39;&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">4&lt;/span>] &lt;span style="color:#ff636f">&amp;lt;=&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;z&amp;#39;&lt;/span>)) &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">5&lt;/span>] &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;:&amp;#39;&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span> (&lt;span style="color:#58a1dd">wlen&lt;/span> &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">6&lt;/span> &lt;span style="color:#ff636f">||&lt;/span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">6&lt;/span>] &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;\\&amp;#39;&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/* \??\&amp;lt;drive&amp;gt;:\ */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">wstr&lt;/span> &lt;span style="color:#ff636f">+=&lt;/span> &lt;span style="color:#a6be9d">4&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">wlen&lt;/span> &lt;span style="color:#ff636f">-=&lt;/span> &lt;span style="color:#a6be9d">4&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#ff636f">else&lt;/span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">wlen&lt;/span> &lt;span style="color:#ff636f">&amp;gt;=&lt;/span> &lt;span style="color:#a6be9d">8&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span> (&lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">4&lt;/span>] &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;U&amp;#39;&lt;/span> &lt;span style="color:#ff636f">||&lt;/span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">4&lt;/span>] &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;u&amp;#39;&lt;/span>) &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">5&lt;/span>] &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;N&amp;#39;&lt;/span> &lt;span style="color:#ff636f">||&lt;/span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">5&lt;/span>] &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;n&amp;#39;&lt;/span>) &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">6&lt;/span>] &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;C&amp;#39;&lt;/span> &lt;span style="color:#ff636f">||&lt;/span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">6&lt;/span>] &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;c&amp;#39;&lt;/span>) &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">7&lt;/span>] &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;\\&amp;#39;&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/* \??\UNC\&amp;lt;server&amp;gt;\&amp;lt;share&amp;gt;\ - make sure the final path looks like */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/* \\&amp;lt;server&amp;gt;\&amp;lt;share&amp;gt;\ */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">wstr&lt;/span> &lt;span style="color:#ff636f">+=&lt;/span> &lt;span style="color:#a6be9d">6&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">0&lt;/span>] &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;\\&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">wlen&lt;/span> &lt;span style="color:#ff636f">-=&lt;/span> &lt;span style="color:#a6be9d">6&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">realfile&lt;/span>.&lt;span style="color:#58a1dd">assign&lt;/span>(&lt;span style="color:#58a1dd">wstr&lt;/span>, &lt;span style="color:#58a1dd">wlen&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#ff636f">break&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">case&lt;/span> &lt;span style="color:#58a1dd">IO_REPARSE_TAG_MOUNT_POINT&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">wstr&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">rbuf&lt;/span>.&lt;span style="color:#58a1dd">data&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">MountPointReparseBuffer&lt;/span>.&lt;span style="color:#58a1dd">PathBuffer&lt;/span> &lt;span style="color:#ff636f">+&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#58a1dd">rbuf&lt;/span>.&lt;span style="color:#58a1dd">data&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">MountPointReparseBuffer&lt;/span>.&lt;span style="color:#58a1dd">SubstituteNameOffset&lt;/span> &lt;span style="color:#ff636f">/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">sizeof&lt;/span>(&lt;span style="color:#58a1dd">WCHAR&lt;/span>));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">wlen&lt;/span> &lt;span style="color:#ff636f">=&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">rbuf&lt;/span>.&lt;span style="color:#58a1dd">data&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">MountPointReparseBuffer&lt;/span>.&lt;span style="color:#58a1dd">SubstituteNameLength&lt;/span> &lt;span style="color:#ff636f">/&lt;/span> &lt;span style="color:#ff636f">sizeof&lt;/span>(&lt;span style="color:#58a1dd">WCHAR&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/* Only treat junctions that look like \??\&amp;lt;drive&amp;gt;:\ as symlink. */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/* Junctions can also be used as mount points, like \??\Volume{&amp;lt;guid&amp;gt;}, */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/* but that&amp;#39;s confusing for programs since they wouldn&amp;#39;t be able to */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/* actually understand such a path when returned by uv_readlink(). */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/* UNC paths are never valid for junctions so we don&amp;#39;t care about them. */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#ff636f">!&lt;/span>(&lt;span style="color:#58a1dd">wlen&lt;/span> &lt;span style="color:#ff636f">&amp;gt;=&lt;/span> &lt;span style="color:#a6be9d">6&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">0&lt;/span>] &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;\\&amp;#39;&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">1&lt;/span>] &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;?&amp;#39;&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">2&lt;/span>] &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;?&amp;#39;&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">3&lt;/span>] &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;\\&amp;#39;&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ((&lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">4&lt;/span>] &lt;span style="color:#ff636f">&amp;gt;=&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;A&amp;#39;&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">4&lt;/span>] &lt;span style="color:#ff636f">&amp;lt;=&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;Z&amp;#39;&lt;/span>) &lt;span style="color:#ff636f">||&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">4&lt;/span>] &lt;span style="color:#ff636f">&amp;gt;=&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;a&amp;#39;&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">4&lt;/span>] &lt;span style="color:#ff636f">&amp;lt;=&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;z&amp;#39;&lt;/span>)) &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">5&lt;/span>] &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;:&amp;#39;&lt;/span> &lt;span style="color:#ff636f">&amp;amp;&amp;amp;&lt;/span> (&lt;span style="color:#58a1dd">wlen&lt;/span> &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">6&lt;/span> &lt;span style="color:#ff636f">||&lt;/span> &lt;span style="color:#58a1dd">wstr&lt;/span>[&lt;span style="color:#a6be9d">6&lt;/span>] &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">L&lt;/span>&lt;span style="color:#a6be9d">&amp;#39;\\&amp;#39;&lt;/span>))) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">SetLastError&lt;/span>(&lt;span style="color:#58a1dd">ERROR_SYMLINK_NOT_SUPPORTED&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">false&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#828b96;font-style:italic">/* Remove leading \??\ */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">wstr&lt;/span> &lt;span style="color:#ff636f">+=&lt;/span> &lt;span style="color:#a6be9d">4&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">wlen&lt;/span> &lt;span style="color:#ff636f">-=&lt;/span> &lt;span style="color:#a6be9d">4&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">realfile&lt;/span>.&lt;span style="color:#58a1dd">assign&lt;/span>(&lt;span style="color:#58a1dd">wstr&lt;/span>, &lt;span style="color:#58a1dd">wlen&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#ff636f">break&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">case&lt;/span> &lt;span style="color:#58a1dd">IO_REPARSE_TAG_APPEXECLINK&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">rbuf&lt;/span>.&lt;span style="color:#58a1dd">data&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">AppExecLinkReparseBuffer&lt;/span>.&lt;span style="color:#58a1dd">StringCount&lt;/span> &lt;span style="color:#ff636f">!=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">LPWSTR&lt;/span> &lt;span style="color:#58a1dd">szString&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> (&lt;span style="color:#58a1dd">LPWSTR&lt;/span>)&lt;span style="color:#58a1dd">rbuf&lt;/span>.&lt;span style="color:#58a1dd">data&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">AppExecLinkReparseBuffer&lt;/span>.&lt;span style="color:#58a1dd">StringList&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">for&lt;/span> (&lt;span style="color:#58a1dd">ULONG&lt;/span> &lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>; &lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">&amp;lt;&lt;/span> &lt;span style="color:#58a1dd">rbuf&lt;/span>.&lt;span style="color:#58a1dd">data&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">AppExecLinkReparseBuffer&lt;/span>.&lt;span style="color:#58a1dd">StringCount&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">i&lt;/span>&lt;span style="color:#ff636f">++&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">i&lt;/span> &lt;span style="color:#ff636f">==&lt;/span> &lt;span style="color:#a6be9d">2&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">realfile&lt;/span> &lt;span style="color:#ff636f">=&lt;/span> &lt;span style="color:#58a1dd">szString&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">szString&lt;/span> &lt;span style="color:#ff636f">+=&lt;/span> &lt;span style="color:#58a1dd">wcslen&lt;/span>(&lt;span style="color:#58a1dd">szString&lt;/span>) &lt;span style="color:#ff636f">+&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#ff636f">break&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">default&lt;/span>&lt;span style="color:#ff636f">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">false&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">true&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>WSUDO ËøòÊîØÊåÅÂÜÖÁΩÆÂëΩ‰ª§ &lt;code>alias&lt;/code>ÔºåÂèØ‰ª•Â¢ûÂä†ÂíåÂà†Èô§Âà´Âêç„ÄÇÂ¢ûÂä†Âà´ÂêçÊó∂Â¶ÇÊûúÂà´ÂêçÂ≠òÂú®Âàô‰ºöË¢´Ë¶ÜÁõñÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-batch" data-lang="batch">&lt;span style="display:flex;">&lt;span>wsudo alias add ehs &lt;span style="color:#a6be9d">&amp;#34;notepad &lt;/span>&lt;span style="color:#58a1dd">%SYSTEMROOT%&lt;/span>&lt;span style="color:#a6be9d">/System32/drivers/etc/hosts&amp;#34;&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Edit Hosts&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>wsudo alias delete ehs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="details">Details&lt;/h2>
&lt;ol>
&lt;li>&lt;a href="https://github.com/M2Team/Privexec/issues/2">Feature Request: AppContainer &amp;ldquo;Capabilities&amp;rdquo; Selection&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.hex-rays.com/products/ida/support/download_freeware.shtml">IDA Support: Freeware Version&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.codeproject.com/Articles/19165/Vista-UAC-The-Definitive-Guide">Vista UAC: The Definitive Guide&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://blogs.msdn.microsoft.com/wsl/2016/05/23/pico-process-overview/">Pico Process Overview&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://blogs.windows.com/buildingapps/2017/04/04/high-dpi-scaling-improvements-desktop-applications-windows-10-creators-update/#GhtloWCUWO8rEeRG.97">High-DPI Scaling Improvements for Desktop Applications in the Windows 10 Creators Update (1703)&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://en.wikipedia.org/wiki/Thunk">A thunk is a computer programming subroutine that is created, often automatically, to assist a call to another subroutine .&lt;/a>&lt;/li>
&lt;/ol>
- https://forcemz.net/posts/2018/2018-11-30-privexec-new/ - Copyright (c) 2009-2024 J23</description></item><item><title>Âü∫‰∫é Git Namespace ÁöÑÂ≠òÂÇ®Â∫ìÂø´ÁÖßÊñπÊ°à</title><link>https://forcemz.net/posts/2018/2018-11-18-git-namespace-snapshot/</link><pubDate>Sun, 18 Nov 2018 10:00:00 +0800</pubDate><guid>https://forcemz.net/posts/2018/2018-11-18-git-namespace-snapshot/</guid><description>Charlie's Rethinking https://forcemz.net/posts/2018/2018-11-18-git-namespace-snapshot/ -&lt;h1 id="ÂâçË®Ä">ÂâçË®Ä&lt;/h1>
&lt;p>&lt;a href="https://en.wikipedia.org/wiki/Git">Git&lt;/a> ÊòØ‰∏ÄÁßçÂàÜÂ∏ÉÂºèÁöÑÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÔºåÂàÜÂ∏ÉÂºèÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÁöÑ‰∏ÄÂ§ßÁâπÊÄßÂ∞±ÊòØËøúÁ®ãÂ≠òÂÇ®Â∫ìÂíåÊú¨Âú∞Â≠òÂÇ®Â∫ìÈÉΩÂåÖÂê´Â≠òÂÇ®Â∫ìÁöÑÂÆåÊï¥Êï∞ÊçÆ„ÄÇ
ËÄåÈõÜ‰∏≠ÂºèÁöÑÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÂè™ÊúâÂú®‰∏≠ÂøÉÊúçÂä°Âô®‰∏äÊâç‰ºöÂåÖÂê´Â≠òÂÇ®Â∫ìÂÆåÊï¥ÁöÑÊï∞ÊçÆÔºåÊú¨Âú∞ÊâÄË∞ìÁöÑÂ≠òÂÇ®Â∫ìÂè™ÊòØËøúÁ®ãÊúçÂä°Âô®ÁâπÂÆöÁâàÊú¨ÁöÑ &lt;code>checkout&lt;/code>„ÄÇÂΩì‰∏≠ÂøÉÊúçÂä°Âô®ÊïÖÈöúÂêéÔºåÂ¶ÇÊûúÊ≤°ÊúâÂ§á‰ªΩÊúçÂä°Âô®ÔºåÈÇ£‰πàÈõÜ‰∏≠ÂºèÁöÑÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÂ≠òÂÇ®Â∫ìÁöÑÊï∞ÊçÆÁªùÂ§ßÈÉ®ÂàÜÂ∞±‰ºöË¢´‰∏¢Â§±„ÄÇËøôÂæàÂÆπÊòìÂæóÂá∫ÂàÜÂ∏ÉÂºèÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÁöÑ‰ª£Á†ÅË¶ÅÂøÖÈõÜ‰∏≠ÂºèÁöÑÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÊõ¥Âä†ÂÆâÂÖ®„ÄÇ&lt;/p>
&lt;p>‰ΩÜÊòØÔºåÂÆâÂÖ®Âπ∂‰∏çÊòØÁªùÂØπÁöÑÔºåÂ∞§ÂÖ∂ÂΩì &lt;code>Git&lt;/code> Ë¢´Ë∂äÊù•Ë∂äÂ§öÁöÑ‰∫∫‰ΩøÁî®ÂêéÔºåÁî®Êà∑‰πü‰ºöÈúÄË¶Å Git Âê∏Êî∂ÈõÜ‰∏≠ÂºèÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÁöÑÁâπÊÄßÊù•ÊîπËøõÁî®Êà∑‰ΩìÈ™åÔºåËøôÁßçÊÉÖÂΩ¢‰∏ãÔºåGit ÂàÜÂ∏ÉÂºèÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÁöÑÂÆâÂÖ®ÊÄß‰πüÂ∞±Èù¢‰∏¥ÊåëÊàò„ÄÇÁªàÁ´ØÁî®Êà∑Ëé∑ÂèñÁöÑ‰∏çÊòØÂÆåÊï¥ÁöÑÊï∞ÊçÆÔºå‰∏∫‰∫Ü‰øùËØÅÂ≠òÂÇ®Â∫ìÁöÑÂÆâÂÖ®‰ªçÁÑ∂ÈúÄË¶ÅÂ§á‰ªΩÊàñËÄÖÈïúÂÉèËøúÁ®ãÊúçÂä°Âô®‰∏äÁöÑÂ≠òÂÇ®Â∫ì„ÄÇÔºàÁî®Êà∑ÂèØ‰ª•‰ΩøÁî®ÊµÖË°®ÂÖãÈöÜÔºåÂçïÂàÜÊîØÂÖãÈöÜÊàñËÄÖ‰ΩøÁî® git vfs(GVFS) ‰πãÁ±ªÁöÑÊäÄÊúØÂä†Âø´ git ËÆøÈóÆ„ÄÇÔºâ&lt;/p>
&lt;p>Git ÁªôÂºÄÂèëËÄÖÈùûÂ∏∏Â§ßÁöÑËá™Áî±Ôºågit ÂèØ‰ª•‰øÆÊîπ commit ÈáçÊñ∞Êèê‰∫§Ôºå‰πüÂèØ‰ª•Âº∫Âà∂Êé®ÈÄÅ&lt;sup>1&lt;/sup>ÂºïÁî®Âà∞ËøúÁ®ãÊúçÂä°Âô®ÔºåË¶ÜÁõñÁâπÂÆöÁöÑÂºïÁî®Ôºå‰∏çÂêàÁêÜÁöÑ‰ΩøÁî®Âº∫Âà∂Êé®ÈÄÅÊòØÈùûÂ∏∏Âç±Èô©ÁöÑÔºåËøôÂæàÂÆπÊòìÈÄ†Êàê‰ª£Á†Å‰∏¢Â§±ÔºåÂØπ‰∫é‰ºÅ‰∏öÂ≠òÂÇ®Â∫ìÊù•ËØ¥ÔºåÂêàÁêÜÁöÑÂø´ÁÖßËÉΩÂ§ü‰ª£Á†Å‰∏¢Â§±ÂêéÂáèÂ∞è‰ª£Á†ÅËµÑ‰∫ßÁöÑÊçüÂ§±„ÄÇ(‰ΩÜËøôÂπ∂‰∏çÊòØËØ¥ÁªùÂØπÁ¶ÅÊ≠¢Âº∫Âà∂Êé®ÈÄÅ&lt;sup>2&lt;/sup>)&lt;/p>
&lt;p>Âú® Gitee Êèê‰æõ‰∫Ü‰ºÅ‰∏öÁâàÂêéÔºåÊàë‰ª¨‰πüÁªèÂ∏∏Êé•Êî∂Âà∞Áî®Êà∑ÂØπ‰∫é‰ª£Á†ÅËµÑ‰∫ßÂÆâÂÖ®ÁöÑÂèçÈ¶àÔºå‰∏∫‰∫ÜÂà©Áî®ÊúâÈôêÁöÑËµÑÊ∫êÊèê‰æõÊõ¥Âä†ÂÆâÂÖ®ÁöÑÊúçÂä°ÔºåÂ≠òÂÇ®Â∫ìÂ§á‰ªΩ‰∏éÂø´ÁÖßÊñπÊ°àÁöÑËÆæËÆ°‰πüÂ∞±ÈùûÂ∏∏ÈáçË¶Å‰∫Ü„ÄÇ&lt;/p>
&lt;h2 id="ÊúØËØ≠ÂèäÁªÑ‰ª∂">ÊúØËØ≠ÂèäÁªÑ‰ª∂&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Name&lt;/th>
&lt;th>Feature&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Git Native Hook&lt;/td>
&lt;td>Âü∫‰∫é C++ ÁºñÂÜôÁöÑÂéüÁîüÈí©Â≠êÔºåÂ§ßÊñá‰ª∂Ê£ÄÊü•ÔºåÂàÜÊîØÊùÉÈôêÔºåÊ∂àÊÅØÂèäÂêåÊ≠•ÈòüÂàóÔºå&lt;a href="https://forcemz.net/git/2017/11/22/GitNativeHookDepthOptimization/">Git ÂéüÁîüÈí©Â≠êÁöÑÊ∑±Â∫¶‰ºòÂåñ&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Blaze&lt;/td>
&lt;td>Âü∫‰∫é Go ÁºñÂÜôÁöÑÂ§á‰ªΩÔºåGCÔºåÂ≠òÂÇ®Â∫ìÂà†Èô§ÈòüÂàóÊúçÂä°&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Git Diamond&lt;/td>
&lt;td>Âü∫‰∫é Asio ÁºñÂÜôÁöÑÂÜÖÈÉ® git ÂçèËÆÆ‰º†ËæìÊúçÂä°Âô®&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Git Snapshot&lt;/td>
&lt;td>Âü∫‰∫é C++ ÁºñÂÜôÁöÑÂø´ÁÖßÂíåÊÅ¢Â§çÂ∑•ÂÖ∑&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="gitee-ÁõÆÂâçÂ§á‰ªΩÊñπÊ°à">Gitee ÁõÆÂâçÂ§á‰ªΩÊñπÊ°à&lt;/h2>
&lt;p>&lt;strong>Gitee&lt;/strong> ÁöÑ‰ºÅ‰∏öÂ≠òÂÇ®Â∫ìÊúâ‰∏§‰∏™ÂÆâÂÖ®Á≠ñÁï•‰øùËØÅÂÖ∂ÂÆâÂÖ®ÔºåÂàÜÂà´ÊòØ &lt;code>DGIT&lt;/code> Ëß¶ÂèëÂºèÂêåÊ≠•Âíå &lt;code>rsync&lt;/code> ÂÆöÊúüÂø´ÁÖßÊñπÊ°à„ÄÇ&lt;/p>
&lt;p>&lt;code>DGIT&lt;/code> Ëß¶ÂèëÂºèÂêåÊ≠•ÁöÑÁªÑ‰ª∂ÊúâÔºö&lt;code>Git Native Hook&lt;/code> Ôºå&lt;code>Redis&lt;/code>Ôºå&lt;code>Blaze&lt;/code>Ôºå&lt;code>Git Diamond&lt;/code>„ÄÇGNK(Git Native Hook) ‰Ωú‰∏∫Á¨¶Âè∑ÈìæÊé•Â≠òÂú®‰∏éÊúçÂä°Âô®‰∏äÂ≠òÂÇ®Â∫ìÁõÆÂΩï‰∏ãÁöÑ &lt;code>hooks&lt;/code> ‰πã‰∏≠ÔºåÂΩìÁî®Êà∑Êé®ÈÄÅ‰ª£Á†ÅÂêéÔºåGNK ‰ºöË¢´Ëß¶ÂèëÔºåÂú®ÊâßË°åÂÆåÊéàÊùÉÂíåÂ§ßÊñá‰ª∂Ê£ÄÊµãÂêéÔºåÂ∞ÜÂêåÊ≠•‰∫ã‰ª∂ÂÜôÂÖ•Âà∞ &lt;code>Redis&lt;/code> ÈòüÂàóË¢´ &lt;code>Blaze&lt;/code> ËØªÂèñÔºå&lt;code>Blaze&lt;/code> Ëé∑ÂèñÂà∞ÂΩìÂâçÊúçÂä°Âô®ÁöÑ &lt;code>Slave&lt;/code> Êú∫Âô®ÔºåÂ∞ÜÂΩìÂâçÂ≠òÂÇ®Â∫ì‰ΩøÁî® &lt;code>git push --mirror&lt;/code> ÁöÑÊñπÂºèÂêåÊ≠•Âà∞ &lt;code>Slave&lt;/code> ‰∏äÔºå‰º†ËæìÂçèËÆÆ‰∏∫ &lt;code>git://&lt;/code>Ôºå&lt;code>Slave&lt;/code> Êú∫Âô®‰∏äÁöÑÊé•Êî∂Á´Ø‰∏∫ &lt;code>Git Diamond&lt;/code>Ôºå&lt;code>Git Diamond&lt;/code> ÊòØ‰∏ìÈó®ÁöÑ Git ÂÜÖÈÉ®‰º†ËæìÊúçÂä°Á´Ø„ÄÇ&lt;/p>
&lt;p>&lt;code>rsync&lt;/code> Âø´ÁÖßÊñπÊ°àÂ≠óÈù¢ÊÑèÊÄùÈùûÂ∏∏ÂÆπÊòìÁêÜËß£ÔºåÂç≥ÂÆöÊúüËøêË°å &lt;code>rsync&lt;/code> Â∞Ü‰ºÅ‰∏öÂ≠òÂÇ®Â∫ìÂø´ÁÖßÂà∞‰ºÅ‰∏öÂ§á‰ªΩÊúçÂä°Âô®‰∏äÁöÑÁâπÂÆöÁõÆÂΩï„ÄÇËÄåÊú¨ÊñáÁöÑ‰ºòÂåñ‰∏ªË¶Å‰πüÂ∞±ÊòØÊòØÂèñ‰ª£ &lt;code>rsync&lt;/code> ÁöÑÂø´ÁÖßÊñπÊ°à„ÄÇ&lt;/p>
&lt;p>‰∏æ‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÔºö ‰ΩøÁî® &lt;code>rsync&lt;/code> ÊñπÂºèÂ§á‰ªΩ‰ª•‰∏Ä‰∏™Âπ≥ÂùáÂ§ßÂ∞è‰∏∫ &lt;code>1GB&lt;/code> ÁöÑÂ≠òÂÇ®Â∫ìÊù•ËÆ°ÁÆóÔºå90Â§©‰∏Ä‰∏™Âë®ÊúüÔºåÊØè 7 Â§©Â§á‰ªΩ‰∏ÄÊ¨°ÔºåÈúÄË¶ÅËÄóË¥πÁöÑÂ≠òÂÇ®Á©∫Èó¥‰∏∫ &lt;code>12.9 GB&lt;/code>„ÄÇÊåâÁÖßÂ∞ä‰∫´Áâà 100GB Á©∫Èó¥Ôºå‰ΩøÁî®Áéá &lt;code>20%&lt;/code> ËÆ°ÁÆóÔºö&lt;/p>
&lt;pre tabindex="0">&lt;code>12.9 GB*20=258 GB
&lt;/code>&lt;/pre>&lt;p>‰∏ÄÁôæ‰∏™Â∞ä‰∫´Áâà‰ºÅ‰∏öÂ∞±ÈúÄË¶Å &lt;code>25.2TB&lt;/code> Â≠òÂÇ®Á©∫Èó¥„ÄÇ&lt;/p>
&lt;p>Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Âü∫‰∫é &lt;code>rsync&lt;/code> ÁöÑÂø´ÁÖßÊñπÊ°àÊòØÈùûÂ∏∏Âç†Áî®Â≠òÂÇ®Á©∫Èó¥ÁöÑ„ÄÇÂÆûÈôÖ‰∏äÔºåÊ≠§ÊñπÊ°à‰∏ç‰ªÖÂç†Áî®Â≠òÂÇ®Á©∫Èó¥Âú®ÂêåÊ≠•ÁöÑÊó∂ÂÄôËøòÂæàËÄóÊó∂ÔºåÊåâÁÖßÁõÆÂâçÁöÑÊñπÊ°àÔºåÊØè‰∏ÄÊ¨°Âø´ÁÖßÈÉΩÈúÄË¶ÅÈáçÊñ∞ÂÆåÊï¥ÁöÑËé∑ÂèñÂ≠òÂÇ®Â∫ìÁöÑÊâÄÊúâÊï∞ÊçÆÔºåËøòÊòØ‰ª•ÂâçÈù¢ 1GB Â≠òÂÇ®Â∫ì‰∏∫‰æãÔºå12.9‰∏™Âë®ÊúüÂÜÖÔºåÂÜÖÁΩëÊµÅÈáèÊ∂àËÄó‰∏∫ &lt;em>~13 GB&lt;/em>„ÄÇ&lt;/p>
&lt;p>Âü∫‰∫é &lt;code>rsync&lt;/code> ÁöÑÂø´ÁÖßÊñπÊ°à‰πüÊàê‰∫Ü &lt;code>Gitee&lt;/code> ‰ºÅ‰∏öÂ§á‰ªΩÁöÑÁóõÁÇπ„ÄÇÂú®ÂâçÊÆµÊó∂Èó¥ÔºåÊàëÁ™ÅÁÑ∂ÊÉ≥Âà∞ÂèØ‰ª•‰ΩøÁî®Âü∫‰∫é &lt;code>Git Namespace&lt;/code> Âø´ÁÖß‰ΩøÁî®‰ºÅ‰∏öÂø´ÁÖßÔºåËøôÊ†∑‰∏ÄÊù•ÂèØ‰ª•Â§ßÂπÖÂ∫¶ÁöÑËäÇÁúÅÂ≠òÂÇ®Á©∫Èó¥Ôºå‰∫éÊòØÂºÄÂßãÂºÄÂèëÂÆûÁé∞Ôºå‰πüÂ∞±Êúâ‰∫ÜÊú¨Êñá„ÄÇ&lt;/p>
&lt;h2 id="git-ÂºïÁî®Âø´ÁÖßÊñπÊ°à">Git ÂºïÁî®Âø´ÁÖßÊñπÊ°à&lt;/h2>
&lt;p>Git Â≠òÂÇ®Â∫ìÁöÑËµÑ‰∫ß‰∏ªË¶ÅÊòØÂØπË±°ÂíåÂºïÁî®ÔºåÂØπË±°ÂÆûÈôÖ‰∏äÊòØÊåâÁÖßÂìàÂ∏åÂ≠òÂÇ®Âà∞Â≠òÂÇ®Â∫ì‰∏≠ÁöÑÔºåÂú®‰πãÂâçÁöÑÂ§á‰ªΩÊñπÊ°à‰∏≠ÔºåÂú®Âêå‰∏Ä‰∏™Â≠òÂÇ®Â∫ìÁöÑ‰∏çÂêåÂ§á‰ªΩ‰∏≠ÔºåÂ≠òÂú®ÊúâÂ§ßÈáèÈáçÂ§çÁöÑÂØπË±°ÔºåËøô‰∫õÂØπË±°Âç†Áî®‰∫ÜÂ≠òÂÇ®Á©∫Èó¥„ÄÇÊàë‰ª¨Âè™Ë¶ÅÂú®‰∏çÂêåÁöÑÂø´ÁÖß‰∏≠Â§çÁî®Ëøô‰∫õÂØπË±°Âç≥ÂèØ„ÄÇgit Â≠òÂÇ®Â∫ì‰∏≠Â§çÁî®ÂØπË±°ÂèØ‰ª•‰ΩøÁî® &lt;code>GIT_NAMESPACE&lt;/code> ÈöîÁ¶ªÊ®°ÊãüÊàê‰∏çÂêåÁöÑÂ≠òÂÇ®Â∫ìÔºå‰πüÂèØ‰ª•‰ΩøÁî®ÂØπË±°ÂÄüÁî®ÔºåÂÄüÁî®ÂØπË±°ÂèØËÉΩ‰Ωø &lt;code>Bitmap&lt;/code> ÁöÑ‰ºòÂåñÂ§±Ë¥•ÔºåÂπ∂‰∏îÂ§öÊ¨°Âø´ÁÖßÂèØËÉΩ‰ºöÂΩ¢ÊàêÂÄüÁî®ÁõÆÂΩïÁöÑÈìæÂºè‰æùËµñÂ∏¶Êù•ÈóÆÈ¢òÔºåÂõ†Ê≠§Âú®ÊäÄÊúØÈÄâÂûã‰∏ä‰πüÂ∞±ÈÄâÊã©‰∫ÜÂü∫‰∫é GIT_NAMESPACE Êù•ÂÆûÁé∞Âø´ÁÖß„ÄÇ&lt;/p>
&lt;p>‰ΩøÁî®ÂºïÁî®Âø´ÁÖßÊñπÊ°àËÉΩÂ§üËäÇÁúÅÂ§ßÈáèÁöÑÂ≠òÂÇ®Ôºå‰∏ãÈù¢Êúâ‰∏§‰∏™Âø´ÁÖßÈó¥ÈöîÁöÑÂØπÊØîÔºö&lt;/p>
&lt;p>90 Â§©Âë®ÊúüÂÜÖÔºå7Â§©‰∏ÄÊ¨°Âø´ÁÖßÔºåÂ≠òÂÇ®Â∫ìÂèñÂπ≥ÂùáÂÄº 1GBÔºö&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ÊñπÊ°à&lt;/th>
&lt;th>Â≠òÂÇ®Ê∂àËÄó&lt;/th>
&lt;th>Â≠òÂÇ®Â∫ìÊï∞ÊçÆÊµÅÈáèÊ∂àËÄó&lt;/th>
&lt;th>ÂºïÁî®Êï∞ÁõÆÔºàÂπ≥ÂùáÂÄº 1WÔºâ&lt;/th>
&lt;th>Â≠òÂÇ®Âç†ÊØî&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>rsync&lt;/td>
&lt;td>~13 GB&lt;/td>
&lt;td>13 GB&lt;/td>
&lt;td>1 * 13 W&lt;/td>
&lt;td>100%&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>git snapshot&lt;/td>
&lt;td>1 GB&lt;/td>
&lt;td>1 GB&lt;/td>
&lt;td>13 W&lt;/td>
&lt;td>~7.8%&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>git snapshot (double)&lt;/td>
&lt;td>2 GB&lt;/td>
&lt;td>2 GB&lt;/td>
&lt;td>13 W * 2&lt;/td>
&lt;td>~15.5%&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>90 Â§©Âë®ÊúüÂÜÖÔºåÊØèÂ§©Âø´ÁÖß‰∏ÄÊ¨°ÔºåÂ≠òÂÇ®Â∫ìÂèñÂπ≥ÂùáÂÄº 1GBÔºö&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ÊñπÊ°à&lt;/th>
&lt;th>Â≠òÂÇ®Ê∂àËÄó&lt;/th>
&lt;th>Â≠òÂÇ®Â∫ìÊï∞ÊçÆÊµÅÈáèÊ∂àËÄó&lt;/th>
&lt;th>ÂºïÁî®Êï∞ÁõÆÔºàÂπ≥ÂùáÂÄº 1WÔºâ&lt;/th>
&lt;th>Â≠òÂÇ®Âç†ÊØî&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>rsync&lt;/td>
&lt;td>90 GB&lt;/td>
&lt;td>90 GB&lt;/td>
&lt;td>1 * 90 W&lt;/td>
&lt;td>100%&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>git snapshot&lt;/td>
&lt;td>1 GB&lt;/td>
&lt;td>1 GB&lt;/td>
&lt;td>90 W&lt;/td>
&lt;td>~1.1%&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>git snapshot (double)&lt;/td>
&lt;td>2 GB&lt;/td>
&lt;td>2 GB&lt;/td>
&lt;td>90 W * 2&lt;/td>
&lt;td>~2.2%&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="git-snapshot-ÂéüÁêÜ">Git Snapshot ÂéüÁêÜ&lt;/h3>
&lt;p>Âú®Âø´ÁÖßÂ≠òÂÇ®Â∫ìÊó∂ÔºåÂ¶ÇÊûúÂ≠òÂÇ®Â∫ì‰∏çÂ≠òÂú®ÔºåÊàë‰ª¨ÂÖàÈúÄË¶ÅÂ∞ÜÂ≠òÂÇ®Â∫ì‰ª•ÈïúÂÉèÁöÑÊñπÂºèÂÖãÈöÜ‰∏ãÊù•ÔºåÂëΩ‰ª§Ë°åÂ¶Ç‰∏ãÔºàgit clone ÊîØÊåÅÁõÆÂΩïÈÄíÂΩíÂàõÂª∫ÔºâÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>git clone git@gitee.com/oscstudio/git.git --mirror --bare /home/git/enbk/os/oscstudio/git.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Â¶ÇÊûúÂ≠òÂÇ®Â∫ìÂ≠òÂú®ÔºåÂàôÊòØÁî® &lt;code>fetch&lt;/code>ÔºåÂëΩ‰ª§Ë°åÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>git fetch git@gitee.com/oscstudio/git.git &lt;span style="color:#a6be9d">&amp;#39;+refs/heads/*:refs/heads/*&amp;#39;&lt;/span> &lt;span style="color:#a6be9d">&amp;#39;+refs/tags/*:refs/tags/*&amp;#39;&lt;/span> &lt;span style="color:#a6be9d">&amp;#39;+refs/fetches/*:refs/fetches/*&amp;#39;&lt;/span> &lt;span style="color:#a6be9d">&amp;#39;+refs/pull/*:refs/pull/*&amp;#39;&lt;/span> &lt;span style="color:#a6be9d">&amp;#39;+refs/pull/*:refs/pull/*&amp;#39;&lt;/span> &lt;span style="color:#a6be9d">&amp;#39;+refs/git-as-svn/*:refs/git-as-svn/*&amp;#39;&lt;/span> --prune
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÂÖ∂‰∏≠‰∏çÂêåÂâçÁºÄÁöÑÂºïÁî®ÂÆûÈôÖÁ±ªÂûã‰∏ç‰∏ÄÊ†∑Ôºö&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Prefix&lt;/th>
&lt;th>Type&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>refs/heads/&lt;/td>
&lt;td>Â∏∏ËßÑÂàÜÊîØ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>refs/tags&lt;/td>
&lt;td>Ê†áÁ≠æ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>refs/fetches/&lt;/td>
&lt;td>PR ÂäüËÉΩÁõ∏ÂÖ≥&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>refs/pull/&lt;/td>
&lt;td>PR ÂäüËÉΩÁõ∏ÂÖ≥&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>refs/git-as-svn/&lt;/td>
&lt;td>svn ÂäüËÉΩÁõ∏ÂÖ≥&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>‰∏é &lt;code>Subversion&lt;/code> Áõ∏ÊØîÔºåGit ÂàõÂª∫ÂàÜÊîØÈùûÂ∏∏ËΩªÈáèÁ∫ßÔºåËÄåÂú® Git ‰∏≠ÔºåÂàÜÊîØÂÆûÈôÖ‰∏äÂØπÂ∫îÁöÑÊòØ‰ª• &lt;code>refs/heads/&lt;/code> ÂºÄÂ§¥ÁöÑÂºïÁî®„ÄÇÈÇ£‰πàÂºïÁî®ÁöÑÂàõÂª∫ÂêåÊ†∑Â∫îËØ•ÊòØËΩªÈáèÁ∫ßÁöÑ„ÄÇÊâÄ‰ª•Êàë‰ª¨Âè™ÈúÄË¶ÅÂ∞Ü &lt;code>fetch&lt;/code> ÂëΩ‰ª§‰∏≠ÁöÑÂºïÁî®ÂàõÂª∫Âü∫‰∫éÂêçÁß∞Á©∫Èó¥ÁöÑÂø´ÁÖßÂç≥ÂèØÔºö&lt;/p>
&lt;p>&lt;strong>Âø´ÁÖßÂèòÊç¢&lt;/strong>Ôºö&lt;/p>
&lt;pre tabindex="0">&lt;code>refname ---&amp;gt; refs/namespaces/yyyy-MM-dd/refname
&lt;/code>&lt;/pre>&lt;p>ÂàõÂª∫ Git ÂºïÁî®ÂèØ‰ª•‰ΩøÁî® git ÂëΩ‰ª§Ë°å‰πüÂèØ‰ª•‰ΩøÁî® &lt;code>libgit2&lt;/code>„ÄÇÂëΩ‰ª§Ë°åÂàõÂª∫ÂºïÁî®Â¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ git update-ref refs/namespaces/2018-11-18/refs/heads/master 1a410efbd13591db07496601ebc7a059dd55cfe9
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>‰ΩøÁî® libgit2 API: &lt;a href="https://libgit2.org/libgit2/#HEAD/group/reference/git_reference_create">git_reference_create&lt;/a> ÂàõÂª∫ÂºïÁî®‰ª£Á†ÅÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c++" data-lang="c++">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">git_reference&lt;/span> &lt;span style="color:#ff636f">*&lt;/span>&lt;span style="color:#58a1dd">ref&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#ff636f">nullptr&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span>(&lt;span style="color:#58a1dd">git_reference_create&lt;/span>(&lt;span style="color:#ff636f">&amp;amp;&lt;/span>&lt;span style="color:#58a1dd">ref&lt;/span>,&lt;span style="color:#58a1dd">repo&lt;/span>,&lt;span style="color:#a6be9d">&amp;#34;refs/namespaces/2018-11-18/refs/heads/master&amp;#34;&lt;/span>,&lt;span style="color:#58a1dd">id&lt;/span>,&lt;span style="color:#a6be9d">1&lt;/span>,&lt;span style="color:#a6be9d">&amp;#34;cretae&amp;#34;&lt;/span>)&lt;span style="color:#ff636f">!=&lt;/span>&lt;span style="color:#a6be9d">0&lt;/span>){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">auto&lt;/span> &lt;span style="color:#58a1dd">err&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#58a1dd">giterr_last&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">fprintf&lt;/span>(&lt;span style="color:#58a1dd">stderr&lt;/span>,&lt;span style="color:#a6be9d">&amp;#34;create error %s&lt;/span>&lt;span style="color:#a6be9d">\n&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>,&lt;span style="color:#58a1dd">err&lt;/span>&lt;span style="color:#ff636f">-&amp;gt;&lt;/span>&lt;span style="color:#58a1dd">kmessage&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">false&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÂΩìÂºïÁî®Êï∞ÁõÆÊØîËæÉÂ∞ëÊó∂Êó†ËÆ∫ÊòØ‰ΩøÁî®ÂëΩ‰ª§Ë°åËøòÊòØ‰ΩøÁî® API ÈÉΩÊòØ‰∏çÈîôÁöÑÈÄâÊã©Ôºå‰ΩÜÂÉè Gitee ÁöÑÊ∫êÁ†ÅÂ≠òÂÇ®Â∫ì Gitlab ËøôÊ†∑ÁöÑÈ°πÁõÆÂºïÁî®Ë∂ÖËøá &lt;strong>1W&lt;/strong> ‰∏™Êó∂ÔºåÊó†ËÆ∫ÊòØ API ËøòÊòØÂëΩ‰ª§Ë°åÈÉΩÂ∞ÜÂèòÂæóÊó†ÊØîÁºìÊÖ¢„ÄÇËøôÂæàÂÆπÊòìÁêÜËß£ÔºåÂàõÂª∫‰∏ÄÊ¨°Âø´ÁÖßÈúÄË¶ÅÂàõÂª∫ÂêåÁ≠âÊï∞ÁõÆÁöÑÂºïÁî®Ôºålibgit2 ÂàõÂª∫ÂºïÁî®ÈúÄË¶ÅÂú®Á£ÅÁõò‰∏äÂàõÂª∫ÂêåÁ≠âÊï∞ÁõÆÁöÑÊùæÊï£ÂºïÁî®ÔºåÂú®ÂàõÂª∫ÂºïÁî®ÂâçÈúÄË¶ÅÂàõÂª∫ refname.lock ËøôÊ†∑ÁöÑÊñá‰ª∂ÈÅøÂÖç‰∏éÂÖ∂‰ªñ git ËøõÁ®ãÊàñËÄÖ API ÂèëÁîüËÆøÈóÆÂÜ≤Á™Å„ÄÇËøôÊ†∑‰∏ãÊù•ÂàõÂª∫Êñá‰ª∂ÁöÑÁ≥ªÁªüË∞ÉÁî®‰πüÂ∞±ÊòØÈöæ‰ª•Êé•ÂèóÁöÑ„ÄÇËÄå &lt;code>git&lt;/code> ÂëΩ‰ª§Ë°åÂú®ËøôÁÇπ‰∏ä‰πüÊòØÊó†ËÉΩ‰∏∫ÂäõÁöÑ„ÄÇÊúÄÂºÄÂßãÊàëÁõ¥Êé•‰ΩøÁî® &lt;code>libgit2&lt;/code> APIÔºåÂΩìÂàõÂª∫Âà∞Á¨¨ÂçÅÊ¨°Âø´ÁÖßÊó∂Ôºå‰∏ÄÊ¨°Âø´ÁÖßÈúÄË¶ÅËä±Ë¥πÂá†ÂàÜÈíüÔºåËøôËÇØÂÆöÊó∂‰∏çËÉΩÊé•ÂèóÁöÑ„ÄÇ&lt;/p>
&lt;p>‰∏ìÈó®ÁöÑ‰ºÅ‰∏öÂø´ÁÖßÊú∫Âô®ÂÆûÈôÖ‰∏äÂπ∂‰∏çÈúÄË¶ÅËøêË°åÂÖ∂‰ªñ‰∏öÂä°Ôºå‰πüÂ∞±‰∏çÁî®ÊãÖÂøÉÂàõÂª∫ Git ÂºïÁî®ÁöÑÂÆâÂÖ®ÈóÆÈ¢òÔºåËøôÊó∂ÂÄôÂÅö‰∏™ÂèñËàçÂ∞±ÂèØ‰ª•ÂÆûÁé∞‰ºòÂåñÔºåÊØîÂ¶ÇÁõ¥Êé•ÂàõÂª∫ÂºïÁî®ÔºåÂºïÁî®Â≠òÂÇ®Âú®Á£ÅÁõò‰∏äÂàÜ‰∏∫ &lt;code>loose references&lt;/code> Âíå &lt;code>packed references&lt;/code>„ÄÇÂ¶ÇÊûúËøòÊòØÂàõÂª∫ÊùæÊï£ÂºïÁî®ÂäøÂøÖÈúÄË¶ÅÂàõÂª∫Êï∞ÈáèÂ∑®Â§öÁöÑÊñá‰ª∂ÔºåËøôÊ†∑‰∏ÄÊù•‰ºòÂåñÈùûÂ∏∏‰ºòÂÖàÔºåÂõ†Ê≠§Êàë‰ª¨Â∫îËØ•Áõ¥Êé•ÁºñÂÜô &lt;code>packed-refs&lt;/code>Ôºå&lt;code>packed-refs&lt;/code> Ê†ºÂºèÂç≥ &lt;code>$COMMITID SP $REFNAME LF&lt;/code>ÔºåÈùûÂ∏∏ÁÆÄÂçï„ÄÇÊàë‰ª¨ÊåâÁÖßË¶ÅÊ±ÇÊ†ºÂºèÂåñËæìÂá∫Âç≥ÂèØ„ÄÇ&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-packed-refs" data-lang="packed-refs"># pack-refs with: peeled fully-peeled sorted
$COMMITID $REFNAME\n
&lt;/code>&lt;/pre>&lt;p>ÂàõÂª∫ &lt;code>packed-refs&lt;/code> ‰πãÂâçÂÖà‰ΩøÁî® &lt;code>git pack-refs --all --prune&lt;/code> ÂëΩ‰ª§Â∞ÜÂéüÊúâÁöÑÂºïÁî®ÊâìÂåÖÂà∞‰∏ÄËµ∑ÔºåÁÑ∂ÂêéÊâ´ÊèèÊóßÁöÑ &lt;code>packed-refs&lt;/code> ÂÜôÂÖ•Âà∞Êñ∞ÁöÑ &lt;code>packed-refs&lt;/code> ÔºåÊàêÂäüÂêéÊõøÊç¢Êñá‰ª∂Âç≥ÂèØ„ÄÇ&lt;/p>
&lt;p>ËøôÈáåÈúÄË¶ÅÊ≥®ÊÑèÂá†ÁÇπÔºö&lt;/p>
&lt;ol>
&lt;li>packed-refs ÂºïÁî®ÂêçÈúÄË¶ÅÊåâÁÖßÂ≠óÊØçÊéíÂ∫èÔºåÂê¶ÂàôÂºïÁî®‰ºöÊâæ‰∏çÂà∞„ÄÇ&lt;/li>
&lt;li>‰ΩøÁî®ÂÜÖÂ≠òÊò†Â∞ÑÊäÄÊúØÂáèÂ∞ëÊã∑Ë¥ùÈùûÂ∏∏ÂøÖË¶Å„ÄÇ&lt;/li>
&lt;li>ÂèØ‰ª•‰ΩøÁî® C++17 std::string_view ËøôÊ†∑ÁöÑÂÆπÂô®Êñπ‰æøËß£Êûê„ÄÇÂ≠òÂÇ®Âú®ÂÆπÂô®‰∏≠‰πüÂèØ‰ª•‰ΩøÁî® &lt;code>string_view&lt;/code>„ÄÇ&lt;/li>
&lt;li>HEAD ‰πüÈúÄË¶ÅÂø´ÁÖßÔºåÊàë‰ª¨ÁöÑÂÅöÊ≥ïÊó∂Â∞ÜÂÖ∂ÊîæÂú® &lt;code>.git/_enbk/$NS&lt;/code> Ë∑ØÂæÑ‰∏ã„ÄÇ&lt;/li>
&lt;li>‰∏∫‰∫Ü‰øùËØÅÂºïÁî®Ë¢´Âà†Èô§Êó∂ÊÑüÁü•‰∏çÂà∞ÔºåÂèØ‰ª•ÂÖà‰ªéËøúÁ®ãÊúçÂä°Âô®ËøêË°å &lt;code>ls-remote&lt;/code> Ëé∑ÂæóÂºïÁî®ÂàóË°®ÔºåÂÜôÂÖ•Âø´ÁÖßÊó∂Âà†Èô§‰∏çÂ≠òÂú®ÁöÑÂç≥ÂèØ„ÄÇ‰∏∫‰∫ÜÊîØÊåÅÊ£ÄÊµãÔºåÂèØ‰ª•‰ΩøÁî® &lt;code>absl::flat_hash_set&lt;/code> ‰πãÁ±ªÁöÑÊó†Â∫èÊîØÊåÅÂºÇÊûÑÊü•ÊâæÂÆπÂô®„ÄÇ&lt;/li>
&lt;/ol>
&lt;p>ÁªèÊµãËØïÔºåÂø´ÁÖßÁöÑÊó∂Èó¥ÂáèÂ∞ëÂπÖÂ∫¶ÈùûÂ∏∏Â§ßÔºå‰ΩÜÂºïÁî®Êï∞ÈáèËææÂà∞ &lt;code>24W&lt;/code> Êó∂ÔºåÂø´ÁÖßÊó∂Èó¥‰∏∫ 300 Â§öÊØ´ÁßíÔºàÊú∫Ê¢∞Á°¨Áõò)„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-txt" data-lang="txt">&lt;span style="display:flex;">&lt;span>./bin/git-snapshot bk git@localhost:oschina/gitlab.git -n 2018-11-30 -V
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>username: (none)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>use privatekey: /home/example/.ssh/id_rsa
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>url: git@localhost:oschina/gitlab.git
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>remote git@localhost:oschina/gitlab.git has 10721 refs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ÂÖãÈöÜÂà∞Á∫Ø‰ªìÂ∫ì &amp;#39;/home/git/repositories/snapshot/os/oschina/gitlab.git&amp;#39;...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>remote: Êûö‰∏æÂØπË±°: 497921, ÂÆåÊàê.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>remote: ÂØπË±°ËÆ°Êï∞‰∏≠: 100% (497921/497921), ÂÆåÊàê.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>remote: ÂéãÁº©ÂØπË±°‰∏≠: 100% (99609/99609), ÂÆåÊàê.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>remote: ÊÄªÂÖ± 497921 ÔºàÂ∑ÆÂºÇ 393964ÔºâÔºåÂ§çÁî® 497921 ÔºàÂ∑ÆÂºÇ 393964Ôºâ
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Êé•Êî∂ÂØπË±°‰∏≠: 100% (497921/497921), 211.43 MiB | 51.58 MiB/s, ÂÆåÊàê.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Â§ÑÁêÜ delta ‰∏≠: 100% (393964/393964), ÂÆåÊàê.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>snapshot write 21442 refs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>apply /home/git/repositories/snapshot/os/oschina/gitlab.git HEAD to refs/heads/master
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ls-remote time: 88 ms
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>prepare time: 12684 ms
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>snapshot time: 17 ms
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>total time: 12789 ms
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="Â≠òÂÇ®Â∫ì‰ªéÂø´ÁÖßÊÅ¢Â§ç">Â≠òÂÇ®Â∫ì‰ªéÂø´ÁÖßÊÅ¢Â§ç&lt;/h3>
&lt;p>ÊÅ¢Â§çÂ≠òÂÇ®Â∫ìÁöÑÊó∂ÂÄô‰ΩøÁî®ÂêçÁß∞Á©∫Èó¥ÈöîÁ¶ªÔºåÁÑ∂Âêé clone Âà∞ÁâπÂÆöÁöÑÁõÆÂΩïÂç≥ÂèØ„ÄÇÂëΩ‰ª§Â¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>git -c protocol.ext.allow&lt;span style="color:#ff636f">=&lt;/span>always clone &lt;span style="color:#a6be9d">&amp;#39;ext::git --namespace=yyyy-MM-dd %s /path/bk/dir.git&amp;#39;&lt;/span> /path/save/dir.git --mirror
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ÊÄªÁªì">ÊÄªÁªì&lt;/h2>
&lt;p>Âú®Á†îÁ©∂Ê≠§ÊñπÊ°àÊó∂ÔºåÈúÄË¶ÅÂØπ Git ÁöÑÁõ∏ÂÖ≥ÊäÄÊúØÁªÜËäÇÈùûÂ∏∏Ê∏ÖÊ•öÔºåÊØîÂ¶ÇÔºåÁ¨îËÄÖÂú®ÁºñÂÜô &lt;code>packed-refs&lt;/code> Êó∂ÔºåÊúÄÂºÄÂßãÊú™‰∫ÜËß£Âà∞ &lt;code>packed-refs&lt;/code> ÂºïÁî®ÊòØÊåâÂ≠óÊØçÊéíÂ∫èÁöÑÔºåÁõ¥Êé•ÂÜôÂÖ•ÂØºËá¥‰∏Ä‰∫õÂºïÁî®ÂºÇÂ∏∏ÔºåÂÜôÂÖ•Â§±Ë¥•„ÄÇ&lt;/p>
&lt;h2 id="ÂÖ∂‰ªñ">ÂÖ∂‰ªñ&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>Git ÊúçÂä°Âô®Âπ∂‰∏çÁü•ÈÅìÁî®Êà∑ÊòØÂê¶ÊòØÂº∫Âà∂Êé®ÈÄÅÔºåÈô§ÈùûÂºÄÂêØ‰∫Ü &lt;code>receive.denyNonFastForwards=true&lt;/code>Ôºå&lt;code>receive-pack&lt;/code> ÈÄöËøá commit ÂõûÊ∫ØÊâ´ÊèèÊ£ÄÊü•ÊâçËÉΩÁü•ÈÅìÁî®Êà∑ÊòØÂê¶Âº∫Âà∂Êé®ÈÄÅÔºàËøôÈÄöÂ∏∏‰ºöÂáèÁºìËøúÁ®ãÊúçÂä°Âô®ÁöÑÂìçÂ∫îÈÄüÂ∫¶ÔºåÂπ∂‰∏î‰∏é‰∏ÄÊ¨°ÊÄßÊé®ÈÄÅÁöÑ commit Êï∞ÁõÆÂØÜÂàáÁõ∏ÂÖ≥Ôºâ„ÄÇ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ÂêàÁêÜÁöÑÂº∫Êé®ÊúâÊó∂ÂÄôÊòØÂøÖË¶ÅÁöÑÔºåÊØîÂ¶Ç‰ΩøÁî®Âº∫Êé®Âà†Èô§Ê∂âÂØÜ‰ø°ÊÅØÔºå‰øÆÊîπÊèê‰∫§ÂÜÖÂÆπÔºåÂêàÂπ∂Êèê‰∫§Á≠âÁ≠âÔºå Á¨îËÄÖÂú®Áªô Git Ë¥°ÁåÆ‰ª£Á†ÅÊó∂Â∞±Â§öÊ¨°‰ΩøÁî®Âº∫Êé®„ÄÇ &lt;a href="https://github.com/gitgitgadget/git/pull/69">PR: http: add support selecting http version&lt;/a> ‰∏≠‰πüÂº∫Êé®‰∫ÜÂ•ΩÂá†Ê¨°„ÄÇ&lt;/p>
&lt;/li>
&lt;/ol>
- https://forcemz.net/posts/2018/2018-11-18-git-namespace-snapshot/ - Copyright (c) 2009-2024 J23</description></item><item><title>Clangbuilder Â∑≤ÊîØÊåÅËá™Âä®ÊûÑÂª∫ CURL</title><link>https://forcemz.net/posts/2018/2018-11-15-clangbuilder-win-curl/</link><pubDate>Thu, 15 Nov 2018 10:00:00 +0800</pubDate><guid>https://forcemz.net/posts/2018/2018-11-15-clangbuilder-win-curl/</guid><description>Charlie's Rethinking https://forcemz.net/posts/2018/2018-11-15-clangbuilder-win-curl/ -&lt;h1 id="curl">cURL&lt;/h1>
&lt;p>cURL ÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ËëóÂêçÁöÑÂºÄÊ∫ê URL Êï∞ÊçÆ‰º†ËæìÂ∑•ÂÖ∑ÔºåÊîØÊåÅ &lt;code>HTTP&lt;/code>,&lt;code>HTTPS&lt;/code>,&lt;code>FTP&lt;/code>,&lt;code>SCP&lt;/code>,&lt;code>SFTP&lt;/code>,&lt;code>Telnet&lt;/code> Á≠âÂçèËÆÆ„ÄÇÁªùÂ§ßÂ§öÊï∞Êìç‰ΩúÁ≥ªÁªüÈÉΩËá™Â∏¶‰∫ÜÔºå‰πüÂåÖÊã¨ Windows 10 17134/17763„ÄÇ‰ΩÜÁ≥ªÁªüËá™Â∏¶ÁöÑÁâàÊú¨ÈÄöÂ∏∏ÈÉΩ‰∏ç‰ºöÂèäÊó∂Êõ¥Êñ∞Âà∞ÊúÄÊñ∞ÁâàÊú¨ÔºåËÄå &lt;code>cURL&lt;/code> ÊòØ‰∏Ä‰∏™ÈùûÂ∏∏Ê¥ªË∑ÉÁöÑÈ°πÁõÆÔºåÂ§ßÁ∫¶2‰∏™ÊúàÂ∞±‰ºöÂèëÂ∏É‰∏Ä‰∏™Êñ∞ÁâàÊú¨„ÄÇÊØè‰∏ÄÊ¨°Êõ¥Êñ∞ÈÉΩ‰ºö‰øÆÂ§çÂ§ßÈáè bugÔºåÊñ∞Â¢ûÂæàÂ§öÊñ∞ÁâπÊÄßÔºåÊØîÂ¶ÇÊúÄËøëÂ¢ûÂä†‰∫Ü &lt;code>DOH&lt;/code> Êõ¥Â•ΩÁöÑ &lt;code>TLS1.3&lt;/code> ÊîØÊåÅ„ÄÇ&lt;/p>
&lt;p>Á≥ªÁªüËá™Â∏¶ÁöÑ &lt;code>curl -V&lt;/code> ËæìÂá∫Ôºö&lt;/p>
&lt;pre tabindex="0">&lt;code>curl 7.55.1 (Windows) libcurl/7.55.1 WinSSL
Release-Date: [unreleased]
Protocols: dict file ftp ftps http https imap imaps pop3 pop3s smtp smtps telnet tftp
Features: AsynchDNS IPv6 Largefile SSPI Kerberos SPNEGO NTLM SSL
&lt;/code>&lt;/pre>&lt;p>ÂÆûÈôÖ‰∏äÔºåÂú® cURL ‰∏ãËΩΩÈ°µÈù¢ &lt;a href="https://curl.haxx.se/download.html">https://curl.haxx.se/download.html&lt;/a> Windows Âπ≥Âè∞ÊúâÂ•ΩÂá†‰∏™‰∫åËøõÂà∂ÂèëË°åÂåÖÔºåÂÆòÊñπ‰πüÊèê‰æõ‰∫Ü‰∫åËøõÂà∂‰∏ãËΩΩÔºö&lt;a href="https://curl.haxx.se/windows/">https://curl.haxx.se/windows/&lt;/a> Âü∫‰∫é &lt;code>Mingw64&lt;/code> ÊûÑÂª∫„ÄÇÂú® Github ‰∏äÊúâÊûÑÂª∫È°πÁõÆÔºö&lt;a href="https://github.com/curl/curl-for-win">https://github.com/curl/curl-for-win&lt;/a>„ÄÇËÄåËøô‰∏™ÂèëË°åÁâà‰πüÊòØ curl ‰∏Ä‰∏™ÂºÄÂèëËÄÖ‰∏™‰∫∫È°πÁõÆÁ∫≥ÂÖ•Âà∞ curl ‰∏≠ÁöÑ„ÄÇ&lt;/p>
&lt;p>Êàë‰ª¨ËøòÂèØ‰ª•‰ΩøÁî® &lt;code>vcpkg&lt;/code> ÂÆâË£Ö &lt;code>curl&lt;/code>Ôºå‰ΩÜÊà™Ëá≥ÁõÆÂâçÔºå&lt;code>vcpkg&lt;/code> ÁöÑ &lt;code>OpenSSL&lt;/code> ÁâàÊú¨‰æùÁÑ∂ÊòØ &lt;strong>1.0.2p&lt;/strong> Êó†Ê≥ïÊîØÊåÅ &lt;code>TLS 1.3&lt;/code>„ÄÇ&lt;/p>
&lt;p>Á¨îËÄÖÊÉ≥Ë¶Å‰ΩøÁî® &lt;code>Visual C++&lt;/code> ÊûÑÂª∫ÈùôÊÄÅÈìæÊé•ÊîØÊåÅ &lt;code>TLS 1.3&lt;/code> ÁöÑ &lt;code>curl&lt;/code>ÔºåÊúÄÂêéÂèëÁé∞ÈÉΩÂæóËá™Â∑±‰∏ÄÊ≠•‰∏ÄÊ≠•Êù•Ôºå‰∫éÊòØÂ∞±ÂÜô‰∫ÜÊûÑÂª∫ËÑöÊú¨„ÄÇ&lt;/p>
&lt;p>ËØù‰∏çÂ§öËØ¥Ôºå‰∏ÄÂàáÂ∞ΩÂú®‰ª£Á†Å‰∏≠„ÄÇGithub Ê∫ê‰ª£Á†ÅÂú∞ÂùÄÔºö&lt;a href="https://github.com/fstudio/clangbuilder/blob/526183ade63a4a9b8bd2f4b99872536c9da9e997/sources/wincurl/wincurl.ps1">sources/wincurl/wincurl.ps1&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-powershell" data-lang="powershell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#!/usr/bin/env pwsh&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"># Require Clangbuilder install perl&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">param&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#58a1dd">String&lt;/span>]&lt;span style="color:#58a1dd">$WD&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"># Import version info&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>. &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$PSScriptRoot&lt;/span>&lt;span style="color:#a6be9d">/version.ps1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"># thanks https://github.com/curl/curl-for-win&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Download urls:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6be9d">zlib: &lt;/span>&lt;span style="color:#58a1dd">$ZLIB_URL&lt;/span>&lt;span style="color:#a6be9d">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6be9d">openssl: &lt;/span>&lt;span style="color:#58a1dd">$OPENSSL_URL&lt;/span>&lt;span style="color:#a6be9d">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6be9d">brotli: &lt;/span>&lt;span style="color:#58a1dd">$BROTLI_URL&lt;/span>&lt;span style="color:#a6be9d">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6be9d">libssh2: &lt;/span>&lt;span style="color:#58a1dd">$LIBSSH2_URL&lt;/span>&lt;span style="color:#a6be9d">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6be9d">nghttp2: &lt;/span>&lt;span style="color:#58a1dd">$NGHTTP2_URL&lt;/span>&lt;span style="color:#a6be9d">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6be9d">curl: &lt;/span>&lt;span style="color:#58a1dd">$CURL_URL&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">################################################## Found commands&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#58a1dd">Net.ServicePointManager&lt;/span>]::&lt;span style="color:#58a1dd">SecurityProtocol&lt;/span> = [&lt;span style="color:#58a1dd">Net.SecurityProtocolType&lt;/span>]::&lt;span style="color:#58a1dd">Tls12&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Import-Module&lt;/span> &lt;span style="color:#58a1dd">-Name&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$PSScriptRoot&lt;/span>&lt;span style="color:#a6be9d">/Utility&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$clexe&lt;/span> = &lt;span style="color:#58a1dd">Get-Command&lt;/span> &lt;span style="color:#58a1dd">-CommandType&lt;/span> &lt;span style="color:#58a1dd">Application&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;cl&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-ErrorAction&lt;/span> &lt;span style="color:#58a1dd">SilentlyContinue&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$null&lt;/span> &lt;span style="color:#ff636f">-eq&lt;/span> &lt;span style="color:#58a1dd">$clexe&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Please install Visual Studio 2017 or BuildTools (C++) and Initialzie DevEnv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exit&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Find cl.exe: &lt;/span>$(&lt;span style="color:#58a1dd">$clexe&lt;/span>.&lt;span style="color:#58a1dd">Version&lt;/span>)&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$tarexe&lt;/span> = &lt;span style="color:#58a1dd">Findcommand&lt;/span> &lt;span style="color:#58a1dd">-Name&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;tar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$decompress&lt;/span> = &lt;span style="color:#a6be9d">&amp;#34;-xvf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$null&lt;/span> &lt;span style="color:#ff636f">-eq&lt;/span> &lt;span style="color:#58a1dd">$tarexe&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">$tarexe&lt;/span> = &lt;span style="color:#58a1dd">Findcommand&lt;/span> &lt;span style="color:#58a1dd">-Name&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;cmake&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$null&lt;/span> &lt;span style="color:#ff636f">-eq&lt;/span> &lt;span style="color:#58a1dd">$tarexe&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Please install tar or cmake.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exit&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">$decompress&lt;/span> = &lt;span style="color:#a6be9d">&amp;#34;-E tar -xvf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Green&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Use &lt;/span>&lt;span style="color:#58a1dd">$tarexe&lt;/span>&lt;span style="color:#a6be9d"> as tar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">Function&lt;/span> &lt;span style="color:#58a1dd">DecompressTar&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">param&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#58a1dd">String&lt;/span>]&lt;span style="color:#58a1dd">$URL&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#58a1dd">String&lt;/span>]&lt;span style="color:#58a1dd">$File&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#58a1dd">String&lt;/span>]&lt;span style="color:#58a1dd">$Hash&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (!(&lt;span style="color:#58a1dd">Test-Path&lt;/span> &lt;span style="color:#58a1dd">$File&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (!(&lt;span style="color:#58a1dd">WinGet&lt;/span> &lt;span style="color:#58a1dd">-URL&lt;/span> &lt;span style="color:#58a1dd">$URL&lt;/span> &lt;span style="color:#58a1dd">-O&lt;/span> &lt;span style="color:#58a1dd">$File&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">$false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">else&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> ((&lt;span style="color:#58a1dd">Get-FileHash&lt;/span> &lt;span style="color:#58a1dd">-Algorithm&lt;/span> &lt;span style="color:#58a1dd">SHA256&lt;/span> &lt;span style="color:#58a1dd">$File&lt;/span>).&lt;span style="color:#58a1dd">Hash&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#58a1dd">$Hash&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Yellow&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$File&lt;/span>&lt;span style="color:#a6be9d"> exists and hash not match &lt;/span>&lt;span style="color:#58a1dd">$Hash&lt;/span>&lt;span style="color:#a6be9d">.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Remove-Item&lt;/span> &lt;span style="color:#58a1dd">-Force&lt;/span> &lt;span style="color:#58a1dd">$File&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (!(&lt;span style="color:#58a1dd">WinGet&lt;/span> &lt;span style="color:#58a1dd">-URL&lt;/span> &lt;span style="color:#58a1dd">$URL&lt;/span> &lt;span style="color:#58a1dd">-O&lt;/span> &lt;span style="color:#58a1dd">$File&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">$false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">else&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Yellow&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$File&lt;/span>&lt;span style="color:#a6be9d"> exists and hash is match. use it.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> ((&lt;span style="color:#58a1dd">Get-FileHash&lt;/span> &lt;span style="color:#58a1dd">-Algorithm&lt;/span> &lt;span style="color:#58a1dd">SHA256&lt;/span> &lt;span style="color:#58a1dd">$File&lt;/span>).&lt;span style="color:#58a1dd">Hash&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#58a1dd">$Hash&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Remove-Item&lt;/span> &lt;span style="color:#58a1dd">-Force&lt;/span> &lt;span style="color:#58a1dd">$File&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (!(&lt;span style="color:#58a1dd">WinGet&lt;/span> &lt;span style="color:#58a1dd">-URL&lt;/span> &lt;span style="color:#58a1dd">$URL&lt;/span> &lt;span style="color:#58a1dd">-O&lt;/span> &lt;span style="color:#58a1dd">$File&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">$false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> ((&lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$tarexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$decompress&lt;/span>&lt;span style="color:#a6be9d"> &lt;/span>&lt;span style="color:#58a1dd">$File&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>) &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Decompress &lt;/span>&lt;span style="color:#58a1dd">$File&lt;/span>&lt;span style="color:#a6be9d"> failed&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">$false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#58a1dd">$true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$curlexe&lt;/span> = &lt;span style="color:#58a1dd">Findcommand&lt;/span> &lt;span style="color:#58a1dd">-Name&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;curl&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$null&lt;/span> &lt;span style="color:#ff636f">-eq&lt;/span> &lt;span style="color:#58a1dd">$curlexe&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Please install curl or upgrade to Windows 10 17134 or Later.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Green&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Find curl install: &lt;/span>&lt;span style="color:#58a1dd">$curlexe&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$cmakeexe&lt;/span> = &lt;span style="color:#58a1dd">Findcommand&lt;/span> &lt;span style="color:#58a1dd">-Name&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;cmake&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$null&lt;/span> &lt;span style="color:#ff636f">-eq&lt;/span> &lt;span style="color:#58a1dd">$cmakeexe&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Please install cmake.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Green&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Find cmake install: &lt;/span>&lt;span style="color:#58a1dd">$cmakeexe&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$Ninjaexe&lt;/span> = &lt;span style="color:#58a1dd">Findcommand&lt;/span> &lt;span style="color:#58a1dd">-Name&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;ninja&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$null&lt;/span> &lt;span style="color:#ff636f">-eq&lt;/span> &lt;span style="color:#58a1dd">$Ninjaexe&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Please install ninja.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Green&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Find cmake install: &lt;/span>&lt;span style="color:#58a1dd">$Ninjaexe&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$Patchexe&lt;/span> = &lt;span style="color:#58a1dd">Findcommand&lt;/span> &lt;span style="color:#58a1dd">-Name&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;patch&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$null&lt;/span> &lt;span style="color:#ff636f">-eq&lt;/span> &lt;span style="color:#58a1dd">$Patchexe&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">$Gitexe&lt;/span> = &lt;span style="color:#58a1dd">Findcommand&lt;/span> &lt;span style="color:#58a1dd">-Name&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;git&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$null&lt;/span> &lt;span style="color:#ff636f">-eq&lt;/span> &lt;span style="color:#58a1dd">$Gitexe&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Please install git for windows (or PortableGit).&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">$gitinstall&lt;/span> = &lt;span style="color:#58a1dd">Split-Path&lt;/span> &lt;span style="color:#58a1dd">-Parent&lt;/span> (&lt;span style="color:#58a1dd">Split-Path&lt;/span> &lt;span style="color:#58a1dd">-Parent&lt;/span> &lt;span style="color:#58a1dd">$gitexe&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> ([&lt;span style="color:#58a1dd">String&lt;/span>]::&lt;span style="color:#58a1dd">IsNullOrEmpty&lt;/span>(&lt;span style="color:#58a1dd">$gitinstall&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Please install git for windows (or PortableGit).&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">$patchx&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$gitinstall&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;usr/bin/patch.exe&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Try to find patch from &lt;/span>&lt;span style="color:#58a1dd">$patchx&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (!(&lt;span style="color:#58a1dd">Test-Path&lt;/span> &lt;span style="color:#58a1dd">$patchx&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">$xinstall&lt;/span> = &lt;span style="color:#58a1dd">Split-Path&lt;/span> &lt;span style="color:#58a1dd">-Parent&lt;/span> &lt;span style="color:#58a1dd">$gitinstall&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> ([&lt;span style="color:#58a1dd">String&lt;/span>]::&lt;span style="color:#58a1dd">IsNullOrEmpty&lt;/span>(&lt;span style="color:#58a1dd">$xinstall&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Please install git for windows (or PortableGit).&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">$patchx&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$xinstall&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;usr/bin/patch.exe&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">if&lt;/span> (!(&lt;span style="color:#58a1dd">Test-Path&lt;/span> &lt;span style="color:#58a1dd">$patchx&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Please install git for windows (or PortableGit).&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">$Patchexe&lt;/span> = &lt;span style="color:#58a1dd">$patchx&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Green&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Found patch install: &lt;/span>&lt;span style="color:#58a1dd">$Patchexe&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$Perlexe&lt;/span> = &lt;span style="color:#58a1dd">Findcommand&lt;/span> &lt;span style="color:#58a1dd">-Name&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;perl&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$null&lt;/span> &lt;span style="color:#ff636f">-eq&lt;/span> &lt;span style="color:#58a1dd">$Perlexe&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Please add perl to your environment.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exit&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Green&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Found perl install: &lt;/span>&lt;span style="color:#58a1dd">$Perlexe&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">########################################################## Check WD&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> ([&lt;span style="color:#58a1dd">String&lt;/span>]::&lt;span style="color:#58a1dd">IsNullOrEmpty&lt;/span>(&lt;span style="color:#58a1dd">$WD&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">$cbroot&lt;/span> = &lt;span style="color:#58a1dd">Split-Path&lt;/span> &lt;span style="color:#58a1dd">-Parent&lt;/span> (&lt;span style="color:#58a1dd">Split-Path&lt;/span> &lt;span style="color:#58a1dd">-Path&lt;/span> &lt;span style="color:#58a1dd">$PSScriptRoot&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">$WD&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$cbroot&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;out/curl&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (!(&lt;span style="color:#58a1dd">MkdirAll&lt;/span> &lt;span style="color:#58a1dd">-Dir&lt;/span> &lt;span style="color:#58a1dd">$WD&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exit&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Cyan&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Build curl on windows use&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Set-Location&lt;/span> &lt;span style="color:#58a1dd">$WD&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$Prefix&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$WD&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;build&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$CURLOUT&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$WD&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;out&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;we will deploy curl to: &lt;/span>&lt;span style="color:#58a1dd">$CURLPrefix&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (!(&lt;span style="color:#58a1dd">MkdirAll&lt;/span> &lt;span style="color:#58a1dd">-Dir&lt;/span> &lt;span style="color:#58a1dd">$Prefix&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exit&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">################################################## Zlib&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (!(&lt;span style="color:#58a1dd">DecompressTar&lt;/span> &lt;span style="color:#58a1dd">-URL&lt;/span> &lt;span style="color:#58a1dd">$ZLIB_URL&lt;/span> &lt;span style="color:#ff636f">-File&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$ZLIB_FILENAME&lt;/span>&lt;span style="color:#a6be9d">.tar.gz&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-Hash&lt;/span> &lt;span style="color:#58a1dd">$ZLIB_HASH&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exit&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ZLIBDIR&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$PWD&lt;/span> &lt;span style="color:#58a1dd">$ZLIB_FILENAME&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ZLIBBD&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$ZLIBDIR&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;build&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Yellow&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Apply zlib.patch ...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ZLIB_PACTH&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$PSScriptRoot&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;patch/zlib.patch&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$Patchexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;-Nbp1 -i &lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$ZLIB_PACTH&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$ZLIBDIR&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Apply &lt;/span>&lt;span style="color:#58a1dd">$ZLIB_PACTH&lt;/span>&lt;span style="color:#a6be9d"> failed&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (!(&lt;span style="color:#58a1dd">MkdirAll&lt;/span> &lt;span style="color:#58a1dd">-Dir&lt;/span> &lt;span style="color:#58a1dd">$ZLIBBD&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exit&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$cmakeflags&lt;/span> = &lt;span style="color:#a6be9d">&amp;#34;-GNinja &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;-DCMAKE_BUILD_TYPE=Release &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">-DCMAKE_INSTALL_PREFIX=&lt;/span>&lt;span style="color:#58a1dd">$Prefix&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d"> &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;-DSKIP_INSTALL_FILES=ON &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;-DSKIP_BUILD_EXAMPLES=ON &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;-DBUILD_SHARED_LIBS=OFF &lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$ZLIBDIR&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$cmakeexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#58a1dd">$cmakeflags&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$ZLIBBD&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;zlib: create build.ninja error&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$Ninjaexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;all&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$ZLIBBD&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;zlib: build error&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$Ninjaexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;install&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$ZLIBBD&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;zlib: install error&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Rename-Item&lt;/span> &lt;span style="color:#58a1dd">-Path&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$Prefix&lt;/span>&lt;span style="color:#a6be9d">/lib/zlibstatic.lib&amp;#34;&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$Prefix&lt;/span>&lt;span style="color:#a6be9d">/lib/zlib.lib&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-Force&lt;/span> &lt;span style="color:#58a1dd">-ErrorAction&lt;/span> &lt;span style="color:#58a1dd">SilentlyContinue&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#Copy-Item -Path &amp;#34;$ZLIBDIR/LICENSE&amp;#34; &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">##################################################### OpenSSL&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Yellow&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Build OpenSSL &lt;/span>&lt;span style="color:#58a1dd">$OPENSSL_VERSION&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (!(&lt;span style="color:#58a1dd">DecompressTar&lt;/span> &lt;span style="color:#58a1dd">-URL&lt;/span> &lt;span style="color:#58a1dd">$OPENSSL_URL&lt;/span> &lt;span style="color:#ff636f">-File&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$OPENSSL_FILE&lt;/span>&lt;span style="color:#a6be9d">.tar.gz&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-Hash&lt;/span> &lt;span style="color:#58a1dd">$OPENSSL_HASH&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exit&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"># Update env&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$env:INCLUDE&lt;/span> = &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$Prefix&lt;/span>&lt;span style="color:#a6be9d">\include;&lt;/span>&lt;span style="color:#58a1dd">$env:INCLUDE&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$env:LIB&lt;/span> = &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$Prefix&lt;/span>&lt;span style="color:#a6be9d">\lib;&lt;/span>&lt;span style="color:#58a1dd">$env:LIB&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"># perl Configure no-shared no-ssl3 enable-capieng -utf-8&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$opensslflags&lt;/span> = &lt;span style="color:#a6be9d">&amp;#34;Configure no-shared no-unit-test no-tests no-ssl3 enable-capieng -utf-8 &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;VC-WIN64A &lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">--prefix=&lt;/span>&lt;span style="color:#58a1dd">$Prefix&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d"> &lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">--openssldir=&lt;/span>&lt;span style="color:#58a1dd">$Prefix&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$Nasmexe&lt;/span> = &lt;span style="color:#58a1dd">Findcommand&lt;/span> &lt;span style="color:#58a1dd">-Name&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;nasm&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$null&lt;/span> &lt;span style="color:#ff636f">-eq&lt;/span> &lt;span style="color:#58a1dd">$Nasmexe&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Yellow&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Not found nasm, build openssl no-asm&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">$opensslflags&lt;/span> += &lt;span style="color:#a6be9d">&amp;#34; no-asm&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$openssldir&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$WD&lt;/span> &lt;span style="color:#58a1dd">$OPENSSL_FILE&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$Perlexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#58a1dd">$opensslflags&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$openssldir&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;openssl: config error&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">nmake&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;-f makefile&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$openssldir&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;openssl: build error&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">nmake&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;-f makefile install_sw&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$openssldir&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;openssl: install_sw error&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"># build brotli static&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">######################################################### Brotli&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Yellow&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Build brotli &lt;/span>&lt;span style="color:#58a1dd">$BROTLI_VERSION&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (!(&lt;span style="color:#58a1dd">DecompressTar&lt;/span> &lt;span style="color:#58a1dd">-URL&lt;/span> &lt;span style="color:#58a1dd">$BROTLI_URL&lt;/span> &lt;span style="color:#ff636f">-File&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$BROTLI_FILE&lt;/span>&lt;span style="color:#a6be9d">.tar.gz&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-Hash&lt;/span> &lt;span style="color:#58a1dd">$BROTLI_HASH&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exit&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$BDIR&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$WD&lt;/span> &lt;span style="color:#58a1dd">$BROTLI_FILE&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$BBUILD&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$BDIR&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;out&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$BPATCH&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$PSScriptRoot&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;patch/brotli.patch&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (!(&lt;span style="color:#58a1dd">MkdirAll&lt;/span> &lt;span style="color:#58a1dd">-Dir&lt;/span> &lt;span style="color:#58a1dd">$BBUILD&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exit&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$Patchexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;-Nbp1 -i &lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$BPATCH&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$BDIR&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Apply &lt;/span>&lt;span style="color:#58a1dd">$BPATCH&lt;/span>&lt;span style="color:#a6be9d"> failed&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$brotliflags&lt;/span> = &lt;span style="color:#a6be9d">&amp;#34;-GNinja -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=OFF &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;-DBROTLI_DISABLE_TESTS=ON &lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">-DCMAKE_INSTALL_PREFIX=&lt;/span>&lt;span style="color:#58a1dd">$Prefix&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d"> ..&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$cmakeexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#58a1dd">$brotliflags&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$BBUILD&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;brotli: create build.ninja error&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$Ninjaexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;all&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$BBUILD&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;brotli: build error&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$Ninjaexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;install&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$BBUILD&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;brotli: install error&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">## Fix curl not exists&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Move-Item&lt;/span> &lt;span style="color:#58a1dd">-Path&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$Prefix&lt;/span>&lt;span style="color:#a6be9d">/lib/brotlicommon-static.lib&amp;#34;&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$Prefix&lt;/span>&lt;span style="color:#a6be9d">/lib/brotlicommon.lib&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-Force&lt;/span> &lt;span style="color:#58a1dd">-ErrorAction&lt;/span> &lt;span style="color:#58a1dd">SilentlyContinue&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Move-Item&lt;/span> &lt;span style="color:#58a1dd">-Path&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$Prefix&lt;/span>&lt;span style="color:#a6be9d">/lib/brotlidec-static.lib&amp;#34;&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$Prefix&lt;/span>&lt;span style="color:#a6be9d">/lib/brotlidec.lib&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-Force&lt;/span> &lt;span style="color:#58a1dd">-ErrorAction&lt;/span> &lt;span style="color:#58a1dd">SilentlyContinue&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Move-Item&lt;/span> &lt;span style="color:#58a1dd">-Path&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$Prefix&lt;/span>&lt;span style="color:#a6be9d">/lib/brotlienc-static.lib&amp;#34;&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$Prefix&lt;/span>&lt;span style="color:#a6be9d">/lib/brotlienc.lib&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-Force&lt;/span> &lt;span style="color:#58a1dd">-ErrorAction&lt;/span> &lt;span style="color:#58a1dd">SilentlyContinue&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">######################################################### Nghttp2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Yellow&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Build nghttp2 &lt;/span>&lt;span style="color:#58a1dd">$NGHTTP2_VERSION&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (!(&lt;span style="color:#58a1dd">DecompressTar&lt;/span> &lt;span style="color:#58a1dd">-URL&lt;/span> &lt;span style="color:#58a1dd">$NGHTTP2_URL&lt;/span> &lt;span style="color:#ff636f">-File&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$NGHTTP2_FILE&lt;/span>&lt;span style="color:#a6be9d">.tar.gz&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-Hash&lt;/span> &lt;span style="color:#58a1dd">$NGHTTP2_HASH&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exit&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$NGDIR&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$WD&lt;/span> &lt;span style="color:#58a1dd">$NGHTTP2_FILE&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$NGBUILD&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$NGDIR&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;build&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$NGPATCH&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$PSScriptRoot&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;patch/nghttp2.patch&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (!(&lt;span style="color:#58a1dd">MkdirAll&lt;/span> &lt;span style="color:#58a1dd">-Dir&lt;/span> &lt;span style="color:#58a1dd">$NGBUILD&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exit&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$Patchexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;-Nbp1 -i &lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$NGPATCH&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$NGDIR&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Apply &lt;/span>&lt;span style="color:#58a1dd">$NGPATCH&lt;/span>&lt;span style="color:#a6be9d"> failed&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ngflags&lt;/span> = &lt;span style="color:#a6be9d">&amp;#34;-GNinja -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=OFF &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;-DENABLE_LIB_ONLY=ON -DENABLE_ASIO_LIB=OFF &lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">-DCMAKE_INSTALL_PREFIX=&lt;/span>&lt;span style="color:#58a1dd">$Prefix&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d"> ..&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$cmakeexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#58a1dd">$ngflags&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$NGBUILD&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;nghttp2: create build.ninja error&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$Ninjaexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;all&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$NGBUILD&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;nghttp2: build error&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$Ninjaexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;install&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$NGBUILD&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;nghttp2: install error&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">############################################################# Libssh2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Yellow&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Build libssh2 &lt;/span>&lt;span style="color:#58a1dd">$LIBSSH2_VERSION&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (!(&lt;span style="color:#58a1dd">DecompressTar&lt;/span> &lt;span style="color:#58a1dd">-URL&lt;/span> &lt;span style="color:#58a1dd">$LIBSSH2_URL&lt;/span> &lt;span style="color:#ff636f">-File&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$LIBSSH2_FILE&lt;/span>&lt;span style="color:#a6be9d">.tar.gz&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-Hash&lt;/span> &lt;span style="color:#58a1dd">$LIBSSH2_HASH&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exit&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$LIBSSH2DIR&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$WD&lt;/span> &lt;span style="color:#58a1dd">$LIBSSH2_FILE&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$LIBSSH2BUILD&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$LIBSSH2DIR&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;build&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$LIBSSH2PATCH&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$PSScriptRoot&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;patch/libssh2.patch&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (!(&lt;span style="color:#58a1dd">MkdirAll&lt;/span> &lt;span style="color:#58a1dd">-Dir&lt;/span> &lt;span style="color:#58a1dd">$LIBSSH2BUILD&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exit&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$Patchexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;-Nbp1 -i &lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$LIBSSH2PATCH&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$LIBSSH2DIR&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Apply &lt;/span>&lt;span style="color:#58a1dd">$LIBSSH2PATCH&lt;/span>&lt;span style="color:#a6be9d"> failed&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$libssh2flags&lt;/span> = &lt;span style="color:#a6be9d">&amp;#34;-GNinja -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=OFF &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;-DBUILD_EXAMPLES=OFF &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;-DBUILD_TESTING=OFF &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;-DENABLE_ZLIB_COMPRESSION=ON &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">-DCMAKE_INSTALL_PREFIX=&lt;/span>&lt;span style="color:#58a1dd">$Prefix&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d"> ..&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$cmakeexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#58a1dd">$libssh2flags&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$LIBSSH2BUILD&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;libssh2: create build.ninja error&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$Ninjaexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;all&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$LIBSSH2BUILD&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;libssh2: build error&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$Ninjaexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;install&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$LIBSSH2BUILD&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;libssh2: install error&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">############################################################## CURL&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Yellow&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Final build curl &lt;/span>&lt;span style="color:#58a1dd">$CURL_VERSION&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (!(&lt;span style="color:#58a1dd">DecompressTar&lt;/span> &lt;span style="color:#58a1dd">-URL&lt;/span> &lt;span style="color:#58a1dd">$CURL_URL&lt;/span> &lt;span style="color:#ff636f">-File&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$CURL_FILE&lt;/span>&lt;span style="color:#a6be9d">.tar.gz&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-Hash&lt;/span> &lt;span style="color:#58a1dd">$CURL_HASH&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exit&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$CURLDIR&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$WD&lt;/span> &lt;span style="color:#58a1dd">$CURL_FILE&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$CURLBD&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$CURLDIR&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;build&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$CURLPATCH&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$PSScriptRoot&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;patch/curl.patch&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$CURLICON&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$PSScriptRoot&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;patch/curl.ico&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (!(&lt;span style="color:#58a1dd">MkdirAll&lt;/span> &lt;span style="color:#58a1dd">-Dir&lt;/span> &lt;span style="color:#58a1dd">$CURLBD&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">exit&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"># copy icon to path&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Copy-Item&lt;/span> &lt;span style="color:#58a1dd">$CURLICON&lt;/span> &lt;span style="color:#58a1dd">-Destination&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$CURLDIR&lt;/span>&lt;span style="color:#a6be9d">/src&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">-Force&lt;/span> &lt;span style="color:#58a1dd">-ErrorAction&lt;/span> &lt;span style="color:#58a1dd">SilentlyContinue&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$Patchexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;-Nbp1 -i &lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#58a1dd">$CURLPATCH&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$CURLDIR&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;Apply &lt;/span>&lt;span style="color:#58a1dd">$CURLPATCH&lt;/span>&lt;span style="color:#a6be9d"> failed&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">#https://github.com/curl/curl/blob/master/CMake/FindBrotli.cmake&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$BROTLIDEC_LIBRARY&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$Prefix&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;lib/brotlidec-static.lib&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$BROTLICOMMON_LIBRARY&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$Prefix&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;lib/brotlicommon-static.lib&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$BROTLI_INCLUDE_DIR&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$Prefix&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;include&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic">## Use codepage 1252&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$curlflags&lt;/span> = &lt;span style="color:#a6be9d">&amp;#34;-GNinja -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=OFF &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;-DUSE_NGHTTP2=ON -DBUILD_TESTING=OFF &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;-DBUILD_CURL_EXE=ON &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;-DCURL_STATIC_CRT=ON &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;-DCMAKE_USE_OPENSSL=ON &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;-DCMAKE_USE_WINSSL=ON &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;-DCMAKE_USE_LIBSSH2=ON &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;-DCURL_BROTLI=ON &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;-DCMAKE_RC_FLAGS=-c1252 &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">-DBROTLI_DIR=&lt;/span>&lt;span style="color:#58a1dd">$Prefix&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d"> &amp;#34;&lt;/span> + `
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6be9d">&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d">-DCMAKE_INSTALL_PREFIX=&lt;/span>&lt;span style="color:#58a1dd">$CURLOUT&lt;/span>&lt;span style="color:#a6be9d">`&amp;#34;&lt;/span>&lt;span style="color:#a6be9d"> ..&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$cmakeexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#58a1dd">$curlflags&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$CURLBD&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;curl: create build.ninja error&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$Ninjaexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;all&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$CURLBD&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;curl: build error&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$ec&lt;/span> = &lt;span style="color:#58a1dd">Exec&lt;/span> &lt;span style="color:#58a1dd">-FilePath&lt;/span> &lt;span style="color:#58a1dd">$Ninjaexe&lt;/span> &lt;span style="color:#58a1dd">-Argv&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;install&amp;#34;&lt;/span> &lt;span style="color:#58a1dd">-WD&lt;/span> &lt;span style="color:#58a1dd">$CURLBD&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (&lt;span style="color:#58a1dd">$ec&lt;/span> &lt;span style="color:#ff636f">-ne&lt;/span> &lt;span style="color:#a6be9d">0&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;curl: install error&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff636f">return&lt;/span> &lt;span style="color:#a6be9d">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#828b96;font-style:italic"># download curl-ca-bundle.crt&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">$CA_BUNDLE&lt;/span> = &lt;span style="color:#58a1dd">Join-Path&lt;/span> &lt;span style="color:#58a1dd">$CURLOUT&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;bin/curl-ca-bundle.crt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff636f">if&lt;/span> (!(&lt;span style="color:#58a1dd">WinGet&lt;/span> &lt;span style="color:#58a1dd">-URL&lt;/span> &lt;span style="color:#58a1dd">$CA_BUNDLE_URL&lt;/span> &lt;span style="color:#58a1dd">-O&lt;/span> &lt;span style="color:#58a1dd">$CA_BUNDLE&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Red&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;download curl-ca-bundle.crt error&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">Write-Host&lt;/span> &lt;span style="color:#58a1dd">-ForegroundColor&lt;/span> &lt;span style="color:#58a1dd">Green&lt;/span> &lt;span style="color:#a6be9d">&amp;#34;curl: build completed&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÊûÑÂª∫ÁöÑ &lt;code>curl -v&lt;/code> ËæìÂá∫Ôºö&lt;/p>
&lt;pre tabindex="0">&lt;code>$ curl -V
curl 7.62.0 (Windows) libcurl/7.62.0 OpenSSL/1.1.1 (WinSSL) zlib/1.2.11 brotli/1.0.7 libssh2/1.8.0 nghttp2/1.34.0
Release-Date: 2018-10-31
Protocols: dict file ftp ftps gopher http https imap imaps ldap pop3 pop3s rtsp scp sftp smtp smtps telnet tftp
Features: AsynchDNS IPv6 Largefile SSPI Kerberos SPNEGO NTLM SSL libz brotli HTTP2 HTTPS-proxy MultiSSL
&lt;/code>&lt;/pre>- https://forcemz.net/posts/2018/2018-11-15-clangbuilder-win-curl/ - Copyright (c) 2009-2024 J23</description></item><item><title>Git LFS ÁöÑÂèçÊÄù</title><link>https://forcemz.net/posts/2018/2018-07-15-git-lfs-rethinking/</link><pubDate>Sun, 15 Jul 2018 10:00:00 +0800</pubDate><guid>https://forcemz.net/posts/2018/2018-07-15-git-lfs-rethinking/</guid><description>Charlie's Rethinking https://forcemz.net/posts/2018/2018-07-15-git-lfs-rethinking/ -&lt;h1 id="ÂâçË®Ä">ÂâçË®Ä&lt;/h1>
&lt;p>Âú®‰∏ÄÂπ¥Â§ö‰ª•ÂâçÔºåÁ¨îËÄÖÊõæÁªèÂÜôËøá‰∏ÄÊñáÔºö &lt;a href="https://forcemz.net/git/2017/04/16/Moses/">„ÄäGit LFS ÊúçÂä°Âô®ÂÆûÁé∞ÊùÇË∞à„Äã&lt;/a>ÔºåÊúÄËøëÁ¨îËÄÖÂºÄÂèëÂü∫‰∫é&lt;strong>ÂØπË±°Â≠òÂÇ®&lt;/strong>ÁöÑ LFS ÊúçÂä°Âô®ÂèàÊúâ‰∫Ü‰∏Ä‰∫õÂøÉÂæóÔºåËøôÈáåÂàÜ‰∫´ÁªôÂ§ßÂÆ∂„ÄÇ&lt;/p>
&lt;h1 id="ÂÖ≥‰∫é-git-lfs">ÂÖ≥‰∫é Git LFS&lt;/h1>
&lt;p>Git LFS Âç≥ Git Large File Storage ÔºàÂ§ßÊñá‰ª∂Â≠òÂÇ®ÔºâÔºåÂç≥Â∞Ü git Â≠òÂÇ®Â∫ì‰∏≠ÁöÑ‰ΩìÁßØËæÉÂ§ßÁöÑÔºå‰∏çÂà©‰∫éÊâìÂåÖÁöÑÔºå‰øÆÊîπ‰∏çÂ§™È¢ëÁπÅÁöÑÊñá‰ª∂ÂçïÁã¨Â≠òÂÇ®Âà∞ÁâπÂÆöÁöÑÊúçÂä°Âô®‰∏äÔºå‰ª•ÂáèÂ∞èÂ≠òÂÇ®Â∫ì‰ΩìÁßØÔºåÂä†Âø´Áî®Êà∑ÁöÑÂÖãÈöÜÊãâÂèñ‰ΩìÈ™å„ÄÇÂÖ∂‰∏≠ÁöÑÂéüÁêÜÂú® &lt;a href="https://forcemz.net/git/2017/04/16/Moses/">„ÄäGit LFS ÊúçÂä°Âô®ÂÆûÁé∞ÊùÇË∞à„Äã&lt;/a> ÈÉΩÊúâËØ¥ÊòéÔºåÂ¶ÇÊûúÈúÄË¶ÅËøõ‰∏ÄÊ≠•ÁöÑ‰∫ÜËß£ËøòÂèØ‰ª•ÂéªÂèÇËÄÉ Git LFS ÊäÄÊúØËßÑËåÉÔºö &lt;a href="https://github.com/git-lfs/git-lfs/blob/master/docs/spec.md"> spec.md&lt;/a>„ÄÇ&lt;/p>
&lt;p>ÊåâÁÖß LFS ËßÑËåÉÔºåÂè™Ë¶ÅÂÆûÁé∞‰∫Ü Git LFS API ‰ª•ÂèäÁõ∏Â∫îÁöÑÊé•Âè£ÔºåLFS ÂÆ¢Êà∑Á´ØÂπ∂‰∏ç‰ºöÂÖ≥ÂøÉÂ§ßÊñá‰ª∂Â≠òÂÇ®Âú®ÈÇ£‰∏™Âú∞Êñπ„ÄÇ&lt;/p>
&lt;h1 id="git-lfs-Â≠òÂÇ®">Git LFS Â≠òÂÇ®&lt;/h1>
&lt;p>LFS ÂØπË±°ÂèØ‰ª•Â≠òÂÇ®Âà∞‰ª£Á†ÅÊâòÁÆ°Âπ≥Âè∞ÁöÑÊúçÂä°Âô®‰∏äÔºå‰πüÂèØ‰ª•Â≠òÂÇ®Âà∞ÂØπË±°Â≠òÂÇ®ÊúçÂä°Âô®‰∏äÔºå‰∏çÂêåÁöÑÂπ≥Âè∞Êúâ‰∏çÂêåÁöÑÈÄâÊã©„ÄÇËøôÈáåÈÄâÊã©Âá†‰∏™ÂàÜÊûê‰∏Ä‰∏ã„ÄÇ&lt;/p>
&lt;h2 id="github-lfs-Â≠òÂÇ®">Github LFS Â≠òÂÇ®&lt;/h2>
&lt;p>Github ÂæàÊó©Â∞±‰∏é Amazon ÊúâÊ∑±Â∫¶ÁöÑÂêà‰ΩúÔºåÊØîÂ¶Ç Github ÁöÑÈôÑ‰ª∂ÔºåRelease ÈÉΩÊòØÂ∞ÜÊñá‰ª∂Â≠òÂÇ®Âà∞ AWS S3 ‰∏äÔºåÁÑ∂ÂêéÊó∂ÂÄôÂÖ±‰∫´ÂØÜÈí•ÁöÑÊñπÂºè‰∏ãËΩΩÔºåGithub Â∞ÜËøô‰∫õÊñá‰ª∂ÊîæÂú® S3 ‰∏äÔºåÂáèËΩª‰∫Ü Github Ëá™Ë∫´ÊúçÂä°Âô®ÁöÑË¥üËΩΩ„ÄÇÊñá‰ª∂Â§á‰ªΩÁ≠âÈÉΩ‰∏çÈúÄË¶Å Github Ëá™Â∑±ÁÆ°ÁêÜÔºåËøôÊó†ÁñëÈôç‰Ωé‰∫ÜÂºÄÂèëÁöÑÈöæÂ∫¶„ÄÇ&lt;/p>
&lt;p>ÊâÄ‰ª•Âú®ÂÆûÁé∞ Git LFS Êó∂ÔºåGithub ‰πüÂ∞ÜÂØπË±°Â≠òÂÇ®Âà∞ AWS S3 ‰∏äÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáÂ¶Ç‰∏ãÂëΩ‰ª§ÂéªË∞ÉËØï Github ÁöÑÂØπË±°Â≠òÂÇ®Ôºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#58a1dd">GIT_TRACE_PACKET&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#a6be9d">1&lt;/span> &lt;span style="color:#58a1dd">GIT_TRACE&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#a6be9d">1&lt;/span> &lt;span style="color:#58a1dd">GIT_CURL_VERBOSE&lt;/span>&lt;span style="color:#ff636f">=&lt;/span>&lt;span style="color:#a6be9d">1&lt;/span> git push
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>‰∏ãÈù¢ÊòØ &lt;strong>upload&lt;/strong> Êï∞ÊçÆÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;objects&amp;#34;&lt;/span>: [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;oid&amp;#34;&lt;/span>: &lt;span style="color:#a6be9d">&amp;#34;42e44ce1337ecd9bab99e78f42df5f73ae1a7e5bda505054e04cd4f36ed7bf21&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;size&amp;#34;&lt;/span>: &lt;span style="color:#a6be9d">2097152&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;actions&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;upload&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;href&amp;#34;&lt;/span>: &lt;span style="color:#a6be9d">&amp;#34;https://github-cloud.s3.amazonaws.com/alambic/media/180597487/42/e4/42e44ce1337ecd9bab99e78f42df5f73ae1a7e5bda505054e04cd4f36ed7bf21?actor_id=6904176&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;header&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;Authorization&amp;#34;&lt;/span>: &lt;span style="color:#a6be9d">&amp;#34;AWS4-HMAC-SHA256 Credential=AKIAIMWPLRQEC4XCWWPA/20180628/us-east-1/s3/aws4_request,SignedHeaders=host;x-amz-content-sha256;x-amz-date,Signature=SignatureString&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;x-amz-content-sha256&amp;#34;&lt;/span>: &lt;span style="color:#a6be9d">&amp;#34;42e44ce1337ecd9bab99e78f42df5f73ae1a7e5bda505054e04cd4f36ed7bf21&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;x-amz-date&amp;#34;&lt;/span>: &lt;span style="color:#a6be9d">&amp;#34;20180628T032201Z&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> },
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;expires_at&amp;#34;&lt;/span>: &lt;span style="color:#a6be9d">&amp;#34;2018-06-28T03:37:01Z&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;expires_in&amp;#34;&lt;/span>: &lt;span style="color:#a6be9d">900&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> },
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;verify&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;href&amp;#34;&lt;/span>: &lt;span style="color:#a6be9d">&amp;#34;https://lfs.github.com/lfstest/lfstest/objects/42e44ce1337ecd9bab99e78f42df5f73ae1a7e5bda505054e04cd4f36ed7bf21/verify&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;header&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;Authorization&amp;#34;&lt;/span>: &lt;span style="color:#a6be9d">&amp;#34;RemoteAuth Token&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;Accept&amp;#34;&lt;/span>: &lt;span style="color:#a6be9d">&amp;#34;application/vnd.git-lfs+json&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Â∞ÜÂØπË±°Â≠òÂÇ®Âà∞ S3 ‰∏äÔºåÂ≠òÂú®‰∏Ä‰∏™Áº∫ÁÇπÔºåÂç≥ÂΩì &lt;strong>upload&lt;/strong> ÊàêÂäüÂêéÔºåGithub ÊòØÊó†Ê≥ïË¢´Âä®ÊÑüÁü•ÁöÑÔºåS3 ÁõÆÂâçÂπ∂Ê≤°Êúâ Update-Callback ËøôÊ†∑ÁöÑÂäüËÉΩÔºåGit LFS Êúâ‰∏Ä‰∏™ &lt;code>verify&lt;/code> Â≠óÊÆµÔºåÂç≥ÈÄöÁü•ÊúçÂä°Âô®ÂéªÈ™åËØÅ &lt;strong>upload&lt;/strong> ÊòØÂê¶ÊàêÂäü„ÄÇ&lt;/p>
&lt;h2 id="bitbucket-lfs-Â≠òÂÇ®">Bitbucket LFS Â≠òÂÇ®&lt;/h2>
&lt;p>Bitbucket ‰πüÊòØ‰∏Ä‰∏™ÊØîËæÉÂ§ßÁöÑ‰ª£Á†ÅÊâòÁÆ°Âπ≥Âè∞ÔºåBitbucket ÁöÑ LFS ÂÅöÁöÑÊØîËæÉÁ≤æËá¥Ôºå‰∏ãÈù¢Êúâ‰∏ÄÁØá Tutorials ËØ¶ÁªÜ‰ªãÁªç‰∫ÜÂ¶Ç‰Ωï‰ΩøÁî® LFSÔºö &lt;a href="https://www.atlassian.com/git/tutorials/git-lfs">Git LFS Tutorials&lt;/a>&lt;/p>
&lt;p>‰∏ãÈù¢ÊòØ Bitbucket LFS ÁöÑÁÆ°ÁêÜÁïåÈù¢„ÄÇ&lt;/p>
&lt;p>&lt;img src="https://wac-cdn.atlassian.com/dam/jcr:46218516-f4aa-490a-9afc-c36ca863c98f/09.png" alt="">&lt;/p>
&lt;p>Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî® Git Ë∞ÉËØïÊ®°ÂºèËé∑Âæó Bitbucket ÁöÑ‰∏Ä‰∫õÁªÜËäÇÔºå‰∏ãÈù¢ÊòØ &lt;strong>download&lt;/strong> ÁöÑÊï∞ÊçÆÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#1d2432;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;objects&amp;#34;&lt;/span>: [{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;oid&amp;#34;&lt;/span>: &lt;span style="color:#a6be9d">&amp;#34;e29b4e1206ef04580f63cedd043834296fd56ad777d1903a0cab8b6178f6a6e0&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;actions&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;download&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;header&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;X-Client-ID&amp;#34;&lt;/span>: &lt;span style="color:#a6be9d">&amp;#34;uuid-token&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;Authorization&amp;#34;&lt;/span>: &lt;span style="color:#a6be9d">&amp;#34;Bearer BearerToken&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> },
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;href&amp;#34;&lt;/span>: &lt;span style="color:#a6be9d">&amp;#34;https://api.media.atlassian.com/file/6d4949ce-2442-424b-9875-983008b943d0/binary&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> },
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#58a1dd">&amp;#34;size&amp;#34;&lt;/span>: &lt;span style="color:#a6be9d">1048576&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>‰ªé JSON Êï∞ÊçÆ‰∏≠ÔºåÊàë‰ª¨ÂèØ‰ª•Áü•ÈÅì Bitbucket Âπ∂Ê≤°ÊúâÁõ¥Êé•Â∞ÜÂØπË±°Â≠òÂÇ®Âà∞‰∫ëÊúçÂä°ÂØπË±°Â≠òÂÇ®‰∏äÔºåÂπ∂‰∏î Bitbucket ‰ΩøÁî®‰∫Ü OAuth ÁöÑÈ™åËØÅÊñπÂºè„ÄÇ&lt;/p>
&lt;p>Bitbucket ËøôÁßçËÆæËÆ°Âú®ÂÆûÁé∞Á≤æËá¥ÁöÑ LFS ÁÆ°ÁêÜÂäüËÉΩÊó∂ÂæàÊúâÂ∏ÆÂä©ÔºåËÄå Github Â∞ÜÂØπË±°Â≠òÂÇ®Âà∞ S3 ‰∏äÔºå ‰∏ÄÊù•Êó†Ê≥ïÁõ¥Êé•Ê£ÄÈ™åÂØπË±°ÁöÑ SHA256ÔºåÂè¶‰∏ÄÊñπÈù¢Êó†Ê≥ïÊ£ÄÊµãÂØπË±°ÁöÑ &lt;code>Mime&lt;/code>Ôºå‰πüÂ∞±Êó†Ê≥ïÂÅöÂà∞ÂÉè Bitbucket ËøôÊ†∑ÁöÑÊïàÊûú„ÄÇBitbucket ÂèØ‰ª•Êü•Áúã LFS ÂØπË±°ÁöÑ Mime(File Type)Ôºå‰∏ä‰º†Êó∂Èó¥ÔºåËøòÂèØ‰ª•ÈÄöËøáÂà†Èô§ÊØîËæÉÊóßÁöÑÂØπË±°Ôºå‰ªéËÄåÈôç‰Ωé LFS Êñá‰ª∂ÁöÑÈÖçÈ¢ùÂç†Áî®„ÄÇ‰ªéËøô‰∫õÊñπÈù¢Êù•Áúã Bitbucket Êõ¥ËÉú‰∏ÄÁ≠π„ÄÇ‰ΩÜ‰πüÊó†Ê≥ï‰∫´ÂèóÂØπË±°Â≠òÂÇ®ÁöÑÂ•ΩÂ§Ñ‰∫Ü„ÄÇ&lt;/p>
&lt;h2 id="moses-to-lfsoss">Moses to LFSOSS&lt;/h2>
&lt;p>Á†Å‰∫ëÂú®ÂéªÂπ¥ÂºÄÂèë LFS ÂäüËÉΩÊó∂‰ΩøÁî®ÁöÑÊòØÂíå Bitbucket ‰∏ÄÊ†∑ÁöÑÊú∫Âà∂ÔºåÊ≤°Êúâ‰ΩøÁî®ÂØπË±°ÂÖ±‰∫´ÔºåÂç≥ÂΩì Sha256 ‰∏ÄËá¥Êó∂ÔºåÂπ∂‰∏çÊîØÊåÅÂÖ±‰∫´ÔºåËøôÊó†ÁñëÂ¢ûÂä†‰∫ÜÊúçÂä°Âô®Â≠òÂÇ®Âç†Áî®„ÄÇ&lt;/p>
&lt;p>ÊúÄËøëÔºåÈöèÁùÄÈúÄÊ±ÇÁöÑÊîπÂèòÔºåÊàë‰ª¨Ë¶ÅÂ∞Ü LFS ÂØπË±°Â≠òÂÇ®Âà∞ OSS ‰∏äÔºå‰∫éÊòØÁ¨îËÄÖ‰πüÂ∞±ÂºÄÂèë‰∫Ü LFSOSS ‰∫ÜÔºåÊîØÊåÅÂ§öÁßçÂêéÁ´ØÔºåÂè™ÈúÄË¶Å‰øÆÊîπÁâπÂÆö URL ÁöÑÁîüÊàêÂç≥ÂèØÊîØÊåÅ„ÄÇËÄå‰∏çÂêåÁöÑ‰∫ëÂ≠òÂÇ®ÁöÑÂØπË±°Â≠òÂÇ®‰πüÊúâ‰∏Ä‰∫õ‰ºòÁº∫ÁÇπ„ÄÇ&lt;/p>
&lt;h1 id="ÂØπË±°Â≠òÂÇ®ÁöÑÂØπÊØî">ÂØπË±°Â≠òÂÇ®ÁöÑÂØπÊØî&lt;/h1>
&lt;p>Á†Å‰∫ëÂú®ÊîØÊåÅ LFS for OSS Êó∂ÔºåËÄÉÂØü‰∫ÜÂá†‰∏™ÂØπË±°Â≠òÂÇ®„ÄÇÂ¶Ç Azure BlobÔºåAmazon S3ÔºåAliyun OSSÔºåTencent COS„ÄÇ&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Object Storage&lt;/th>
&lt;th>Shared Key&lt;/th>
&lt;th>Content Verify&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Azure Blob&lt;/td>
&lt;td>Hmac Sha256&lt;/td>
&lt;td>Content-MD5&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Amazon S3&lt;/td>
&lt;td>Hmac Sha256&lt;/td>
&lt;td>Content-MD5, x-amz-content-sha256&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Aliyun OSS&lt;/td>
&lt;td>Hmac Sha1&lt;/td>
&lt;td>Content-MD5, x-oss-callback&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tencent COS&lt;/td>
&lt;td>Hmac Sha1&lt;/td>
&lt;td>Content-MD5&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>ÈÄâÊã©‰∏çÂêåÁöÑ‰∫ëÊúçÂä°Ôºå‰∏ç‰ΩÜÈúÄË¶ÅËÄÉËôëËøô‰∫õ‰∫ëÊúçÂä°ÁöÑÂäüËÉΩÔºåËøòÈúÄË¶ÅËÄÉËôëÂà∞‰∏Ä‰∫õÁªèÊµéÂõ†Á¥†„ÄÇÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Âú®ÂÆâÂÖ®‰∏äÔºåAWS S3 Êó†ÁñëÊòØÊúÄÂ•ΩÁöÑÔºåAzure Ê¨°‰πãÔºåÂÖ∂‰ªñÁöÑÂÆâÂÖ®ÊÑèËØÜÂπ∂‰∏çËÉΩÁÆóÈùûÂ∏∏Â•ΩÔºåÊØïÁ´ü MD5/SHA1 Êó©Â∑≤ÁªèË¢´Á†¥Ëß£„ÄÇÂ¶ÇÊûúËÄÉËôëÂà∞ÂØπË±°Â≠òÂÇ®ÊúçÂä°Âô®‰∏ä‰ΩøÁî® Hash ‰Ωú‰∏∫ÂØπË±°ÁöÑÁ¥¢ÂºïÔºåSHA1 Êó†ÁñëÊòØ‰∏çÂêàÈÄÇÁöÑÔºåÂ∞ΩÁÆ° Aliyun OSS Âπ∂‰∏çËÉΩÂÆåÁæéÁöÑÂàáÂêà LFSÔºå‰ΩÜÁî±‰∫éÂõΩÂÜÖÁöÑ‰∏Ä‰∫õÁé∞Áä∂ÔºåÁ†Å‰∫ë‰ªçÊóßÂü∫‰∫é Aliyun ÂÅöÂá∫‰∫Ü‰∏Ä‰∫õËÆæËÆ°‰∏äÁöÑËÆ©Ê≠•ÔºåÈÅøÂÖç LFS Âú®‰∏ä‰º†Âà∞ÂØπË±°Â≠òÂÇ®Êó∂Âá∫Áé∞ÂØπË±°Ê±°ÊüìÁöÑÊÉÖÂÜµ„ÄÇ&lt;/p>
&lt;p>ÂõûËøáÂ§¥Êù•ÁúãÔºåGit LFS Êõ¥ÂÉèÊòØÂü∫‰∫é AWS S3 ÂÆöÂà∂ÁöÑ‰∏ÄÊ†∑ÔºåS3 ‰∏ä‰º†ÊîØÊåÅ &lt;code>x-amz-content-sha256&lt;/code> ËÄå Git LFS ÂØπË±°ÁöÑ Hash ÁÆóÊ≥ï‰πüÊòØÈÄâÊã©ÁöÑ &lt;code>SHA256&lt;/code>ÔºåËøòÊèê‰æõ‰∫Ü &lt;code>Verify&lt;/code> ËøôÊ†∑ÁöÑÂäüËÉΩ„ÄÇ&lt;/p>
&lt;h1 id="ÂèçÊÄù">ÂèçÊÄù&lt;/h1>
&lt;p>ÂØπË±°Â≠òÂÇ®ÁöÑÂÆâÂÖ®ÊÑèËØÜË¶ÅË∑ü‰∏äÔºåÈÅøÂÖçÂπ≥Âè∞ÁöÑÂ±ÄÈôêÊÄßËÄåÂØºËá¥ÊúçÂä°ËÆæËÆ°ÁöÑÂ¶•Âçè„ÄÇ&lt;/p>
&lt;p>‰∏çÂêåÁöÑËÆæËÆ°ËÉΩÂ§üÂÆûÁé∞‰∏çÂêåÁöÑÂäüËÉΩÔºåËøôÊõ¥ÈúÄË¶ÅÂèñËàç„ÄÇ&lt;/p>
&lt;h1 id="ÂÖ∂‰ªñ">ÂÖ∂‰ªñ&lt;/h1>
&lt;h2 id="ÂÖ±‰∫´ÂØÜÈí•‰∏ãËΩΩ">ÂÖ±‰∫´ÂØÜÈí•‰∏ãËΩΩ&lt;/h2>
&lt;p>ÂÖ±‰∫´ÂØÜÈí•ÂÆûÈôÖ‰∏äÂ∞±ÊòØÂ∞ÜËØ∑Ê±ÇÁöÑ‰∏Ä‰∫õÊï∞ÊçÆ‰∏éËøáÊúüÊó∂Èó¥Á≠âÂêàÊàê‰∏Ä‰∏™ SlatÔºå‰ΩøÁî®‰∫ëÂπ≥Âè∞ÁîüÊàêÁöÑ AccessKeySecret ‰Ωú‰∏∫ KeyÔºåÂü∫‰∫é Hmac ÁîüÊàêÁöÑÁ≠æÂêçÔºåÂÖ∂‰∏≠‰∏çÂêåÁöÑÂπ≥Âè∞ÊîØÊåÅ‰∏çÂêåÁöÑ Hmac ÂÆâÂÖ®ÁÆóÊ≥ï„ÄÇÂ§ßËá¥ÁöÑÂéüÁêÜÂÆûÈôÖ‰∏äÂèØ‰ª•Áî®Â¶Ç‰∏ã‰º™‰ª£Á†ÅË°®Á§∫Ôºö&lt;/p>
&lt;pre tabindex="0">&lt;code>Slat=PlatfromMethod(ReqData,Expires,....)
Signature=Hmac(Secret,Slat)
&lt;/code>&lt;/pre>- https://forcemz.net/posts/2018/2018-07-15-git-lfs-rethinking/ - Copyright (c) 2009-2024 J23</description></item></channel></rss>