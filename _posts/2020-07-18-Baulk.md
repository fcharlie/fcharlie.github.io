---
layout: post
title:  "Baulk - å¼€å‘ä¸€ä¸ªç®€å•çš„åŒ…ç®¡ç†å·¥å…·å†ç¨‹"
date:   2020-07-18 20:00:00 +0800
published: true
categories: toolset
---

## å‰è¨€

ç›¸å¯¹äºå…¶ä»–æ“ä½œç³»ç»Ÿï¼Œæˆ‘æ›´ä¹ æƒ¯ä½¿ç”¨ Windowsï¼Œä½†ä¸€ç›´ä»¥æ¥ Windows ç¼ºä¹å®˜æ–¹çš„åŒ…ç®¡ç†å™¨ï¼Œè€Œç¬¬ä¸‰æ–¹æ— è®ºæ˜¯ Scoop è¿˜æ˜¯ Chocolatey éƒ½æ— æ³•æ»¡è¶³æˆ‘ç‹¬ç‰¹çš„éœ€æ±‚ï¼Œæˆ‘çš„è¦æ±‚å¾ˆç®€å•ï¼Œæ‰€æœ‰çš„è½¯ä»¶åŒ…éƒ½åº”è¯¥ä½¿ç”¨ç»¿è‰²è§£å‹æ¨¡å¼ï¼Œè¿™åŒ…æ‹¬äº† MSI å®‰è£…åŒ…ï¼Œå¦å¤–å®‰è£…è½¯ä»¶æ—¶ä¸åº”è¯¥ä¿®æ”¹ç³»ç»Ÿå’Œç”¨æˆ·ç¯å¢ƒå˜é‡ã€‚åŒ…ç®¡ç†å·¥å…·åº”è¯¥è¶³å¤Ÿå¿«ï¼Œè¿˜è¦æ”¯æŒåˆ›å»ºå¯åŠ¨å™¨ç­‰ç­‰ã€‚

ä»æ¯•ä¸šå·¥ä½œä»¥æ¥ï¼Œæˆ‘å¼€å‘äº† [clangbuilder](https://github.com/fstudio/clangbuilder)ï¼Œä¸€ä¸ªç®€åŒ–åœ¨ Windows ä¸Šä½¿ç”¨ Visual Studio æ„å»º LLVM/Clang çš„å·¥å…·ï¼ˆå« GUI å·¥å…·ï¼‰ï¼Œä¸ºäº†è§£å†³å®‰è£…æ„å»º LLVM æ—¶æ‰€éœ€å·¥å…·ä¾èµ–çš„é—®é¢˜ï¼Œåæ¥å¤šæ¬¡å¼€å‘ç¼–å†™å„ç§è½¯ä»¶ï¼Œå¤šå¹´çš„å¤±è´¥ç»éªŒä¸è®¤çŸ¥ä¸æ–­ç§¯ç´¯ï¼Œäºæ˜¯åœ¨ä»Šå¹´è¿™ä¸ªç¯çƒåŒæ­¤å‡‰çƒ­çš„å¹´ä»½ï¼Œæˆ‘å¼€å§‹äº†æ–°å‘ â¡ [baulk](https://github.com/baulk/baulk)ï¼Œbaulk èŠ±è´¹äº†æˆ‘åŠå¹´çš„ä¸‹ç­æ—¶é—´ï¼Œç°åœ¨åŸºæœ¬å¯ç”¨ï¼ŒReadMe ä¹Ÿå†™å¥½äº†ï¼Œåº”è¯¥å¯ä»¥ç»™å¤§å®¶åˆ†äº«ä¸€ä¸‹äº†ã€‚

## å®‰è£…å’Œä½¿ç”¨ Baulk

è¿™ä¸ªæ­¥éª¤åªæœ‰å››äº”æ­¥ï¼Œä¸‹è½½ baulk äºŒè¿›åˆ¶åŒ…ï¼Œè§£å‹ baulk äºŒè¿›åˆ¶åŒ…ï¼Œç‚¹å‡» baulkterminalï¼Œæ›´æ–°å…ƒæ•°æ®ï¼Œå®‰è£…ä½ éœ€è¦çš„è½¯ä»¶ï¼ŒğŸ†—ï¼Œä½ å¯ä»¥ä½¿ç”¨ baulk å®‰è£…çš„è½¯ä»¶äº†ã€‚

```powershell
baulk update
# i æ˜¯ install çš„åˆ«å
# baulk i cmake curl 7z ...
baulk install cmake curl 7z
cmake --version
```

baulk å‡çº§å‘½ä»¤å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š

```powershell
baulk update
baulk upgrade
```

ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ«åï¼š

```powershell
# u æ˜¯ç‰¹æ®Šçš„åˆ«åï¼ŒåŒ…å« update å’Œ upgrade ä¸¤ä¸ªæ­¥éª¤
# baulk update and upgrade
baulk u
```

å‡çº§ baulk è‡ªèº«å¯ä»¥ä½¿ç”¨å¸®åŠ©ç¨‹åº `baulk-update`

```powershell
baulk-update
```

å¸è½½è½¯ä»¶ä¹Ÿå¾ˆå®¹æ˜“ï¼š

```powershell
# r æ˜¯ uninstall çš„åˆ«å
baulk uninstall 7z
```

åœ¨å¼€å‘ baulk æ—¶ï¼Œæˆ‘å°±å†³å®šåªæ”¯æŒ Windows 10 1903 æˆ–æ›´æ–°çš„ç‰ˆæœ¬ï¼Œå¥½å¤„æ˜¾è€Œæ˜“è§ï¼Œå¯ä»¥ä½¿ç”¨ Windows Terminalï¼Œåˆ©ç”¨ ANSI è½¬ä¹‰è¾“å‡ºé¢œè‰²ï¼Œä½“éªŒéå¸¸ä¸é”™ï¼š

![](https://s1.ax1x.com/2020/07/19/UWpROA.png)

baulk æä¾›äº† baulk-exec åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ baulk-exec å¯ä»¥åˆå§‹åŒ– baulk ç¯å¢ƒï¼Œè¿˜æä¾›äº† ssh-askpass-baulkï¼Œssh-askpass-baulk ç”¨äº [TunnelSSH](https://github.com/balibuild/tunnelssh) æŸäº› ssh æ— æ³•æ‰“å¼€æ ‡å‡†è¾“å…¥æ—¶è¯·æ±‚è¾“å…¥å¯†ç ï¼Œæˆªå›¾å¦‚ä¸‹ï¼š

![](https://s1.ax1x.com/2020/07/19/UW9O3D.png)

åœ¨ baulk ä¸­æˆ‘å¼•å…¥äº† VirtualEnv æœºåˆ¶ï¼Œè¿™ç§æœºåˆ¶èƒ½å¤Ÿä½¿å¾—ç”¨æˆ·å¹¶è¡Œå®‰è£…å¤šä¸ªè½¯ä»¶ç‰ˆæœ¬ï¼Œåœ¨ baulk-execï¼Œbaulkterminal ä¸­é€šè¿‡æŒ‡å®šå‚æ•°æ”¯æŒå¯åŠ¨ä»»æ„çš„ VENVï¼Œbaulk è¿˜æä¾›äº† baulk-dock èƒ½å¤Ÿé€‰æ‹©æŒ‰ç…§ç‰¹å®šçš„ VENV å¯åŠ¨ç¯å¢ƒï¼š

![](https://s1.ax1x.com/2020/07/19/UW9wcQ.png)

åœ¨ Baulk å…ƒæ•°æ®å­˜å‚¨åº“ [bucket](https://github.com/baulk/bucket)ï¼Œæ”¶å½•äº† OpenJDK8(Java)ï¼ŒOpenJDK9(Java)ï¼ŒGraalVM8(Java)ï¼ŒZulu14(Java)ï¼ŒGo(golang)ï¼ŒDMD(dlang) ç­‰æ”¯æŒ VENV çš„åŒ…ï¼Œå¦‚æœæœ‰äººæƒ³æŠŠ Ruby æ”¶å½•ä¸€ä¸‹ï¼Œåœ¨ Windows ä¸Šå®ç°ç±»ä¼¼ rbenv åŠŸèƒ½ä¹Ÿä¸æ˜¯ä»€ä¹ˆéš¾äº‹ã€‚

## Baulk çš„å†…å¹•

å…¥é—¨è¯´å®Œï¼Œå¯ä»¥ç¨ç¨è®²ä¸€ä¸‹ Baulk çš„å®ç°ç»†èŠ‚ï¼Œbaulk çš„åŒ…ç®¡ç†ç±»ä¼¼äº Scoopï¼Œå³å°†åŒ…çš„å…ƒæ•°æ®å­˜å‚¨åœ¨ Github ä¸Šï¼Œå®˜æ–¹æºä¸º [baulk/bucket](https://github.com/baulk/bucket)ï¼Œbaulk è¿˜å¯ä»¥é€šè¿‡ç¼–å†™ `$BAULK_ROOT/config/baulk.json` æ·»åŠ æ–°çš„æºï¼Œæˆ–è€…åˆ é™¤æŸä¸ªæºï¼Œå¦‚æœä¸åŒçš„æºä¸­å­˜åœ¨ç›¸åŒåå­—çš„åŒ…ï¼Œbaulk è¿˜èƒ½æ ¹æ® bucket çš„æƒé‡å»é€‰æ‹©ä½¿ç”¨å“ªä¸ªæºï¼Œä½†ç›®å‰ä¸ºæ­¢ï¼Œåªæœ‰ [baulk/bucket](https://github.com/baulk/bucket) ä¸€ä¸ªæºã€‚

```json
{
    "bucket": [
        {
            "description": "Baulk default bucket",
            "name": "Baulk",
            "url": "https://github.com/baulk/bucket",
            "weights": 100
        }
    ]
}
```

`baulk update` å‘½ä»¤æ›´æ–° bucketï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº† Github Atom RSS æœºåˆ¶ï¼Œä»¥å®˜æ–¹æºä¸ºä¾‹ï¼Œé€šè¿‡ HTTP è¯·æ±‚é¡¹ç›®çš„ `commits/master.atom` è·å¾—å½“å‰çš„æœ€æ–°çš„ commitIDï¼Œå¦‚æœæœ¬åœ°ä¸å­˜åœ¨æˆ–è€…ä¸å…¶ä¸åŒï¼Œåˆ™è¯´æ˜ bucket æœ‰æ›´æ–°ï¼Œäºæ˜¯ baulk ä¸‹è½½å¯¹åº”çš„ bucket çš„å‹ç¼©åŒ…ï¼Œè§£å‹å®Œæˆå…ƒæ•°æ®çš„æ›´æ–°ã€‚ç„¶åæ£€æµ‹æœ¬åœ°å·²å®‰è£…çš„åŒ…æ˜¯å¦å­˜åœ¨æ›´æ–°ç‰ˆæœ¬ï¼Œå­˜åœ¨å°±è¾“å‡ºæç¤ºã€‚

>GET https://github.com/baulk/bucket/commits/master.atom

å½“äººä»¬è¿è¡Œ `baulk upgrade` æ—¶ï¼Œå°±ä¼šçœŸæ­£çš„å‡çº§å·²å®‰è£…çš„åŒ…ï¼Œæ›´æ–°å…ƒæ•°æ®å’Œå‡çº§åˆ†å¼€è¿™ç§æœºåˆ¶ç±»ä¼¼äº `apt-get`ï¼Œä¸ºäº†ç®€åŒ–æ“ä½œï¼Œbaulk æä¾›äº† `baulk u` åˆ«åå°† update/upgrade åˆå¹¶åœ¨ä¸€èµ·ç®€åŒ–å‡çº§ã€‚